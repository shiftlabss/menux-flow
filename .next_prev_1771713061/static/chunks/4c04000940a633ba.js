(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98662,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(42308),i=e.i(78894),n=e.i(72520),l=e.i(31245),r=e.i(59208),o=e.i(89853),d=e.i(43531),c=e.i(95468),u=e.i(73375),m=e.i(63059),x=e.i(64659),h=e.i(55900),p=e.i(61653),p=p,g=e.i(75254);let b=(0,g.default)("circle-dashed",[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]]);var f=e.i(74886),v=e.i(87130),j=e.i(70956),w=e.i(31278),N=e.i(7233),y=e.i(55436),z=e.i(83086);let C=(0,g.default)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var S=e.i(73884),k=e.i(22016),A=e.i(18566),M=e.i(88653),T=e.i(46932),D=e.i(74080);function E(e,t,s){let a,i=s.initialDeps??[],n=!0;function l(){var l,r,o;let d,c;s.key&&(null==(l=s.debug)?void 0:l.call(s))&&(d=Date.now());let u=e();if(!(u.length!==i.length||u.some((e,t)=>i[t]!==e)))return a;if(i=u,s.key&&(null==(r=s.debug)?void 0:r.call(s))&&(c=Date.now()),a=t(...u),s.key&&(null==(o=s.debug)?void 0:o.call(s))){let e=Math.round((Date.now()-d)*100)/100,t=Math.round((Date.now()-c)*100)/100,a=t/16,i=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c⏱ ${i(t,5)} /${i(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*a,120))}deg 100% 31%);`,null==s?void 0:s.key)}return(null==s?void 0:s.onChange)&&!(n&&s.skipInitialOnChange)&&s.onChange(a),n=!1,a}return l.updateDeps=e=>{i=e},l}function O(e,t){if(void 0!==e)return e;throw Error(`Unexpected undefined${t?`: ${t}`:""}`)}e.i(47167);let $=e=>{let{offsetWidth:t,offsetHeight:s}=e;return{width:t,height:s}},I=e=>e,P=e=>{let t=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),a=[];for(let e=t;e<=s;e++)a.push(e);return a},F=(e,t)=>{let s=e.scrollElement;if(!s)return;let a=e.targetWindow;if(!a)return;let i=e=>{let{width:s,height:a}=e;t({width:Math.round(s),height:Math.round(a)})};if(i($(s)),!a.ResizeObserver)return()=>{};let n=new a.ResizeObserver(t=>{let a=()=>{let e=t[0];if(null==e?void 0:e.borderBoxSize){let t=e.borderBoxSize[0];if(t)return void i({width:t.inlineSize,height:t.blockSize})}i($(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return n.observe(s,{box:"border-box"}),()=>{n.unobserve(s)}},R={passive:!0},B="u"<typeof window||"onscrollend"in window,L=(e,t)=>{var s,a;let i,n=e.scrollElement;if(!n)return;let l=e.targetWindow;if(!l)return;let r=0,o=e.options.useScrollendEvent&&B?()=>void 0:(s=()=>{t(r,!1)},a=e.options.isScrollingResetDelay,function(...e){l.clearTimeout(i),i=l.setTimeout(()=>s.apply(this,e),a)}),d=s=>()=>{let{horizontal:a,isRtl:i}=e.options;r=a?n.scrollLeft*(i&&-1||1):n.scrollTop,o(),t(r,s)},c=d(!0),u=d(!1);n.addEventListener("scroll",c,R);let m=e.options.useScrollendEvent&&B;return m&&n.addEventListener("scrollend",u,R),()=>{n.removeEventListener("scroll",c),m&&n.removeEventListener("scrollend",u)}},_=(e,t,s)=>{if(null==t?void 0:t.borderBoxSize){let e=t.borderBoxSize[0];if(e)return Math.round(e[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},V=(e,{adjustments:t=0,behavior:s},a)=>{var i,n;null==(n=null==(i=a.scrollElement)?void 0:i.scrollTo)||n.call(i,{[a.options.horizontal?"left":"top"]:e+t,behavior:s})};class H{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null,t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver(e=>{e.forEach(e=>{let t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()})}):null);return{disconnect:()=>{var s;null==(s=t())||s.disconnect(),e=null},observe:e=>{var s;return null==(s=t())?void 0:s.observe(e,{box:"border-box"})},unobserve:e=>{var s;return null==(s=t())?void 0:s.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,s])=>{void 0===s&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:I,rangeExtractor:P,onChange:()=>{},measureElement:_,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,s;null==(s=(t=this.options).onChange)||s.call(t,this,e)},this.maybeNotify=E(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;let t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{let s=new Map,a=new Map;for(let i=t-1;i>=0;i--){let t=e[i];if(s.has(t.lane))continue;let n=a.get(t.lane);if(null==n||t.end>n.end?a.set(t.lane,t):t.end<n.end&&s.set(t.lane,!0),s.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end)[0]:void 0},this.getMeasurementOptions=E(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(e,t,s,a,i,n)=>(void 0!==this.prevLanes&&this.prevLanes!==n&&(this.lanesChangedFlag=!0),this.prevLanes=n,this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:s,getItemKey:a,enabled:i,lanes:n}),{key:!1}),this.getMeasurements=E(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:s,getItemKey:a,enabled:i,lanes:n},l)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>e)for(let t of this.laneAssignments.keys())t>=e&&this.laneAssignments.delete(t);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),0!==this.measurementsCache.length||this.lanesSettling||(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}));let r=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===e&&(this.lanesSettling=!1);let o=this.measurementsCache.slice(0,r),d=Array(n).fill(void 0);for(let e=0;e<r;e++){let t=o[e];t&&(d[t.lane]=e)}for(let i=r;i<e;i++){let e,n,r=a(i),c=this.laneAssignments.get(i);if(void 0!==c&&this.options.lanes>1){let a=d[e=c],i=void 0!==a?o[a]:void 0;n=i?i.end+this.options.gap:t+s}else{let a=1===this.options.lanes?o[i-1]:this.getFurthestMeasurement(o,i);n=a?a.end+this.options.gap:t+s,e=a?a.lane:i%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(i,e)}let u=l.get(r),m="number"==typeof u?u:this.options.estimateSize(i),x=n+m;o[i]={index:i,start:n,size:m,end:x,key:r,lane:e},d[e]=i}return this.measurementsCache=o,o},{key:!1,debug:()=>this.options.debug}),this.calculateRange=E(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,t,s,a)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:s,lanes:a}){let i=e.length-1;if(e.length<=a)return{startIndex:0,endIndex:i};let n=W(0,i,t=>e[t].start,s),l=n;if(1===a)for(;l<i&&e[l].end<s+t;)l++;else if(a>1){let r=Array(a).fill(0);for(;l<i&&r.some(e=>e<s+t);){let t=e[l];r[t.lane]=t.end,l++}let o=Array(a).fill(s+t);for(;n>=0&&o.some(e=>e>=s);){let t=e[n];o[t.lane]=t.start,n--}n=Math.max(0,n-n%a),l=Math.min(i,l+(a-1-l%a))}return{startIndex:n,endIndex:l}}({measurements:e,outerSize:t,scrollOffset:s,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=E(()=>{let e=null,t=null,s=this.calculateRange();return s&&(e=s.startIndex,t=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,s,a,i)=>null===a||null===i?[]:e({startIndex:a,endIndex:i,overscan:t,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{let t=this.options.indexAttribute,s=e.getAttribute(t);return s?parseInt(s,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{let s=this.indexFromElement(e),a=this.measurementsCache[s];if(!a)return;let i=a.key,n=this.elementsCache.get(i);n!==e&&(n&&this.observer.unobserve(n),this.observer.observe(e),this.elementsCache.set(i,e)),e.isConnected&&this.resizeItem(s,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{let s=this.measurementsCache[e];if(!s)return;let a=t-(this.itemSizeCache.get(s.key)??s.size);0!==a&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(s,a,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))})},this.getVirtualItems=E(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,t)=>{let s=[];for(let a=0,i=e.length;a<i;a++){let i=t[e[a]];s.push(i)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{let t=this.getMeasurements();if(0!==t.length)return O(t[W(0,t.length-1,e=>O(t[e]).start,e)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{let e=this.scrollElement.document.documentElement;return this.options.horizontal?e.scrollWidth-this.scrollElement.innerWidth:e.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(e,t,s=0)=>{if(!this.scrollElement)return 0;let a=this.getSize(),i=this.getScrollOffset();return"auto"===t&&(t=e>=i+a?"end":"start"),"center"===t?e+=(s-a)/2:"end"===t&&(e-=a),Math.max(Math.min(this.getMaxScrollOffset(),e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));let s=this.measurementsCache[e];if(!s)return;let a=this.getSize(),i=this.getScrollOffset();if("auto"===t)if(s.end>=i+a-this.options.scrollPaddingEnd)t="end";else{if(!(s.start<=i+this.options.scrollPaddingStart))return[i,t];t="start"}if("end"===t&&e===this.options.count-1)return[this.getMaxScrollOffset(),t];let n="end"===t?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(n,t,s.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:t="start",behavior:s}={})=>{"smooth"===s&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:s})},this.scrollToIndex=(e,{align:t="auto",behavior:s}={})=>{"smooth"===s&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1)),this.currentScrollToIndex=e;let a=0,i=t=>{if(!this.targetWindow)return;let a=this.getOffsetForIndex(e,t);if(!a)return void console.warn("Failed to get offset for index:",e);let[i,l]=a;this._scrollToOffset(i,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{let t=()=>{if(this.currentScrollToIndex!==e)return;let t=this.getScrollOffset(),s=this.getOffsetForIndex(e,l);s?1.01>Math.abs(s[0]-t)||n(l):console.warn("Failed to get offset for index:",e)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(t):t()})},n=t=>{this.targetWindow&&this.currentScrollToIndex===e&&(++a<10?this.targetWindow.requestAnimationFrame(()=>i(t)):console.warn(`Failed to scroll to index ${e} after 10 attempts.`))};i(t)},this.scrollBy=(e,{behavior:t}={})=>{"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;let t,s=this.getMeasurements();if(0===s.length)t=this.options.paddingStart;else if(1===this.options.lanes)t=(null==(e=s[s.length-1])?void 0:e.end)??0;else{let e=Array(this.options.lanes).fill(null),a=s.length-1;for(;a>=0&&e.some(e=>null===e);){let t=s[a];null===e[t.lane]&&(e[t.lane]=t.end),a--}t=Math.max(...e.filter(e=>null!==e))}return Math.max(t-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:s})=>{this.options.scrollToFn(e,{behavior:s,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(e)}}let W=(e,t,s,a)=>{for(;e<=t;){let i=(e+t)/2|0,n=s(i);if(n<a)e=i+1;else{if(!(n>a))return i;t=i-1}}return e>0?e-1:0},q="u">typeof document?s.useLayoutEffect:s.useEffect;var G=e.i(32171),U=e.i(31288),Y=e.i(82943),K=e.i(43432),X=e.i(63488),Q=e.i(87316),J=e.i(56272),Z=e.i(67240),ee=e.i(94983),et=e.i(46897),es=e.i(3116),ea=e.i(63209);let ei={call:K.Phone,email:X.Mail,meeting:Q.Calendar,visit:et.MapPin,task:J.CheckSquare,"follow-up":Z.RotateCcw,whatsapp:ee.MessageCircle},en={call:"Ligação",email:"E-mail",meeting:"Reunião",visit:"Visita",task:"Tarefa","follow-up":"Follow-up",whatsapp:"WhatsApp"},el={call:{bg:"bg-blue-100",text:"text-blue-600"},email:{bg:"bg-amber-100",text:"text-amber-600"},meeting:{bg:"bg-purple-100",text:"text-purple-600"},visit:{bg:"bg-indigo-100",text:"text-indigo-600"},task:{bg:"bg-emerald-100",text:"text-emerald-600"},"follow-up":{bg:"bg-orange-100",text:"text-orange-600"},whatsapp:{bg:"bg-green-100",text:"text-green-600"}},er=["call","email","meeting","visit","task","follow-up","whatsapp"];es.Clock,c.CheckCircle2,ea.AlertCircle,S.XCircle;var eo=e.i(19455),ed=e.i(76639);function ec({open:e,onOpenChange:a,title:i,description:n,content:l}){let[r,o]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),m=async()=>{try{await navigator.clipboard.writeText(l),o(!0),u(null),setTimeout(()=>o(!1),2e3)}catch{u("Não foi possível copiar agora. Tente novamente.")}};return(0,t.jsx)(ed.Dialog,{open:e,onOpenChange:e=>{e&&(o(!1),u(null)),a(e)},children:(0,t.jsxs)(ed.DialogContent,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(ed.DialogHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-violet-100 text-violet-600",children:(0,t.jsx)(z.Sparkles,{className:"h-4 w-4"})}),(0,t.jsx)(ed.DialogTitle,{children:i})]}),n&&(0,t.jsx)(ed.DialogDescription,{children:n})]}),(0,t.jsxs)("div",{className:"relative mt-2 rounded-md border border-zinc-200 bg-zinc-50 p-4",children:[(0,t.jsx)("pre",{className:"whitespace-pre-wrap font-sans text-sm text-zinc-700",children:l}),(0,t.jsx)(eo.Button,{size:"icon",variant:"ghost",className:"absolute right-2 top-2 h-8 w-8 text-zinc-500 hover:text-zinc-900",onClick:m,children:r?(0,t.jsx)(d.Check,{className:"h-4 w-4 text-emerald-500"}):(0,t.jsx)(f.Copy,{className:"h-4 w-4"})})]}),c?(0,t.jsx)("p",{className:"mt-2 text-xs text-red-600",children:c}):null,(0,t.jsxs)(ed.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,t.jsx)(ed.DialogClose,{asChild:!0,children:(0,t.jsx)(eo.Button,{variant:"outline",children:"Fechar"})}),(0,t.jsxs)(eo.Button,{onClick:m,className:"gap-2",children:[r?(0,t.jsx)(d.Check,{className:"h-4 w-4"}):(0,t.jsx)(f.Copy,{className:"h-4 w-4"}),r?"Copiado":"Copiar conteúdo"]})]})]})})}var eu=e.i(34288);function em(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function ex(e){let[t,s,a]=e.split("-").map(Number);return new Date(t,s-1,a)}function eh(e){let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${a}`}function ep(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)}function eg(e){return new Date(e.getFullYear(),e.getMonth(),1)}function eb(e){return ex(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}function ef(e){return ex(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})}function ev(e,t){return(0,eu.isActivityOverdueAt)(e,t)}function ej(e,t){return(0,eu.isActivitySlaRiskAt)(e,t)}function ew(e,t){let s=em(ex(e.dueDate)),a=em(t),i=Math.floor((s.getTime()-a.getTime())/864e5);if(ev(e,t)){if(0===i)return e.dueTime?`Atrasada desde ${e.dueTime}`:"Atrasada hoje";var n=Math.max(1,Math.abs(i));if(n<=0)return"";if(1===n)return"1 dia de atraso";if(n<7)return`${n} dias de atraso`;if(n<30){let e=Math.floor(n/7);return 1===e?"1 semana de atraso":`${e} semanas de atraso`}let t=Math.floor(n/30);return 1===t?"1 mês de atraso":`${t} meses de atraso`}return 0===i?e.dueTime?`Hoje \xb7 ${e.dueTime}`:"Hoje":1===i?"Amanhã":i<=7?`Em ${i} dias`:ef(e.dueDate)}function eN(e,t){if("completed"===e.status)return{label:"Concluída",className:"bg-status-success-light text-status-success border-status-success/20"};if("cancelled"===e.status)return{label:"Cancelada",className:"bg-zinc-100 text-zinc-500 border-zinc-200"};if(ev(e,t))return{label:"Atrasada",className:"bg-status-danger-light text-status-danger border-status-danger/20"};let s=em(ex(e.dueDate)),a=em(t);return s.getTime()===a.getTime()?{label:"Hoje",className:"bg-status-warning-light text-status-warning border-status-warning/25"}:{label:"Pendente",className:"bg-status-info-light text-status-info border-status-info/20"}}function ey(e,t){let s=e.clientName||e.opportunityTitle||"o cliente",a=ev(e,t);return{message:"email"===e.type?`Ol\xe1! Revendo nossa agenda, gostaria de avan\xe7ar o pr\xf3ximo passo com ${s}. Podemos alinhar ainda hoje?`:"meeting"===e.type?`Perfeito, vamos alinhar os pontos cr\xedticos de ${s} e sair com decis\xe3o clara no final da reuni\xe3o.`:`Oi! Passando para mantermos ${s} em ritmo ${a?"urgente":"prioritária"}. Voc\xea consegue me confirmar o melhor hor\xe1rio para avan\xe7armos?`,nextStep:"task"===e.type?"Feche esta tarefa e transforme em contato ativo com data definida.":"Registrar compromisso com data/horário e responsável antes de encerrar.",risk:a?`Se ignorar, ${s} pode perder prioridade e aumentar risco de churn.`:`Se ignorar, ${s} perde cad\xeancia e pode esfriar o ciclo de decis\xe3o.`}}var ez=e.i(99676),eC=e.i(87486),eS=e.i(57428),ek=e.i(93479),eA=e.i(10204),eM=e.i(37822),eT=e.i(68499),eD=e.i(72436),eE=e.i(2747),eO=e.i(34682),e$=e.i(75157);let eI=[{value:"pending",label:"Pendente"},{value:"overdue",label:"Atrasada"},{value:"completed",label:"Concluída"},{value:"cancelled",label:"Cancelada"}],eP=new Set(["pending","overdue"]),eF=[{value:"all",label:"Todos"},{value:"breached",label:"Estourado"},{value:"risk",label:"Em risco"}],eR=eI.map(e=>e.value),eB=new Set(er),eL=/^\d{4}-\d{2}-\d{2}$/;function e_(e,t){if(e.size!==t.size)return!1;for(let s of e)if(!t.has(s))return!1;return!0}function eV(e,t){return"completed"===e.status||"cancelled"===e.status?e.status:ev(e,t)?"overdue":"pending"}function eH(e,t,s){if(!e)return new Set(s);let a=new Set(t),i=e.split(",").map(e=>e.trim()).filter(e=>a.has(e));return new Set(0===i.length?s:i)}let eW=[{id:"bulk-messages",label:"Gerar mensagens para atrasadas"},{id:"sla-priority",label:"Priorizar SLAs estourados"},{id:"week-summary",label:"Resumir a semana"},{id:"risk-client",label:"Identificar cliente em risco"},{id:"call-script",label:"Gerar scripts de ligação"}];function eq(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsxs)("div",{className:"flex h-[calc(100dvh-2rem)] w-full flex-col gap-4",children:[(0,t.jsxs)("div",{className:"shrink-0 rounded-[20px] border border-zinc-200/80 bg-zinc-50/85 px-5 py-4",children:[(0,t.jsx)(eE.Skeleton,{className:"h-8 w-40"}),(0,t.jsx)(eE.Skeleton,{className:"mt-2 h-4 w-56"})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,t.jsx)(eE.Skeleton,{className:"h-[200px] rounded-[18px]"}),(0,t.jsx)(eE.Skeleton,{className:"h-[400px] rounded-[18px]"})]})]}),children:(0,t.jsx)(eG,{})})}function eG(){let{openDrawer:e}=(0,G.useUIStore)(),{user:u,permissions:m}=(0,Y.useAuthStore)(),x=(0,A.useRouter)(),h=(0,A.usePathname)(),g=(0,A.useSearchParams)(),{activities:b,completeActivity:f,cancelActivity:k,postponeActivity:D}=(0,U.useActivityStore)(),[E,O]=(0,s.useState)("list"),[$,I]=(0,s.useState)(!1),[P,F]=(0,s.useState)(null),[R,B]=(0,s.useState)(()=>new Set(er)),[L,_]=(0,s.useState)(()=>new Set(eP)),[V,H]=(0,s.useState)(""),[W,q]=(0,s.useState)(""),[K,X]=(0,s.useState)("all"),[Q,J]=(0,s.useState)(""),[Z,ee]=(0,s.useState)({intelligence:!1,overdue:!1,today:!1,next7:!1,future:!0}),[et,es]=(0,s.useState)({intelligence:null,overdue:null,today:null,next7:null,future:null}),[ea,el]=(0,s.useState)(0),[ed,eu]=(0,s.useState)(!1),[ew,eN]=(0,s.useState)({}),[ez,eE]=(0,s.useState)(null),[eq,eG]=(0,s.useState)(null),[e5,e3]=(0,s.useState)(()=>new Set),[e4,e8]=(0,s.useState)(!1),[e6,e9]=(0,s.useState)(!1),[e7,te]=(0,s.useState)(!1),[tt,ts]=(0,s.useState)(""),[ta,ti]=(0,s.useState)({}),[tn,tl]=(0,s.useState)(null),[tr,to]=(0,s.useState)(null),[td,tc]=(0,s.useState)(null),[tu,tm]=(0,s.useState)(null),[tx,th]=(0,s.useState)(null),[tp,tg]=(0,s.useState)(null),[tb,tf]=(0,s.useState)(!1),[tv,tj]=(0,s.useState)(!1),[tw,tN]=(0,s.useState)(!1),[ty,tz]=(0,s.useState)({title:"",content:""}),[tC,tS]=(0,s.useState)(null),tk=(0,s.useRef)([]),tA=(0,s.useRef)(null),tM=(0,s.useRef)(null),tT=(0,a.useNow)(6e4),tD=(0,s.useDeferredValue)(Q),[tE,tO]=(0,s.useState)(()=>eg(tT)),[t$,tI]=(0,s.useState)(()=>eh(em(tT))),tP=!!(m?.canViewAllUnits||u?.role==="master"),tF=!!m?.canCreateActivity,tR=!!m?.canEditActivity,tB=!!m?.canCancelActivity,tL=!!m?.canExportData,{scopedOwnerId:t_,scopeMode:tV}=(0,s.useMemo)(()=>{let e=u?.id??null;return tP?P&&b.some(e=>e.responsibleId===P)?{scopedOwnerId:P,scopeMode:"override"}:e?{scopedOwnerId:e,scopeMode:"self"}:{scopedOwnerId:null,scopeMode:"team"}:{scopedOwnerId:e,scopeMode:"self"}},[tP,P,b,u?.id]),tH=tP&&"team"===tV,tW=(0,s.useMemo)(()=>tP&&null===t_?b:t_?b.filter(e=>e.responsibleId===t_):[],[tP,t_,b]),tq=0===tW.length,tG=(0,s.useCallback)((e,t)=>{let s=window.setTimeout(()=>{e(),tk.current=tk.current.filter(e=>e!==s)},t);tk.current.push(s)},[]),tU=(0,s.useCallback)(e=>{tl(e),tG(()=>tl(null),2600)},[tG]),tY=(0,s.useCallback)(e=>{to(e),tG(()=>to(null),2600)},[tG]),tK=(0,s.useCallback)(e=>{tc(e),tG(()=>tc(null),2600)},[tG]);(0,s.useEffect)(()=>{if(!tp)return;let e=window.setTimeout(()=>tg(null),6e3);return()=>window.clearTimeout(e)},[tp]),(0,s.useEffect)(()=>()=>{tk.current.forEach(e=>window.clearTimeout(e))},[]),(0,s.useEffect)(()=>{let e=()=>tj(window.scrollY>8);return e(),window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]);let tX=(0,s.useCallback)(e=>{let t=e.trim().toLowerCase();if(O("list"),B(new Set(er)),H(""),q(""),"overdue"===t){_(new Set(["pending","overdue"])),X("breached");return}if("risk"===t){_(new Set(["pending"])),X("risk");return}if("pace"===t){_(new Set(["pending","overdue"])),X("all");return}if("achieved"===t){_(new Set(["completed"])),X("all");return}if("pending"===t||"completed"===t||"cancelled"===t){_(new Set([t])),X("all");return}_(new Set(eP)),X("all")},[]),tQ=(0,s.useCallback)(e=>{O(e.viewMode),J(e.query),B(e.types),_(e.statuses),X(e.sla),H(e.start),q(e.end)},[]),tJ=(0,s.useCallback)(()=>{O("list"),J(""),B(new Set(er)),_(new Set(eP)),H(""),q(""),X("all")},[]);(0,s.useEffect)(()=>{let e=g.toString();if(tA.current===e)return;tA.current=e;let t=g.get("source"),s=g.get("status"),a=g.get("focus"),i=g.get("goal"),n=g.get("activityId")??g.get("id"),l=g.get("execute"),r=g.get("view"),o=g.get("q"),d=g.get("types"),c=g.get("statuses"),m=g.get("sla"),x=g.get("start"),h=g.get("end");if(null!==r||null!==o||null!==d||null!==c||null!==m||null!==x||null!==h?tQ({viewMode:"agenda"===r?"agenda":"list",query:o??"",types:eH(d,er,new Set(er)),statuses:eH(c,eR,new Set(eP)),sla:"breached"===m||"risk"===m?m:"all",start:x&&eL.test(x)?x:"",end:h&&eL.test(h)?h:""}):s?(tX(s),J("")):tJ(),"goals"===t&&i?tg({status:"success",text:`Filtro aplicado para acompanhar a meta "${i}".`}):"goals"===t&&"metas"===a&&tg({status:"success",text:"Painel ajustado para apoiar execução de metas."}),n){let e=b.find(e=>e.id===n);if(!e){F(null),tg({status:"error",text:"Atividade do link não encontrada na sua carteira atual."});return}if(!(tP||e.responsibleId===u?.id)){F(null),tg({status:"error",text:"Essa atividade não pertence à sua carteira."});return}F(tP?e.responsibleId:null),eE(e.id),eG(e.id),tG(()=>{let t=document.getElementById(`activity-card-${e.id}`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})},80),l&&tU({tone:"info",message:`Canal de ${!l?"atividade":"call"===l?"ligação":"email"===l?"e-mail":"meeting"===l?"reunião":"whatsapp"===l?"WhatsApp":"atividade"} pronto para execu\xe7\xe3o desta atividade.`})}else F(null)},[tQ,tP,tX,tU,tJ,tG,g,b,u?.id]),(0,s.useEffect)(()=>{if(null===tA.current)return;let e=new URLSearchParams(g.toString()),t=Q.trim(),s=er.filter(e=>R.has(e)),a=eR.filter(e=>L.has(e));"list"!==E?e.set("view",E):e.delete("view"),t?e.set("q",t):e.delete("q"),s.length===er.length?e.delete("types"):e.set("types",s.join(",")),a.length===eR.length?e.delete("statuses"):e.set("statuses",a.join(",")),"all"===K?e.delete("sla"):e.set("sla",K),V?e.set("start",V):e.delete("start"),W?e.set("end",W):e.delete("end"),e.delete("status"),e.delete("id"),e.delete("activityId"),e.delete("execute"),e.delete("source"),e.delete("focus"),e.delete("goal");let i=e.toString();i!==g.toString()&&(tA.current=i,x.replace(i?`${h}?${i}`:h,{scroll:!1}))},[W,V,K,L,R,h,x,g,Q,E]);let tZ=(0,s.useMemo)(()=>{let e=tD.trim().toLowerCase();return tW.filter(t=>{let s=eV(t,tT);return!!R.has(t.type)&&!!L.has(s)&&(!V||!(t.dueDate<V))&&(!W||!(t.dueDate>W))&&(!e||!![t.title,t.description||"",t.clientName||"",t.opportunityTitle||"",t.responsibleName,en[t.type]].join(" ").toLowerCase().includes(e))&&("breached"!==K||!!ev(t,tT))&&("risk"!==K||!!ej(t,tT))})},[tW,R,L,V,W,K,tD,tT]),t0=(0,s.useMemo)(()=>tZ.filter(e=>"completed"!==e.status&&"cancelled"!==e.status),[tZ]),t1=(0,s.useMemo)(()=>new Set(t0.map(e=>e.id)),[t0]),t2=(0,s.useMemo)(()=>Array.from(e5).filter(e=>t1.has(e)),[e5,t1]),t5=t0.length>0&&t2.length===t0.length,t3=(0,s.useCallback)(e=>{e3(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[]),t4=(0,s.useCallback)(e=>{e?e3(new Set(t0.map(e=>e.id))):e3(new Set)},[t0]),t8=(0,s.useCallback)(()=>{e3(new Set)},[]),t6=(0,s.useMemo)(()=>{let e=new Map;for(let t of t0){let s=t.dueDate,a=e.get(s)||[];a.push(t),e.set(s,a)}for(let[t,s]of e.entries())s.sort((e,t)=>(e.dueTime||"99:99").localeCompare(t.dueTime||"99:99")),e.set(t,s);return e},[t0]),t9=(0,s.useMemo)(()=>{let e,t,s,a,i=eg(tE),n=new Date(tE.getFullYear(),tE.getMonth()+1,0),l=(t=(e=new Date(i.getFullYear(),i.getMonth(),i.getDate())).getDay(),ep(e,-t)),r=(a=(s=new Date(n.getFullYear(),n.getMonth(),n.getDate())).getDay(),ep(s,6-a)),o=[],d=l;for(;d.getTime()<=r.getTime();)o.push(d),d=ep(d,1);return o},[tE]),t7=(0,s.useMemo)(()=>t6.get(t$)||[],[t6,t$]),se=(0,s.useMemo)(()=>t0.filter(e=>ev(e,tT)).sort((e,t)=>ex(e.dueDate).getTime()-ex(t.dueDate).getTime()),[t0,tT]),st=(0,s.useMemo)(()=>{let e=em(tT).getTime();return t0.filter(t=>!ev(t,tT)&&em(ex(t.dueDate)).getTime()===e).sort((e,t)=>(e.dueTime||"99:99").localeCompare(t.dueTime||"99:99"))},[t0,tT]),ss=(0,s.useMemo)(()=>{let e=em(tT),t=ep(e,7);return t0.filter(s=>{if(ev(s,tT))return!1;let a=em(ex(s.dueDate));return a>e&&a<=t}).sort((e,t)=>{let s=ex(e.dueDate).getTime()-ex(t.dueDate).getTime();return 0!==s?s:(e.dueTime||"99:99").localeCompare(t.dueTime||"99:99")})},[t0,tT]),sa=(0,s.useMemo)(()=>{let e=ep(em(tT),7);return t0.filter(t=>!ev(t,tT)&&em(ex(t.dueDate))>e).sort((e,t)=>{let s=ex(e.dueDate).getTime()-ex(t.dueDate).getTime();return 0!==s?s:(e.dueTime||"99:99").localeCompare(t.dueTime||"99:99")})},[t0,tT]),si=(0,s.useMemo)(()=>tZ.filter(e=>"completed"===e.status).sort((e,t)=>{let s=e.completedAt||e.dueDate;return(t.completedAt||t.dueDate).localeCompare(s)}),[tZ]),sn=se.length,sl=t0.filter(e=>ej(e,tT)).length,sr=(0,s.useMemo)(()=>{let e,t,s,a;return`${e=new Intl.DateTimeFormat("pt-BR",{weekday:"short",day:"2-digit",month:"short"}).formatToParts(tT),t=(e.find(e=>"weekday"===e.type)?.value??"").replaceAll(".","").trim(),s=e.find(e=>"day"===e.type)?.value??"",a=(e.find(e=>"month"===e.type)?.value??"").replaceAll(".","").trim(),`${t.charAt(0).toUpperCase()+t.slice(1)}, ${s} ${a}`} \xb7 Ol\xe1, ${u?.name?.trim().split(" ")[0]??"Vendedor"}`},[tT,u?.name]),so=(0,s.useMemo)(()=>{let e={call:0,email:0,meeting:0,visit:0,task:0,"follow-up":0,whatsapp:0};for(let t of tZ)e[t.type]+=1;return e},[tZ]),sd=(0,s.useMemo)(()=>Object.entries(so).sort((e,t)=>t[1]-e[1])[0],[so]),sc=(0,s.useMemo)(()=>{let e=em(tT),t=ep(e,-7),s=tZ.filter(s=>{let a=em(ex(s.dueDate));return a>=t&&a<=e});return 0===s.length?0:Math.round(s.filter(e=>"completed"===e.status).length/s.length*100)},[tZ,tT]),su=(0,s.useMemo)(()=>{let e,t;return e=[...t0].sort((e,t)=>{let s=ex(e.dueDate).getTime(),a=ex(t.dueDate).getTime(),i=1e3*!!ev(e,tT)+120*("follow-up"===e.type)+90*("call"===e.type)+40*("pending"===e.status),n=1e3*!!ev(t,tT)+120*("follow-up"===t.type)+90*("call"===t.type)+40*("pending"===t.status);return i!==n?n-i:s!==a?s-a:e.title.localeCompare(t.title)}),t=ea%2,e.slice(t,t+3).map((e,t)=>{let s=`${e.clientName||e.opportunityTitle||"Sem contexto"} \xb7 ${en[e.type]}`,a=ev(e,tT);return{id:`intelligence-rec-${e.id}`,activityId:e.id,title:0===t?"Faça isso agora":"Ação recomendada",context:s,why:a?"Prazo estourado com alto impacto no ritmo do pipeline.":"Atividade com potencial de destravar avanço ainda hoje.",primaryActionLabel:"Ir para atividade",actionKind:"call"===e.type||"whatsapp"===e.type?"call":"meeting"===e.type?"prepare":"message"}})},[t0,tT,ea]),sm=(0,s.useMemo)(()=>tW.find(e=>e.id===ez)||null,[tW,ez]),sx=(0,s.useMemo)(()=>tW.find(e=>e.id===tC)||null,[tW,tC]),sh=!e_(R,eB)||!e_(L,eP)||""!==V||""!==W||"all"!==K||""!==Q.trim(),sp=(0,s.useMemo)(()=>{let e=[];return R.size<er.length&&er.forEach(t=>{R.has(t)&&e.push({id:`type-${t}`,label:`Tipo: ${en[t]}`,onRemove:()=>{B(e=>{let s=new Set(e);return(s.delete(t),0===s.size)?new Set(er):s})}})}),e_(L,eP)||eI.forEach(t=>{L.has(t.value)&&e.push({id:`status-${t.value}`,label:`Status: ${t.label}`,onRemove:()=>{_(e=>{let s=new Set(e);return(s.delete(t.value),0===s.size)?new Set(eP):s})}})}),V&&e.push({id:"date-start",label:`De: ${eb(V)}`,onRemove:()=>H("")}),W&&e.push({id:"date-end",label:`At\xe9: ${eb(W)}`,onRemove:()=>q("")}),"all"!==K&&e.push({id:"sla",label:`SLA: ${"breached"===K?"Estourado":"Em risco"}`,onRemove:()=>X("all")}),Q.trim()&&e.push({id:"search",label:`Busca: "${Q.trim()}"`,onRemove:()=>J("")}),e},[R,L,V,W,K,Q]),sg=(0,s.useCallback)(()=>{B(new Set(er)),_(new Set(eP)),H(""),q(""),X("all"),J(""),e3(new Set)},[]),sb=(0,s.useCallback)(e=>{ee(t=>({...t,[e]:!t[e]}))},[]),sf=(0,s.useCallback)(()=>{eu(!0),es(e=>({...e,intelligence:null})),tG(()=>{if(0===t0.length){eu(!1),es(e=>({...e,intelligence:"Não há atividades ativas para montar um plano agora."})),tU({tone:"error",message:"Não há atividades ativas para montar um plano agora."});return}el(e=>e+1),tg({status:"success",text:"Plano do dia gerado com foco em impacto e risco."}),tU({tone:"success",message:"Plano do dia gerado com foco em impacto e risco."}),eu(!1)},260)},[t0.length,tU,tG]),sv=(0,s.useCallback)(()=>{O("list"),_(new Set(["pending","overdue"])),X("breached"),H(""),q("")},[]),sj=(0,s.useCallback)(()=>{let e=eh(em(tT));O("list"),_(new Set(["pending","overdue"])),H(e),q(e),X("all")},[tT]),sw=(0,s.useCallback)(()=>{O("list"),_(new Set(["pending"])),X("risk"),H(""),q("")},[]),sN=(0,s.useCallback)(e=>{tR?(eN(t=>({...t,[e.id]:"loading"})),tG(()=>{let t=tW.find(t=>t.id===e.activityId);if(!t){eN(t=>({...t,[e.id]:"error"})),tG(()=>{eN(t=>({...t,[e.id]:"idle"}))},1200);return}eE(t.id),eG(t.id),eN(t=>({...t,[e.id]:"success"})),tg({status:"success",text:"message"===e.actionKind?`Mensagem preparada para ${t.clientName||t.opportunityTitle||"atividade"}.`:"call"===e.actionKind?`Roteiro de contato acionado para ${t.clientName||t.opportunityTitle||"atividade"}.`:`Checklist de prepara\xe7\xe3o gerado para ${t.clientName||t.opportunityTitle||"atividade"}.`}),tG(()=>{eN(t=>({...t,[e.id]:"idle"}))},1200)},220)):tg({status:"error",text:"Você não tem permissão para executar ações nesta carteira."})},[tW,tR,tG]),sy=(0,s.useCallback)(e=>{eE(e),eG(e);let t=document.getElementById(`activity-card-${e}`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})},[]),sz=(0,s.useCallback)(e=>{ti(t=>{let s={...t};return delete s[e],s})},[]),sC=(0,s.useCallback)((e,t)=>{ti(s=>({...s,[e]:{state:"error",message:t}})),tG(()=>{sz(e)},2200)},[sz,tG]),sS=(0,s.useCallback)(e=>tW.some(t=>t.id===e),[tW]),sk=(0,s.useCallback)((e,t)=>{tR?sS(e)?(ti(t=>({...t,[e]:{state:"loading-complete"}})),tG(()=>{try{f(e,t),ti(t=>({...t,[e]:{state:"complete-success",message:"Concluída"}}))}catch{ti(t=>({...t,[e]:{state:"error",message:"Falha ao concluir atividade."}}))}},180),tG(()=>{sz(e)},1500)):sC(e,"A atividade não pertence à sua carteira."):sC(e,"Você não tem permissão para concluir atividades.")},[tR,sS,sz,f,sC,tG]),sA=(0,s.useCallback)(e=>{tB?sS(e)?(ti(t=>({...t,[e]:{state:"loading-cancel"}})),tG(()=>{try{k(e),ti(t=>({...t,[e]:{state:"complete-success",message:"Cancelada"}}))}catch{ti(t=>({...t,[e]:{state:"error",message:"Falha ao cancelar atividade."}}))}},180),tG(()=>{sz(e)},1500)):sC(e,"A atividade não pertence à sua carteira."):sC(e,"Você não tem permissão para cancelar atividades.")},[tB,sS,k,sz,sC,tG]),sM=(0,s.useCallback)((e,t)=>{tR?sS(e)?eL.test(t)?t<eh(em(tT))?sC(e,"Escolha uma data a partir de hoje."):(ti(t=>({...t,[e]:{state:"loading-postpone"}})),tG(()=>{try{D(e,t),tm(e),ti(s=>({...s,[e]:{state:"postpone-success",message:`Reagendada para ${eb(t)}`}}))}catch{ti(t=>({...t,[e]:{state:"error",message:"Falha ao reagendar atividade."}}))}},180),tG(()=>{tm(t=>t===e?null:t),sz(e)},1500)):sC(e,"Data de reagendamento inválida."):sC(e,"A atividade não pertence à sua carteira."):sC(e,"Você não tem permissão para reagendar atividades.")},[tR,sS,sz,sC,tT,D,tG]),sT=(0,s.useCallback)(()=>{if(0!==t2.length){if(!tR){tg({status:"error",text:"Você não tem permissão para concluir atividades em lote."}),tY({tone:"error",message:"Você não tem permissão para concluir atividades em lote."});return}e9(!0)}},[tR,tY,t2.length]),sD=(0,s.useCallback)(()=>{if(0===t2.length)return void e9(!1);let e=0,t=0;t2.forEach(s=>{if(!sS(s)){t+=1;return}sk(s),e+=1}),t8(),e9(!1);let s=t>0?`${e} conclu\xedda(s), ${t} sem permiss\xe3o/escopo.`:`${e} atividade(s) conclu\xedda(s) em lote.`;tg({status:t>0?"error":"success",text:s}),tY({tone:t>0?"error":"success",message:s})},[sS,t8,sk,tY,t2]),sE=(0,s.useCallback)(()=>{if(0!==t2.length){if(!tB){tg({status:"error",text:"Você não tem permissão para cancelar atividades em lote."}),tY({tone:"error",message:"Você não tem permissão para cancelar atividades em lote."});return}e8(!0)}},[tB,tY,t2.length]),sO=(0,s.useCallback)(()=>{if(0===t2.length)return void e8(!1);let e=0,t=0;t2.forEach(s=>{if(!sS(s)){t+=1;return}sA(s),e+=1}),t8(),e8(!1);let s=t>0?`${e} cancelada(s), ${t} sem permiss\xe3o/escopo.`:`${e} atividade(s) cancelada(s) em lote.`;tg({status:t>0?"error":"success",text:s}),tY({tone:t>0?"error":"success",message:s})},[sS,t8,sA,tY,t2]),s$=(0,s.useCallback)(e=>{if(0===t2.length)return;if(!tR){tg({status:"error",text:"Você não tem permissão para reagendar atividades em lote."}),tY({tone:"error",message:"Você não tem permissão para reagendar atividades em lote."});return}if(!eL.test(e))return void tY({tone:"error",message:"Data de reagendamento inválida para lote."});if(e<eh(em(tT)))return void tY({tone:"error",message:"Escolha uma data de lote a partir de hoje."});let t=0,s=0;t2.forEach(a=>{if(!sS(a)){s+=1;return}sM(a,e),t+=1}),t8(),te(!1),ts("");let a=s>0?`${t} reagendada(s), ${s} sem permiss\xe3o/escopo.`:`${t} atividade(s) reagendada(s) para ${eb(e)}.`;tg({status:s>0?"error":"success",text:a}),tY({tone:s>0?"error":"success",message:a})},[tR,sS,t8,sM,tT,tY,t2]),sI=(0,s.useCallback)(e=>{let t=ey(e,tT),s=e.clientName||e.opportunityTitle||"atividade selecionada";eE(e.id),tz({title:`Menux Intelligence \xb7 ${s}`,content:`Mensagem pronta:
${t.message}

Pr\xf3ximo passo:
${t.nextStep}

Risco se ignorar:
${t.risk}`}),tN(!0),tg({status:"success",text:`Sugest\xf5es da Menux Intelligence abertas para ${s}.`}),ti(t=>({...t,[e.id]:{state:"info",message:"Insights gerados para esta atividade."}})),tG(()=>sz(e.id),1800)},[sz,tT,tG]),sP=(0,s.useCallback)(e=>{let t=ey(e,tT),s=e.clientName||e.opportunityTitle||"atividade selecionada";eE(e.id),tz({title:`Follow-up \xb7 ${s}`,content:t.message}),tN(!0),tg({status:"success",text:`Follow-up pronto para ${s}.`}),ti(t=>({...t,[e.id]:{state:"info",message:"Follow-up gerado e pronto para envio."}})),tG(()=>sz(e.id),1800)},[sz,tT,tG]),sF=(0,s.useCallback)(e=>{th(e),tG(()=>{if("sla-priority"===e)X("breached"),O("list"),tg({status:"success",text:"Filtro de SLA 'Estourado' aplicado."});else if("risk-client"===e){th(null),x.push("/clients?filter=risk");return}else if("week-summary"===e)tz({title:"Resumo da Semana",content:`### Minha semana em atividades
- Total ativas: ${t0.length}
- Atrasadas: ${sn}
- SLAs em risco: ${sl}

**Pr\xf3ximo passo recomendado:** focar primeiro nas atividades atrasadas de maior impacto comercial.`}),tN(!0),tg({status:"success",text:"Resumo semanal gerado com foco na sua carteira."});else if("bulk-messages"===e){if(0===sn){tg({status:"error",text:"Sem atividades atrasadas para gerar mensagens no momento."}),th(null);return}tz({title:"Mensagens para Atrasadas",content:`Ol\xe1 [Nome], vi que n\xe3o conseguimos nos falar na data combinada. Como est\xe1 sua agenda para retomarmos amanh\xe3?

Oi [Nome], tudo bem? Gostaria de reagendar nosso papo sobre [Assunto]. Teria disponibilidade esta tarde?`}),tN(!0),tg({status:"success",text:"Sugestões de mensagem geradas."})}else"call-script"===e?(tz({title:"Script de Ligação",content:`**Abertura:** "Ol\xe1 [Nome], aqui \xe9 ${u?.name||"Consultor"} da [Empresa]. Tudo bem?"

**Gancho:** "Estou ligando pois vi que ficou pendente nosso alinhamento sobre [Assunto] e n\xe3o gostaria de deixar passar..."

**Fechamento:** "Conseguimos 5 minutinhos agora ou prefere agendar?"`}),tN(!0),tg({status:"success",text:"Script de ligação gerado."})):tg(function(e,t){switch(e){case"bulk-messages":if(0===t.overdueCount)return{status:"error",text:"Sem atividades atrasadas para gerar mensagens no momento."};return{status:"success",text:`Geradas sugest\xf5es para ${t.overdueCount} atividades atrasadas.`};case"sla-priority":if(0===t.overdueCount)return{status:"error",text:"Não há SLAs estourados agora. Tudo sob controle."};return{status:"success",text:`${t.overdueCount} SLAs cr\xedticos priorizados para execu\xe7\xe3o imediata.`};case"week-summary":return{status:"success",text:`Resumo gerado com base em ${t.totalActive} atividades ativas da semana.`};case"risk-client":if(0===t.overdueCount&&0===t.riskCount)return{status:"error",text:"Nenhum cliente em risco crítico detectado neste momento."};return{status:"success",text:"Cliente com maior risco identificado e destacado para ação imediata."};case"call-script":return{status:"success",text:t.selectedActivity?`Script de liga\xe7\xe3o gerado para ${t.selectedActivity.clientName||t.selectedActivity.opportunityTitle||"atividade selecionada"}.`:"Script de ligação gerado para o bloco de maior urgência."};default:return{status:"error",text:"Não foi possível executar este comando agora."}}}(e,{overdueCount:sn,riskCount:sl,totalActive:t0.length,selectedActivity:sm||void 0}));th(null)},500)},[t0.length,sn,sl,sm,tG,x,u?.name]),sR=(0,s.useCallback)(()=>{if(!tL){tg({status:"error",text:"Você não tem permissão para exportar dados desta tela."}),tK({tone:"error",message:"Você não tem permissão para exportar dados desta tela."});return}tf(!0),tK({tone:"info",message:"Exportando lista de atividades..."});try{let e=tZ.map(e=>{let t=eV(e,tT);return[e.title,en[e.type],"pending"===t?"Pendente":"completed"===t?"Concluída":"overdue"===t?"Atrasada":"Cancelada",e.clientName||"",e.opportunityTitle||"",eb(e.dueDate),e.dueTime||"",e.responsibleName]}),t=["Título;Tipo;Status;Cliente;Oportunidade;Data;Horário;Responsável",...e.map(e=>e.map(e=>`"${e.replace(/"/g,'""')}"`).join(";"))].join("\n"),s=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download=`atividades-${eh(tT)}.csv`,a.click(),URL.revokeObjectURL(a.href),tg({status:"success",text:`${tZ.length} atividades exportadas em CSV.`}),tK({tone:"success",message:`${tZ.length} atividade(s) exportada(s) em CSV.`})}catch{tg({status:"error",text:"Não foi possível exportar a lista agora."}),tK({tone:"error",message:"Não foi possível exportar a lista agora."})}finally{tf(!1)}},[tL,tZ,tT,tK]),sB=(0,s.useCallback)((s,a)=>{if(et[a])return(0,t.jsx)(eQ,{message:et[a]||"Erro ao carregar seção.",onRetry:()=>es(e=>({...e,[a]:null}))});if(0===s.length)return"overdue"===a?(0,t.jsx)("div",{className:"rounded-[16px] border border-emerald-200 bg-emerald-50/70 px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.CheckCircle2,{className:"h-4 w-4 text-emerald-600"}),(0,t.jsx)("p",{className:"font-body text-sm font-medium text-emerald-700",children:"Tudo em dia. Nenhuma atividade atrasada."})]})}):"today"===a?(0,t.jsxs)("div",{className:"rounded-[16px] border border-zinc-200 bg-zinc-50 px-4 py-4",children:[(0,t.jsx)("p",{className:"font-body text-sm text-zinc-600",children:"Nenhuma atividade para hoje."}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,t.jsxs)(eo.Button,{size:"sm",className:"rounded-full bg-zinc-900 text-white hover:bg-zinc-800",onClick:()=>e("new-activity"),disabled:!tF,children:[(0,t.jsx)(N.Plus,{className:"h-3.5 w-3.5"}),"Criar atividade"]}),(0,t.jsxs)(eo.Button,{size:"sm",variant:"outline",className:"rounded-full",onClick:sf,children:[(0,t.jsx)(C,{className:"h-3.5 w-3.5"}),"Pedir recomendação"]})]})]}):(0,t.jsx)("div",{className:"rounded-[16px] border border-zinc-200 bg-zinc-50 px-4 py-4",children:(0,t.jsx)("p",{className:"font-body text-sm text-zinc-600",children:"Nenhuma atividade nesse bloco por enquanto."})});if("agenda"===E){let e=s.reduce((e,t)=>(e[t.dueDate]||(e[t.dueDate]=[]),e[t.dueDate].push(t),e),{}),a=Object.keys(e).sort((e,t)=>ex(e).getTime()-ex(t).getTime());return(0,t.jsx)("div",{className:"space-y-3",children:a.map(s=>(0,t.jsxs)("div",{className:"rounded-[16px] border border-zinc-200 bg-white/80 p-3",children:[(0,t.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,t.jsx)("p",{className:"font-heading text-sm font-semibold text-zinc-900",children:ef(s)}),(0,t.jsx)(eC.Badge,{className:"rounded-full bg-zinc-100 text-zinc-600",children:e[s].length})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(M.AnimatePresence,{initial:!1,children:e[s].map(e=>(0,t.jsx)(T.motion.div,{layout:!0,initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.16,ease:"easeOut"},children:(0,t.jsx)(eZ,{activity:e,now:tT,isExpanded:eq===e.id,isHighlighted:tu===e.id,selected:e5.has(e.id),canExecuteActions:tR,canCancelActions:tB,feedback:ta[e.id],onToggleExpand:()=>{eG(t=>t===e.id?null:e.id),eE(e.id)},onToggleSelect:()=>t3(e.id),onComplete:t=>sk(e.id,t),onCancel:()=>sA(e.id),onPostpone:t=>sM(e.id,t),onSelectIntelligence:()=>eE(e.id),onGenerateFollowup:()=>sP(e)})},e.id))})})]},s))})}return(0,t.jsx)(eU,{items:s,estimateSize:214,renderItem:e=>(0,t.jsx)(eZ,{activity:e,now:tT,isExpanded:eq===e.id,isHighlighted:tu===e.id,selected:e5.has(e.id),canExecuteActions:tR,canCancelActions:tB,feedback:ta[e.id],onToggleExpand:()=>{eG(t=>t===e.id?null:e.id),eE(e.id)},onToggleSelect:()=>t3(e.id),onComplete:t=>sk(e.id,t),onCancel:()=>sA(e.id),onPostpone:t=>sM(e.id,t),onSelectIntelligence:()=>eE(e.id),onGenerateFollowup:()=>sP(e)})})},[et,!1,E,tT,eq,tu,e5,ta,tF,tR,tB,e,sf,t3,sk,sA,sM,sP]);return(0,t.jsxs)(T.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18,ease:[.22,.61,.36,1]},className:"space-y-7 lg:space-y-8",children:[(0,t.jsx)(eO.ModuleCommandHeader,{title:"Atividades",description:"Execução do dia, com prioridades e próximos passos.",className:(0,e$.cn)("border-zinc-200/80 bg-zinc-50/88",tv&&"shadow-[0_14px_24px_-18px_rgba(15,23,42,0.32)]"),meta:sr,chips:[{id:"overdue",label:`${sn} atrasadas`,icon:(0,t.jsx)(i.AlertTriangle,{className:"h-3.5 w-3.5"}),tone:sn>0?"danger":"neutral",onClick:sv},{id:"today",label:`${st.length} para hoje`,icon:(0,t.jsx)(r.CalendarClock,{className:"h-3.5 w-3.5"}),tone:st.length>0?"info":"neutral",onClick:sj},sh?{id:"active-filters",label:`${sp.length} filtros ativos`,icon:(0,t.jsx)(v.Filter,{className:"h-3.5 w-3.5"}),tone:"warning",onClick:()=>I(!0)}:{id:"sla-risk",label:`${sl} SLAs em risco`,icon:(0,t.jsx)(p.default,{className:"h-3.5 w-3.5"}),tone:sl>0?"warning":"success",onClick:sw}],actions:(0,t.jsx)("div",{className:"flex w-full flex-col gap-3",children:(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2.5 min-[1180px]:flex-row min-[1180px]:items-center min-[1180px]:justify-between",children:[(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2.5 sm:flex-row sm:items-center min-[1180px]:w-auto min-[1180px]:flex-1",children:[(0,t.jsxs)("div",{className:"relative w-full sm:flex-1 min-[1180px]:max-w-[380px]",children:[(0,t.jsx)(y.Search,{className:"pointer-events-none absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-zinc-400"}),(0,t.jsx)(ek.Input,{value:Q,onChange:e=>J(e.target.value),placeholder:"Buscar atividade, cliente ou oportunidade...",className:"h-10 rounded-full border-zinc-200 bg-white/90 pl-8 text-sm"})]}),(0,t.jsx)("div",{className:"flex w-full items-center gap-1 rounded-full border border-zinc-200/90 bg-white/90 p-1 shadow-sm sm:w-auto",children:[{key:"list",label:"Lista",icon:j.List},{key:"agenda",label:"Agenda",icon:o.CalendarDays}].map(e=>{let s=E===e.key;return(0,t.jsxs)("button",{onClick:()=>O(e.key),className:(0,e$.cn)("inline-flex h-8 flex-1 items-center justify-center gap-1.5 rounded-full px-3 text-xs font-medium transition-all duration-120 ease-out active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-300 focus-visible:ring-offset-2 focus-visible:ring-offset-zinc-50 sm:flex-none",s?"bg-brand text-white shadow-[0_6px_14px_-8px_rgba(29,78,216,0.7)]":"text-zinc-600 hover:bg-zinc-100/90"),children:[(0,t.jsx)(e.icon,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{children:e.label})]},e.key)})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end min-[1180px]:shrink-0",children:[(0,t.jsxs)(eM.Popover,{open:$,onOpenChange:I,children:[(0,t.jsx)(eM.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(eo.Button,{variant:"outline",className:"rounded-full border-zinc-200 bg-white/90 transition-all duration-120 ease-out hover:bg-zinc-100/90 active:scale-[0.98] focus-visible:ring-zinc-300",children:[(0,t.jsx)(v.Filter,{className:"h-4 w-4"}),"Filtros"]})}),(0,t.jsx)(eM.PopoverContent,{align:"end",side:"bottom",sideOffset:8,className:"w-[min(96vw,430px)] rounded-[18px] border-zinc-200 bg-white p-4 shadow-xl",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"mb-2 font-heading text-sm font-semibold text-zinc-900",children:"Tipo"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:er.map(e=>{let s=ei[e],a=R.has(e);return(0,t.jsxs)("label",{className:(0,e$.cn)("flex cursor-pointer items-center gap-2 rounded-[12px] border px-2.5 py-2 text-xs",a?"border-brand/35 bg-brand/8 text-brand":"border-zinc-200 bg-white text-zinc-600"),children:[(0,t.jsx)(eS.Checkbox,{checked:a,onCheckedChange:t=>{B(s=>{let a=new Set(s);return!0===t?a.add(e):a.delete(e),0===a.size?new Set(er):a})}}),(0,t.jsx)(s,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{children:en[e]})]},e)})})]}),(0,t.jsx)(eD.Separator,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"mb-2 font-heading text-sm font-semibold text-zinc-900",children:"Status"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:eI.map(e=>(0,t.jsxs)("label",{className:"flex cursor-pointer items-center gap-2 rounded-[12px] border border-zinc-200 px-2.5 py-2 text-xs text-zinc-700",children:[(0,t.jsx)(eS.Checkbox,{checked:L.has(e.value),onCheckedChange:t=>{_(s=>{let a=new Set(s);return!0===t?a.add(e.value):a.delete(e.value),0===a.size?new Set(eP):a})}}),(0,t.jsx)("span",{children:e.label})]},e.value))})]}),(0,t.jsx)(eD.Separator,{}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(eA.Label,{className:"mb-1 block text-xs text-zinc-500",children:"SLA"}),(0,t.jsx)("div",{className:"flex rounded-[12px] border border-zinc-200 p-1",children:eF.map(e=>(0,t.jsx)("button",{onClick:()=>X(e.value),className:(0,e$.cn)("flex-1 rounded-[9px] px-2 py-1.5 text-xs transition-colors",K===e.value?"bg-zinc-900 text-white":"text-zinc-500 hover:bg-zinc-100"),children:e.label},e.value))})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(eA.Label,{className:"mb-1 block text-xs text-zinc-500",children:"Período de"}),(0,t.jsx)(ek.Input,{type:"date",value:V,onChange:e=>H(e.target.value),className:"h-9 rounded-[12px]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(eA.Label,{className:"mb-1 block text-xs text-zinc-500",children:"até"}),(0,t.jsx)(ek.Input,{type:"date",value:W,onChange:e=>q(e.target.value),className:"h-9 rounded-[12px]"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(eo.Button,{variant:"outline",className:"flex-1 rounded-full",onClick:sg,children:"Limpar tudo"}),(0,t.jsx)(eo.Button,{className:"flex-1 rounded-full bg-zinc-900 text-white hover:bg-zinc-800",onClick:()=>I(!1),children:"Fechar"})]})]})})]}),sh&&(0,t.jsx)(eo.Button,{variant:"ghost",className:"rounded-full px-3 text-xs text-zinc-500 transition-all duration-120 ease-out hover:bg-zinc-100/90 active:scale-[0.98] focus-visible:ring-zinc-300",onClick:sg,children:"Limpar tudo"}),(0,t.jsxs)(eo.Button,{variant:"outline",className:"h-9 rounded-full border-zinc-200 bg-white/90 px-4 transition-all duration-120 ease-out hover:bg-zinc-100/90 active:scale-[0.98] focus-visible:ring-zinc-300",onClick:sf,disabled:ed,children:[ed?(0,t.jsx)(w.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(C,{className:"h-4 w-4"}),"Pedir plano do dia"]}),(0,t.jsxs)(eo.Button,{className:"h-9 rounded-full bg-zinc-900 px-4 text-white transition-all duration-120 ease-out hover:bg-zinc-800 active:scale-[0.98] focus-visible:ring-zinc-300",onClick:()=>e("new-activity"),disabled:!tF,children:[(0,t.jsx)(N.Plus,{className:"h-4 w-4"}),"Nova atividade"]})]})]})})}),tn?(0,t.jsx)(eJ,{tone:tn.tone,message:tn.message}):null,sh&&sp.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:sp.map(e=>(0,t.jsxs)("button",{type:"button",onClick:e.onRemove,className:"inline-flex items-center gap-1 rounded-full border border-zinc-200 bg-white px-3 py-1.5 text-xs text-zinc-600 transition-colors hover:bg-zinc-50",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)("span",{className:"text-zinc-400",children:"×"})]},e.id))}),tH&&tW.length>0&&(0,t.jsx)("div",{className:"rounded-[14px] border border-blue-200 bg-blue-50/80 px-4 py-3",children:(0,t.jsxs)("p",{className:"font-body text-sm text-blue-800",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Visão de equipe:"})," você está navegando atividades agregadas da equipe."]})}),tq&&!tH&&(0,t.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-white px-4 py-4",children:[(0,t.jsx)("p",{className:"font-body text-sm text-zinc-700",children:"Você não possui atividades atribuídas na sua carteira no momento."}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,t.jsxs)(eo.Button,{size:"sm",className:"h-8 rounded-full bg-zinc-900 px-3 text-xs text-white hover:bg-zinc-800",onClick:()=>e("new-activity"),disabled:!tF,children:[(0,t.jsx)(N.Plus,{className:"h-3.5 w-3.5"}),"Criar atividade"]}),(0,t.jsxs)(eo.Button,{size:"sm",variant:"outline",className:"h-8 rounded-full px-3 text-xs",onClick:sf,disabled:ed,children:[(0,t.jsx)(C,{className:"h-3.5 w-3.5"}),"Pedir plano"]})]})]}),"list"===E&&t0.length>0&&(0,t.jsxs)("div",{className:"space-y-3 rounded-[18px] border border-zinc-200 bg-white px-4 py-3.5 md:px-5",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-600",children:[(0,t.jsx)(eS.Checkbox,{checked:t5,onCheckedChange:e=>t4(!!e)}),(0,t.jsxs)("span",{children:["Selecionar todas visíveis (",t0.length,")"]})]}),t2.length>0?(0,t.jsxs)("span",{className:"text-xs font-medium text-zinc-600",children:[t2.length," selecionada(s)"]}):(0,t.jsx)("span",{className:"text-xs text-zinc-500",children:"Selecione atividades para usar ações em lote."})]}),t2.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsxs)(eo.Button,{size:"sm",className:"h-8 rounded-full bg-zinc-900 px-3 text-xs text-white hover:bg-zinc-800",onClick:sT,disabled:!tR,children:[(0,t.jsx)(c.CheckCircle2,{className:"h-3.5 w-3.5"}),"Concluir em lote"]}),(0,t.jsxs)(eM.Popover,{open:e7,onOpenChange:te,children:[(0,t.jsx)(eM.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(eo.Button,{size:"sm",variant:"outline",className:"h-8 rounded-full px-3 text-xs",disabled:!tR,children:[(0,t.jsx)(r.CalendarClock,{className:"h-3.5 w-3.5"}),"Adiar"]})}),(0,t.jsxs)(eM.PopoverContent,{align:"start",sideOffset:8,className:"w-[250px] rounded-[16px] border-zinc-200 p-3",children:[(0,t.jsx)("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Reagendar em lote"}),(0,t.jsx)("div",{className:"space-y-2",children:[1,3,7].map(e=>(0,t.jsxs)("button",{onClick:()=>s$(eh(ep(em(tT),e))),className:"flex w-full items-center justify-between rounded-[10px] border border-zinc-200 px-3 py-2 text-sm text-zinc-700 transition-colors hover:bg-zinc-50",children:[(0,t.jsxs)("span",{children:["+",e," ",1===e?"dia":"dias"]}),(0,t.jsx)(n.ArrowRight,{className:"h-3.5 w-3.5 text-zinc-400"})]},e))}),(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,t.jsx)(eA.Label,{className:"text-xs text-zinc-500",children:"Escolher data"}),(0,t.jsx)(ek.Input,{type:"date",value:tt,min:eh(em(tT)),onChange:e=>ts(e.target.value),className:"h-9 rounded-[10px]"}),(0,t.jsx)(eo.Button,{size:"sm",className:"h-8 w-full rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800",disabled:!tt,onClick:()=>s$(tt),children:"Confirmar data"})]})]})]}),(0,t.jsxs)(eo.Button,{size:"sm",variant:"ghost",className:"h-8 rounded-full px-3 text-xs text-red-600 hover:bg-red-50",onClick:sE,disabled:!tB,children:[(0,t.jsx)(S.XCircle,{className:"h-3.5 w-3.5"}),"Cancelar em lote"]}),(0,t.jsx)(eo.Button,{size:"sm",variant:"ghost",className:"h-8 rounded-full px-3 text-xs text-zinc-500",onClick:t8,children:"Limpar seleção"})]}),tr?(0,t.jsx)(eJ,{tone:tr.tone,message:tr.message,className:"mt-2"}):null]}),(0,t.jsxs)("div",{className:"grid gap-6 2xl:grid-cols-[minmax(0,7fr)_minmax(340px,3fr)]",children:[(0,t.jsx)("div",{className:"space-y-5",children:"agenda"===E?(0,t.jsx)(eY,{now:tT,monthDate:tE,days:t9,selectedDate:t$,activitiesByDate:t6,selectedDayActivities:t7,expandedActivityId:eq,highlightedPostponedId:tu,selectedActivityIds:e5,canExecuteActions:tR,canCancelActions:tB,activityFeedback:ta,onPreviousMonth:()=>tO(e=>new Date(e.getFullYear(),e.getMonth()-1,1)),onNextMonth:()=>tO(e=>new Date(e.getFullYear(),e.getMonth()+1,1)),onGoToToday:()=>{let e=em(tT);tO(eg(e)),tI(eh(e))},onSelectDate:e=>{let t=eg(e);tI(eh(e)),tO(t)},onToggleExpand:e=>{eG(t=>t===e?null:e),eE(e)},onComplete:sk,onCancel:sA,onPostpone:sM,onToggleSelectActivity:t3,onSelectIntelligence:eE,onGenerateFollowup:sP,onOpenActivityDetails:e=>{eE(e.id),tS(e.id)}}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eX,{title:"O que a Menux Intelligence recomenda agora",count:su.length,collapsed:Z.intelligence,onToggle:()=>sb("intelligence"),tone:"violet",children:et.intelligence?(0,t.jsx)(eQ,{message:et.intelligence,onRetry:()=>{es(e=>({...e,intelligence:null})),sf()}}):0===su.length?(0,t.jsxs)("div",{className:"rounded-[18px] border border-cyan-200/20 bg-slate-900/45 px-5 py-5",children:[(0,t.jsx)("p",{className:"font-body text-sm text-slate-200",children:"Sem recomendações no momento."}),(0,t.jsxs)(eo.Button,{size:"sm",className:"mt-3 rounded-full border border-cyan-300/25 bg-cyan-500/18 text-cyan-50 hover:bg-cyan-500/28",onClick:sf,children:[(0,t.jsx)(z.Sparkles,{className:"h-3.5 w-3.5"}),"Gerar plano do dia"]})]}):(0,t.jsx)("div",{className:"grid gap-4 lg:grid-cols-2 2xl:grid-cols-3",children:su.map(e=>{let s=ew[e.id]||"idle";return(0,t.jsxs)("article",{className:"rounded-[20px] border border-cyan-200/20 bg-slate-900/52 p-5 shadow-[0_12px_24px_-20px_rgba(2,6,23,0.75)] transition-all duration-140 hover:-translate-y-[1px] hover:border-cyan-200/35",children:[(0,t.jsx)("div",{className:"mb-3 flex items-start justify-between gap-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-[12px] border border-cyan-300/25 bg-cyan-500/16 text-cyan-100",children:(0,t.jsx)(l.Bot,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"font-heading text-sm font-semibold text-slate-100",children:e.title}),(0,t.jsx)("p",{className:"font-body text-sm leading-snug text-slate-400",children:e.context})]})]})}),(0,t.jsxs)("p",{className:"min-h-[62px] font-body text-sm leading-relaxed text-slate-300",children:[(0,t.jsx)("span",{className:"font-medium text-slate-100",children:"Por que:"})," ",e.why]}),(0,t.jsxs)("div",{className:"mt-4 grid gap-2 sm:grid-cols-2",children:[(0,t.jsx)(eo.Button,{size:"sm",className:"h-9 rounded-full border border-cyan-300/24 bg-cyan-500/18 text-xs text-cyan-50 hover:bg-cyan-500/28",disabled:"loading"===s,onClick:()=>sN(e),children:"loading"===s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Loader2,{className:"h-3.5 w-3.5 animate-spin"}),"Executando"]}):"success"===s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Check,{className:"h-3.5 w-3.5"}),"Executado"]}):e.primaryActionLabel}),(0,t.jsx)(eo.Button,{size:"sm",variant:"outline",className:"h-9 rounded-full border-white/16 bg-white/6 text-xs text-slate-200 hover:bg-white/10",onClick:()=>sy(e.activityId),children:"Ver atividade"})]}),"error"===s&&(0,t.jsx)("p",{className:"mt-2 text-xs text-status-danger",children:"Falha ao executar. Tentar novamente."})]},e.id)})})}),(0,t.jsx)(eX,{title:"Atrasadas",count:se.length,collapsed:Z.overdue,onToggle:()=>sb("overdue"),tone:"danger",children:sB(se,"overdue")}),(0,t.jsx)(eX,{title:"Hoje",count:st.length,collapsed:Z.today,onToggle:()=>sb("today"),tone:"warning",children:sB(st,"today")}),(0,t.jsx)(eX,{title:"Próximos 7 dias",count:ss.length,collapsed:Z.next7,onToggle:()=>sb("next7"),tone:"neutral",children:sB(ss,"next7")}),(0,t.jsx)(eX,{title:"Futuras",count:sa.length,collapsed:Z.future,onToggle:()=>sb("future"),tone:"neutral",children:sB(sa,"future")}),(0,t.jsxs)("div",{className:"rounded-[20px] border border-zinc-200 bg-white p-4 shadow-sm md:p-5",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-heading text-lg font-semibold text-zinc-900",children:"Resumo do dia"}),(0,t.jsx)("p",{className:"font-body text-xs text-zinc-500",children:"Panorama rápido de execução e produtividade."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eo.Button,{size:"sm",variant:"outline",className:"rounded-full text-xs",onClick:()=>{tz({title:"Resumo do dia",content:`### Execu\xe7\xe3o do dia
- Total de atividades: ${tZ.length}
- Conclus\xe3o semanal: ${sc}%
- Atrasadas: ${sn}

**Pr\xf3ximo passo:** atacar primeiro as atividades atrasadas com maior risco de SLA.`}),tN(!0)},children:"Ver resumo"}),tL?(0,t.jsx)(eo.Button,{size:"sm",variant:"outline",className:"rounded-full text-xs",disabled:tb,onClick:sR,children:tb?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Loader2,{className:"h-3.5 w-3.5 animate-spin"}),"Exportando..."]}):"Exportar lista"}):null]})]}),td?(0,t.jsx)(eJ,{tone:td.tone,message:td.message,className:"mt-3"}):null,(0,t.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(e2,{label:"Total de atividades",value:String(tZ.length)}),(0,t.jsx)(e2,{label:"Conclusão semanal",value:`${sc}%`}),(0,t.jsx)(e2,{label:"Tipo dominante",value:sd?en[sd[0]]:"-"}),(0,t.jsx)(e2,{label:"SLA estourado",value:String(sn),accent:sn>0?"danger":"success"})]}),(0,t.jsx)("div",{className:"mt-4 grid gap-3 lg:grid-cols-1",children:(0,t.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-zinc-50/70 p-3",children:[(0,t.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Por tipo"}),(0,t.jsx)("div",{className:"space-y-1.5",children:Object.entries(so).sort((e,t)=>t[1]-e[1]).slice(0,4).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-zinc-600",children:en[e]}),(0,t.jsx)("span",{className:"font-medium text-zinc-900",children:s})]},e))})]})}),si.length>0&&(0,t.jsxs)("div",{className:"mt-4 rounded-[14px] border border-zinc-200 bg-white p-3",children:[(0,t.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Concluídas recentes"}),(0,t.jsx)("div",{className:"space-y-1.5",children:si.slice(0,4).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-[10px] bg-zinc-50 px-2.5 py-2",children:[(0,t.jsx)("p",{className:"truncate text-sm text-zinc-700",children:e.title}),(0,t.jsx)("span",{className:"text-xs text-zinc-500",children:eb(e.completedAt||e.dueDate)})]},e.id))})]})]})]})}),(0,t.jsx)("aside",{ref:tM,className:(0,e$.cn)("self-start 2xl:sticky 2xl:top-6","transition-shadow duration-120 ease-out",tv&&"2xl:drop-shadow-[0_8px_20px_rgba(15,23,42,0.08)]"),children:(0,t.jsxs)("div",{className:"menux-intelligence-theme space-y-5 rounded-[20px] border border-cyan-300/16 p-5 shadow-[0_14px_26px_-22px_rgba(2,6,23,0.8)] md:p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"font-heading text-lg font-semibold text-slate-100",children:"Menux Intelligence"}),(0,t.jsxs)("p",{className:"mt-1 flex items-center gap-2 text-xs text-slate-300",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Online"]})]}),(0,t.jsxs)(eo.Button,{size:"sm",variant:"outline",className:"rounded-full border-white/16 bg-white/8 text-slate-100 hover:bg-white/12",onClick:sf,disabled:ed,children:[ed?(0,t.jsx)(w.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,t.jsx)(z.Sparkles,{className:"h-3.5 w-3.5"}),"Gerar plano do dia"]})]}),(0,t.jsxs)("div",{className:"rounded-[16px] border border-white/14 bg-white/7 p-4",children:[(0,t.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-slate-300",children:"Diagnóstico do dia"}),(0,t.jsxs)("div",{className:"space-y-1.5 text-sm",children:[(0,t.jsx)(e1,{label:"Atrasadas",value:String(sn),tone:sn>0?"danger":"success"}),(0,t.jsx)(e1,{label:"SLAs críticos",value:String(se.filter(e=>Math.floor((em(tT).getTime()-ex(e.dueDate).getTime())/864e5)>=3).length),tone:se.some(e=>Math.floor((em(tT).getTime()-ex(e.dueDate).getTime())/864e5)>=3)?"danger":"success"}),(0,t.jsx)(e1,{label:"SLAs em risco",value:String(sl),tone:sl>0?"warning":"success"}),(0,t.jsx)(e1,{label:"Tipo mais afetado",value:sd?en[sd[0]]:"Sem dados",tone:"neutral"})]})]}),(0,t.jsxs)("div",{className:"rounded-[16px] border border-white/14 bg-white/7 p-4",children:[(0,t.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-slate-300",children:"Sugestões rápidas"}),(0,t.jsx)("div",{className:"grid gap-2 sm:grid-cols-2 xl:grid-cols-1",children:eW.map(e=>{let s=tx===e.id;return(0,t.jsxs)("button",{onClick:()=>sF(e.id),disabled:s,className:"flex items-center justify-between rounded-[12px] border border-white/14 bg-white/8 px-3 py-2 text-left text-xs text-slate-200 transition-colors duration-120 hover:bg-white/12 disabled:opacity-70",children:[(0,t.jsx)("span",{children:e.label}),s?(0,t.jsx)(w.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,t.jsx)(n.ArrowRight,{className:"h-3.5 w-3.5 text-slate-400"})]},e.id)})}),(0,t.jsx)(M.AnimatePresence,{children:tp&&(0,t.jsx)(T.motion.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},transition:{duration:.14},className:(0,e$.cn)("mt-3 rounded-[12px] border px-3 py-2 text-xs","success"===tp.status?"border-emerald-300/28 bg-emerald-500/14 text-emerald-100":"border-red-300/30 bg-red-500/14 text-red-100"),children:tp.text})})]}),(0,t.jsxs)("div",{className:"rounded-[16px] border border-white/14 bg-white/7 p-4",children:[(0,t.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-slate-300",children:"Mensagens prontas"}),sm?(0,t.jsx)(e0,{activity:sm,now:tT}):(0,t.jsx)("div",{className:"rounded-[12px] border border-dashed border-white/20 bg-white/6 px-3 py-3 text-xs text-slate-300",children:"Selecione uma atividade para ver mensagens sugeridas aqui."})]})]})})]}),(0,t.jsx)(eT.AlertDialog,{open:e6,onOpenChange:e9,children:(0,t.jsxs)(eT.AlertDialogContent,{className:"rounded-[20px]",children:[(0,t.jsxs)(eT.AlertDialogHeader,{children:[(0,t.jsx)(eT.AlertDialogTitle,{className:"font-heading text-xl",children:"Concluir atividades em lote?"}),(0,t.jsxs)(eT.AlertDialogDescription,{className:"font-body text-sm text-zinc-600",children:["Essa ação conclui ",t2.length," atividade(s) selecionada(s) e registra o status imediatamente."]})]}),(0,t.jsxs)(eT.AlertDialogFooter,{children:[(0,t.jsx)(eT.AlertDialogCancel,{className:"rounded-full",children:"Voltar"}),(0,t.jsx)(eT.AlertDialogAction,{className:"rounded-full bg-zinc-900 text-white hover:bg-zinc-800",onClick:sD,children:"Confirmar conclusão"})]})]})}),(0,t.jsx)(eT.AlertDialog,{open:e4,onOpenChange:e8,children:(0,t.jsxs)(eT.AlertDialogContent,{className:"rounded-[20px]",children:[(0,t.jsxs)(eT.AlertDialogHeader,{children:[(0,t.jsx)(eT.AlertDialogTitle,{className:"font-heading text-xl",children:"Cancelar atividades em lote?"}),(0,t.jsxs)(eT.AlertDialogDescription,{className:"font-body text-sm text-zinc-600",children:["Essa ação cancela ",t2.length," atividade(s) selecionada(s) e registra o status imediatamente."]})]}),(0,t.jsxs)(eT.AlertDialogFooter,{children:[(0,t.jsx)(eT.AlertDialogCancel,{className:"rounded-full",children:"Voltar"}),(0,t.jsx)(eT.AlertDialogAction,{className:"rounded-full bg-red-600 text-white hover:bg-red-700",onClick:sO,children:"Confirmar cancelamento"})]})]})}),(0,t.jsx)(ec,{open:tw,onOpenChange:tN,title:ty.title,content:ty.content}),(0,t.jsx)(eK,{open:!!sx,activity:sx,now:tT,onOpenChange:e=>{e||tS(null)},onSelectIntelligence:e=>{tS(null),sI(e)},onGenerateFollowup:e=>{tS(null),sP(e)}})]})}function eU({items:e,renderItem:a,estimateSize:i=176}){let n=(0,s.useRef)(null),l=e.length>14,r=function({useFlushSync:e=!0,...t}){let a=s.useReducer(()=>({}),{})[1],i={...t,onChange:(s,i)=>{var n;e&&i?(0,D.flushSync)(a):a(),null==(n=t.onChange)||n.call(t,s,i)}},[n]=s.useState(()=>new H(i));return n.setOptions(i),q(()=>n._didMount(),[]),q(()=>n._willUpdate()),n}({observeElementRect:F,observeElementOffset:L,scrollToFn:V,...{count:e.length,getScrollElement:()=>n.current,estimateSize:()=>i,overscan:6}});if(!l)return(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(M.AnimatePresence,{initial:!1,children:e.map(e=>(0,t.jsx)(T.motion.div,{layout:!0,initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-4,scale:.995},transition:{duration:.16,ease:"easeOut"},children:a(e)},e.id))})});let o=Math.min(720,Math.max(320,Math.round(e.length*i)));return(0,t.jsx)("div",{ref:n,className:"overflow-auto pr-1",style:{height:o},children:(0,t.jsx)("div",{style:{height:`${r.getTotalSize()}px`,width:"100%",position:"relative"},children:r.getVirtualItems().map(s=>{let i=e[s.index];return(0,t.jsx)("div",{"data-index":s.index,ref:r.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${s.start}px)`},children:(0,t.jsx)("div",{className:"pb-3",children:a(i)})},i.id)})})})}function eY({now:e,monthDate:s,days:a,selectedDate:i,activitiesByDate:n,selectedDayActivities:l,expandedActivityId:r,highlightedPostponedId:o,selectedActivityIds:d,canExecuteActions:c,canCancelActions:x,activityFeedback:h,onPreviousMonth:p,onNextMonth:g,onGoToToday:b,onSelectDate:f,onToggleExpand:v,onComplete:j,onCancel:w,onPostpone:N,onToggleSelectActivity:y,onSelectIntelligence:z,onGenerateFollowup:C,onOpenActivityDetails:S}){let k=eg(s),A=ef(i),D=eh(em(e));return(0,t.jsxs)("section",{className:"rounded-[20px] border border-zinc-200 bg-white p-4 shadow-sm md:p-5",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-heading text-lg font-semibold text-zinc-900",children:"Agenda em calendário"}),(0,t.jsx)("p",{className:"font-body text-xs text-zinc-500",children:"Visualização mensal para planejar a execução por dia."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eo.Button,{size:"sm",variant:"outline",className:"rounded-full border-zinc-200 text-xs",onClick:b,children:"Hoje"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-zinc-200 bg-zinc-50/90 p-1",children:[(0,t.jsx)(eo.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full text-zinc-600",onClick:p,"aria-label":"Mês anterior",children:(0,t.jsx)(u.ChevronLeft,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"min-w-[164px] text-center font-heading text-sm font-semibold text-zinc-900 capitalize",children:new Intl.DateTimeFormat("pt-BR",{month:"long",year:"numeric"}).format(s)}),(0,t.jsx)(eo.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full text-zinc-600",onClick:g,"aria-label":"Próximo mês",children:(0,t.jsx)(m.ChevronRight,{className:"h-4 w-4"})})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 overflow-hidden rounded-[16px] border border-zinc-200 bg-white",children:[(0,t.jsx)("div",{className:"grid grid-cols-7 border-b border-zinc-200 bg-zinc-50/80",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map(e=>(0,t.jsx)("div",{className:"px-2 py-2 text-center text-[11px] font-semibold uppercase tracking-[0.06em] text-zinc-500",children:e},e))}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-px bg-zinc-200/80",children:a.map(e=>{let s=eh(e),a=n.get(s)||[],l=e.getMonth()===k.getMonth(),r=s===i,o=s===D;return(0,t.jsxs)("div",{role:"button",tabIndex:0,onClick:()=>f(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),f(e))},className:(0,e$.cn)("min-h-[116px] bg-white px-2 py-2 text-left transition-colors duration-120 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-brand/35","hover:bg-zinc-50",!l&&"bg-zinc-50/70 text-zinc-400",r&&"bg-brand/6 ring-2 ring-inset ring-brand/35",o&&!r&&"ring-1 ring-inset ring-zinc-300"),"aria-label":`Dia ${e.getDate()} com ${a.length} atividade${1===a.length?"":"s"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:(0,e$.cn)("inline-flex h-6 min-w-6 items-center justify-center rounded-full px-1.5 text-xs font-semibold",r?"bg-brand text-white":o?"bg-zinc-900 text-white":"text-zinc-700"),children:e.getDate()}),a.length>0?(0,t.jsx)("span",{className:"rounded-full bg-zinc-100 px-1.5 py-0.5 text-[10px] font-semibold text-zinc-600",children:a.length}):null]}),(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[a.slice(0,2).map(s=>(0,t.jsxs)("button",{type:"button",onClick:t=>{t.stopPropagation(),f(e),S(s)},className:"block w-full truncate rounded-[8px] bg-zinc-100/85 px-1.5 py-1 text-left text-[10px] text-zinc-700 transition-colors duration-120 hover:bg-zinc-200/70",children:[s.dueTime?`${s.dueTime} `:"",s.title]},s.id)),a.length>2?(0,t.jsxs)("button",{type:"button",onClick:t=>{t.stopPropagation(),f(e)},className:"text-[10px] font-medium text-brand hover:underline",children:["+",a.length-2," atividades"]}):null]})]},s)})})]}),(0,t.jsxs)("div",{className:"mt-4 rounded-[16px] border border-zinc-200 bg-zinc-50/70 p-3 md:p-4",children:[(0,t.jsx)("div",{className:"mb-3 flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-heading text-sm font-semibold text-zinc-900",children:A}),(0,t.jsxs)("p",{className:"text-xs text-zinc-500",children:[l.length," ",1===l.length?"atividade":"atividades"," no dia"]})]})}),0===l.length?(0,t.jsx)("div",{className:"rounded-[12px] border border-dashed border-zinc-200 bg-white px-3 py-4 text-sm text-zinc-500",children:"Sem atividades para este dia."}):(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(M.AnimatePresence,{initial:!1,children:l.map(s=>(0,t.jsx)(T.motion.div,{layout:!0,initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-4,scale:.995},transition:{duration:.16,ease:"easeOut"},children:(0,t.jsx)(eZ,{activity:s,now:e,isExpanded:r===s.id,isHighlighted:o===s.id,selected:d.has(s.id),canExecuteActions:c,canCancelActions:x,feedback:h[s.id],onToggleExpand:()=>v(s.id),onToggleSelect:()=>y(s.id),onComplete:e=>j(s.id,e),onCancel:()=>w(s.id),onPostpone:e=>N(s.id,e),onSelectIntelligence:()=>z(s.id),onGenerateFollowup:()=>C(s)})},s.id))})})]})]})}function eK({open:e,activity:s,now:a,onOpenChange:i,onSelectIntelligence:n,onGenerateFollowup:l}){if(!s)return null;let r=eN(s,a),o=ey(s,a);return(0,t.jsx)(ed.Dialog,{open:e,onOpenChange:i,children:(0,t.jsxs)(ed.DialogContent,{className:"max-w-[680px] rounded-[20px] border-zinc-200 p-5 sm:p-6",children:[(0,t.jsxs)(ed.DialogHeader,{children:[(0,t.jsx)(ed.DialogTitle,{className:"font-heading text-xl font-semibold text-zinc-900",children:s.title}),(0,t.jsx)(ed.DialogDescription,{className:"text-sm text-zinc-500",children:s.clientName||s.opportunityTitle||"Atividade comercial"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("span",{className:(0,e$.cn)("rounded-full border px-2.5 py-1 text-xs font-semibold",r.className),children:r.label}),(0,t.jsx)("span",{className:"rounded-full border border-zinc-200 bg-zinc-50 px-2.5 py-1 text-xs font-medium text-zinc-600",children:en[s.type]}),(0,t.jsx)("span",{className:"rounded-full border border-zinc-200 bg-zinc-50 px-2.5 py-1 text-xs font-medium text-zinc-600",children:ew(s,a)})]}),(0,t.jsxs)("div",{className:"grid gap-2 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"rounded-[12px] border border-zinc-200 bg-zinc-50/80 px-3 py-2.5",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-zinc-500",children:"Responsável"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-700",children:s.responsibleName})]}),(0,t.jsxs)("div",{className:"rounded-[12px] border border-zinc-200 bg-zinc-50/80 px-3 py-2.5",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-zinc-500",children:"Prazo"}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-zinc-700",children:[eb(s.dueDate),s.dueTime?` \xb7 ${s.dueTime}`:""]})]})]}),(0,t.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-white p-3.5",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Descrição"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-700",children:s.description||"Sem descrição detalhada para esta atividade."})]}),(0,t.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-zinc-50/80 p-3.5",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Recomendação da Menux Intelligence"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-700",children:o.nextStep}),(0,t.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:o.risk})]})]}),(0,t.jsxs)("div",{className:"mt-1 flex flex-wrap items-center justify-end gap-2",children:[(0,t.jsxs)(eo.Button,{size:"sm",variant:"outline",className:"h-9 rounded-full",onClick:()=>n(s),children:[(0,t.jsx)(z.Sparkles,{className:"h-3.5 w-3.5"}),"Menux Intelligence"]}),(0,t.jsx)(eo.Button,{size:"sm",className:"h-9 rounded-full bg-zinc-900 text-white hover:bg-zinc-800",onClick:()=>l(s),children:"Gerar follow-up"})]})]})})}function eX({title:e,count:s,collapsed:a,onToggle:n,tone:l,children:r}){let o={violet:{badge:"border border-cyan-300/25 bg-cyan-500/18 text-cyan-100",icon:"text-cyan-200",border:"border-cyan-300/20"},danger:{badge:"bg-red-100 text-red-700",icon:"text-red-600",border:"border-red-200/70"},warning:{badge:"bg-amber-100 text-amber-700",icon:"text-amber-600",border:"border-amber-200/70"},neutral:{badge:"bg-zinc-100 text-zinc-700",icon:"text-zinc-500",border:"border-zinc-200"}}[l],d="violet"===l;return(0,t.jsxs)("section",{className:(0,e$.cn)("rounded-[20px] border p-5 shadow-sm md:p-6",o.border,d?"bg-slate-900/62 shadow-[0_12px_24px_-20px_rgba(2,6,23,0.82)]":"bg-white"),children:[(0,t.jsxs)("button",{onClick:n,className:"flex w-full items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["violet"===l?(0,t.jsx)(z.Sparkles,{className:(0,e$.cn)("h-4 w-4",o.icon)}):"danger"===l?(0,t.jsx)(i.AlertTriangle,{className:(0,e$.cn)("h-4 w-4",o.icon)}):"warning"===l?(0,t.jsx)(p.default,{className:(0,e$.cn)("h-4 w-4",o.icon)}):(0,t.jsx)(b,{className:(0,e$.cn)("h-4 w-4",o.icon)}),(0,t.jsx)("h3",{className:(0,e$.cn)("font-heading text-[15px] font-semibold",d?"text-slate-100":"text-zinc-900"),children:e}),(0,t.jsx)("span",{className:(0,e$.cn)("rounded-full px-2 py-0.5 text-xs font-semibold",o.badge),children:s})]}),a?(0,t.jsx)(x.ChevronDown,{className:(0,e$.cn)("h-4 w-4",d?"text-slate-300":"text-zinc-500")}):(0,t.jsx)(h.ChevronUp,{className:(0,e$.cn)("h-4 w-4",d?"text-slate-300":"text-zinc-500")})]}),(0,t.jsx)(M.AnimatePresence,{initial:!1,children:!a&&(0,t.jsx)(T.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.18,ease:"easeOut"},className:"overflow-hidden",children:(0,t.jsx)("div",{className:"pt-4",children:r})})})]})}function eQ({message:e,onRetry:s}){return(0,t.jsx)("div",{className:"rounded-[14px] border border-red-200 bg-red-50 px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("p",{className:"text-sm text-red-700",children:e}),(0,t.jsx)(eo.Button,{size:"sm",variant:"outline",className:"h-7 rounded-full border-red-300 text-red-700",onClick:s,children:"Tentar novamente"})]})})}function eJ({tone:e,message:s,className:a}){return(0,t.jsx)("div",{className:(0,e$.cn)("rounded-[12px] border px-3 py-2 text-xs","success"===e&&"border-emerald-200 bg-emerald-50 text-emerald-700","error"===e&&"border-red-200 bg-red-50 text-red-700","info"===e&&"border-blue-200 bg-blue-50 text-blue-700",a),children:s})}let eZ=(0,s.memo)(function({activity:e,now:a,feedback:i,isExpanded:l,isHighlighted:o,selected:d,canExecuteActions:u,canCancelActions:m,onToggleExpand:x,onToggleSelect:h,onComplete:p,onCancel:g,onPostpone:b,onSelectIntelligence:v,onGenerateFollowup:j}){let[N,y]=(0,s.useState)(!1),[C,A]=(0,s.useState)(!1),[D,E]=(0,s.useState)(!1),[O,$]=(0,s.useState)(!1),[I,P]=(0,s.useState)(""),[F,R]=(0,s.useState)(""),[B,L]=(0,s.useState)(!1),[_,V]=(0,s.useState)(null),H=ei[e.type],W=eN(e,a),q=ey(e,a),G=i?.state==="loading-complete"||i?.state==="loading-cancel"||i?.state==="loading-postpone",U=async()=>{try{await navigator.clipboard.writeText(q.message),L(!0),V(null),setTimeout(()=>L(!1),1200)}catch{L(!1),V("Não foi possível copiar agora.")}};return(0,t.jsxs)("article",{id:`activity-card-${e.id}`,className:(0,e$.cn)("rounded-[20px] border border-zinc-200 bg-white p-5 transition-all duration-140 md:p-6","hover:-translate-y-[2px] hover:shadow-[0_14px_28px_-18px_rgba(15,23,42,0.48)]",o&&"ring-2 ring-brand/35",i?.state==="complete-success"&&"border-emerald-300 bg-emerald-50/40"),onClick:x,children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0 flex items-start gap-3.5",children:[(0,t.jsx)("div",{className:(0,e$.cn)("mt-0.5 flex h-11 w-11 shrink-0 items-center justify-center rounded-[13px]",el[e.type].bg,el[e.type].text),children:(0,t.jsx)(H,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("h4",{className:"truncate font-heading text-[17px] font-semibold text-zinc-900",children:e.title}),(0,t.jsx)("span",{className:(0,e$.cn)("rounded-full border px-2 py-0.5 text-[11px] font-medium",W.className),children:W.label})]}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-sm text-zinc-500",children:[(0,t.jsx)("span",{className:"truncate max-w-[420px]",children:e.clientId?(0,t.jsx)(k.default,{href:`/clients?clientId=${e.clientId}`,className:"hover:text-brand hover:underline",children:e.clientName||"Sem nome"}):e.opportunityId?(0,t.jsx)(k.default,{href:`/pipes?opportunityId=${e.opportunityId}`,className:"hover:text-brand hover:underline",children:e.opportunityTitle||"Sem título"}):e.clientName||e.opportunityTitle||"Sem contexto"}),(0,t.jsx)("span",{className:"text-zinc-300",children:"•"}),(0,t.jsx)("span",{children:en[e.type]})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,t.jsx)(ez.Avatar,{size:"sm",children:(0,t.jsx)(ez.AvatarFallback,{className:"bg-brand/10 text-[10px] font-semibold text-brand",children:e.responsibleName.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase()})}),(0,t.jsx)("span",{className:"text-xs text-zinc-600",children:e.responsibleName}),(0,t.jsx)("span",{className:"text-zinc-300",children:"•"}),(0,t.jsxs)("span",{className:"text-xs text-zinc-500",children:[eb(e.dueDate),e.dueTime?` ${e.dueTime}`:""]})]})]})]}),(0,t.jsx)("div",{className:"text-left lg:text-right",children:(0,t.jsx)("p",{className:"text-xs font-medium text-zinc-500",children:ew(e,a)})})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-2.5",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 rounded-full border border-zinc-200 bg-zinc-50 px-3 py-2 text-xs font-medium text-zinc-600",children:[(0,t.jsx)(eS.Checkbox,{checked:d,onCheckedChange:()=>h(),disabled:!u}),"Selecionar"]}),(0,t.jsxs)(eM.Popover,{open:D,onOpenChange:E,children:[(0,t.jsx)(eM.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(eo.Button,{size:"sm",className:"h-9 rounded-full bg-zinc-900 px-4 text-xs text-white hover:bg-zinc-800",disabled:G||!u,children:[i?.state==="loading-complete"?(0,t.jsx)(w.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,t.jsx)(c.CheckCircle2,{className:"h-3.5 w-3.5"}),"Concluir"]})}),(0,t.jsxs)(eM.PopoverContent,{align:"start",sideOffset:8,className:"w-[280px] rounded-[16px] border-zinc-200 p-3",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Concluir atividade"}),(0,t.jsx)("textarea",{placeholder:"Observações da conclusão (opcional)",value:I,onChange:e=>P(e.target.value),className:"w-full resize-none rounded-[10px] border border-zinc-200 bg-zinc-50 px-3 py-2 text-sm text-zinc-700 placeholder:text-zinc-400 focus:border-brand/40 focus:outline-none focus:ring-2 focus:ring-brand/20",rows:3}),(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsxs)(eo.Button,{size:"sm",className:"h-8 flex-1 rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800",onClick:()=>{p(I.trim()||void 0),E(!1),P("")},disabled:!u,children:[(0,t.jsx)(c.CheckCircle2,{className:"h-3.5 w-3.5"}),"Confirmar"]}),(0,t.jsx)(eo.Button,{size:"sm",variant:"outline",className:"h-8 rounded-full text-xs",onClick:()=>{E(!1),P("")},children:"Cancelar"})]})]})]}),(0,t.jsxs)(eM.Popover,{open:N,onOpenChange:y,children:[(0,t.jsx)(eM.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(eo.Button,{size:"sm",variant:"outline",className:"h-9 rounded-full px-4 text-xs",disabled:G||!u,children:[i?.state==="loading-postpone"?(0,t.jsx)(w.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,t.jsx)(r.CalendarClock,{className:"h-3.5 w-3.5"}),"Adiar"]})}),(0,t.jsxs)(eM.PopoverContent,{align:"start",sideOffset:8,className:"w-[250px] rounded-[16px] border-zinc-200 p-3",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Reagendar"}),(0,t.jsx)("div",{className:"space-y-2",children:[1,3,7].map(e=>(0,t.jsxs)("button",{onClick:()=>{b(eh(ep(em(a),e))),y(!1)},className:"flex w-full items-center justify-between rounded-[10px] border border-zinc-200 px-3 py-2 text-sm text-zinc-700 transition-colors hover:bg-zinc-50",children:[(0,t.jsxs)("span",{children:["+",e," ",1===e?"dia":"dias"]}),(0,t.jsx)(n.ArrowRight,{className:"h-3.5 w-3.5 text-zinc-400"})]},e))}),(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,t.jsx)(eA.Label,{className:"text-xs text-zinc-500",children:"Escolher data"}),(0,t.jsx)(ek.Input,{type:"date",value:F,min:eh(em(a)),onChange:e=>R(e.target.value),className:"h-9 rounded-[10px]"}),(0,t.jsx)(eo.Button,{size:"sm",className:"h-8 w-full rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800",disabled:!F||!u,onClick:()=>{b(F),y(!1),R("")},children:"Confirmar data"})]})]})]}),(0,t.jsxs)(eM.Popover,{open:C,onOpenChange:A,children:[(0,t.jsx)(eM.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(eo.Button,{size:"sm",variant:"outline",className:"menux-intelligence-btn-soft h-9 rounded-full px-4 text-xs text-slate-100",onClick:v,children:[(0,t.jsx)(z.Sparkles,{className:"h-3.5 w-3.5 text-cyan-100"}),"Menux Intelligence"]})}),(0,t.jsxs)(eM.PopoverContent,{align:"start",sideOffset:8,className:"w-[min(92vw,340px)] rounded-[16px] border-white/14 bg-slate-950/94 p-3 text-slate-100 shadow-2xl shadow-black/40 backdrop-blur-xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-slate-300",children:"Sugestões da Menux Intelligence"}),(0,t.jsxs)("div",{className:"space-y-2 rounded-[12px] border border-white/14 bg-white/8 p-2.5",children:[(0,t.jsx)("p",{className:"text-[11px] font-medium text-slate-200",children:"Mensagem pronta"}),(0,t.jsx)("p",{className:"text-xs leading-relaxed text-slate-300",children:q.message}),(0,t.jsxs)(eo.Button,{size:"sm",variant:"outline",className:"h-7 rounded-full border-white/14 bg-white/7 px-2.5 text-[11px] text-slate-100 hover:bg-white/11",onClick:U,children:[(0,t.jsx)(f.Copy,{className:"h-3 w-3"}),B?"Copiado":"Copiar"]})]}),(0,t.jsxs)("div",{className:"mt-2 rounded-[12px] border border-white/14 bg-white/8 p-2.5",children:[(0,t.jsx)("p",{className:"text-[11px] font-medium text-slate-200",children:"Próximo passo"}),(0,t.jsx)("p",{className:"text-xs text-slate-300",children:q.nextStep})]}),(0,t.jsxs)("div",{className:"mt-2 rounded-[12px] border border-white/14 bg-white/8 p-2.5",children:[(0,t.jsx)("p",{className:"text-[11px] font-medium text-slate-200",children:"Risco se ignorar"}),(0,t.jsx)("p",{className:"text-xs text-slate-300",children:q.risk})]}),_?(0,t.jsx)("p",{className:"mt-2 text-[11px] text-red-300",children:_}):null]})]}),(0,t.jsx)("div",{className:"basis-full"}),(0,t.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[i?.state==="complete-success"&&(0,t.jsx)("span",{className:"rounded-full bg-emerald-100 px-2.5 py-1 text-[11px] font-medium text-emerald-700",children:i.message||"Concluída"}),i?.state==="postpone-success"&&(0,t.jsx)("span",{className:"rounded-full bg-blue-100 px-2.5 py-1 text-[11px] font-medium text-blue-700",children:i.message||"Reagendada"}),i?.state==="error"&&(0,t.jsx)("span",{className:"rounded-full bg-red-100 px-2.5 py-1 text-[11px] font-medium text-red-700",children:i.message||"Falha ao executar"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5",children:[(0,t.jsx)(eo.Button,{size:"sm",variant:"ghost",className:"h-8 rounded-full px-3 text-xs text-zinc-600 hover:bg-zinc-100",onClick:x,children:l?"Ocultar detalhes":"Ver detalhes"}),"completed"!==e.status&&"cancelled"!==e.status&&(0,t.jsxs)(eo.Button,{size:"sm",variant:"ghost",className:"h-8 rounded-full px-3 text-xs text-red-500 hover:bg-red-50 hover:text-red-600",disabled:G||!m,onClick:()=>$(!0),children:[(0,t.jsx)(S.XCircle,{className:"h-3.5 w-3.5"}),"Cancelar"]})]})]})]}),(0,t.jsx)(eT.AlertDialog,{open:O,onOpenChange:$,children:(0,t.jsxs)(eT.AlertDialogContent,{className:"rounded-[20px]",children:[(0,t.jsxs)(eT.AlertDialogHeader,{children:[(0,t.jsx)(eT.AlertDialogTitle,{className:"font-heading text-xl",children:"Cancelar atividade?"}),(0,t.jsx)(eT.AlertDialogDescription,{className:"font-body text-sm text-zinc-600",children:"Esta ação define a atividade como cancelada e interrompe o ciclo de execução."})]}),(0,t.jsxs)(eT.AlertDialogFooter,{children:[(0,t.jsx)(eT.AlertDialogCancel,{className:"rounded-full",children:"Voltar"}),(0,t.jsx)(eT.AlertDialogAction,{className:"rounded-full bg-red-600 text-white hover:bg-red-700",onClick:g,children:"Confirmar cancelamento"})]})]})}),(0,t.jsx)(M.AnimatePresence,{initial:!1,children:l&&(0,t.jsx)(T.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.18,ease:"easeOut"},className:"overflow-hidden",children:(0,t.jsx)("div",{className:"mt-3 rounded-[14px] border border-zinc-200 bg-zinc-50/80 p-3.5",children:(0,t.jsxs)("div",{className:"grid gap-3 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Descrição"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-700",children:e.description||"Sem descrição detalhada para esta atividade."}),e.completionNotes&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"mt-3 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Notas de conclusão"}),(0,t.jsx)("p",{className:"mt-1 rounded-[8px] border border-emerald-200 bg-emerald-50/60 px-2.5 py-2 text-sm text-emerald-800",children:e.completionNotes})]}),(0,t.jsx)("p",{className:"mt-3 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Checklist de preparação"}),(0,t.jsx)("ul",{className:"mt-1.5 space-y-1.5",children:("meeting"===e.type?["Participantes confirmados","Pauta compartilhada","Follow-up preparado"]:"call"===e.type||"whatsapp"===e.type?["Script revisado","Objeções mapeadas","Próximo passo combinado"]:["Contexto do cliente validado","Objetivo da interação definido","Próxima ação registrada"]).map(e=>(0,t.jsxs)("li",{className:"flex items-center gap-2 text-sm text-zinc-700",children:[(0,t.jsx)("span",{className:"inline-block h-1.5 w-1.5 shrink-0 rounded-full bg-zinc-400"}),(0,t.jsx)("span",{children:e})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Histórico curto"}),(0,t.jsxs)("div",{className:"mt-1.5 space-y-2 text-sm text-zinc-700",children:[(0,t.jsxs)("div",{className:"rounded-[10px] border border-zinc-200 bg-white px-2.5 py-2",children:[(0,t.jsx)("p",{className:"text-xs text-zinc-500",children:"Criada em"}),(0,t.jsx)("p",{children:eb(e.createdAt.slice(0,10))})]}),(0,t.jsxs)("div",{className:"rounded-[10px] border border-zinc-200 bg-white px-2.5 py-2",children:[(0,t.jsx)("p",{className:"text-xs text-zinc-500",children:"Prazo atual"}),(0,t.jsxs)("p",{children:[eb(e.dueDate),e.dueTime?` \xb7 ${e.dueTime}`:""]})]})]}),(0,t.jsxs)(eo.Button,{size:"sm",className:"mt-3 h-8 w-full rounded-full border border-cyan-300/22 bg-cyan-500/18 text-xs text-cyan-50 hover:bg-cyan-500/28",onClick:j,children:[(0,t.jsx)(z.Sparkles,{className:"h-3.5 w-3.5"}),"Gerar mensagem de follow-up"]})]})]})})})})]})}),e0=(0,s.memo)(function({activity:e,now:a}){let[i,n]=(0,s.useState)(null),[l,r]=(0,s.useState)(null),o=ey(e,a),d=[{id:"msg-1",title:"Mensagem principal",body:o.message},{id:"msg-2",title:"Próximo passo",body:o.nextStep},{id:"msg-3",title:"Risco se ignorar",body:o.risk}],c=async(e,t)=>{try{await navigator.clipboard.writeText(t),n(e),r(null),setTimeout(()=>n(null),1200)}catch{n(null),r("Não foi possível copiar o conteúdo.")}};return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"rounded-[12px] border border-white/14 bg-white/8 px-3 py-2.5",children:[(0,t.jsx)("p",{className:"truncate text-xs font-medium text-slate-100",children:e.title}),(0,t.jsx)("p",{className:"mt-0.5 text-[11px] text-slate-400",children:e.clientName||e.opportunityTitle||"Sem contexto"})]}),d.map(e=>(0,t.jsxs)("div",{className:"rounded-[12px] border border-white/14 bg-white/8 px-3 py-2.5",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-300",children:e.title}),(0,t.jsx)("p",{className:"mt-1 text-xs leading-relaxed text-slate-200",children:e.body}),(0,t.jsxs)(eo.Button,{size:"sm",variant:"outline",className:"mt-2 h-7 rounded-full border-white/14 bg-white/7 px-2.5 text-[11px] text-slate-100 hover:bg-white/11",onClick:()=>c(e.id,e.body),children:[(0,t.jsx)(f.Copy,{className:"h-3 w-3"}),i===e.id?"Copiado":"Copiar"]})]},e.id)),l?(0,t.jsx)("p",{className:"text-[11px] text-red-300",children:l}):null]})});function e1({label:e,value:s,tone:a}){return(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-[10px] border border-white/10 bg-white/7 px-2.5 py-2",children:[(0,t.jsx)("span",{className:"text-slate-300",children:e}),(0,t.jsx)("span",{className:(0,e$.cn)("font-semibold",{success:"text-emerald-100",warning:"text-amber-100",danger:"text-red-100",neutral:"text-slate-100"}[a]),children:s})]})}function e2({label:e,value:s,accent:a="neutral"}){return(0,t.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-zinc-50/70 p-3",children:[(0,t.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-zinc-500",children:e}),(0,t.jsx)("p",{className:(0,e$.cn)("mt-1 font-heading text-2xl font-semibold","danger"===a?"text-red-700":"success"===a?"text-emerald-700":"text-zinc-900"),children:s})]})}e.s(["default",()=>eq],98662)}]);
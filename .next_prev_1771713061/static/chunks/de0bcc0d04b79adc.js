(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34682,e=>{"use strict";var t=e.i(43476),s=e.i(22016),a=e.i(45060);let n={neutral:"border-zinc-200 bg-white/92 text-zinc-700",info:"border-sky-200 bg-sky-50/88 text-sky-700",warning:"border-amber-200 bg-amber-50/88 text-amber-700",danger:"border-red-200 bg-red-50/88 text-red-700",success:"border-emerald-200 bg-emerald-50/88 text-emerald-700"};function l(e){let l=!!(e.href||e.onClick),i=(0,a.cn)("premium-shine inline-flex h-8 shrink-0 items-center justify-center gap-1.5 rounded-full border px-3 text-[12px] font-semibold tracking-tight whitespace-nowrap",l?"cursor-pointer transition-all duration-150 ease-out hover:bg-white/75 hover:-translate-y-[1px] active:scale-[0.99] active:translate-y-0":"cursor-default select-none opacity-90",n[e.tone??"neutral"]),r=(0,t.jsxs)(t.Fragment,{children:[e.icon?(0,t.jsx)("span",{className:"shrink-0",children:e.icon}):null,(0,t.jsx)("span",{children:e.label})]});return e.href?(0,t.jsx)(s.default,{href:e.href,className:i,children:r},e.id):e.onClick?(0,t.jsx)("button",{type:"button",onClick:e.onClick,className:i,children:r},e.id):(0,t.jsx)("span",{className:i,children:r},e.id)}function i({title:e,titleAccessory:s,description:n,actions:i,actionsClassName:r,meta:o,chips:c=[],fallbackChip:d,children:u,className:x,sticky:m=!1}){let h=!!u,p=!!o,f=!!(c.length>0||d),g=h||p;return(0,t.jsxs)("section",{className:(0,a.cn)("relative overflow-hidden rounded-[20px] border border-zinc-200/85 bg-zinc-50/88 px-5 pb-4 pt-3","shadow-[0_10px_24px_-20px_rgba(15,23,42,0.34)] backdrop-blur-sm",m&&"sticky top-4 z-30",x),children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0",children:(0,t.jsx)("div",{className:"absolute inset-x-0 top-0 h-14 bg-linear-to-b from-white/72 to-transparent"})}),(0,t.jsxs)("div",{className:"relative z-10 space-y-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 xl:flex-row xl:items-start xl:justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1 max-w-[600px]",children:[(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-2",children:[(0,t.jsx)("h1",{className:"min-w-0 font-heading text-2xl font-bold tracking-tight text-zinc-950 sm:text-3xl",children:e}),s?(0,t.jsx)("div",{className:"shrink-0",children:s}):null]}),n?(0,t.jsx)("p",{className:"mt-1 font-body text-[13.5px] text-zinc-600/90 leading-relaxed",children:n}):null]}),i?(0,t.jsx)("div",{className:(0,a.cn)("flex w-full min-w-0 shrink-0 flex-wrap items-center gap-2 rounded-[20px] border border-zinc-200/85 bg-white/95 px-2 py-1.5 shadow-[0_8px_16px_-16px_rgba(15,23,42,0.36)]","xl:w-auto xl:max-w-full xl:justify-end",r),children:i}):null]}),h||p||f?(0,t.jsx)("div",{className:"border-t border-zinc-200/75 pt-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 xl:flex-row xl:items-start xl:justify-between",children:[g?(0,t.jsxs)("div",{className:"min-w-0 flex-1 space-y-2",children:[o?(0,t.jsx)("div",{className:"text-xs text-zinc-500/80",children:o}):null,h?(0,t.jsx)("div",{children:u}):null]}):null,f?(0,t.jsxs)("div",{className:(0,a.cn)("flex flex-wrap items-center gap-2 shrink-0 max-w-full",g?"xl:justify-end":"justify-end"),children:[c.length>0?c.map(e=>l(e)):null,0===c.length&&d?l(d):null]}):null]})}):null]})]})}e.s(["ModuleCommandHeader",()=>i])},15288,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>r,"CardDescription",()=>i,"CardHeader",()=>n,"CardTitle",()=>l])},87652,e=>{"use strict";var t=e.i(86427),s=e.i(71645),a=e.i(37806),n=e.i(47414);function l(e){let l=(0,n.useConstant)(()=>(0,t.motionValue)(e)),{isStatic:i}=(0,s.useContext)(a.MotionConfigContext);if(i){let[,t]=(0,s.useState)(e);(0,s.useEffect)(()=>l.on("change",t),[])}return l}e.s(["useMotionValue",()=>l])},40270,e=>{"use strict";let t=(0,e.i(75254).default)("tags",[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]]);e.s(["Tags",()=>t],40270)},55716,e=>{"use strict";let t=(0,e.i(75254).default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);e.s(["GitBranch",()=>t],55716)},90152,e=>{"use strict";let t=(0,e.i(75254).default)("plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]]);e.s(["Plug",()=>t],90152)},80787,e=>{"use strict";var t=e.i(43476),s=e.i(22016),a=e.i(87130),n=e.i(55716),l=e.i(90152),i=e.i(39616),r=e.i(40270),o=e.i(73884),c=e.i(45060);let d=[{key:"general",label:"Geral",icon:(0,t.jsx)(i.Settings,{className:"h-4 w-4"})},{key:"pipeline",label:"Pipeline",icon:(0,t.jsx)(n.GitBranch,{className:"h-4 w-4"})},{key:"funnels",label:"Funis",icon:(0,t.jsx)(a.Filter,{className:"h-4 w-4"})},{key:"reasons",label:"Motivos de Perda",icon:(0,t.jsx)(o.XCircle,{className:"h-4 w-4"})},{key:"tags",label:"Tags",icon:(0,t.jsx)(r.Tags,{className:"h-4 w-4"})},{key:"integrations",label:"Integrações",icon:(0,t.jsx)(l.Plug,{className:"h-4 w-4"})}];function u({activeKey:e}){return(0,t.jsx)("aside",{className:"w-[200px] shrink-0",children:(0,t.jsx)("nav",{className:"sticky top-6 space-y-1",children:d.map(a=>{let n=e===a.key;return(0,t.jsxs)(s.default,{href:`/settings/${a.key}`,className:(0,c.cn)("flex items-center gap-3 rounded-[15px] px-3 py-2.5 font-body text-sm transition-colors",n?"bg-black font-medium text-white":"text-zinc-600 hover:bg-zinc-100 hover:text-black"),children:[a.icon,a.label]},a.key)})})})}e.s(["SettingsSecondaryNav",()=>u,"settingsSecondaryNavItems",0,d,"settingsTitleMap",0,{general:"Configurações Gerais",pipeline:"Pipeline",funnels:"Funis de Vendas",sla:"Configuração de SLA",commissions:"Regras de Comissão",fields:"Campos Personalizados",reasons:"Motivos de Perda",tags:"Gestão de Tags",terms:"Termos de Uso",notifications:"Notificações",integrations:"Integrações"}])},97710,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),n=e.i(7233),l=e.i(75254);let i=(0,l.default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),r=(0,l.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var o=e.i(27612);let c=(0,l.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var d=e.i(78894),u=e.i(19455),x=e.i(99753),m=e.i(15288),h=e.i(87486),p=e.i(34682),f=e.i(55146),g=e.i(68499),j=e.i(19368),y=e.i(53145),b=e.i(94814),v=e.i(81307),N=e.i(76639),w=e.i(93479),C=e.i(24687),k=e.i(10204);let z=v.z.object({name:v.z.string().min(1,"Nome é obrigatório").max(50,"Nome deve ter no máximo 50 caracteres"),description:v.z.string().max(200,"Descrição deve ter no máximo 200 caracteres").optional()});function D({open:e,onOpenChange:a,pipeline:n}){let{pipelines:l,addPipeline:i,updatePipeline:r}=(0,j.usePipelineStore)(),o=!!n,[c,d]=(0,s.useState)(null),[m,h]=(0,s.useState)(null),{register:p,handleSubmit:f,reset:g,formState:{errors:v,isSubmitting:D}}=(0,y.useForm)({resolver:(0,b.zodResolver)(z),defaultValues:{name:n?.name||"",description:n?.description||""}});(0,s.useEffect)(()=>{(0,s.startTransition)(()=>{d(null),h(null)}),n?g({name:n.name,description:n.description||""}):g({name:"",description:""})},[n,g]);let S=()=>{D||(g(),d(null),h(null),a(!1))};return(0,t.jsx)(N.Dialog,{open:e,onOpenChange:S,children:(0,t.jsx)(N.DialogContent,{className:"rounded-[20px] sm:max-w-[500px]",children:(0,t.jsxs)("form",{onSubmit:f(e=>{(d(null),h(null),l.some(t=>t.name.toLowerCase()===e.name.toLowerCase()&&t.id!==n?.id))?d("Já existe um funil com este nome. Escolha outro nome."):n?.isDefault&&e.name!==n.name?d('O funil padrão "Leads" não pode ter seu nome alterado.'):(o&&n?(r(n.id,{name:e.name,description:e.description||""}),h({type:"success",message:`O funil "${e.name}" foi atualizado com sucesso.`})):(i({name:e.name,description:e.description||"",isDefault:!1,cardCount:0,stages:[]}),h({type:"success",message:`O funil "${e.name}" foi criado. Agora adicione etapas a ele.`})),setTimeout(()=>a(!1),1200))}),children:[(0,t.jsxs)(N.DialogHeader,{children:[(0,t.jsx)(N.DialogTitle,{className:"font-heading text-xl",children:o?"Editar Funil":"Novo Funil"}),(0,t.jsx)(N.DialogDescription,{className:"font-body text-sm",children:o?"Altere o nome e descrição do funil.":"Crie um novo funil para organizar seu pipeline de vendas."})]}),m&&(0,t.jsx)("div",{className:"pt-4 pb-0",children:(0,t.jsx)(x.InlineFeedback,{type:m.type,message:m.message,compact:!0,onClose:()=>h(null)})}),(0,t.jsxs)("div",{className:"space-y-4 py-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(k.Label,{htmlFor:"name",className:"font-body text-sm font-medium",children:["Nome do Funil ",(0,t.jsx)("span",{className:"text-status-danger",children:"*"})]}),(0,t.jsx)(w.Input,{id:"name",...p("name",{onChange:()=>d(null)}),placeholder:"Ex: Leads, Indicação, Parcerias...",disabled:n?.isDefault,className:"rounded-[15px]",maxLength:50}),v.name&&(0,t.jsx)("p",{className:"font-body text-xs text-status-danger",children:v.name.message}),c&&(0,t.jsx)("p",{className:"font-body text-xs text-status-danger",children:c}),n?.isDefault&&(0,t.jsx)("p",{className:"font-body text-xs text-zinc-500",children:'O funil padrão "Leads" não pode ter seu nome alterado.'}),(0,t.jsx)("p",{className:"font-body text-xs text-zinc-400",children:"Máximo de 50 caracteres"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.Label,{htmlFor:"description",className:"font-body text-sm font-medium",children:"Descrição (opcional)"}),(0,t.jsx)(C.Textarea,{id:"description",...p("description"),placeholder:"Descreva o propósito deste funil...",className:"rounded-[15px] resize-none",rows:3,maxLength:200}),v.description&&(0,t.jsx)("p",{className:"font-body text-xs text-status-danger",children:v.description.message}),(0,t.jsx)("p",{className:"font-body text-xs text-zinc-400",children:"Máximo de 200 caracteres"})]})]}),(0,t.jsxs)(N.DialogFooter,{children:[(0,t.jsx)(u.Button,{type:"button",variant:"outline",onClick:S,disabled:D,className:"rounded-full",children:"Cancelar"}),(0,t.jsx)(u.Button,{type:"submit",disabled:D,className:"rounded-full bg-black text-white hover:bg-zinc-800",children:D?"Salvando...":o?"Salvar Alterações":"Criar Funil"})]})]})})})}let S=(0,l.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var A=e.i(37727),M=e.i(43531);e.s([],42959),e.i(42959);var T=e.i(65566);let E=(0,s.createContext)(null);var F=e.i(46932),B=e.i(47414),I=e.i(706),L=e.i(33887);let P=(0,s.forwardRef)(function({children:e,as:a="ul",axis:n="y",onReorder:l,values:i,...r},o){let c=(0,B.useConstant)(()=>F.motion[a]),d=[],u=(0,s.useRef)(!1),x=(0,s.useRef)(null);(0,T.invariant)(!!i,"Reorder.Group must be provided a values prop","reorder-values"),(0,s.useEffect)(()=>{u.current=!1});let m={overflowAnchor:"none",...r.style};return(0,t.jsx)(c,{...r,style:m,ref:e=>{x.current=e,"function"==typeof o?o(e):o&&(o.current=e)},ignoreStrict:!0,children:(0,t.jsx)(E.Provider,{value:{axis:n,groupRef:x,registerItem:(e,t)=>{let s=d.findIndex(t=>e===t.value);-1!==s?d[s].layout=t[n]:d.push({value:e,layout:t[n]}),d.sort(R)},updateOrder:(e,t,s)=>{if(u.current)return;let a=function(e,t,s,a){if(!a)return e;let n=e.findIndex(e=>e.value===t);if(-1===n)return e;let l=a>0?1:-1,i=e[n+l];if(!i)return e;let r=e[n],o=i.layout,c=(0,I.mixNumber)(o.min,o.max,.5);return 1===l&&r.layout.max+s>c||-1===l&&r.layout.min+s<c?(0,L.moveItem)(e,n,n+l):e}(d,e,t,s);d!==a&&(u.current=!0,l(a.map(O).filter(e=>-1!==i.indexOf(e))))}},children:e})})});function O(e){return e.value}function R(e,t){return e.layout.min-t.layout.min}var V=e.i(83411),H=e.i(87652),G=e.i(44230),$=e.i(87022),_=e.i(74008);function W(e,t){let s=(0,H.useMotionValue)(t()),a=()=>s.set(t());return a(),(0,_.useIsomorphicLayoutEffect)(()=>{let t=()=>$.frame.preRender(a,!1,!0),s=e.map(e=>e.on("change",t));return()=>{s.forEach(e=>e()),(0,$.cancelFrame)(a)}}),s}var X=e.i(86427);function q(e,t){let s=(0,B.useConstant)(()=>[]);return W(e,()=>{s.length=0;let a=e.length;for(let t=0;t<a;t++)s[t]=e[t].get();return t(s)})}let K=new Set(["auto","scroll"]),U=new WeakMap,Y=new WeakMap,J=null;function Q(e,t){let s=e?.parentElement;for(;s;){if(function(e,t){let s=getComputedStyle(e),a="x"===t?s.overflowX:s.overflowY,n=e===document.body||e===document.documentElement;return K.has(a)||n}(s,t))return s;s=s.parentElement}return null}function Z(e,t=0){return(0,V.isMotionValue)(e)?e:(0,H.useMotionValue)(t)}let ee=(0,s.forwardRef)(function({children:e,style:a={},value:n,as:l="li",onDrag:i,onDragEnd:r,layout:o=!0,...c},d){let u=(0,B.useConstant)(()=>F.motion[l]),x=(0,s.useContext)(E),m={x:Z(a.x),y:Z(a.y)},h=function e(t,s,a,n){if("function"==typeof t){let e;return X.collectMotionValues.current=[],t(),e=W(X.collectMotionValues.current,t),X.collectMotionValues.current=void 0,e}if(void 0!==a&&!Array.isArray(a)&&"function"!=typeof s){var l=t,i=s,r=a,o=n;let c=(0,B.useConstant)(()=>Object.keys(r)),d=(0,B.useConstant)(()=>({}));for(let t of c)d[t]=e(l,i,r[t],o);return d}let c="function"==typeof s?s:function(...e){let t=!Array.isArray(e[0]),s=t?0:-1,a=e[0+s],n=e[1+s],l=e[2+s],i=e[3+s],r=(0,G.interpolate)(n,l,i);return t?r(a):r}(s,a,n),d=Array.isArray(t)?q(t,c):q([t],([e])=>c(e)),u=Array.isArray(t)?void 0:t.accelerate;return u&&!u.isTransformed&&"function"!=typeof s&&Array.isArray(a)&&n?.clamp!==!1&&(d.accelerate={...u,times:s,keyframes:a,isTransformed:!0,...n?.ease?{ease:n.ease}:{}}),d}([m.x,m.y],([e,t])=>e||t?1:"unset");(0,T.invariant)(!!x,"Reorder.Item must be a child of Reorder.Group","reorder-item-child");let{axis:p,registerItem:f,updateOrder:g,groupRef:j}=x;return(0,t.jsx)(u,{drag:p,...c,dragSnapToOrigin:!0,style:{...a,x:m.x,y:m.y,zIndex:h},layout:o,onDrag:(e,t)=>{let{velocity:s,point:a}=t;g(n,m[p].get(),s[p]),function(e,t,s,a){if(!e)return;J=e;let n=Q(e,s);if(!n)return;let{amount:l,edge:i}=function(e,t,s){let a=t.getBoundingClientRect(),n="x"===s?Math.max(0,a.left):Math.max(0,a.top),l="x"===s?Math.min(window.innerWidth,a.right):Math.min(window.innerHeight,a.bottom),i=e-n,r=l-e;if(i<50){let e=1-i/50;return{amount:-25*e*e,edge:"start"}}if(r<50){let e=1-r/50;return{amount:25*e*e,edge:"end"}}return{amount:0,edge:null}}(t-("x"===s?window.scrollX:window.scrollY),n,s);if(null===i){Y.delete(n),U.delete(n);return}let r=Y.get(n),o=n===document.body||n===document.documentElement;if(r!==i){if(!("start"===i&&a<0||"end"===i&&a>0))return;Y.set(n,i);let e="x"===s?n.scrollWidth-(o?window.innerWidth:n.clientWidth):n.scrollHeight-(o?window.innerHeight:n.clientHeight);U.set(n,e)}if(l>0){let e=U.get(n);if(("x"===s?o?window.scrollX:n.scrollLeft:o?window.scrollY:n.scrollTop)>=e)return}"x"===s?o?window.scrollBy({left:l}):n.scrollLeft+=l:o?window.scrollBy({top:l}):n.scrollTop+=l}(j.current,a[p],p,s[p]),i&&i(e,t)},onDragEnd:(e,t)=>{if(J){let e=Q(J,"y");e&&(Y.delete(e),U.delete(e));let t=Q(J,"x");t&&t!==e&&(Y.delete(t),U.delete(t)),J=null}r&&r(e,t)},onLayoutMeasure:e=>{f(n,e)},ref:d,ignoreStrict:!0,children:e})});e.s(["Group",()=>P,"Item",()=>ee],40025);var et=e.i(40025),et=et;function es({pipeline:e}){let{addStage:a,updateStage:l,deleteStage:i,reorderStages:c}=(0,j.usePipelineStore)(),[d,m]=(0,s.useState)(null),[p,f]=(0,s.useState)(""),[y,b]=(0,s.useState)(null),[v,N]=(0,s.useState)(!1),[C,k]=(0,s.useState)(""),[z,D]=(0,s.useState)(null),[T,E]=(0,s.useState)(null),[F,B]=(0,s.useState)(null),I=e.stages.length<10;(0,s.useEffect)(()=>{if(!F)return;let e=setTimeout(()=>B(null),2e3);return()=>clearTimeout(e)},[F]);let L=()=>{d&&p.trim()?p.length>30?D("O nome da etapa deve ter no máximo 30 caracteres."):(l(e.id,d,{name:p.trim()}),B("Etapa atualizada"),m(null),f(""),D(null)):D("Nome da etapa é obrigatório.")},P=()=>{m(null),f(""),D(null)},O=()=>{C.trim()?C.length>30?E("O nome da etapa deve ter no máximo 30 caracteres."):(a(e.id,{id:`stage-${Date.now()}`,name:C.trim(),slaHours:48}),k(""),N(!1),E(null)):E("Digite um nome para a etapa.")};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h3",{className:"font-heading text-lg font-semibold text-black",children:["Etapas (",e.stages.length,"/10)"]}),(0,t.jsxs)(u.Button,{size:"sm",onClick:()=>{N(!0),E(null)},disabled:!I||v,className:"rounded-full font-body text-xs",children:[(0,t.jsx)(n.Plus,{className:"mr-1 h-3.5 w-3.5"}),"Adicionar Etapa"]})]}),F&&(0,t.jsx)(x.InlineFeedback,{type:"success",message:F,compact:!0,onClose:()=>B(null)}),e.stages.length>0?(0,t.jsx)(et.Group,{axis:"y",values:e.stages,onReorder:t=>{c(e.id,t)},className:"space-y-2",children:e.stages.map(e=>(0,t.jsx)(et.Item,{value:e,children:(0,t.jsxs)("div",{className:"flex items-center gap-3 rounded-[15px] border border-zinc-200 bg-white p-3 transition-colors hover:bg-zinc-50",children:[(0,t.jsx)(r,{className:"h-4 w-4 shrink-0 cursor-grab text-zinc-400 active:cursor-grabbing"}),(0,t.jsx)("div",{className:"flex-1",children:d===e.id?(0,t.jsxs)("div",{children:[(0,t.jsx)(w.Input,{value:p,onChange:e=>{f(e.target.value),D(null)},onKeyDown:e=>{"Enter"===e.key&&L(),"Escape"===e.key&&P()},placeholder:"Nome da etapa",className:"h-8 rounded-[10px] font-body text-sm",maxLength:30,autoFocus:!0}),z&&(0,t.jsx)("p",{className:"mt-1 font-body text-xs text-status-danger",children:z})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-body text-sm font-medium text-black",children:e.name}),(0,t.jsxs)(h.Badge,{variant:"secondary",className:"rounded-[10px] font-body text-[10px]",children:[e.slaHours,"h SLA"]})]})}),(0,t.jsx)("div",{className:"flex items-center gap-1 shrink-0",children:d===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Button,{size:"icon",variant:"ghost",onClick:L,className:"h-7 w-7 text-status-success hover:bg-status-success/10",children:(0,t.jsx)(M.Check,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(u.Button,{size:"icon",variant:"ghost",onClick:P,className:"h-7 w-7 text-zinc-500 hover:bg-zinc-100",children:(0,t.jsx)(A.X,{className:"h-3.5 w-3.5"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Button,{size:"icon",variant:"ghost",onClick:()=>{m(e.id),f(e.name),D(null)},className:"h-7 w-7 text-zinc-500 hover:bg-zinc-100",children:(0,t.jsx)(S,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(u.Button,{size:"icon",variant:"ghost",onClick:()=>b(e),className:"h-7 w-7 text-status-danger hover:bg-status-danger/10",children:(0,t.jsx)(o.Trash2,{className:"h-3.5 w-3.5"})})]})})]})},e.id))}):(0,t.jsx)("div",{className:"rounded-[15px] border-2 border-dashed border-zinc-200 p-8 text-center",children:(0,t.jsx)("p",{className:"font-body text-sm text-zinc-500",children:"Nenhuma etapa criada. Adicione a primeira etapa para este funil."})}),v&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 rounded-[15px] border-2 border-brand bg-brand/5 p-3",children:[(0,t.jsx)(w.Input,{value:C,onChange:e=>{k(e.target.value),E(null)},onKeyDown:e=>{"Enter"===e.key&&O(),"Escape"===e.key&&(N(!1),k(""),E(null))},placeholder:"Nome da nova etapa (máx. 30 caracteres)",className:"h-8 rounded-[10px] font-body text-sm",maxLength:30,autoFocus:!0}),(0,t.jsxs)("div",{className:"flex items-center gap-1 shrink-0",children:[(0,t.jsx)(u.Button,{size:"icon",variant:"ghost",onClick:O,className:"h-7 w-7 text-status-success hover:bg-status-success/10",children:(0,t.jsx)(M.Check,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(u.Button,{size:"icon",variant:"ghost",onClick:()=>{N(!1),k(""),E(null)},className:"h-7 w-7 text-zinc-500 hover:bg-zinc-100",children:(0,t.jsx)(A.X,{className:"h-3.5 w-3.5"})})]})]}),T&&(0,t.jsx)("p",{className:"px-3 font-body text-xs text-status-danger",children:T})]}),!I&&(0,t.jsx)("p",{className:"font-body text-xs text-zinc-500",children:"Limite máximo de 10 etapas atingido."}),(0,t.jsx)(g.AlertDialog,{open:null!==y,onOpenChange:()=>b(null),children:(0,t.jsxs)(g.AlertDialogContent,{className:"rounded-[20px]",children:[(0,t.jsxs)(g.AlertDialogHeader,{children:[(0,t.jsxs)(g.AlertDialogTitle,{className:"font-heading text-xl",children:['Excluir etapa "',y?.name,'"?']}),(0,t.jsx)(g.AlertDialogDescription,{className:"font-body text-sm text-zinc-600",children:"Esta ação não pode ser desfeita. Todos os cards nesta etapa precisam ser movidos antes."})]}),(0,t.jsxs)(g.AlertDialogFooter,{children:[(0,t.jsx)(g.AlertDialogCancel,{className:"rounded-full",children:"Cancelar"}),(0,t.jsx)(g.AlertDialogAction,{onClick:()=>{y&&(i(e.id,y.id),b(null))},className:"rounded-full bg-status-danger text-white hover:bg-status-danger/90",children:"Sim, excluir"})]})]})})]})}var ea=e.i(80787);function en(){let e=(0,a.useRouter)(),{pipelines:l,deletePipeline:y}=(0,j.usePipelineStore)(),[b,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[C,k]=(0,s.useState)(null),[z,S]=(0,s.useState)(null),[A,M]=(0,s.useState)(null),T=l.length<5,E=l.filter(e=>e.isDefault).length,F=l.reduce((e,t)=>e+t.stages.length,0);return(0,t.jsxs)("div",{className:"flex gap-8",children:[(0,t.jsx)(ea.SettingsSecondaryNav,{activeKey:"pipeline"}),(0,t.jsxs)("div",{className:"min-w-0 flex-1 space-y-6",children:[(0,t.jsx)(p.ModuleCommandHeader,{title:"Gerenciar Funis",description:"Configure os funis e etapas do seu pipeline de vendas.",className:"premium-panel",meta:`Se\xe7\xe3o ativa: Pipeline \xb7 ${l.length} funis ativos`,chips:[{id:"default-funnel",label:`${E} padr\xe3o`,tone:E>0?"success":"warning",onClick:()=>{let e=l.find(e=>e.isDefault);if(e){S(e.id),M({type:"success",message:`Funil padr\xe3o "${e.name}" selecionado.`});return}M({type:"error",message:"Nenhum funil padrão configurado no momento."})}},{id:"stage-count",label:`${F} etapas`,tone:"info",onClick:()=>{M({type:"success",message:"Resumo de etapas exibido no painel de funis."})}}],actions:(0,t.jsx)("div",{className:"flex w-full flex-wrap items-center justify-end gap-2",children:(0,t.jsxs)(u.Button,{onClick:()=>v(!0),disabled:!T,className:"h-9 rounded-full bg-black font-heading text-sm text-white hover:bg-zinc-800",children:[(0,t.jsx)(n.Plus,{className:"mr-1.5 h-3.5 w-3.5"}),"Novo Funil"]})}),children:(0,t.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:z?"Gerenciando etapas do funil selecionado":"Selecione um funil para abrir o gerenciador de etapas"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(u.Button,{variant:"outline",size:"sm",className:"h-8 rounded-full",onClick:()=>e.push("/pipes"),children:"Ver pipeline"}),(0,t.jsx)(u.Button,{variant:"outline",size:"sm",className:"h-8 rounded-full",onClick:()=>S(e=>e?null:l[0]?.id??null),children:z?"Recolher etapas":"Expandir primeiro funil"})]})]})}),A&&(0,t.jsx)(x.InlineFeedback,{type:A.type,message:A.message,onClose:()=>M(null)}),!T&&(0,t.jsx)(m.Card,{className:"border-status-warning bg-status-warning/5",children:(0,t.jsxs)(m.CardContent,{className:"flex items-center gap-3 pt-6",children:[(0,t.jsx)(d.AlertTriangle,{className:"h-5 w-5 text-status-warning"}),(0,t.jsxs)("p",{className:"font-body text-sm text-zinc-700",children:["Você atingiu o limite de ",(0,t.jsx)("strong",{children:"5 funis"}),". Exclua um funil existente para criar um novo."]})]})}),(0,t.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,t.jsxs)(m.Card,{className:"rounded-[15px]",children:[(0,t.jsx)(m.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.CardTitle,{className:"font-heading text-xl",children:e.name}),e.isDefault&&(0,t.jsx)(h.Badge,{variant:"secondary",className:"rounded-[10px] font-body text-xs",children:"Padrão"}),(0,t.jsxs)(h.Badge,{variant:"outline",className:"rounded-[10px] font-body text-xs",children:[e.stages.length," etapas"]}),(0,t.jsxs)(h.Badge,{variant:"outline",className:"rounded-[10px] font-body text-xs",children:[e.cardCount," cards"]})]}),e.description&&(0,t.jsx)(m.CardDescription,{className:"mt-1 font-body text-sm",children:e.description})]}),(0,t.jsxs)(f.DropdownMenu,{children:[(0,t.jsx)(f.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(u.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",children:(0,t.jsx)(i,{className:"h-4 w-4"})})}),(0,t.jsxs)(f.DropdownMenuContent,{align:"end",className:"rounded-[15px]",children:[(0,t.jsxs)(f.DropdownMenuItem,{onClick:()=>w(e),children:[(0,t.jsx)(c,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,t.jsxs)(f.DropdownMenuItem,{onClick:()=>S(z===e.id?null:e.id),children:[(0,t.jsx)(r,{className:"mr-2 h-4 w-4"}),"Gerenciar Etapas"]}),(0,t.jsx)(f.DropdownMenuSeparator,{}),(0,t.jsxs)(f.DropdownMenuItem,{onClick:()=>k(e),disabled:e.isDefault,className:"text-status-danger focus:text-status-danger",children:[(0,t.jsx)(o.Trash2,{className:"mr-2 h-4 w-4"}),e.isDefault?"Não pode excluir padrão":"Excluir"]})]})]})]})}),z===e.id&&(0,t.jsx)(m.CardContent,{className:"border-t border-zinc-100 pt-6",children:(0,t.jsx)(es,{pipeline:e})})]},e.id))}),0===l.length&&(0,t.jsx)(m.Card,{className:"rounded-[15px]",children:(0,t.jsx)(m.CardContent,{className:"flex flex-col items-center justify-center py-12",children:(0,t.jsx)("p",{className:"font-body text-sm text-zinc-500",children:"Nenhum funil configurado. Crie o primeiro funil para começar."})})}),(0,t.jsx)(D,{open:b||null!==N,onOpenChange:e=>{e||(v(!1),w(null))},pipeline:N}),(0,t.jsx)(g.AlertDialog,{open:null!==C,onOpenChange:()=>k(null),children:(0,t.jsxs)(g.AlertDialogContent,{className:"max-w-[calc(100%-2rem)] rounded-[20px] sm:max-w-lg",children:[(0,t.jsxs)(g.AlertDialogHeader,{children:[(0,t.jsxs)(g.AlertDialogTitle,{className:"font-heading text-xl",children:['Excluir funil "',C?.name,'"?']}),(0,t.jsx)(g.AlertDialogDescription,{className:"font-body text-sm text-zinc-600",children:C&&C.cardCount>0?(0,t.jsxs)(t.Fragment,{children:["Não é possível excluir este funil porque existem"," ",(0,t.jsxs)("strong",{children:[C.cardCount," cards"]})," associados a ele.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"Mova ou exclua todos os cards antes de continuar."]}):(0,t.jsx)(t.Fragment,{children:"Esta ação não pode ser desfeita. Todas as etapas deste funil serão removidas permanentemente."})})]}),(0,t.jsxs)(g.AlertDialogFooter,{children:[(0,t.jsx)(g.AlertDialogCancel,{className:"rounded-full",children:"Cancelar"}),C&&0===C.cardCount&&(0,t.jsx)(g.AlertDialogAction,{onClick:()=>{if(C){if(C.cardCount>0){M({type:"error",message:`N\xe3o \xe9 poss\xedvel excluir. Existem ${C.cardCount} cards neste funil.`}),k(null);return}y(C.id),M({type:"success",message:`Funil exclu\xeddo. O funil "${C.name}" foi removido.`}),setTimeout(()=>M(null),3e3),k(null)}},className:"rounded-full bg-status-danger text-white hover:bg-status-danger/90",children:"Sim, excluir"})]})]})})]})]})}e.s(["default",()=>en],97710)}]);
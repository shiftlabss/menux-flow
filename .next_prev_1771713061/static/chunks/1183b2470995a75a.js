(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68109,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(21218),l=e.i(17923),i=e.i(31245),r=e.i(43531),n=e.i(73375),o=e.i(23934),c=e.i(74886),d=e.i(12426),u=e.i(27365),m=e.i(78583),p=e.i(94918),x=e.i(87130),h=e.i(90597),b=e.i(27516),v=e.i(55436),g=e.i(83086),f=e.i(70273),j=e.i(61911),w=e.i(37727),N=e.i(46932),z=e.i(45060),y=e.i(81469),S=e.i(34682),C=e.i(99753),k=e.i(19455),F=e.i(87486),R=e.i(93479),A=e.i(2747),T=e.i(37822),E=e.i(67489),L=e.i(46798);let I=["16/02/2026 08:40","16/02/2026 09:15","16/02/2026 10:05","16/02/2026 11:20","16/02/2026 13:10","16/02/2026 14:45"],M=[{id:"pipeline-performance",title:"Pipeline Performance",description:"Conversão por etapa, velocidade do funil e gargalos de avanço.",category:"Vendas",tags:["conversão","velocidade","gargalos"],icon:(0,a.jsx)(l.BarChart3,{className:"h-5 w-5"})},{id:"conversion-by-seller",title:"Conversão por vendedor",description:"Comparativo de conversão, receita e ritmo de fechamento por pessoa.",category:"Vendas",tags:["ranking","receita","fechamento"],icon:(0,a.jsx)(j.Users,{className:"h-5 w-5"})},{id:"activities-by-type",title:"Atividades por tipo",description:"Distribuição das atividades e impacto no SLA operacional.",category:"Operacional",tags:["cadência","SLA","execução"],icon:(0,a.jsx)(t.Activity,{className:"h-5 w-5"})},{id:"monthly-revenue",title:"Receita mensal",description:"Meta versus realizado e variações da curva de receita.",category:"Financeiro",tags:["meta","realizado","variação"],icon:(0,a.jsx)(d.DollarSign,{className:"h-5 w-5"})},{id:"health-score-overview",title:"Health score overview",description:"Saúde da carteira por faixa e tendência de risco.",category:"CS",tags:["saúde","churn","risco"],icon:(0,a.jsx)(h.Heart,{className:"h-5 w-5"})},{id:"sla-compliance",title:"SLA compliance",description:"Cumprimento de SLA por etapa, responsável e exceções.",category:"Operacional",tags:["SLA","estouro","responsável"],icon:(0,a.jsx)(o.Clock3,{className:"h-5 w-5"})}],$={"pipeline-performance":{chartTitle:"Funil e velocidade por etapa",chart:[{label:"Lead-In",value:72},{label:"Contato",value:58},{label:"Reunião",value:64},{label:"Proposta",value:45},{label:"Negociação",value:38},{label:"Fechamento",value:21}],kpis:[{id:"kpi-1",label:"Conversão média",value:"31%",subtext:"pipeline total",tone:"info"},{id:"kpi-2",label:"Tempo médio",value:"17 dias",subtext:"lead até fechamento",tone:"warning"},{id:"kpi-3",label:"Em risco",value:"12",subtext:"oportunidades estagnadas",tone:"warning"}],table:{columns:["Etapa","Qtd","Valor","Conversão"],rows:[{label:"Lead-In",values:["72","R$ 880.000","100%"]},{label:"Contato Feito",values:["58","R$ 740.000","80%"]},{label:"Reunião Agendada",values:["64","R$ 690.000","74%"]},{label:"Proposta Enviada",values:["45","R$ 430.000","52%"]},{label:"Negociação",values:["38","R$ 320.000","44%"]},{label:"Fechamento",values:["21","R$ 205.000","31%"]}]},sentence:"O relatório indica queda de avanço entre proposta e negociação.",findings:["Maior gargalo está na transição de proposta para negociação.","Leads quentes estão acumulando 6+ dias sem próxima ação.","3 responsáveis concentram 68% do volume em risco."],anomalies:["Volume alto em reunião sem reflexo proporcional em proposta.","Taxa de avanço caiu 9 pontos na última semana."],questions:["Quais propostas estão sem follow-up há mais de 4 dias?","Quais segmentos convertem melhor em menos de 7 dias?","Onde vale redistribuir carteira para aumentar fechamento?"],recommendations:[{id:"pipeline-proposal",label:"Ver apenas etapa Proposta",patch:{status:"Proposta"},result:"Filtro aplicado: etapa Proposta."},{id:"pipeline-owner",label:"Filtrar por responsável Ana Souza",patch:{owner:"Ana Souza"},result:"Filtro aplicado: responsável Ana Souza."},{id:"pipeline-risk",label:"Mostrar oportunidades em risco",patch:{status:"Em risco"},result:"Filtro aplicado: oportunidades em risco."}]},"conversion-by-seller":{chartTitle:"Conversão e receita por vendedor",chart:[{label:"Ana",value:38},{label:"Carlos",value:31},{label:"Fernanda",value:29},{label:"Pedro",value:27},{label:"Julia",value:24}],kpis:[{id:"kpi-1",label:"Conversão líder",value:"38%",subtext:"Ana Souza",tone:"success"},{id:"kpi-2",label:"Média do time",value:"29%",subtext:"últimos 30 dias",tone:"info"},{id:"kpi-3",label:"Gap de receita",value:"R$ 84k",subtext:"top 1 vs top 5",tone:"warning"}],table:{columns:["Vendedor","Conversão","Receita","Velocidade"],rows:[{label:"Ana Souza",values:["38%","R$ 420.000","12 dias"]},{label:"Carlos Lima",values:["31%","R$ 360.000","15 dias"]},{label:"Fernanda Reis",values:["29%","R$ 315.000","16 dias"]},{label:"Pedro Alves",values:["27%","R$ 288.000","17 dias"]},{label:"Julia Mendes",values:["24%","R$ 236.000","19 dias"]}]},sentence:"A variação de conversão entre os vendedores está ampliando o gap de receita.",findings:["Top 2 vendedores concentram 56% da receita fechada.","Closers com velocidade acima de 16 dias perdem taxa de conversão.","Equipe com melhor sequência de follow-up converte 11 pontos a mais."],anomalies:["Carlos manteve volume alto, mas caiu 5 pontos de conversão.","Julia subiu receita sem aumento proporcional de oportunidades."],questions:["Quais negociações travam acima de 14 dias?","Quem precisa de coaching em proposta e fechamento?","Como replicar rotina do top performer no restante do time?"],recommendations:[{id:"conversion-owner",label:"Filtrar por responsável Carlos Lima",patch:{owner:"Carlos Lima"},result:"Filtro aplicado: responsável Carlos Lima."},{id:"conversion-segment",label:"Ver segmento Enterprise",patch:{segment:"Enterprise"},result:"Filtro aplicado: segmento Enterprise."},{id:"conversion-status",label:"Mostrar apenas negociação",patch:{status:"Negociação"},result:"Filtro aplicado: status Negociação."}]},"activities-by-type":{chartTitle:"Distribuição por tipo de atividade",chart:[{label:"Ligação",value:142},{label:"Reunião",value:86},{label:"E-mail",value:118},{label:"Follow-up",value:96},{label:"WhatsApp",value:74}],kpis:[{id:"kpi-1",label:"Atividades totais",value:"516",subtext:"últimos 30 dias",tone:"info"},{id:"kpi-2",label:"SLA no prazo",value:"87%",subtext:"execução operacional",tone:"success"},{id:"kpi-3",label:"SLAs estourados",value:"14",subtext:"requer ação imediata",tone:"warning"}],table:{columns:["Tipo","Executadas","Pendentes","SLA estourado"],rows:[{label:"Ligação",values:["142","18","4"]},{label:"Reunião",values:["86","9","2"]},{label:"E-mail",values:["118","14","3"]},{label:"Follow-up",values:["96","11","4"]},{label:"WhatsApp",values:["74","7","1"]}]},sentence:"A operação mantém volume alto, mas o SLA estourado se concentra em follow-ups.",findings:["Follow-up concentra 29% dos atrasos operacionais.","Ligação tem maior volume e menor taxa de cancelamento.","Equipe de manhã executa 18% mais atividades no prazo."],anomalies:["Pico de pendências às sextas após 16h.","Reuniões canceladas subiram 22% na semana."],questions:["Quais responsáveis acumulam mais follow-ups estourados?","Como redistribuir agenda para reduzir gargalo do fim do dia?","Quais tipos puxam mais conversão real no funil?"],recommendations:[{id:"activities-sla",label:"Mostrar apenas SLAs estourados",patch:{status:"SLA estourado"},result:"Filtro aplicado: apenas SLAs estourados."},{id:"activities-owner",label:"Filtrar responsável Fernanda Reis",patch:{owner:"Fernanda Reis"},result:"Filtro aplicado: responsável Fernanda Reis."},{id:"activities-segment",label:"Filtrar segmento SMB",patch:{segment:"SMB"},result:"Filtro aplicado: segmento SMB."}]},"monthly-revenue":{chartTitle:"Receita mensal x meta",chart:[{label:"Set",value:185},{label:"Out",value:210},{label:"Nov",value:198},{label:"Dez",value:265},{label:"Jan",value:240},{label:"Fev",value:215}],kpis:[{id:"kpi-1",label:"Receita atual",value:"R$ 215k",subtext:"mês corrente",tone:"info"},{id:"kpi-2",label:"Atingimento",value:"72%",subtext:"meta mensal",tone:"warning"},{id:"kpi-3",label:"Variação mês",value:"-10%",subtext:"vs mês anterior",tone:"warning"}],table:{columns:["Mês","Receita","Meta","Atingimento"],rows:[{label:"Setembro",values:["R$ 185.000","R$ 200.000","93%"]},{label:"Outubro",values:["R$ 210.000","R$ 220.000","95%"]},{label:"Novembro",values:["R$ 198.000","R$ 250.000","79%"]},{label:"Dezembro",values:["R$ 265.000","R$ 280.000","95%"]},{label:"Janeiro",values:["R$ 240.000","R$ 300.000","80%"]},{label:"Fevereiro",values:["R$ 215.000","R$ 300.000","72%"]}]},sentence:"A receita segue abaixo da meta no mês atual, com desaceleração na última quinzena.",findings:["Atingimento atual está 8 pontos abaixo do ritmo necessário.","Receita enterprise caiu enquanto SMB manteve volume estável.","Conversão de propostas acima de R$ 20k reduziu no período."],anomalies:["Queda abrupta de fechamento após dia 10.","Ticket médio caiu 14% em contas novas."],questions:["Quais negociações podem fechar até sexta-feira?","Onde ajustar desconto para manter margem e fechar mais rápido?","Como proteger receita recorrente do próximo mês?"],recommendations:[{id:"revenue-segment",label:"Filtrar segmento Enterprise",patch:{segment:"Enterprise"},result:"Filtro aplicado: segmento Enterprise."},{id:"revenue-status",label:"Ver apenas propostas abertas",patch:{status:"Proposta"},result:"Filtro aplicado: propostas abertas."},{id:"revenue-owner",label:"Filtrar responsável Pedro Alves",patch:{owner:"Pedro Alves"},result:"Filtro aplicado: responsável Pedro Alves."}]},"health-score-overview":{chartTitle:"Distribuição de health score",chart:[{label:"Saudável",value:42},{label:"Atenção",value:15},{label:"Crítico",value:7},{label:"Churn",value:1}],kpis:[{id:"kpi-1",label:"Saudáveis",value:"42",subtext:"65% da carteira",tone:"success"},{id:"kpi-2",label:"Em atenção",value:"15",subtext:"23% da carteira",tone:"warning"},{id:"kpi-3",label:"Críticos",value:"7",subtext:"prioridade de retenção",tone:"warning"}],table:{columns:["Categoria","Clientes","% da carteira","Tendência"],rows:[{label:"Saudável",values:["42","65%","+5%"]},{label:"Atenção",values:["15","23%","-2%"]},{label:"Crítico",values:["7","11%","-1%"]},{label:"Churn",values:["1","1%","0%"]}]},sentence:"A carteira está saudável, porém os clientes críticos exigem plano de retenção imediato.",findings:["Clientes em atenção reduziram em comparação à semana anterior.","Grupo crítico concentra contas com 20+ dias sem interação.","Equipe CS com menor carga tem melhor recuperação de health score."],anomalies:["Dois clientes premium migraram de saudável para atenção em 3 dias.","Conta crítica sem atividade registrada na semana."],questions:["Quais clientes críticos estão sem contato recente?","Quais ações reduziram churn no último trimestre?","Que responsáveis precisam de plano de retenção imediato?"],recommendations:[{id:"health-critical",label:"Mostrar apenas clientes críticos",patch:{status:"Crítico"},result:"Filtro aplicado: clientes críticos."},{id:"health-owner",label:"Filtrar responsável Julia Mendes",patch:{owner:"Julia Mendes"},result:"Filtro aplicado: responsável Julia Mendes."},{id:"health-segment",label:"Filtrar segmento Mid-Market",patch:{segment:"Mid-Market"},result:"Filtro aplicado: segmento Mid-Market."}]},"sla-compliance":{chartTitle:"Compliance de SLA por etapa",chart:[{label:"Lead-In",value:83},{label:"Contato",value:88},{label:"Reunião",value:80},{label:"Proposta",value:71},{label:"Negociação",value:67},{label:"Fechamento",value:100}],kpis:[{id:"kpi-1",label:"SLA no prazo",value:"81%",subtext:"média do funil",tone:"success"},{id:"kpi-2",label:"Próximo do limite",value:"11%",subtext:"itens em risco",tone:"warning"},{id:"kpi-3",label:"Estourados",value:"8%",subtext:"prioridade operacional",tone:"warning"}],table:{columns:["Etapa","No prazo","Em risco","Estourado"],rows:[{label:"Lead-In",values:["83%","9%","8%"]},{label:"Contato Feito",values:["88%","7%","5%"]},{label:"Reunião Agendada",values:["80%","10%","10%"]},{label:"Proposta Enviada",values:["71%","15%","14%"]},{label:"Negociação",values:["67%","19%","14%"]},{label:"Fechamento",values:["100%","0%","0%"]}]},sentence:"As etapas de proposta e negociação concentram maior risco de estouro de SLA.",findings:["Negociação acumula mais itens próximos do limite.","Fechamento mantém compliance total, sem exceções.","Equipe com menor backlog mantém SLA 12 pontos acima da média."],anomalies:["Aumento de estouro em proposta nas últimas 48h.","SLA de negociação caiu 6 pontos na semana."],questions:["Quais responsáveis concentram maior risco operacional?","Quais etapas precisam de reforço de cadência?","Como reduzir backlog sem sacrificar conversão?"],recommendations:[{id:"sla-breached",label:"Mostrar apenas SLAs estourados",patch:{status:"SLA estourado"},result:"Filtro aplicado: SLAs estourados."},{id:"sla-owner",label:"Filtrar responsável Carlos Lima",patch:{owner:"Carlos Lima"},result:"Filtro aplicado: responsável Carlos Lima."},{id:"sla-stage",label:"Ver etapa Proposta",patch:{status:"Proposta"},result:"Filtro aplicado: etapa Proposta."}]}},P={Vendas:"border-blue-200 bg-blue-50 text-blue-700",Operacional:"border-zinc-200 bg-zinc-100 text-zinc-700",Financeiro:"border-emerald-200 bg-emerald-50 text-emerald-700",CS:"border-violet-200 bg-violet-50 text-violet-700"},B={neutral:"border-zinc-200 bg-zinc-50 text-zinc-700",info:"border-blue-200 bg-blue-50 text-blue-700",warning:"border-amber-200 bg-amber-50 text-amber-700",success:"border-emerald-200 bg-emerald-50 text-emerald-700"};function V(){let[e,t]=(0,s.useState)(!0),[i,o]=(0,s.useState)(""),[d,h]=(0,s.useState)(""),[j,A]=(0,s.useState)("Todos"),[P,V]=(0,s.useState)("all"),[O,D]=(0,s.useState)(null),[U,X]=(0,s.useState)(()=>new Set(["pipeline-performance","monthly-revenue"])),[K,W]=(0,s.useState)([]),[Y,Z]=(0,s.useState)({period:"Últimos 30 dias",pipeline:"Leads",owner:"Todos",status:"Todos",segment:"Todos"}),[ee,ea]=(0,s.useState)(!1),[es,et]=(0,s.useState)(null),[el,ei]=(0,s.useState)(0),[er,en]=(0,s.useState)(null),[eo,ec]=(0,s.useState)(null),[ed,eu]=(0,s.useState)(null),[em,ep]=(0,s.useState)(null),[ex,eh]=(0,s.useState)(null),[eb,ev]=(0,s.useState)(!1),[eg,ef]=(0,s.useState)(null),[ej,ew]=(0,s.useState)(null),[eN,ez]=(0,s.useState)(!1),[ey,eS]=(0,s.useState)("configure"),[eC,ek]=(0,s.useState)(!1),[eF,eR]=(0,s.useState)(!1),[eA,eT]=(0,s.useState)(!1),[eE,eL]=(0,s.useState)(!1),[eI,eM]=(0,s.useState)(!1),[e$,eP]=(0,s.useState)(null),eB=(0,s.useRef)(!1);(0,s.useEffect)(()=>{let e=window.setTimeout(()=>t(!1),720);return()=>window.clearTimeout(e)},[]),(0,s.useEffect)(()=>{let e=window.setTimeout(()=>h(i.trim()),250);return()=>window.clearTimeout(e)},[i]),(0,s.useEffect)(()=>{let e=window.matchMedia("(min-width: 1024px)"),a=window.matchMedia("(min-width: 1280px)"),s=window.matchMedia("(max-width: 767px)"),t=()=>{ek(e.matches),eR(a.matches),eT(s.matches),e.matches&&ez(!1),s.matches&&eS("configure"),a.matches&&!eB.current&&(ev(!0),eB.current=!0),a.matches||ev(!1)};return t(),e.addEventListener("change",t),a.addEventListener("change",t),s.addEventListener("change",t),()=>{e.removeEventListener("change",t),a.removeEventListener("change",t),s.removeEventListener("change",t)}},[]),(0,s.useEffect)(()=>{if(!er)return;let e=window.setTimeout(()=>en(null),2200);return()=>window.clearTimeout(e)},[er]),(0,s.useEffect)(()=>{if(!eo)return;let e=window.setTimeout(()=>ec(null),2200);return()=>window.clearTimeout(e)},[eo]),(0,s.useEffect)(()=>{if(!ex)return;let e=window.setTimeout(()=>eh(null),1200);return()=>window.clearTimeout(e)},[ex]),(0,s.useEffect)(()=>{if(!ej)return;let e=window.setTimeout(()=>ew(null),1200);return()=>window.clearTimeout(e)},[ej]),(0,s.useEffect)(()=>{if(!e$)return;let e=window.setTimeout(()=>eP(null),1200);return()=>window.clearTimeout(e)},[e$]);let eV=(0,s.useMemo)(()=>M.find(e=>e.id===O)??null,[O]),e_=(0,s.useMemo)(()=>O?$[O]:null,[O]),eO=(0,s.useMemo)(()=>{let e=[];for(let a of K)if(e.includes(a.reportId)||e.push(a.reportId),6===e.length)break;return e},[K]),eq=(0,s.useMemo)(()=>eO.map(e=>M.find(a=>a.id===e)).filter(e=>!!e),[eO]),eG=(0,s.useMemo)(()=>M.filter(e=>{if("Todos"!==j&&e.category!==j||"favorites"===P&&!U.has(e.id)||"recent"===P&&!eO.includes(e.id))return!1;if(d){let a=d.toLowerCase(),s=e.title.toLowerCase().includes(a),t=e.description.toLowerCase().includes(a),l=e.tags.some(e=>e.toLowerCase().includes(a));if(!s&&!t&&!l)return!1}return!0}),[j,U,d,P,eO]),eQ=(0,s.useMemo)(()=>K.map(e=>{let a=M.find(a=>a.id===e.reportId);return a?{...e,title:a.title}:null}).filter(e=>!!e),[K]),eD=(0,s.useMemo)(()=>!O||("monthly-revenue"!==O||"Inativo"!==Y.segment)&&("sla-compliance"!==O||"Sem dados"!==Y.status),[Y.segment,Y.status,O]),eJ=(0,s.useMemo)(()=>{let e=[];return"Todos"!==j&&e.push({id:"category",label:`Categoria: ${j}`,onClear:()=>A("Todos")}),"favorites"===P&&e.push({id:"status-favorites",label:"Favoritos",onClear:()=>V("all")}),"recent"===P&&e.push({id:"status-recent",label:"Recentes",onClear:()=>V("all")}),d&&e.push({id:"search",label:`Busca: ${d}`,onClear:()=>{o(""),h("")}}),e},[j,d,P]),eH=(0,s.useCallback)(e=>{D(e),eP(e),eA&&eS("configure"),eC||ez(!1)},[eC,eA]),eU=(0,s.useCallback)(e=>{X(a=>{let s=new Set(a);return s.has(e)?s.delete(e):s.add(e),s})},[]),eX=(0,s.useCallback)(e=>{let a=e??O;a&&(e&&eH(e),et(null),ea(!0),eM(!1),window.setTimeout(()=>{let e=(K.length+el)%I.length;ea(!1),et(a),ei(e=>e+1),W(s=>[{reportId:a,generatedAt:I[e]},...s]),en({type:"success",message:"Relatório gerado com sucesso."}),eA&&eS("visualize")},900))},[el,K.length,eA,eH,O]),eK=(0,s.useCallback)(async e=>{eV&&e_&&(eu(e),window.setTimeout(async()=>{try{if("copy"===e){if("u"<typeof navigator||!navigator.clipboard)throw Error("clipboard unavailable");await navigator.clipboard.writeText(`Relat\xf3rio: ${eV.title}
Per\xedodo: ${Y.period}
Funil: ${Y.pipeline}
Respons\xe1vel: ${Y.owner}
Status: ${Y.status}
Segmento: ${Y.segment}
Resumo: ${e_.sentence}`),ec({type:"success",message:"Resumo copiado."}),eu(null);return}let a=e_.table.rows.map(e=>{let a={[e_.table.columns[0]]:e.label};return e.values.forEach((e,s)=>{a[e_.table.columns[s+1]]=e}),a}),s=`relatorio-${eV.id}`;"csv"===e&&(0,y.exportToCSV)(a,s),"pdf"===e&&(0,y.exportToPDF)(a,s,eV.title),"excel"===e&&(0,y.exportToExcel)(a,s),ec({type:"success",message:`Exportado em ${e.toUpperCase()}.`})}catch{ec({type:"error",message:"Falha ao exportar. Tente novamente."})}finally{eu(null)}},180))},[Y,eV,e_]),eW=(0,s.useCallback)(e=>{ep(e.id),window.setTimeout(()=>{Z(a=>({...a,...e.patch})),ep(null),eh(e.result)},180)},[]),eY=(0,s.useCallback)((e,a,s)=>{ef(e),window.setTimeout(()=>{s?.(),ef(null),ew(a)},220)},[]),eZ=(0,s.useCallback)(e=>{eH(e),et(null)},[eH]),e0=(0,s.useCallback)(e=>{eH(e),et(e),eA&&eS("visualize")},[eA,eH]),e1=(0,s.useCallback)(()=>{A("Todos"),V("all"),o(""),h("")},[]),e2=(0,s.useCallback)(()=>{e1(),D(null),et(null),eP(null),eC||ez(!0)},[e1,eC]);return e?(0,a.jsx)(H,{}):(0,a.jsx)(L.TooltipProvider,{children:(0,a.jsxs)(N.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18,ease:[.25,.46,.45,.94]},className:"flex h-[calc(100dvh-2rem)] min-h-0 w-full max-w-full flex-col gap-4",children:[er?(0,a.jsx)(C.InlineFeedback,{type:er.type,message:er.message,compact:!0,onClose:()=>en(null)}):null,(0,a.jsx)(N.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.16,delay:.02,ease:"easeOut"},className:"shrink-0",children:(0,a.jsx)(S.ModuleCommandHeader,{title:"Relatórios",description:"Gere, exporte e interprete dados do CRM",chips:eJ.map(e=>({id:e.id,label:e.label,tone:"info",onClick:e.onClear})),actions:(0,a.jsx)("div",{className:"flex w-full min-w-0 flex-wrap items-center gap-2 xl:justify-end",children:(0,a.jsxs)(T.Popover,{children:[(0,a.jsx)(T.PopoverTrigger,{asChild:!0,children:(0,a.jsxs)(k.Button,{variant:"outline",size:"sm",className:"h-9 rounded-full",children:[(0,a.jsx)(b.History,{className:"h-3.5 w-3.5"}),"Histórico"]})}),(0,a.jsxs)(T.PopoverContent,{align:"end",className:"w-[min(92vw,340px)] rounded-[14px] border-zinc-200 bg-white p-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-zinc-500",children:"Últimos relatórios"}),(0,a.jsx)("div",{className:"mt-2 space-y-2",children:eQ.length>0?eQ.slice(0,8).map((e,s)=>(0,a.jsxs)("button",{type:"button",onClick:()=>e0(e.reportId),className:"flex w-full items-center justify-between rounded-[10px] border border-zinc-200 bg-zinc-50/80 px-2.5 py-2 text-left text-xs transition-colors hover:bg-zinc-100",children:[(0,a.jsx)("span",{className:"truncate pr-2 text-zinc-700",children:e.title}),(0,a.jsx)("span",{className:"text-zinc-500",children:e.generatedAt})]},`${e.reportId}-${e.generatedAt}-${s}`)):(0,a.jsx)("div",{className:"rounded-[10px] border border-dashed border-zinc-200 bg-zinc-50 p-3 text-xs text-zinc-500",children:"Ainda não há relatórios gerados."})})]})]})}),children:(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 lg:flex-row lg:items-center lg:justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[["Todos","Vendas","Operacional","Financeiro","CS"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>A(e),className:(0,z.cn)("inline-flex h-8 items-center rounded-full border px-3 text-xs font-medium transition-colors duration-120",j===e?"border-zinc-300 bg-white text-zinc-900":"border-zinc-200 bg-white/90 text-zinc-600 hover:bg-zinc-50"),children:e},e)),(0,a.jsx)("span",{className:"ml-1 text-xs font-medium text-zinc-500",children:"Status:"}),(0,a.jsxs)("button",{type:"button",onClick:()=>V(e=>"favorites"===e?"all":"favorites"),className:(0,z.cn)("inline-flex h-8 items-center gap-1.5 rounded-full border px-3 text-xs font-medium transition-colors duration-120","favorites"===P?"border-amber-300 bg-amber-50 text-amber-700":"border-zinc-200 bg-white/90 text-zinc-600 hover:bg-zinc-50"),children:[(0,a.jsx)(f.Star,{className:"h-3.5 w-3.5"}),"Favoritos"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>V(e=>"recent"===e?"all":"recent"),className:(0,z.cn)("inline-flex h-8 items-center gap-1.5 rounded-full border px-3 text-xs font-medium transition-colors duration-120","recent"===P?"border-blue-300 bg-blue-50 text-blue-700":"border-zinc-200 bg-white/90 text-zinc-600 hover:bg-zinc-50"),children:[(0,a.jsx)(b.History,{className:"h-3.5 w-3.5"}),"Recentes"]})]}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-wrap items-center gap-2 lg:justify-end",children:[(0,a.jsxs)("div",{className:"group relative min-w-[220px] flex-1 max-w-[360px]",children:[(0,a.jsx)(v.Search,{className:"pointer-events-none absolute left-2.5 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-zinc-400"}),(0,a.jsx)(R.Input,{value:i,onChange:e=>o(e.target.value),placeholder:"Buscar relatórios",className:"h-9 rounded-full pl-8 pr-8 text-sm"}),i?(0,a.jsx)("button",{type:"button",onClick:()=>{o(""),h("")},className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-zinc-400 transition-opacity hover:text-zinc-700 sm:opacity-0 sm:group-hover:opacity-100","aria-label":"Limpar busca",children:(0,a.jsx)(w.X,{className:"h-3.5 w-3.5"})}):null]}),eC?null:(0,a.jsxs)(k.Button,{variant:"outline",size:"sm",className:"h-9 rounded-full",onClick:()=>ez(!0),children:[(0,a.jsx)(x.Filter,{className:"h-3.5 w-3.5"}),"Biblioteca"]}),eJ.length>0?(0,a.jsx)(k.Button,{variant:"ghost",size:"sm",className:"h-9 rounded-full text-xs text-zinc-500 hover:text-zinc-900",onClick:e1,children:"Limpar filtros"}):null]})]})})}),(0,a.jsx)(N.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.16,delay:.05,ease:"easeOut"},className:"min-h-0 flex-1",children:(0,a.jsxs)("div",{className:(0,z.cn)("grid h-full min-h-0 gap-4",eC?"grid-cols-[minmax(320px,0.4fr)_minmax(0,0.6fr)]":"grid-cols-1"),children:[eC?(0,a.jsx)(_,{reports:eG,selectedReportId:O,favoriteReportIds:U,recentReports:eq,libraryError:eE,onRetry:()=>eL(!1),onSelect:eH,onToggleFavorite:eU,onGenerate:e=>eX(e),onPreview:eH,highlightCardId:e$}):null,(0,a.jsx)("div",{className:"min-h-0 min-w-0 overflow-hidden rounded-[20px] border border-zinc-200/80 bg-white/82 shadow-[0_16px_32px_-28px_rgba(15,23,42,0.45)]",children:(0,a.jsxs)("div",{className:"flex h-full min-h-0 min-w-0 gap-3 p-3",children:[(0,a.jsx)("div",{className:"min-h-0 min-w-0 flex-1 overflow-y-auto pr-1",children:eV&&e_?(0,a.jsxs)("div",{className:"space-y-3 pb-3",children:[eI?(0,a.jsx)(J,{message:"Falha ao gerar visualização do relatório.",onRetry:()=>eM(!1)}):null,eA?(0,a.jsxs)("div",{className:"inline-flex h-9 items-center rounded-full border border-zinc-200 bg-zinc-50/90 p-1",children:[(0,a.jsx)("button",{type:"button",onClick:()=>eS("configure"),className:(0,z.cn)("h-7 rounded-full px-3 text-xs font-medium transition-colors duration-120","configure"===ey?"bg-white text-zinc-900 shadow-sm":"text-zinc-500 hover:text-zinc-900"),children:"Configurar"}),(0,a.jsx)("button",{type:"button",onClick:()=>eS("visualize"),className:(0,z.cn)("h-7 rounded-full px-3 text-xs font-medium transition-colors duration-120","visualize"===ey?"bg-white text-zinc-900 shadow-sm":"text-zinc-500 hover:text-zinc-900"),children:"Visualizar"})]}):null,eA&&"configure"!==ey?null:(0,a.jsxs)("section",{className:"rounded-[16px] border border-zinc-200 bg-zinc-50/80 p-3",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-heading text-base font-semibold text-zinc-900",children:"Configurações do relatório"}),(0,a.jsx)("p",{className:"text-xs text-zinc-500",children:eV.title})]}),(0,a.jsx)(k.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full text-zinc-500",onClick:()=>D(null),"aria-label":"Fechar relatório selecionado",children:(0,a.jsx)(n.ChevronLeft,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2 xl:grid-cols-3",children:[(0,a.jsxs)(E.Select,{value:Y.period,onValueChange:e=>Z(a=>({...a,period:e})),children:[(0,a.jsx)(E.SelectTrigger,{className:"h-9 rounded-[12px] bg-white",children:(0,a.jsx)(E.SelectValue,{placeholder:"Período"})}),(0,a.jsxs)(E.SelectContent,{className:"rounded-[12px]",children:[(0,a.jsx)(E.SelectItem,{value:"Últimos 7 dias",children:"Últimos 7 dias"}),(0,a.jsx)(E.SelectItem,{value:"Últimos 30 dias",children:"Últimos 30 dias"}),(0,a.jsx)(E.SelectItem,{value:"Este mês",children:"Este mês"}),(0,a.jsx)(E.SelectItem,{value:"Trimestre atual",children:"Trimestre atual"}),(0,a.jsx)(E.SelectItem,{value:"Ano atual",children:"Ano atual"})]})]}),(0,a.jsxs)(E.Select,{value:Y.pipeline,onValueChange:e=>Z(a=>({...a,pipeline:e})),children:[(0,a.jsx)(E.SelectTrigger,{className:"h-9 rounded-[12px] bg-white",children:(0,a.jsx)(E.SelectValue,{placeholder:"Funil"})}),(0,a.jsxs)(E.SelectContent,{className:"rounded-[12px]",children:[(0,a.jsx)(E.SelectItem,{value:"Leads",children:"Leads"}),(0,a.jsx)(E.SelectItem,{value:"Enterprise",children:"Enterprise"}),(0,a.jsx)(E.SelectItem,{value:"Inside Sales",children:"Inside Sales"})]})]}),(0,a.jsxs)(E.Select,{value:Y.owner,onValueChange:e=>Z(a=>({...a,owner:e})),children:[(0,a.jsx)(E.SelectTrigger,{className:"h-9 rounded-[12px] bg-white",children:(0,a.jsx)(E.SelectValue,{placeholder:"Responsável"})}),(0,a.jsxs)(E.SelectContent,{className:"rounded-[12px]",children:[(0,a.jsx)(E.SelectItem,{value:"Todos",children:"Todos"}),(0,a.jsx)(E.SelectItem,{value:"Ana Souza",children:"Ana Souza"}),(0,a.jsx)(E.SelectItem,{value:"Carlos Lima",children:"Carlos Lima"}),(0,a.jsx)(E.SelectItem,{value:"Fernanda Reis",children:"Fernanda Reis"}),(0,a.jsx)(E.SelectItem,{value:"Pedro Alves",children:"Pedro Alves"}),(0,a.jsx)(E.SelectItem,{value:"Julia Mendes",children:"Julia Mendes"})]})]}),(0,a.jsxs)(E.Select,{value:Y.status,onValueChange:e=>Z(a=>({...a,status:e})),children:[(0,a.jsx)(E.SelectTrigger,{className:"h-9 rounded-[12px] bg-white",children:(0,a.jsx)(E.SelectValue,{placeholder:"Status"})}),(0,a.jsxs)(E.SelectContent,{className:"rounded-[12px]",children:[(0,a.jsx)(E.SelectItem,{value:"Todos",children:"Todos"}),(0,a.jsx)(E.SelectItem,{value:"Proposta",children:"Proposta"}),(0,a.jsx)(E.SelectItem,{value:"Negociação",children:"Negociação"}),(0,a.jsx)(E.SelectItem,{value:"Fechado",children:"Fechado"}),(0,a.jsx)(E.SelectItem,{value:"Em risco",children:"Em risco"}),(0,a.jsx)(E.SelectItem,{value:"SLA estourado",children:"SLA estourado"}),(0,a.jsx)(E.SelectItem,{value:"Sem dados",children:"Sem dados"})]})]}),(0,a.jsxs)(E.Select,{value:Y.segment,onValueChange:e=>Z(a=>({...a,segment:e})),children:[(0,a.jsx)(E.SelectTrigger,{className:"h-9 rounded-[12px] bg-white",children:(0,a.jsx)(E.SelectValue,{placeholder:"Segmento"})}),(0,a.jsxs)(E.SelectContent,{className:"rounded-[12px]",children:[(0,a.jsx)(E.SelectItem,{value:"Todos",children:"Todos"}),(0,a.jsx)(E.SelectItem,{value:"SMB",children:"SMB"}),(0,a.jsx)(E.SelectItem,{value:"Mid-Market",children:"Mid-Market"}),(0,a.jsx)(E.SelectItem,{value:"Enterprise",children:"Enterprise"}),(0,a.jsx)(E.SelectItem,{value:"Inativo",children:"Inativo"})]})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Ajuste os filtros e gere o relatório com preview."}),(0,a.jsxs)(k.Button,{className:"h-8 rounded-full bg-zinc-900 px-3 text-xs text-white hover:bg-zinc-800",onClick:()=>eX(),disabled:ee,children:[ee?(0,a.jsx)("span",{className:"mr-1 h-3 w-3 animate-spin rounded-full border border-white border-t-transparent"}):(0,a.jsx)(l.BarChart3,{className:"mr-1 h-3.5 w-3.5"}),"Gerar relatório"]})]})]}),eA&&"visualize"!==ey?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:"rounded-[16px] border border-zinc-200 bg-zinc-50/80 p-3",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("h3",{className:"font-heading text-base font-semibold text-zinc-900",children:"Preview do resultado"}),(0,a.jsx)("p",{className:"text-xs text-zinc-500",children:"Gráfico principal, KPIs e tabela de suporte."})]}),ee?(0,a.jsx)(G,{}):es===eV.id?eD?(0,a.jsxs)(N.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.16,ease:"easeOut"},className:"space-y-3",children:[(0,a.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-white p-3",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-zinc-900",children:e_.chartTitle}),(0,a.jsx)("span",{className:"text-[11px] text-zinc-500",children:Y.period})]}),(0,a.jsx)("div",{className:"space-y-2",children:e_.chart.map(e=>{let s=Math.max(...e_.chart.map(e=>e.value)),t=s>0?e.value/s*100:0;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-zinc-600",children:[(0,a.jsx)("span",{children:e.label}),(0,a.jsx)("span",{className:"font-medium text-zinc-900",children:e.value})]}),(0,a.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-zinc-100",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-zinc-700 transition-[width] duration-240",style:{width:`${t}%`}})})]},e.label)})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-3",children:e_.kpis.map(e=>(0,a.jsxs)("div",{className:"rounded-[12px] border border-zinc-200 bg-white p-2.5",children:[(0,a.jsx)("p",{className:"text-[11px] uppercase tracking-[0.08em] text-zinc-500",children:e.label}),(0,a.jsx)("p",{className:"mt-1 text-lg font-semibold text-zinc-900",children:e.value}),(0,a.jsx)(F.Badge,{className:(0,z.cn)("mt-1 rounded-full border px-2 py-0 text-[10px]",B[e.tone]),children:e.subtext})]},e.id))}),(0,a.jsx)("div",{className:"max-h-[260px] overflow-auto rounded-[14px] border border-zinc-200 bg-white",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10 bg-zinc-50",children:(0,a.jsx)("tr",{className:"border-b border-zinc-200",children:e_.table.columns.map((e,s)=>(0,a.jsx)("th",{className:(0,z.cn)("px-3 py-2 text-xs font-medium uppercase tracking-[0.05em] text-zinc-500",0===s?"text-left":"text-right"),children:e},e))})}),(0,a.jsx)("tbody",{children:e_.table.rows.map(e=>(0,a.jsxs)("tr",{className:"border-b border-zinc-100 hover:bg-zinc-50/70",children:[(0,a.jsx)("td",{className:"px-3 py-2 text-sm font-medium text-zinc-900",children:e.label}),e.values.map((s,t)=>(0,a.jsx)("td",{className:"px-3 py-2 text-right text-sm text-zinc-600",children:s},`${e.label}-${t}`))]},e.label))})]})}),(0,a.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-white p-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-zinc-500",children:"Insights da Menux Intelligence"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-zinc-700",children:e_.sentence}),(0,a.jsxs)("div",{className:"mt-2 grid gap-2 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"rounded-[10px] border border-zinc-200 bg-zinc-50 p-2.5",children:[(0,a.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-zinc-500",children:"Achados"}),(0,a.jsx)("ul",{className:"mt-1 space-y-1 text-xs text-zinc-600",children:e_.findings.map((e,s)=>(0,a.jsxs)("li",{className:"flex gap-1.5",children:[(0,a.jsx)(r.Check,{className:"mt-0.5 h-3.5 w-3.5 text-zinc-500"}),(0,a.jsx)("span",{children:e})]},s))})]}),(0,a.jsxs)("div",{className:"rounded-[10px] border border-zinc-200 bg-zinc-50 p-2.5",children:[(0,a.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.08em] text-zinc-500",children:"Ações recomendadas"}),(0,a.jsx)("div",{className:"mt-1 space-y-1.5",children:e_.recommendations.map(e=>(0,a.jsxs)(k.Button,{size:"sm",variant:"outline",className:"h-7 w-full justify-start rounded-full text-[11px]",onClick:()=>eW(e),disabled:em===e.id,children:[em===e.id?(0,a.jsx)("span",{className:"mr-1 h-3 w-3 animate-spin rounded-full border border-zinc-500 border-t-transparent"}):(0,a.jsx)(g.Sparkles,{className:"mr-1 h-3.5 w-3.5 text-zinc-500"}),e.label]},e.id))})]})]}),ex?(0,a.jsx)("div",{className:"mt-2 inline-flex rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-[11px] text-emerald-700",children:ex}):null]})]},`${eV.id}-${el}`):(0,a.jsxs)("div",{className:"flex min-h-[240px] flex-col items-center justify-center rounded-[14px] border border-dashed border-zinc-200 bg-white p-4 text-center",children:[(0,a.jsx)("p",{className:"font-medium text-zinc-900",children:"Sem dados no período"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Ajuste filtros e gere novamente o relatório."}),(0,a.jsx)(k.Button,{variant:"outline",size:"sm",className:"mt-3 rounded-full",onClick:()=>Z(e=>({...e,segment:"Todos",status:"Todos"})),children:"Voltar para configurações"})]}):(0,a.jsxs)("div",{className:"flex min-h-[240px] flex-col items-center justify-center rounded-[14px] border border-dashed border-zinc-200 bg-white p-4 text-center",children:[(0,a.jsx)("p",{className:"font-medium text-zinc-900",children:"Gere o relatório para visualizar o preview"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Defina os filtros e clique em “Gerar relatório”."})]})]}),(0,a.jsxs)("section",{className:"rounded-[16px] border border-zinc-200 bg-zinc-50/80 p-3",children:[(0,a.jsx)("h3",{className:"font-heading text-base font-semibold text-zinc-900",children:"Exportação"}),(0,a.jsx)("p",{className:"text-xs text-zinc-500",children:"Exporte o resultado ou copie um resumo pronto."}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,a.jsxs)(k.Button,{variant:"outline",size:"sm",className:"h-8 rounded-full",onClick:()=>void eK("csv"),disabled:!e_||es!==eV.id||"csv"===ed,children:["csv"===ed?(0,a.jsx)("span",{className:"mr-1 h-3 w-3 animate-spin rounded-full border border-zinc-500 border-t-transparent"}):(0,a.jsx)(u.FileDown,{className:"mr-1 h-3.5 w-3.5"}),"Exportar CSV"]}),(0,a.jsxs)(k.Button,{variant:"outline",size:"sm",className:"h-8 rounded-full",onClick:()=>void eK("pdf"),disabled:!e_||es!==eV.id||"pdf"===ed,children:["pdf"===ed?(0,a.jsx)("span",{className:"mr-1 h-3 w-3 animate-spin rounded-full border border-zinc-500 border-t-transparent"}):(0,a.jsx)(m.FileText,{className:"mr-1 h-3.5 w-3.5"}),"Exportar PDF"]}),(0,a.jsxs)(k.Button,{variant:"outline",size:"sm",className:"h-8 rounded-full",onClick:()=>void eK("excel"),disabled:!e_||es!==eV.id||"excel"===ed,children:["excel"===ed?(0,a.jsx)("span",{className:"mr-1 h-3 w-3 animate-spin rounded-full border border-zinc-500 border-t-transparent"}):(0,a.jsx)(p.FileSpreadsheet,{className:"mr-1 h-3.5 w-3.5"}),"Exportar Excel"]}),(0,a.jsxs)(k.Button,{size:"sm",className:"h-8 rounded-full bg-zinc-900 text-white hover:bg-zinc-800",onClick:()=>void eK("copy"),disabled:!e_||es!==eV.id||"copy"===ed,children:["copy"===ed?(0,a.jsx)("span",{className:"mr-1 h-3 w-3 animate-spin rounded-full border border-white border-t-transparent"}):(0,a.jsx)(c.Copy,{className:"mr-1 h-3.5 w-3.5"}),"Copiar resumo"]})]}),eo?(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(C.InlineFeedback,{type:eo.type,message:eo.message,compact:!0,onClose:()=>ec(null)})}):null]})]})]}):(0,a.jsx)(q,{onOpenQuickReport:eZ,onOpenLibrary:e2})}),(0,a.jsx)("aside",{className:(0,z.cn)("hidden xl:block shrink-0 transition-[width,opacity] duration-[220ms] ease-out",eb?"w-[320px] opacity-100":"pointer-events-none w-0 opacity-0"),children:(0,a.jsx)(Q,{selectedReport:eV,template:e_,runningCommand:eg,commandResult:ej,onRunCommand:eY,onClose:()=>ev(!1),onApplyRiskFilter:()=>Z(e=>({...e,status:"Em risco"})),onApplySlaFilter:()=>Z(e=>({...e,status:"SLA estourado"})),onApplyOwnerFilter:()=>Z(e=>({...e,owner:"Ana Souza"})),onGenerateSummary:()=>en({type:"success",message:"Resumo executivo do relatório gerado."})})})]})})]})}),eF?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{onClick:()=>ev(!1),className:(0,z.cn)("fixed inset-0 z-40 bg-black/25 transition-opacity duration-200 xl:hidden",eb?"opacity-100":"pointer-events-none opacity-0")}),(0,a.jsx)("aside",{className:(0,z.cn)("fixed right-0 top-0 z-50 h-full w-[min(92vw,340px)] p-2 transition-transform duration-[220ms] ease-out xl:hidden",eb?"translate-x-0":"translate-x-full"),children:(0,a.jsx)(Q,{selectedReport:eV,template:e_,runningCommand:eg,commandResult:ej,onRunCommand:eY,onClose:()=>ev(!1),onApplyRiskFilter:()=>{Z(e=>({...e,status:"Em risco"})),ev(!1)},onApplySlaFilter:()=>{Z(e=>({...e,status:"SLA estourado"})),ev(!1)},onApplyOwnerFilter:()=>{Z(e=>({...e,owner:"Ana Souza"})),ev(!1)},onGenerateSummary:()=>{en({type:"success",message:"Resumo executivo do relatório gerado."}),ev(!1)}})})]}),eC?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{onClick:()=>ez(!1),className:(0,z.cn)("fixed inset-0 z-40 bg-black/25 transition-opacity duration-200",eN?"opacity-100":"pointer-events-none opacity-0")}),(0,a.jsx)("aside",{className:(0,z.cn)("fixed left-0 top-0 z-50 h-full w-[min(92vw,420px)] p-2 transition-transform duration-[220ms] ease-out",eN?"translate-x-0":"-translate-x-full"),children:(0,a.jsx)(_,{reports:eG,selectedReportId:O,favoriteReportIds:U,recentReports:eq,libraryError:eE,onRetry:()=>eL(!1),onSelect:eH,onToggleFavorite:eU,onGenerate:e=>eX(e),onPreview:eH,highlightCardId:e$,onClose:()=>ez(!1)})})]})]})})}function _({reports:e,selectedReportId:s,favoriteReportIds:t,recentReports:l,libraryError:i,onRetry:r,onSelect:n,onToggleFavorite:o,onGenerate:c,onPreview:d,highlightCardId:u,onClose:m}){return(0,a.jsxs)("div",{className:"flex h-full min-h-0 flex-col overflow-hidden rounded-[20px] border border-zinc-200/80 bg-white/82 shadow-[0_16px_32px_-28px_rgba(15,23,42,0.45)]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-zinc-200 px-3 py-2.5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-heading text-base font-semibold text-zinc-900",children:"Biblioteca"}),(0,a.jsx)("p",{className:"text-xs text-zinc-500",children:"Relatórios disponíveis no Flow"})]}),m?(0,a.jsx)(k.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full text-zinc-500",onClick:m,"aria-label":"Fechar biblioteca",children:(0,a.jsx)(w.X,{className:"h-4 w-4"})}):null]}),(0,a.jsx)("div",{className:"min-h-0 flex-1 overflow-y-auto p-3",children:i?(0,a.jsx)(J,{message:"Falha ao carregar biblioteca de relatórios.",onRetry:r}):(0,a.jsxs)("div",{className:"space-y-3",children:[l.length>0?(0,a.jsxs)("section",{className:"rounded-[14px] border border-zinc-200 bg-zinc-50/80 p-2.5",children:[(0,a.jsx)("h4",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-zinc-500",children:"Recentes"}),(0,a.jsx)("div",{className:"mt-2 grid grid-cols-1 gap-2 sm:grid-cols-3 lg:grid-cols-1 xl:grid-cols-3",children:l.slice(0,3).map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>n(e.id),className:(0,z.cn)("rounded-[10px] border px-2.5 py-2 text-left transition-colors duration-120",s===e.id?"border-zinc-300 bg-white":"border-zinc-200 bg-white/90 hover:bg-zinc-100"),children:[(0,a.jsx)("p",{className:"truncate text-xs font-semibold text-zinc-900",children:e.title}),(0,a.jsx)("p",{className:"mt-1 text-[11px] text-zinc-500",children:e.category})]},`recent-${e.id}`))})]}):null,e.length>0?(0,a.jsx)(N.motion.div,{layout:!0,transition:{duration:.22,ease:"easeOut"},className:"grid grid-cols-1 gap-3 xl:grid-cols-2",children:e.map(e=>(0,a.jsx)(N.motion.div,{layout:!0,transition:{duration:.22,ease:"easeOut"},children:(0,a.jsx)(O,{report:e,isSelected:s===e.id,isFavorite:t.has(e.id),highlighted:u===e.id,onSelect:()=>n(e.id),onToggleFavorite:()=>o(e.id),onGenerate:()=>c(e.id),onPreview:()=>d(e.id)})},e.id))}):(0,a.jsx)("div",{className:"rounded-[14px] border border-dashed border-zinc-200 bg-zinc-50/80 p-4 text-sm text-zinc-500",children:"Nenhum relatório encontrado para os filtros atuais."})]})})]})}function O({report:e,isSelected:s,isFavorite:t,highlighted:i,onSelect:r,onToggleFavorite:n,onGenerate:o,onPreview:c}){return(0,a.jsxs)("article",{className:(0,z.cn)("group premium-lift relative overflow-hidden rounded-[16px] border bg-white p-3 shadow-[0_10px_20px_-18px_rgba(15,23,42,0.55)] transition-colors duration-140",s?"border-zinc-300 bg-zinc-50/80":"border-zinc-200/85",i&&"ring-1 ring-zinc-300"),children:[s?(0,a.jsx)("span",{className:"absolute inset-y-3 left-0 w-[3px] rounded-r-full bg-zinc-800"}):null,(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("button",{type:"button",onClick:r,className:"flex min-w-0 items-start gap-2 text-left",children:[(0,a.jsx)("span",{className:"inline-flex h-10 w-10 shrink-0 items-center justify-center rounded-[10px] bg-zinc-100 text-zinc-700",children:e.icon}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)(F.Badge,{className:(0,z.cn)("rounded-full border px-2 py-0 text-[10px]",P[e.category]),children:e.category}),(0,a.jsx)("h4",{className:"mt-1 truncate text-sm font-semibold text-zinc-900",children:e.title})]})]}),(0,a.jsxs)(L.Tooltip,{children:[(0,a.jsx)(L.TooltipTrigger,{asChild:!0,children:(0,a.jsx)("button",{type:"button",onClick:n,className:(0,z.cn)("rounded-full border p-1 transition-all duration-120",t?"border-amber-300 bg-amber-50 text-amber-700":"border-zinc-200 bg-white text-zinc-400 opacity-0 group-hover:opacity-100"),"aria-label":"Favoritar relatório",children:(0,a.jsx)(f.Star,{className:(0,z.cn)("h-3.5 w-3.5",t&&"fill-current")})})}),(0,a.jsx)(L.TooltipContent,{className:"bg-zinc-900 text-zinc-50",children:t?"Remover dos favoritos":"Adicionar aos favoritos"})]})]}),(0,a.jsx)("button",{type:"button",onClick:r,className:"mt-2 text-left",children:(0,a.jsx)("p",{className:"line-clamp-2 text-sm text-zinc-600",children:e.description})}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.tags.map(e=>(0,a.jsx)("span",{className:"rounded-full border border-zinc-200 bg-zinc-50 px-2 py-0 text-[10px] text-zinc-500",children:e},e))}),(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,a.jsx)(k.Button,{size:"sm",variant:"outline",className:"h-8 flex-1 rounded-full text-xs",onClick:c,children:"Preview"}),(0,a.jsxs)(k.Button,{size:"sm",className:"h-8 flex-1 rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800",onClick:o,children:[(0,a.jsx)(l.BarChart3,{className:"mr-1 h-3.5 w-3.5"}),"Gerar"]})]})]})}function q({onOpenQuickReport:e,onOpenLibrary:s}){return(0,a.jsxs)("div",{className:"flex min-h-full flex-col items-center justify-center rounded-[16px] border border-dashed border-zinc-200 bg-zinc-50/70 p-6 text-center",children:[(0,a.jsx)("p",{className:"font-heading text-2xl font-semibold text-zinc-900",children:"Selecione um relatório para começar"}),(0,a.jsx)("p",{className:"mt-2 max-w-[460px] text-sm text-zinc-500",children:"Escolha um relatório na biblioteca para configurar filtros, gerar preview e exportar resultados."}),(0,a.jsxs)("div",{className:"mt-4 grid w-full max-w-[620px] grid-cols-1 gap-2 md:grid-cols-3",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>e("pipeline-performance"),className:"rounded-[12px] border border-zinc-200 bg-white p-3 text-left transition-colors duration-120 hover:bg-zinc-50",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-zinc-900",children:"Pipeline Performance"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Funil, conversão e gargalos"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>e("sla-compliance"),className:"rounded-[12px] border border-zinc-200 bg-white p-3 text-left transition-colors duration-120 hover:bg-zinc-50",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-zinc-900",children:"SLA Compliance"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Cumprimento por etapa"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>e("monthly-revenue"),className:"rounded-[12px] border border-zinc-200 bg-white p-3 text-left transition-colors duration-120 hover:bg-zinc-50",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-zinc-900",children:"Receita Mensal"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Meta vs realizado"})]})]}),(0,a.jsx)(k.Button,{variant:"outline",className:"mt-4 rounded-full",onClick:s,children:"Ver todos os relatórios"})]})}function G(){return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(A.Skeleton,{className:"h-[220px] rounded-[14px]"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-3",children:[(0,a.jsx)(A.Skeleton,{className:"h-[94px] rounded-[12px]"}),(0,a.jsx)(A.Skeleton,{className:"h-[94px] rounded-[12px]"}),(0,a.jsx)(A.Skeleton,{className:"h-[94px] rounded-[12px]"})]}),(0,a.jsx)(A.Skeleton,{className:"h-[220px] rounded-[14px]"}),(0,a.jsx)(A.Skeleton,{className:"h-[170px] rounded-[14px]"})]})}function Q({selectedReport:e,template:s,runningCommand:t,commandResult:l,onRunCommand:n,onClose:o,onApplyRiskFilter:c,onApplySlaFilter:d,onApplyOwnerFilter:u,onGenerateSummary:m}){return(0,a.jsxs)("div",{className:"menux-intelligence-theme flex h-full min-h-0 flex-col overflow-hidden rounded-[20px] border border-slate-700/70 bg-[linear-gradient(145deg,#020817_0%,#03132b_56%,#0a2340_100%)] text-slate-100 shadow-[0_34px_52px_-36px_rgba(15,23,42,0.92)]",children:[(0,a.jsxs)("div",{className:"border-b border-white/10 px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-heading text-lg font-semibold",children:"Menux Intelligence"}),(0,a.jsx)("p",{className:"mt-0.5 text-xs text-cyan-100/80",children:e?`An\xe1lise de ${e.title}`:"Copiloto de interpretação"})]}),o?(0,a.jsx)(k.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full text-slate-300 hover:bg-white/10 hover:text-white",onClick:o,"aria-label":"Fechar Menux Intelligence",children:(0,a.jsx)(w.X,{className:"h-4 w-4"})}):null]}),(0,a.jsxs)(k.Button,{className:"mt-3 h-8 w-full rounded-full border border-white/15 bg-white/10 text-xs text-slate-100 hover:bg-white/15",onClick:()=>n("weekly-diagnosis","Diagnóstico executivo gerado.",m),disabled:"weekly-diagnosis"===t,children:["weekly-diagnosis"===t?(0,a.jsx)("span",{className:"mr-2 h-3 w-3 animate-spin rounded-full border border-cyan-100 border-t-transparent"}):(0,a.jsx)(i.Bot,{className:"mr-1.5 h-3.5 w-3.5"}),"Diagnóstico do relatório"]})]}),(0,a.jsxs)("div",{className:"min-h-0 flex-1 space-y-3 overflow-y-auto p-4",children:[(0,a.jsxs)("section",{className:"rounded-[14px] border border-white/10 bg-white/5 p-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-300",children:"Interpretação"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-slate-200",children:s?s.sentence:"Selecione e gere um relatório para receber interpretação acionável."})]}),(0,a.jsxs)("section",{className:"rounded-[14px] border border-white/10 bg-white/5 p-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-300",children:"Achados principais"}),(0,a.jsx)("ul",{className:"mt-2 space-y-1.5 text-xs text-slate-200",children:(s?.findings??["Nenhum achado ainda. Gere o relatório para analisar dados."]).map((e,s)=>(0,a.jsxs)("li",{className:"flex gap-1.5",children:[(0,a.jsx)(r.Check,{className:"mt-0.5 h-3.5 w-3.5 text-cyan-200"}),(0,a.jsx)("span",{children:e})]},s))})]}),(0,a.jsxs)("section",{className:"rounded-[14px] border border-white/10 bg-white/5 p-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-300",children:"Comandos rápidos"}),(0,a.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,a.jsx)(D,{label:"Ver apenas etapa em risco",loading:"risk-only"===t,onClick:()=>n("risk-only","Filtro aplicado: etapa em risco.",c)}),(0,a.jsx)(D,{label:"Mostrar SLAs estourados",loading:"sla-breached"===t,onClick:()=>n("sla-breached","Filtro aplicado: SLAs estourados.",d)}),(0,a.jsx)(D,{label:"Filtrar por responsável principal",loading:"owner-focus"===t,onClick:()=>n("owner-focus","Filtro aplicado: responsável principal.",u)}),(0,a.jsx)(D,{label:"Exportar resumo executivo",loading:"executive-summary"===t,onClick:()=>n("executive-summary","Resumo executivo exportado.",m)})]})]}),(0,a.jsxs)("section",{className:"rounded-[14px] border border-white/10 bg-white/5 p-3",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.08em] text-slate-300",children:"Anomalias e perguntas"}),(0,a.jsx)("ul",{className:"mt-2 space-y-1.5 text-xs text-slate-200",children:(s?.anomalies??["Sem anomalias detectadas até o momento."]).map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s))}),(0,a.jsx)("div",{className:"mt-2 border-t border-white/10 pt-2",children:(0,a.jsx)("ul",{className:"space-y-1 text-xs text-slate-300",children:(s?.questions??["Gere o relatório para destravar perguntas de investigação."]).map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s))})})]}),l?(0,a.jsx)("div",{className:"rounded-[12px] border border-cyan-300/30 bg-cyan-500/10 px-3 py-2 text-xs text-cyan-100",children:l}):null]})]})}function D({label:e,loading:s,onClick:t}){return(0,a.jsxs)("button",{type:"button",onClick:t,disabled:s,className:"flex w-full items-center justify-between rounded-[10px] border border-white/10 bg-white/5 px-3 py-2 text-left text-xs text-slate-100 transition-colors duration-120 hover:bg-white/10 disabled:cursor-not-allowed disabled:opacity-70",children:[(0,a.jsx)("span",{children:e}),s?(0,a.jsx)("span",{className:"h-3 w-3 animate-spin rounded-full border border-cyan-100 border-t-transparent"}):(0,a.jsx)(g.Sparkles,{className:"h-3.5 w-3.5 text-cyan-200"})]})}function J({message:e,onRetry:s}){return(0,a.jsx)("div",{className:"rounded-[14px] border border-red-200 bg-red-50/85 p-3 text-sm text-red-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e})]}),(0,a.jsx)(k.Button,{variant:"outline",size:"sm",className:"h-7 rounded-full border-red-200 bg-white text-red-700 hover:bg-red-50",onClick:s,children:"Tentar novamente"})]})})}function H(){return(0,a.jsxs)("div",{className:"flex h-[calc(100dvh-2rem)] min-h-0 w-full max-w-full flex-col gap-4",children:[(0,a.jsxs)("div",{className:"shrink-0 rounded-[20px] border border-zinc-200/80 bg-zinc-50/85 px-5 py-4",children:[(0,a.jsx)(A.Skeleton,{className:"h-8 w-36"}),(0,a.jsx)(A.Skeleton,{className:"mt-2 h-4 w-72"}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,a.jsx)(A.Skeleton,{className:"h-9 w-56 rounded-full"}),(0,a.jsx)(A.Skeleton,{className:"h-9 w-44 rounded-full"}),(0,a.jsx)(A.Skeleton,{className:"h-9 w-40 rounded-full"})]})]}),(0,a.jsxs)("div",{className:"grid min-h-0 flex-1 grid-cols-1 gap-4 lg:grid-cols-[minmax(320px,0.4fr)_minmax(0,0.6fr)]",children:[(0,a.jsx)("div",{className:"hidden min-h-0 overflow-hidden rounded-[20px] border border-zinc-200/80 bg-zinc-50/75 p-3 lg:block",children:(0,a.jsx)(A.Skeleton,{className:"h-full rounded-[16px]"})}),(0,a.jsx)("div",{className:"min-h-0 overflow-hidden rounded-[20px] border border-zinc-200/80 bg-zinc-50/75 p-3",children:(0,a.jsx)(A.Skeleton,{className:"h-full rounded-[16px]"})})]})]})}e.s(["default",()=>V])}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16715,e=>{"use strict";let t=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},48549,70209,66453,86342,e=>{"use strict";function t(){return`msg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function a(){return new Date().toISOString()}function i(e){if(e)return{cardId:e.cardId,cardName:e.cardName,stage:e.stageLabel,temperature:e.temperature}}function o(e){switch(e){case"hot":return"ðŸ”¥";case"warm":default:return"ðŸŒ¡ï¸";case"cold":return"â„ï¸"}}function n(e){switch(e){case"hot":return"Quente";case"warm":return"Morno";case"cold":return"Frio";default:return e}}function r(e,i,o){let n;n=i?`âœ¨ **Ol\xe1, ${e.name}!** Sou a Menux Intelligence, seu bra\xe7o direito comercial.

Vi que voc\xea est\xe1 com **${i.cardName}** aberto. Quer que eu te ajude com esse lead ou prefere escolher outro?`:o?`âœ¨ **Bom dia, ${e.name}!** Sou a Menux Intelligence, seu bra\xe7o direito comercial.

Voc\xea tem atividades para hoje e leads quentes esperando a\xe7\xe3o. Quer focar em algum cliente?

**ðŸ“‹ Escolher cliente**

Ou pode mandar sua d\xfavida direto â€” estou aqui pra ajudar.`:`âœ¨ **Ol\xe1, ${e.name}!** Sou a Menux Intelligence, seu bra\xe7o direito comercial.

Quer falar sobre algum cliente espec\xedfico? Selecione abaixo para eu carregar todo o contexto.

**ðŸ“‹ Escolher cliente**

Ou pode mandar sua d\xfavida direto â€” estou aqui pra ajudar.`;let r=i?[]:[{id:t(),type:"open-card",label:"ðŸ“‹ Escolher cliente",icon:"users",payload:{action:"open-client-picker"}}];return{id:t(),role:"assistant",content:n,contentType:"greeting",timestamp:a(),suggestedActions:r.length>0?r:void 0}}function s(e){return{id:t(),role:"assistant",content:`âœ… Contexto carregado: **${e.cardName}** (${e.stageLabel} \xb7 ${o(e.temperature)} ${n(e.temperature)}). Como posso te ajudar com esse lead?`,contentType:"context-loaded",timestamp:a(),contextBadge:i(e)}}e.s(["INTELLIGENCE_LIMITS",0,{MAX_MESSAGES_PER_CONVERSATION:100,MAX_STORED_CONVERSATIONS:50,MAX_USER_MESSAGE_LENGTH:2e3,MAX_AI_RESPONSE_LENGTH:6e3,MAX_PROACTIVE_SUGGESTIONS_PER_DAY:15,MAX_QUERIES_PER_HOUR:60,CONTEXT_WINDOW_MESSAGES:20,HISTORY_RETENTION_DAYS:30,WHATSAPP_CHAR_LIMIT:280,EMAIL_BODY_CHAR_LIMIT:500}],48549),e.s(["buildContextBadge",()=>i,"now",()=>a,"temperatureEmoji",()=>o,"temperatureLabel",()=>n,"uid",()=>t],70209),e.s(["generateContextLoaded",()=>s,"generateGreeting",()=>r],66453);var d=e.i(34288);function l(e){if(!e)return{id:t(),role:"assistant",content:"ðŸ“Š NÃ£o consegui carregar os dados do funil neste momento. Tente novamente em alguns instantes.",contentType:"funnel-summary",timestamp:a(),sourceCommand:"/funil"};let i=Object.values(e.cardsByStage).reduce((e,t)=>e+t,0),o=`ðŸ“Š **Resumo do seu Funil**

**Vis\xe3o geral:**
  - ðŸ”¥ Quentes: precisa de a\xe7\xe3o imediata
  - ðŸ“Š Total no funil: **${i}** oportunidades \xb7 **${(0,d.formatCurrencyBRL)(e.totalMRR)}** em MRR potencial

**Por etapa:**
${Object.entries(e.cardsByStage).map(([e,t])=>`  - **${e}:** ${t} cards`).join("\n")}

**âš ï¸ A\xe7\xf5es imediatas:**
  ${e.overdueCards>0?`- ðŸ”´ **${e.overdueCards}** card(s) com atividade vencida`:"- âœ… Nenhuma atividade vencida"}
  ${e.hotIdleCards>0?`- ðŸ”¥ **${e.hotIdleCards}** lead(s) quente(s) sem atividade`:"- âœ… Leads quentes com atividade em dia"}
  ${e.staleCards>0?`- â° **${e.staleCards}** card(s) parado(s) h\xe1 mais de 7 dias`:"- âœ… Nenhum card parado"}`;return{id:t(),role:"assistant",content:o,contentType:"funnel-summary",timestamp:a(),sourceCommand:"/funil"}}function c(e){let r=e.leadScore??Math.floor(40*Math.random()+50),s=e.overdueActivities.length,d=[];s>0&&d.push(`Atividades vencidas: ${s}`),0===e.contacts.length&&d.push("Nenhum contato registrado"),e.contacts.some(e=>e.isDecisionMaker)||d.push("Sem acesso ao decisor"),e.quotedPlan||d.push("Plano nÃ£o cotado");let l="hot"===e.temperature&&0===s?"Alta (70-85%)":"warm"===e.temperature?"MÃ©dia (40-60%)":"Baixa (15-30%)",c=`ðŸ” **An\xe1lise: ${e.cardName}**

**Sa\xfade do deal:** ${r}/100 ${r>=70?"ðŸŸ¢":r>=40?"ðŸŸ¡":"ðŸ”´"}

**Temperatura:** ${o(e.temperature)} ${n(e.temperature)}
  ${"cold"===e.temperature?"â†’ Frio: sem atividade recente ou engajamento baixo.":"warm"===e.temperature?"â†’ Morno: hÃ¡ engajamento mas precisa de mais aÃ§Ã£o.":"â†’ Quente: lead engajado, momento de avanÃ§ar!"}

**Score de patente:**
  ${e.contacts.length>0?e.contacts.map(e=>`- ${e.name}: ${e.role??"Cargo nÃ£o informado"} ${e.isDecisionMaker?"ðŸ‘‘ Decisor":""}`).join("\n  "):"Nenhum contato mapeado. Priorize mapear o decisor."}

${d.length>0?`**Gargalos:**
${d.map(e=>`  - âš ï¸ ${e}`).join("\n")}`:"**Gargalos:** âœ… Nenhum gargalo identificado"}

**Pr\xf3ximo passo recomendado:** ${s>0?"Resolva as atividades vencidas imediatamente.":!e.contacts.some(e=>e.isDecisionMaker)?"Mapeie e contate o decisor para acelerar o fechamento.":"Envie uma proposta personalizada e agende follow-up em 3 dias."}

**Probabilidade de fechamento:** ${l}`;return{id:t(),role:"assistant",content:c,contentType:"card-analysis",timestamp:a(),contextBadge:i(e),suggestedActions:[{id:t(),type:"create-activity",label:"ðŸ“… Criar atividade",icon:"calendar",payload:{type:s>0?"task":"follow-up",description:`A\xe7\xe3o p\xf3s-an\xe1lise de ${e.cardName}`,opportunityId:e.cardId,opportunityTitle:e.cardName}},{id:t(),type:"save-note",label:"ðŸ“ Salvar na timeline",icon:"file-text",payload:{cardId:e.cardId,entityType:e.entityType,noteText:`An\xe1lise executada para ${e.cardName}: sa\xfade ${r}/100, probabilidade ${l}.`}}],sourceCommand:"/analise"}}function u(e){let i=`âš”ï¸ **Menux vs ${e}**

| Crit\xe9rio | Menux | ${e} |
|----------|-------|${"-".repeat(e.length+2)}|
| Comanda digital | âœ… Nativo, sem hardware extra | Depende de tablet propriet\xe1rio |
| Gest\xe3o de mesas | âœ… Mapa interativo tempo real | B\xe1sico, sem visualiza\xe7\xe3o |
| Card\xe1pio digital | âœ… QR Code + autoatendimento | Apenas PDFs |
| Suporte | âœ… Chat + telefone + CS dedicado | Apenas ticket por email |
| Setup | âœ… Onboarding em at\xe9 7 dias | 30+ dias em m\xe9dia |
| Pre\xe7o | âœ… A partir de R$ 149/m\xeas | Similar ou superior |

**Pontos-chave para usar na conversa:**
1. O Menux n\xe3o exige hardware propriet\xe1rio â€” funciona em qualquer dispositivo
2. Suporte humanizado com CS dedicado (n\xe3o \xe9 s\xf3 chatbot)
3. Setup r\xe1pido: cliente operando em at\xe9 7 dias

âš ï¸ *Dados baseados apenas em informa\xe7\xf5es oficiais documentadas. N\xe3o fa\xe7a promessas sobre o concorrente â€” foque nas vantagens Menux.*`;return{id:t(),role:"assistant",content:i,contentType:"comparison",timestamp:a(),sourceCommand:"/comparar"}}function m(){let e=`ðŸ’° **Planos Menux**

| Plano | Ideal para | Funcionalidades-chave | A partir de |
|-------|-----------|----------------------|------------|
| **Assist** | Opera\xe7\xf5es simples | Comanda digital, card\xe1pio QR, PDV b\xe1sico | R$ 149/m\xeas |
| **Sales** | Restaurantes em crescimento | Tudo do Assist + gest\xe3o de mesas, relat\xf3rios avan\xe7ados, integra\xe7\xf5es delivery | R$ 299/m\xeas |
| **Control** | Opera\xe7\xf5es completas | Tudo do Sales + multi-unidades, CMV, fiscal, API aberta | R$ 499/m\xeas |

**Setup:** Taxa \xfanica a partir de R$ 500 (inclui configura\xe7\xe3o + treinamento da equipe)

**D\xfavidas frequentes:**
- âœ… Sem fidelidade â€” cancele quando quiser
- âœ… 7 dias para onboarding completo
- âœ… Suporte inclu\xeddo em todos os planos

Quer que eu detalhe algum plano espec\xedfico?`;return{id:t(),role:"assistant",content:e,contentType:"plans-info",timestamp:a(),sourceCommand:"/planos"}}e.s(["generateCardAnalysis",()=>c,"generateComparison",()=>u,"generateFunnelSummary",()=>l,"generatePlansInfo",()=>m],86342)},47435,62889,55218,9328,41562,76553,e=>{"use strict";function t(e,t){let a=new Date(e);return Math.floor((new Date(t).getTime()-a.getTime())/864e5)}function a(e,t){let a=new Date(e);return(new Date(t).getTime()-a.getTime())/36e5}function i(e){let t=new Date(e),a=new Date;return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear()}function o(e){let a=t(e,new Date().toISOString());return 0===a?"hoje":1===a?"ontem":`ha ${a} dias`}function n(e,t){for(let a of t){let t=a.stages.find(t=>t.id===e);if(t)return t.name}return e}function r(e,t,a){return"master"===a||"admin"===a?e:e.filter(e=>e.responsibleId===t)}e.s(["daysBetween",()=>t,"filterByUser",()=>r,"getStageName",()=>n,"hoursBetween",()=>a,"isToday",()=>i,"relativeTime",()=>o],62889);var s=e.i(34288);function d(e){let i,d,l,{opportunities:c,activities:u,clients:m,goals:p,pipelines:g,userId:h,userRole:f}=e,x=[...r(u,h,f).filter(e=>"completed"!==e.status&&"cancelled"!==e.status&&new Date(e.dueDate)<new Date).slice(0,3).map(e=>{let a=e.opportunityId?c.find(t=>t.id===e.opportunityId):null;return{type:"overdue-activity",priority:t(e.dueDate,new Date().toISOString())>=3?"high":"medium",message:`Atividade "${e.title}" vencida ${o(e.dueDate)}.${a?` Lead: ${a.clientName}.`:""} Resolva para manter o pipeline saudavel.`,cardId:a?.id,cardName:a?.clientName}}),...(i=new Date,r(c,h,f).filter(e=>"open"===e.status&&e.slaDeadline).map(e=>{let t=a(i.toISOString(),e.slaDeadline);if(t>0&&t<=6){let a=n(e.stage,g);return{type:"sla-approaching",priority:"high",message:`"${e.clientName}" esta a ${Math.round(t)}h do SLA na etapa ${a}. Priorize esta oportunidade!`,cardId:e.id,cardName:e.clientName}}return null}).filter(Boolean)),...function(e,a,i,o,n=3){return r(e,i,o).filter(e=>"open"===e.status&&"hot"===e.temperature).map(e=>{let i=a.filter(t=>t.opportunityId===e.id&&"cancelled"!==t.status).sort((e,t)=>new Date(t.dueDate).getTime()-new Date(e.dueDate).getTime()),o=t(i[0]?.dueDate??e.updatedAt,new Date().toISOString());return o>=n?{type:"hot-lead-idle",priority:"high",message:`Lead quente "${e.clientName}" sem atividade ha ${o} dias. Na etapa ${e.stage}. Momento de agir!`,cardId:e.id,cardName:e.clientName}:null}).filter(Boolean)}(c,u,h,f),...function(e,a,i,o=7){return r(e,a,i).filter(e=>"open"===e.status).map(e=>{let a=t(e.updatedAt,new Date().toISOString());return a>=o?{type:"stale-deal",priority:a>=14?"high":"medium",message:`Negociacao "${e.clientName}" parada ha ${a} dias sem movimentacao. Considere reengajar ou reavaliar.`,cardId:e.id,cardName:e.clientName}:null}).filter(Boolean)}(c,h,f),...(d=new Date,p.map(e=>{let a=new Date(e.endDate),i=new Date(e.startDate);if(a<d)return null;let o=t(i.toISOString(),a.toISOString()),n=t(i.toISOString(),d.toISOString()),r=t(d.toISOString(),a.toISOString()),l=e.target>0?e.current/e.target:0;if(l<.85*(o>0?n/o:1)&&r<=15){let t=e.target-e.current,a="revenue"===e.type?(0,s.formatCurrencyBRL)(t):`${t} ${"conversion"===e.type?"%":""}`;return{type:"goal-risk",priority:r<=7?"high":"medium",message:`Meta "${e.title}" em risco. Faltam ${a} nos proximos ${r} dias. Progresso: ${Math.round(100*l)}%.`}}return null}).filter(Boolean)),...function(e,a,i,o=30){let n=new Date;return("master"===i||"admin"===i?e:e.filter(e=>e.responsibleId===a)).map(e=>{if(!e.contractEnd)return null;let a=t(n.toISOString(),e.contractEnd);return a>0&&a<=o?{type:"contract-expiring",priority:a<=15?"high":"medium",message:`Contrato de "${e.companyName}" expira em ${a} dias. Inicie a renovacao agora.`,cardName:e.companyName}:null}).filter(Boolean)}(m,h,f),...(l=r(c,h,f).filter(e=>"open"===e.status).filter(e=>!e.expectedCloseDate)).length>=3?[{type:"missing-fields",priority:"low",message:`${l.length} oportunidades abertas sem data de fechamento prevista. Preencha para melhorar previsibilidade.`}]:[],...function(e,t,a){let i=("master"===a||"admin"===a?e:e.filter(e=>e.responsibleId===t)).filter(e=>"churn"!==e.stage&&e.monthlyRevenue>0);if(0===i.length)return[];let o=i.reduce((e,t)=>e+t.monthlyRevenue,0)/i.length;return i.filter(e=>"good"===e.healthScore&&e.monthlyRevenue<.7*o).slice(0,2).map(e=>({type:"cross-sell-opportunity",priority:"low",message:`"${e.companyName}" com saude boa e ticket ${(0,s.formatCurrencyBRL)(e.monthlyRevenue)} (media: ${(0,s.formatCurrencyBRL)(o)}). Oportunidade de upsell!`,cardName:e.companyName}))}(m,h,f),...function(e,t,a){let i=new Date;i.setDate(i.getDate()-30);let o=r(e,t,a).filter(e=>"lost"===e.status&&new Date(e.updatedAt)>i&&e.lossReason);if(0===o.length)return[];let n=Object.entries(o.reduce((e,t)=>{let a=t.lossReason??"outro";return e[a]=(e[a]??0)+1,e},{})).sort(([,e],[,t])=>t-e)[0];return n&&n[1]>=2?[{type:"competitive-intelligence",priority:"medium",message:`${o.length} deals perdidos nos ultimos 30 dias. Principal motivo: "${n[0]}" (${n[1]}x). Ajuste sua abordagem.`}]:[]}(c,h,f),...function(e,t){let a=new Date;a.setDate(a.getDate()-30);let i=e.filter(e=>new Date(e.updatedAt)>a);if(i.length<5)return[];let o=i.filter(e=>e.responsibleId===t),n=o.filter(e=>"won"===e.status).length,r=o.filter(e=>"won"===e.status||"lost"===e.status).length,s=r>0?n/r*100:0,d=i.filter(e=>"won"===e.status).length,l=i.filter(e=>"won"===e.status||"lost"===e.status).length;if(r<3)return[];let c=s-(l>0?d/l*100:0);return Math.abs(c)>=10?[{type:"team-performance",priority:"low",message:c>0?`Sua taxa de conversao (${Math.round(s)}%) esta ${Math.round(c)}% acima da media do time. Excelente trabalho!`:`Sua taxa de conversao (${Math.round(s)}%) esta ${Math.round(Math.abs(c))}% abaixo da media. Use /coaching para dicas.`}]:[]}(c,h)],v={high:0,medium:1,low:2};return x.sort((e,t)=>v[e.priority]-v[t.priority])}function l(e,a,i,o){let n=r(e,i,o).filter(e=>"open"===e.status),s={},d=0,l=0,c=0,u=0;for(let e of n){s[e.stage]=(s[e.stage]??0)+1,d+=e.monthlyValue;let i=a.filter(t=>t.opportunityId===e.id&&"cancelled"!==t.status);i.some(e=>"completed"!==e.status&&new Date(e.dueDate)<new Date)&&l++,"hot"===e.temperature&&t(new Date(i.length?Math.max(...i.map(e=>new Date(e.dueDate).getTime())):new Date(e.updatedAt).getTime()).toISOString(),new Date().toISOString())>=3&&c++,t(e.updatedAt,new Date().toISOString())>=7&&u++}return{cardsByStage:s,totalMRR:d,overdueCards:l,hotIdleCards:c,staleCards:u}}function c(e){let{opportunities:s,activities:d,userId:l,userRole:c,pipelines:u}=e,m=[],p=new Date,g=r(d,l,c);for(let e of g.filter(e=>"completed"!==e.status&&"cancelled"!==e.status&&new Date(e.dueDate)<p).slice(0,3))m.push({id:`pri-${e.id}`,type:"overdue",title:e.title,subtitle:`Vencida ${o(e.dueDate)}${e.clientName?` \xb7 ${e.clientName}`:""}`,severity:"critical",linkedEntityId:e.opportunityId,linkedEntityType:"opportunity"});for(let e of g.filter(e=>"pending"===e.status&&i(e.dueDate)).slice(0,3))m.push({id:`pri-${e.id}`,type:"due-today",title:e.title,subtitle:`Hoje${e.dueTime?` as ${e.dueTime}`:""}${e.clientName?` \xb7 ${e.clientName}`:""}`,severity:"warning",linkedEntityId:e.opportunityId,linkedEntityType:"opportunity"});for(let e of r(s,l,c).filter(e=>"open"===e.status&&e.slaDeadline)){let t=a(p.toISOString(),e.slaDeadline);if(t>0&&t<=8){let a=n(e.stage,u);m.push({id:`pri-sla-${e.id}`,type:"sla-warning",title:e.clientName,subtitle:`${Math.round(t)}h para SLA \xb7 ${a}`,severity:"critical",linkedEntityId:e.id,linkedEntityType:"opportunity"})}}for(let e of r(s,l,c).filter(e=>"open"===e.status&&"hot"===e.temperature).slice(0,2)){let a=d.filter(t=>t.opportunityId===e.id&&"cancelled"!==t.status),i=t(new Date(a.length?Math.max(...a.map(e=>new Date(e.dueDate).getTime())):new Date(e.updatedAt).getTime()).toISOString(),p.toISOString());i>=3&&m.push({id:`pri-hot-${e.id}`,type:"hot-idle",title:e.clientName,subtitle:`Lead quente sem atividade ha ${i}d`,severity:"warning",linkedEntityId:e.id,linkedEntityType:"opportunity"})}let h={critical:0,warning:1,info:2};return m.sort((e,t)=>h[e.severity]-h[t.severity]).slice(0,8)}function u(e){let{opportunities:a,goals:i,userId:o,userRole:n}=e,d=[],l=new Date,c=new Date;c.setDate(c.getDate()-30);let u=r(a,o,n),m=u.filter(e=>"won"===e.status&&new Date(e.updatedAt)>c);if(m.length>=2){let e=Math.round(m.reduce((e,a)=>e+t(a.createdAt,a.updatedAt),0)/m.length);d.push({id:"insight-velocity",icon:"zap",title:"Velocidade do Pipeline",description:`Ciclo medio de fechamento: ${e} dias (${m.length} deals fechados nos ultimos 30 dias).`,metric:{value:`${e}d`,trend:e<=21?"up":"down"}})}let p=u.filter(e=>("won"===e.status||"lost"===e.status)&&new Date(e.updatedAt)>c),g=p.filter(e=>"won"===e.status);if(p.length>=3){let e=Math.round(g.length/p.length*100);d.push({id:"insight-conversion",icon:"trending-up",title:"Taxa de Conversao",description:`${e}% de conversao (${g.length} ganhos de ${p.length} finalizados) nos ultimos 30 dias.`,metric:{value:`${e}%`,trend:e>=50?"up":e>=35?"stable":"down"}})}let h=i.filter(e=>new Date(e.endDate)>l);if(h.length>0){let e=h[0],a=Math.round(e.current/e.target*100),i=e.target-e.current,o="revenue"===e.type?(0,s.formatCurrencyBRL)(i):`${i}`,n=t(l.toISOString(),e.endDate);d.push({id:"insight-goal",icon:"target",title:`Meta: ${e.title}`,description:`${a}% concluido. Faltam ${o} em ${n} dias.`,metric:{value:`${a}%`,trend:a>=80?"up":a>=50?"stable":"down"},actionLabel:"Detalhes",actionCommand:"/meta"})}let f=u.filter(e=>"open"===e.status);if(f.length>0){let e=f.reduce((e,t)=>e+t.monthlyValue,0),t=f.reduce((e,t)=>e+t.value,0);d.push({id:"insight-pipeline-value",icon:"bar-chart",title:"Pipeline Ativo",description:`${f.length} oportunidades abertas. MRR potencial: ${(0,s.formatCurrencyBRL)(e)}. Valor total: ${(0,s.formatCurrencyBRL)(t)}.`,metric:{value:(0,s.formatCurrencyBRL)(e),trend:"stable"},actionLabel:"Ver funil",actionCommand:"/funil"})}return d}function m(e){let{opportunities:a,activities:i,userId:o,userRole:n}=e;return r(a,o,n).filter(e=>"open"===e.status).map(e=>{let a;a=0+(({"lead-in":10,"contato-feito":20,"reuniao-agendada":40,"proposta-enviada":60,negociacao:75,fechamento:90})[e.stage]??15),"hot"===e.temperature?a+=15:"warm"===e.temperature&&(a+=5);let o=i.filter(t=>t.opportunityId===e.id&&"cancelled"!==t.status).some(e=>3>=t(e.dueDate,new Date().toISOString()));o&&(a+=10),a=Math.min(95,a);let n=[];return"hot"===e.temperature&&n.push("Lead quente"),("negociacao"===e.stage||"fechamento"===e.stage||"proposta-enviada"===e.stage)&&n.push(e.stage.replace(/-/g," ")),o&&n.push("Atividade recente"),{id:e.id,opportunityId:e.id,clientName:e.clientName,stage:e.stage,probability:a,value:e.monthlyValue,reason:n.join(" + ")||e.stage}}).sort((e,t)=>t.probability-e.probability).slice(0,5)}function p(e){let{opportunities:i,clients:o,goals:n,userId:s,userRole:d}=e,l=[],c=new Date;for(let e of r(i,s,d).filter(e=>"open"===e.status&&e.slaDeadline)){let t=a(c.toISOString(),e.slaDeadline);t<0&&l.push({id:`risk-sla-${e.id}`,type:"sla-breach",title:`SLA estourado: ${e.clientName}`,description:`SLA vencido ha ${Math.abs(Math.round(t))}h na etapa ${e.stage}.`,severity:"critical",linkedEntityId:e.id})}let u="master"===d||"admin"===d?o:o.filter(e=>e.responsibleId===s);for(let e of u.filter(e=>"critical"===e.healthScore&&"churn"!==e.stage).slice(0,3))l.push({id:`risk-health-${e.id}`,type:"health-drop",title:`Saude critica: ${e.companyName}`,description:"Cliente com health score critico. Risco de churn iminente.",severity:"critical",linkedEntityId:e.id});for(let e of r(i,s,d).filter(e=>"open"===e.status&&t(e.updatedAt,c.toISOString())>=14).slice(0,2)){let a=t(e.updatedAt,c.toISOString());l.push({id:`risk-stale-${e.id}`,type:"stale",title:`Parado ha ${a}d: ${e.clientName}`,description:`Sem movimentacao ha ${a} dias. Reengaje ou reavalie.`,severity:"warning",linkedEntityId:e.id})}for(let e of u){if(!e.contractEnd)continue;let a=t(c.toISOString(),e.contractEnd);a>0&&a<=30&&l.push({id:`risk-contract-${e.id}`,type:"contract-expiring",title:`Contrato expirando: ${e.companyName}`,description:`Expira em ${a} dias. Inicie renovacao.`,severity:a<=15?"critical":"warning",linkedEntityId:e.id})}for(let e of n.filter(e=>new Date(e.endDate)>c)){let a=e.target>0?e.current/e.target:0,i=t(c.toISOString(),e.endDate),o=t(e.startDate,e.endDate);a<.7*(o>0?(o-i)/o:1)&&i<=10&&l.push({id:`risk-goal-${e.id}`,type:"goal-risk",title:`Meta em risco: ${e.title}`,description:`${Math.round(100*a)}% concluido com ${i} dias restantes.`,severity:"critical"})}let m={critical:0,warning:1};return l.sort((e,t)=>m[e.severity]-m[t.severity]).slice(0,8)}function g(e){let t=c(e),a=u(e),i=m(e),o=p(e),n=[];if(n.push("ðŸŒ… **Briefing Matinal**\n"),t.length>0){for(let e of(n.push("**Prioridades de hoje:**"),t.slice(0,5))){let t="critical"===e.severity?"ðŸ”´":"warning"===e.severity?"ðŸŸ¡":"ðŸ”µ";n.push(`  ${t} **${e.title}** \u2014 ${e.subtitle}`)}n.push("")}else n.push("**Prioridades:** âœ… Nenhuma urgencia. Dia tranquilo!\n");if(i.length>0){for(let e of(n.push("**Ganhos rapidos (maior probabilidade):**"),i.slice(0,3)))n.push(`  \u{1F3AF} **${e.clientName}** \u2014 ${e.probability}% de probabilidade \u00B7 ${(0,s.formatCurrencyBRL)(e.value)}/mes \u00B7 ${e.reason}`);n.push("")}if(o.length>0){for(let e of(n.push("**Alertas de risco:**"),o.slice(0,3))){let t="critical"===e.severity?"ðŸš¨":"âš ï¸";n.push(`  ${t} ${e.title} \u2014 ${e.description}`)}n.push("")}let r=a.find(e=>"insight-conversion"===e.id);return r?.metric&&n.push(`**Metrica do dia:** Taxa de conversao: ${r.metric.value} ${"up"===r.metric.trend?"ðŸ“ˆ":"down"===r.metric.trend?"ðŸ“‰":"âž¡ï¸"}`),n.push("\nðŸ’¡ Use `/riscos` para detalhes ou `/meta` para progresso das metas."),n.join("\n")}e.s(["computePipelineContext",()=>l,"generateAllSuggestions",()=>d],55218),e.s(["computeQuickWins",()=>m,"computeSmartInsights",()=>u,"computeTodaysPriorities",()=>c],9328),e.s(["computeRiskAlerts",()=>p],41562),e.s(["generateMorningSummaryContent",()=>g],76553),e.s([],47435)},84632,19600,e=>{"use strict";var t=e.i(68834),a=e.i(48549),i=e.i(66453),o=e.i(70209),n=e.i(86342);e.i(47435);var r=e.i(76553),s=e.i(9328),d=e.i(41562),l=e.i(34288),c=e.i(75378),u=e.i(31288),m=e.i(96435),p=e.i(97056),g=e.i(19368),h=e.i(82943);function f(){let e=h.useAuthStore.getState().user;return{opportunities:c.useOpportunityStore.getState().opportunities,activities:u.useActivityStore.getState().activities,clients:m.useClientStore.getState().clients,goals:p.useGoalStore.getState().goals,pipelines:g.usePipelineStore.getState().pipelines,userId:e?.id??"unknown",userRole:e?.role??"comercial"}}function x(){let e=f(),t=(0,r.generateMorningSummaryContent)(e);return{id:(0,o.uid)(),role:"assistant",content:t,contentType:"morning-briefing",timestamp:(0,o.now)(),sourceCommand:"/resumo"}}function v(){let e=f(),t=(0,d.computeRiskAlerts)(e);if(0===t.length)return{id:(0,o.uid)(),role:"assistant",content:"ðŸš¨ **Relatorio de Riscos**\n\nâœ… Nenhum alerta de risco no momento. Seu pipeline esta saudavel!",contentType:"risk-report",timestamp:(0,o.now)(),sourceCommand:"/riscos"};let a=["ðŸš¨ **Relatorio de Riscos**\n"],i=t.filter(e=>"critical"===e.severity),n=t.filter(e=>"warning"===e.severity);if(i.length>0){for(let e of(a.push(`**Criticos (${i.length}):**`),i))a.push(`  ðŸ”´ **${e.title}** â€” ${e.description}`);a.push("")}if(n.length>0){for(let e of(a.push(`**Atencao (${n.length}):**`),n))a.push(`  ðŸŸ¡ **${e.title}** â€” ${e.description}`);a.push("")}return a.push(`
ðŸ“Š Total: **${t.length}** alertas. Resolva os criticos primeiro.`),{id:(0,o.uid)(),role:"assistant",content:a.join("\n"),contentType:"risk-report",timestamp:(0,o.now)(),sourceCommand:"/riscos"}}function $(){let e=f(),t=new Date,a=e.goals.filter(e=>new Date(e.endDate)>t);if(0===a.length)return{id:(0,o.uid)(),role:"assistant",content:"ðŸŽ¯ **Progresso das Metas**\n\nNenhuma meta ativa no momento. Configure suas metas em Configuracoes > Metas.",contentType:"goal-progress",timestamp:(0,o.now)(),sourceCommand:"/meta"};let i=["ðŸŽ¯ **Progresso das Metas**\n"];for(let e of a){let a=Math.round(e.current/e.target*100),o=e.target-e.current,n=Math.max(0,Math.floor((new Date(e.endDate).getTime()-t.getTime())/864e5)),r="revenue"===e.type?(0,l.formatCurrencyBRL)(o):`${o}`,s="revenue"===e.type?(0,l.formatCurrencyBRL)(e.current):`${e.current}`,d="revenue"===e.type?(0,l.formatCurrencyBRL)(e.target):`${e.target}`,c=function(e){let t=Math.round(e/10);return`[${"â–ˆ".repeat(Math.min(t,10))}${"â–‘".repeat(Math.max(10-t,0))}]`}(a),u=a>=100?"âœ…":a>=70?"ðŸŸ¢":a>=40?"ðŸŸ¡":"ðŸ”´";if(i.push(`**${e.title}** ${u}`),i.push(`  ${c} ${a}%`),i.push(`  Atual: **${s}** / Meta: **${d}**`),o>0){if(i.push(`  Faltam: **${r}** em **${n}** dias`),n>0&&"revenue"===e.type){let e=o/n;i.push(`  Ritmo necessario: **${(0,l.formatCurrencyBRL)(e)}/dia**`)}}else i.push(`  ðŸ† **Meta atingida!**`);i.push("")}return{id:(0,o.uid)(),role:"assistant",content:i.join("\n"),contentType:"goal-progress",timestamp:(0,o.now)(),sourceCommand:"/meta"}}function y(){let e=f(),t=(0,s.computeSmartInsights)(e),a=(0,s.computeQuickWins)(e),i=new Date;i.setDate(i.getDate()-30);let n=["ðŸ“ˆ **Coaching de Vendas**\n"],r=t.find(e=>"insight-conversion"===e.id);r?.metric&&(n.push(`**Taxa de conversao:** ${r.metric.value} ${"up"===r.metric.trend?"ðŸ“ˆ Acima da media!":"down"===r.metric.trend?"ðŸ“‰ Abaixo da media.":"âž¡ï¸ Na media."}`),n.push(""));let d=t.find(e=>"insight-velocity"===e.id);d?.metric&&(n.push(`**Velocidade de fechamento:** ${d.metric.value} por deal`),n.push(""));let l=e.activities.filter(t=>t.responsibleId===e.userId&&new Date(t.dueDate)>i),c=l.filter(e=>"completed"===e.status),u=l.length>0?Math.round(c.length/l.length*100):0;n.push(`**Atividades (30 dias):** ${c.length} concluidas de ${l.length} (${u}% de conclusao)`);let m=Object.entries(c.reduce((e,t)=>(e[t.type]=(e[t.type]??0)+1,e),{})).sort(([,e],[,t])=>t-e).slice(0,3);m.length>0&&n.push(`  Canais mais usados: ${m.map(([e,t])=>`${e} (${t}x)`).join(", ")}`),n.push("");let p=e.opportunities.filter(t=>"lost"===t.status&&t.responsibleId===e.userId&&new Date(t.updatedAt)>i);if(p.length>0){let e=p.reduce((e,t)=>{let a=t.lossReason??"outro";return e[a]=(e[a]??0)+1,e},{});for(let[t,a]of(n.push(`**Analise de perdas (${p.length} perdidos):**`),Object.entries(e).sort(([,e],[,t])=>t-e)))n.push(`  - ${t}: ${a}x`);n.push("")}return n.push("**Dicas personalizadas:**"),u<80&&n.push("  ðŸ’¡ Sua taxa de conclusao de atividades esta abaixo de 80%. Priorize fechar as pendentes antes de criar novas."),r?.metric?.trend==="down"&&n.push("  ðŸ’¡ Sua conversao caiu. Revise a qualidade dos leads na entrada do funil e use `/objecao` para preparar contra-argumentos."),a.length>0&&n.push(`  ðŸ’¡ Voce tem ${a.length} ganhos rapidos (deals com alta probabilidade). Foque neles primeiro!`),m.some(([e])=>"call"===e||"meeting"===e)||n.push("  ðŸ’¡ Pouca atividade de ligacao/reuniao. Contato direto aumenta a taxa de conversao em media 30%."),{id:(0,o.uid)(),role:"assistant",content:n.join("\n"),contentType:"coaching",timestamp:(0,o.now)(),sourceCommand:"/coaching"}}function b(){let e=f(),t=(0,s.computeTodaysPriorities)(e),a=new Date,i=a.toISOString().split("T")[0],n=e.activities.filter(t=>t.responsibleId===e.userId&&t.dueDate===i&&"cancelled"!==t.status&&"completed"!==t.status).sort((e,t)=>e.dueTime&&t.dueTime?e.dueTime.localeCompare(t.dueTime):e.dueTime?-1:+!!t.dueTime),r=e.activities.filter(t=>t.responsibleId===e.userId&&"completed"!==t.status&&"cancelled"!==t.status&&new Date(t.dueDate)<a&&t.dueDate!==i),d=["ðŸ“… **Agenda do Dia**\n"];if(r.length>0){for(let e of(d.push(`**ðŸ”´ Atrasadas (${r.length}):**`),r.slice(0,5)))d.push(`  - **${e.title}** â€” vencida em ${e.dueDate}${e.clientName?` \xb7 ${e.clientName}`:""}`);d.push("")}if(n.length>0){for(let e of(d.push(`**ðŸ“‹ Hoje (${n.length}):**`),n)){let t=e.dueTime?`${e.dueTime} â€” `:"",a="call"===e.type?"ðŸ“ž":"email"===e.type?"ðŸ“§":"meeting"===e.type?"ðŸ¤":"whatsapp"===e.type?"ðŸ’¬":"visit"===e.type?"ðŸ¢":"ðŸ“Œ";d.push(`  ${a} ${t}**${e.title}**${e.clientName?` \xb7 ${e.clientName}`:""}`)}d.push("")}else 0===r.length&&d.push("Nenhuma atividade agendada para hoje.\n");if(t.length>0){d.push("**Sugestao de prioridade:**");for(let e=0;e<Math.min(t.length,5);e++){let a=t[e];d.push(`  ${0===e?"1ï¸âƒ£":1===e?"2ï¸âƒ£":2===e?"3ï¸âƒ£":3===e?"4ï¸âƒ£":"5ï¸âƒ£"} **${a.title}** â€” ${a.subtitle}`)}d.push("")}return d.push(`
Total: **${r.length}** atrasadas + **${n.length}** para hoje.`),{id:(0,o.uid)(),role:"assistant",content:d.join("\n"),contentType:"agenda",timestamp:(0,o.now)(),sourceCommand:"/agenda"}}let S={focus:"Foco Cliente",audit:"Auditoria",reply:"Responder",proposal:"Proposta"},C={focus:"Focando na situaÃ§Ã£o especÃ­fica deste cliente e prÃ³ximos passos prÃ¡ticos.",audit:"Analisando mÃ©tricas, gargalos e oportunidades de otimizaÃ§Ã£o.",reply:"Gerando mensagens prontas para envio. Direto e prÃ¡tico.",proposal:"Focando em argumentos de venda, diferenciaÃ§Ã£o e proposta de valor."};function I(e,t){let a={"no-card":"Para usar este comando, abra o card do lead primeiro ou selecione um cliente com ðŸ“‹. Posso te ajudar com outra coisa?","rate-limit":`Voc\xea atingiu o limite de consultas nesta hora. O limite ser\xe1 resetado \xe0s ${t?.resetTime??"--:--"}. Enquanto isso, suas conversas e hist\xf3rico continuam dispon\xedveis.`,"api-error":"Ops, tive um problema ao processar sua mensagem. Tente novamente em alguns instantes.","max-messages":"Atingimos o limite desta conversa (100 mensagens). Inicie uma nova conversa para continuar.","media-unsupported":"Por enquanto, consigo processar apenas texto. Descreva sua dÃºvida por escrito que eu te ajudo!","forbidden-command":`Voc\xea n\xe3o tem permiss\xe3o para usar o comando ${t?.command??"solicitado"} neste perfil.`,"invalid-command":"Comando invÃ¡lido. Use /ajuda para ver os comandos disponÃ­veis.","missing-command-input":`Faltou informar o conte\xfado para ${t?.command??"este comando"}. ${t?.hint??"Preencha o campo e tente novamente."}`};return{id:(0,o.uid)(),role:"assistant",content:a[e]??a["api-error"],contentType:"error",timestamp:(0,o.now)()}}async function w(e){var t,i,r,s,d;let c=["/briefing","/analise","/funil","/pitch"].includes(e.command??"")?1500+2e3*Math.random():800+1200*Math.random();if(await new Promise(e=>setTimeout(e,c)),e.command)switch(e.command){case"/briefing":let u,m,p,g,h;if(!e.card)return I("no-card");return u=(t=e.card).overdueActivities.length,m=t.contacts.length?t.contacts.map(e=>`  - **${e.name}** ${e.role?`(${e.role})`:""} ${e.isDecisionMaker?"ðŸ‘‘ Decisor":""}`).join("\n"):"  - Nenhum contato registrado",p=[],u>0&&p.push(`âš ï¸ ${u} atividade(s) vencida(s)`),"cold"===t.temperature&&p.push("â„ï¸ Lead frio â€” pode estar esfriando"),t.registeredObjections.length>0&&p.push(`ðŸ›¡ï¸ ${t.registeredObjections.length} obje\xe7\xe3o(\xf5es) registrada(s)`),g=`ðŸ“‹ **Briefing: ${t.cardName}**

**Contexto r\xe1pido:**
  - Etapa: **${t.stageLabel}** \xb7 ${(0,o.temperatureEmoji)(t.temperature)} ${(0,o.temperatureLabel)(t.temperature)}
  ${t.cnpj?`- CNPJ: ${t.cnpj}`:""}
  ${t.tags.length?`- Tags: ${t.tags.join(", ")}`:""}

**Contatos:**
${m}

**Valor:**
  ${t.quotedPlan?`- Plano cotado: **${t.quotedPlan}**`:"- Plano: nÃ£o cotado ainda"}
  ${t.setupValue?`- Setup: ${(0,l.formatCurrencyBRL)(t.setupValue)}`:""}
  ${t.mrrValue?`- MRR: ${(0,l.formatCurrencyBRL)(t.mrrValue)}`:""}

${t.timelineNotes.length>0?`**\xdaltimas intera\xe7\xf5es:**
${t.timelineNotes.slice(0,5).map((e,t)=>`  ${t+1}. ${e}`).join("\n")}`:"**HistÃ³rico:** Sem notas registradas"}

${p.length>0?`**Riscos:**
${p.map(e=>`  ${e}`).join("\n")}`:"**Riscos:** âœ… Nenhum risco identificado"}

**Pr\xf3ximo passo sugerido:** ${u>0?"Priorize as atividades vencidas antes de avanÃ§ar.":"hot"===t.temperature?"Lead quente! Agende uma reuniÃ£o o mais rÃ¡pido possÃ­vel.":"FaÃ§a um follow-up personalizado para manter o engajamento."}`,h=[{id:(0,o.uid)(),type:"create-activity",label:"ðŸ“… Criar atividade",icon:"calendar",payload:{type:"follow-up",description:`Follow-up do briefing de ${t.cardName}`,opportunityId:t.cardId,opportunityTitle:t.cardName}},{id:(0,o.uid)(),type:"save-note",label:"ðŸ“ Salvar na timeline",icon:"file-text",payload:{cardId:t.cardId,entityType:t.entityType,noteText:`Briefing gerado para ${t.cardName} (${t.stageLabel} \xb7 ${(0,o.temperatureLabel)(t.temperature)}).`}}],{id:(0,o.uid)(),role:"assistant",content:g,contentType:"briefing",timestamp:(0,o.now)(),contextBadge:(0,o.buildContextBadge)(t),suggestedActions:h,sourceCommand:"/briefing"};case"/objecao":let f,w,A,T,M,D;return i=e.text,r=e.card,f=i.toLowerCase(),w="Geral",f.includes("preÃ§o")||f.includes("caro")||f.includes("custo")?w="PreÃ§o":f.includes("concorrent")||f.includes("outro sistema")?w="Concorrente":f.includes("momento")||f.includes("agora nÃ£o")||f.includes("depois")?w="Timing":f.includes("preciso")||f.includes("necessidade")?w="Falta de necessidade":f.includes("confia")||f.includes("garantia")?w="DesconfianÃ§a":(f.includes("tÃ©cnic")||f.includes("integra"))&&(w="TÃ©cnica"),A=r?`

ðŸ’¡ *Contexto de ${r.cardName}: ${r.stageLabel} \xb7 ${(0,o.temperatureEmoji)(r.temperature)}*`:"",T="PreÃ§o"===w?`Entendo a preocupa\xe7\xe3o com investimento! O legal \xe9 que o retorno vem r\xe1pido: clientes como voc\xea geralmente recuperam o valor em 2-3 meses. Posso te mostrar como?`:"Timing"===w?`Faz total sentido! S\xf3 pra te ajudar a planejar: quando seria o melhor momento pra gente retomar? Assim garanto que voc\xea n\xe3o perde as condi\xe7\xf5es atuais.`:`\xd3timo ponto! Muitos clientes tinham a mesma d\xfavida. Posso te mostrar como resolvemos isso na pr\xe1tica?`,M=`ðŸ›¡ï¸ **An\xe1lise da obje\xe7\xe3o**

**Categoria:** ${w}
**Obje\xe7\xe3o recebida:** "${i}"${A}

**Contra-argumento:**
${"PreÃ§o"===w?"Foque no ROI, nÃ£o no custo. O Menux se paga em 2-3 meses com ganho de eficiÃªncia operacional. Destaque o impacto financeiro de NÃƒO ter o sistema.":"Timing"===w?"Respeite o momento, mas crie urgÃªncia suave. Pergunte o que acontece se continuarem sem soluÃ§Ã£o atÃ© lÃ¡. Plante a semente de que resolver antes gera vantagem.":"Concorrente"===w?"NÃ£o fale mal do concorrente. Foque nas diferenÃ§as de entrega, suporte e resultados comprovados do Menux. PeÃ§a para compararem funcionalidades lado a lado.":"Valide a preocupaÃ§Ã£o e redirecione com uma pergunta que traga o lead de volta ao valor."}

**Pergunta de avan\xe7o:**
"${"PreÃ§o"===w?"Se eu te mostrasse que o investimento se paga em 3 meses, faria sentido avanÃ§armos?":"O que precisaria acontecer para vocÃª se sentir seguro(a) pra avanÃ§ar?"}"`,D=[{id:(0,o.uid)(),content:T,channel:"whatsapp",charLimit:a.INTELLIGENCE_LIMITS.WHATSAPP_CHAR_LIMIT,label:"Mensagem WhatsApp"}],{id:(0,o.uid)(),role:"assistant",content:M,contentType:"objection-response",timestamp:(0,o.now)(),contextBadge:(0,o.buildContextBadge)(r),copyableBlocks:D,sourceCommand:"/objecao"};case"/mensagem":return function(e,t){let i=e.toLowerCase(),n="whatsapp";i.includes("email")?n="email":(i.includes("ligaÃ§Ã£o")||i.includes("call"))&&(n="call");let r=t?.cardName??"cliente",s=t?.contacts?.[0]?.name??"",d=[];if("whatsapp"===n){let e=s?`Oi ${s}! Tudo bem? Aqui \xe9 da Menux. Vi que voc\xea demonstrou interesse no nosso sistema. Teria uns minutinhos pra gente bater um papo sobre como otimizar a opera\xe7\xe3o a\xed? ðŸ˜Š`:`Ol\xe1! Aqui \xe9 da Menux. Gostaria de conversar sobre como podemos ajudar a otimizar a opera\xe7\xe3o do seu restaurante. Teria uns minutinhos? ðŸ˜Š`;d.push({id:(0,o.uid)(),content:e,channel:"whatsapp",charLimit:a.INTELLIGENCE_LIMITS.WHATSAPP_CHAR_LIMIT,label:"Mensagem WhatsApp"})}else"email"===n?d.push({id:(0,o.uid)(),content:`Otimize a opera\xe7\xe3o do ${r} com a Menux`,channel:"email",label:"Assunto"},{id:(0,o.uid)(),content:`${s?`Ol\xe1 ${s},`:"OlÃ¡,"}

Espero que esteja tudo bem! Sou da Menux e gostaria de mostrar como nosso sistema pode transformar a gest\xe3o do seu restaurante.

Podemos agendar uma conversa r\xe1pida de 15 minutos esta semana?

Abra\xe7o!`,channel:"email",charLimit:a.INTELLIGENCE_LIMITS.EMAIL_BODY_CHAR_LIMIT,label:"Corpo do email"}):d.push({id:(0,o.uid)(),content:`â€¢ Abertura: Apresentar-se e confirmar se \xe9 bom momento
â€¢ Contexto: Mencionar como conhecemos o restaurante
â€¢ Dor: Perguntar sobre principais desafios da opera\xe7\xe3o
â€¢ Valor: Conectar dores com solu\xe7\xf5es Menux
â€¢ Pr\xf3ximo passo: Propor demonstra\xe7\xe3o ou reuni\xe3o`,channel:"call",label:"Roteiro de ligaÃ§Ã£o"});let l=`ðŸ’¬ **Mensagem gerada para ${"whatsapp"===n?"WhatsApp":"email"===n?"Email":"LigaÃ§Ã£o"}**${t?`

ðŸ“‹ *Baseado em: ${t.cardName}*`:""}`;return{id:(0,o.uid)(),role:"assistant",content:l,contentType:"ghostwriting",timestamp:(0,o.now)(),contextBadge:(0,o.buildContextBadge)(t),copyableBlocks:d,sourceCommand:"/mensagem"}}(e.text,e.card);case"/pitch":let N;if(!e.card)return I("no-card");return s=e.card,N=`ðŸŽ¯ **Pitch Personalizado: ${s.cardName}**

**Perfil:** ${s.stageLabel} \xb7 ${(0,o.temperatureEmoji)(s.temperature)} ${(0,o.temperatureLabel)(s.temperature)}${s.tags.length?` \xb7 ${s.tags.join(", ")}`:""}

**Ponto de valor 1 â€” Efici\xeancia operacional:**
  - ðŸ”´ Dor: Perda de tempo com processos manuais no sal\xe3o
  - âœ… Menux: Automa\xe7\xe3o completa de comanda digital e gest\xe3o de mesas
  - ðŸ“Š Case: Restaurantes similares reduziram 40% do tempo de atendimento

**Ponto de valor 2 â€” Controle financeiro:**
  - ðŸ”´ Dor: Falta de visibilidade sobre custos e margem por prato
  - âœ… Menux: Dashboard em tempo real com CMV, ticket m\xe9dio e faturamento
  - ðŸ“Š Case: Aumento de 25% na margem ap\xf3s 3 meses de uso

**Ponto de valor 3 â€” Experi\xeancia do cliente:**
  - ðŸ”´ Dor: Filas, erros de pedido, demora no atendimento
  - âœ… Menux: Card\xe1pio digital + autoatendimento + integra\xe7\xe3o com delivery

**Pergunta de abertura:** "Qual o maior gargalo da opera\xe7\xe3o hoje â€” atendimento, controle financeiro ou gest\xe3o do card\xe1pio?"

**Frase de fechamento:** "Com base no que conversamos, faz sentido agendarmos uma demonstra\xe7\xe3o personalizada para a semana que vem?"`,{id:(0,o.uid)(),role:"assistant",content:N,contentType:"pitch",timestamp:(0,o.now)(),contextBadge:(0,o.buildContextBadge)(s),suggestedActions:[{id:(0,o.uid)(),type:"create-activity",label:"ðŸ“… Agendar demonstraÃ§Ã£o",icon:"calendar",payload:{type:"meeting",description:`Demo ${s.cardName}`,opportunityId:s.cardId,opportunityTitle:s.cardName}}],sourceCommand:"/pitch"};case"/funil":return(0,n.generateFunnelSummary)(e.pipeline);case"/analise":if(!e.card)return I("no-card");return(0,n.generateCardAnalysis)(e.card);case"/comparar":return(0,n.generateComparison)(e.text||"Concorrente");case"/planos":return(0,n.generatePlansInfo)();case"/followup":let E,P,L,R;if(!e.card)return I("no-card");return d=e.card,E=d.contacts?.[0]?.name??"",P=d.timelineNotes.length>0?d.timelineNotes[0]:"sem interaÃ§Ã£o recente",L=E?`Oi ${E}! Tudo bem? Estou passando pra retomar nossa conversa sobre o Menux. Vi que ficou de analisar internamente â€” teve alguma novidade? Fico \xe0 disposi\xe7\xe3o! ðŸ˜Š`:`Ol\xe1! Passando pra retomar nossa conversa sobre o Menux. Conseguiu avaliar as informa\xe7\xf5es que enviamos? Estou \xe0 disposi\xe7\xe3o pra qualquer d\xfavida!`,R=`ðŸ”„ **Follow-up: ${d.cardName}**

ðŸ“‹ *\xdaltima intera\xe7\xe3o: ${P}*

**Estrat\xe9gia:** Retomada gentil com abertura para atualiza\xe7\xe3o do lead.`,{id:(0,o.uid)(),role:"assistant",content:R,contentType:"followup",timestamp:(0,o.now)(),contextBadge:(0,o.buildContextBadge)(d),copyableBlocks:[{id:(0,o.uid)(),content:L,channel:"whatsapp",charLimit:a.INTELLIGENCE_LIMITS.WHATSAPP_CHAR_LIMIT,label:"Mensagem WhatsApp"}],suggestedActions:[{id:(0,o.uid)(),type:"schedule-followup",label:"ðŸ”„ Agendar follow-up",icon:"refresh-cw",payload:{type:"follow-up",description:`Follow-up ${d.cardName}`,opportunityId:d.cardId,opportunityTitle:d.cardName}}],sourceCommand:"/followup"};case"/ajuda":let O;return O=`â“ **O que posso fazer por voc\xea?**

Sou a Menux Intelligence â€” seu bra\xe7o direito comercial. Aqui est\xe1 o que sei fazer:

| Comando | O que faz |
|---------|----------|
| \`/briefing\` | ðŸ“‹ Resumo completo do lead antes de uma liga\xe7\xe3o ou reuni\xe3o |
| \`/objecao\` | ðŸ›¡ï¸ Contra-argumentos para obje\xe7\xf5es + mensagem pronta |
| \`/mensagem\` | ðŸ’¬ Escrevo mensagens para WhatsApp, email ou liga\xe7\xe3o |
| \`/pitch\` | ðŸŽ¯ Argumentos de venda personalizados pro perfil do lead |
| \`/funil\` | ðŸ“Š Vis\xe3o geral do seu pipeline com a\xe7\xf5es priorit\xe1rias |
| \`/analise\` | ðŸ” Diagn\xf3stico completo de um card com probabilidade de fechamento |
| \`/comparar\` | âš”ï¸ Comparativo Menux vs concorrente |
| \`/planos\` | ðŸ’° Info sobre planos, pre\xe7os e funcionalidades |
| \`/followup\` | ðŸ”„ Gero follow-up baseado na \xfaltima intera\xe7\xe3o |
| \`/resumo\` | ðŸŒ… Briefing matinal com prioridades, ganhos rapidos e alertas |
| \`/riscos\` | ðŸš¨ Todos os alertas de risco do seu pipeline |
| \`/meta\` | ðŸŽ¯ Progresso das metas com projecoes |
| \`/coaching\` | ðŸ“ˆ Coaching de vendas com dicas personalizadas |
| \`/agenda\` | ðŸ“… Atividades do dia + sugestao de prioridade |

ðŸ’¡ **Dicas:**
- Abra o card de um lead e me pergunte â€” uso todo o contexto automaticamente
- Use os bot\xf5es de a\xe7\xe3o para criar atividades e salvar notas direto no CRM
- Copie mensagens prontas com 1 clique

Quer experimentar algum comando?`,{id:(0,o.uid)(),role:"assistant",content:O,contentType:"help",timestamp:(0,o.now)(),sourceCommand:"/ajuda"};case"/resumo":return x();case"/riscos":return v();case"/meta":return $();case"/coaching":return y();case"/agenda":return b()}return function(e,t,a,i){let r=e.toLowerCase();if(r.includes("preÃ§o")||r.includes("plano")||r.includes("quanto custa"))return(0,n.generatePlansInfo)();if(r.includes("bom dia")||r.includes("resumo do dia")||r.includes("meu dia")||r.includes("briefing matinal"))return x();if(r.includes("risco")||r.includes("alerta")||r.includes("perigo")||r.includes("problema"))return v();if(r.includes("meta")||r.includes("objetivo")||r.includes("target"))return $();if(r.includes("coaching")||r.includes("performance")||r.includes("desempenho")||r.includes("como estou"))return y();if(r.includes("agenda")||r.includes("atividades de hoje")||r.includes("o que tenho"))return b();if(r.includes("mover")||r.includes("mova")||r.includes("avanÃ§ar card"))return{id:(0,o.uid)(),role:"assistant",content:`N\xe3o consigo mover cards diretamente, mas posso te ajudar a preparar tudo para o avan\xe7o. ${t?`O card **${t.cardName}** est\xe1 na etapa **${t.stageLabel}**. Quer que eu verifique o que falta para avan\xe7ar?`:"Abra o card que deseja avanÃ§ar e eu te ajudo!"}`,contentType:"text",timestamp:(0,o.now)(),contextBadge:(0,o.buildContextBadge)(t)};let s="formal"===i?" Responderei de forma executiva e profissional.":"casual"===i?" Responderei de forma descontraÃ­da e direta.":"",d=a&&"focus"!==a?`

*Modo ${S[a]} ativo â€” ${C[a]}*`:"",l=t?`Entendi sua pergunta sobre **${t.cardName}**! ${"hot"===t.temperature?"ðŸ”¥ Esse lead estÃ¡ quente â€” ":""}Como posso te ajudar com isso? Posso gerar um \`/briefing\`, preparar uma \`/mensagem\` ou analisar o card com \`/analise\`.${s}${d}`:`Entendi! Posso te ajudar de v\xe1rias formas. Use os comandos r\xe1pidos (/) para a\xe7\xf5es espec\xedficas, ou me pergunte sobre planos, obje\xe7\xf5es, ou estrat\xe9gias de venda.${s}

ðŸ’¡ Dica: selecione um cliente com ðŸ“‹ para eu carregar todo o contexto e personalizar minhas respostas.${d}`;return{id:(0,o.uid)(),role:"assistant",content:l,contentType:"text",timestamp:(0,o.now)(),contextBadge:(0,o.buildContextBadge)(t)}}(e.text,e.card,e.mode,e.tone)}let A=[{command:"/briefing",label:"Briefing do Lead",icon:"ðŸ“‹",description:"Gera resumo completo do card: contexto, objeÃ§Ãµes, histÃ³rico, prÃ³ximo passo sugerido",requiresCard:!0,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/objecao",label:"Quebrar ObjeÃ§Ã£o",icon:"ðŸ›¡ï¸",description:"Solicita a objeÃ§Ã£o recebida e retorna contra-argumento + mensagem pronta para WhatsApp",requiresCard:!1,availableFor:["comercial","cs"],requiresInput:!0,inputPlaceholder:"Qual objeÃ§Ã£o vocÃª recebeu?"},{command:"/mensagem",label:"Escrever Mensagem",icon:"ðŸ’¬",description:"Ghostwriting de mensagem para WhatsApp/email com tom e contexto do lead",requiresCard:!1,availableFor:["comercial","cs"],requiresInput:!0,inputPlaceholder:"Qual o canal (WhatsApp/Email/LigaÃ§Ã£o) e objetivo da mensagem?"},{command:"/pitch",label:"Pitch Personalizado",icon:"ðŸŽ¯",description:"Gera 2-3 argumentos matadores baseados no perfil do lead (segmento, mesas, dores)",requiresCard:!0,availableFor:["comercial"],requiresInput:!1},{command:"/funil",label:"Resumo do Funil",icon:"ðŸ“Š",description:"VisÃ£o consolidada do pipeline: quentes, parados, em risco, prÃ³ximas aÃ§Ãµes",requiresCard:!1,availableFor:["comercial","admin","master"],requiresInput:!1},{command:"/analise",label:"Analisar Card",icon:"ðŸ”",description:"DiagnÃ³stico completo: temperatura, score, risco, sugestÃ£o de prÃ³ximo passo",requiresCard:!0,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/comparar",label:"Comparativo",icon:"âš”ï¸",description:"Menux vs concorrente citado â€” apenas pontos oficiais e documentados",requiresCard:!1,availableFor:["comercial"],requiresInput:!0,inputPlaceholder:"Qual concorrente vocÃª quer comparar?"},{command:"/planos",label:"Planos e PreÃ§os",icon:"ðŸ’°",description:"Consulta rÃ¡pida sobre Assist, Sales, Control â€” preÃ§os, features, setup",requiresCard:!1,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/followup",label:"Gerar Follow-up",icon:"ðŸ”„",description:"Cria mensagem de follow-up baseada na Ãºltima interaÃ§Ã£o do card",requiresCard:!0,availableFor:["comercial","cs"],requiresInput:!1},{command:"/ajuda",label:"O que vocÃª pode fazer?",icon:"â“",description:"Lista capacidades da Menux Intelligence com exemplos",requiresCard:!1,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/resumo",label:"Briefing Matinal",icon:"ðŸŒ…",description:"Resumo do dia: prioridades, ganhos rÃ¡pidos, alertas e mÃ©tricas",requiresCard:!1,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/riscos",label:"Alertas de Risco",icon:"ðŸš¨",description:"Todos os alertas de risco: SLA, deals parados, contratos expirando, saÃºde de clientes",requiresCard:!1,availableFor:["comercial","admin","master"],requiresInput:!1},{command:"/meta",label:"Progresso da Meta",icon:"ðŸŽ¯",description:"Progresso das suas metas com projeÃ§Ãµes e o que falta para bater",requiresCard:!1,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/coaching",label:"Coaching de Vendas",icon:"ðŸ“ˆ",description:"Insights de performance, taxa de conversÃ£o, dicas personalizadas de melhoria",requiresCard:!1,availableFor:["comercial","admin","master"],requiresInput:!1},{command:"/agenda",label:"Agenda do Dia",icon:"ðŸ“…",description:"Atividades de hoje + sugestÃ£o de ordem de prioridade",requiresCard:!1,availableFor:["comercial","cs","admin","master"],requiresInput:!1}];function T(e){return A.filter(t=>t.availableFor.includes(e))}function M(e){return A.find(t=>t.command===e)}function D(e,t){if(!t||"/"===t)return e;let a=t.toLowerCase().replace("/","").trim();return e.filter(e=>e.command.toLowerCase().includes(a)||e.label.toLowerCase().includes(a)||e.description.toLowerCase().includes(a))}e.s(["filterCommands",()=>D,"getAvailableCommands",()=>T,"getCommandDefinition",()=>M],19600);var N=e.i(55218);function E(){return`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function P(){return new Date().toISOString()}function L(e=[]){return{id:E(),preview:e[0]?.content?.slice(0,80)??"",messages:e,createdAt:P(),updatedAt:P(),messageCount:e.length}}function R(){let e=h.useAuthStore.getState().user,t=c.useOpportunityStore.getState().opportunities.filter(t=>t.responsibleId===e?.id),a=t.filter(e=>"won"===e.status||"lost"===e.status),i=a.filter(e=>"won"===e.status),o=a.length>=3?Math.round(i.length/a.length*100):void 0;return{id:e?.id??"unknown",name:e?.name??"Vendedor",role:e?.role??"comercial",assignedCardCount:t.filter(e=>"open"===e.status).length,conversionRate:o}}function O(){try{let e=h.useAuthStore.getState().user;if(!e)return null;let t=c.useOpportunityStore.getState().opportunities,a=u.useActivityStore.getState().activities;return(0,N.computePipelineContext)(t,a,e.id,e.role)}catch(e){return console.error("[Menux Intelligence] Erro ao computar pipeline context:",e),null}}let q=(0,t.create)((e,t)=>({isOpen:!1,activeConversation:null,messages:[],isTyping:!1,greetingSent:!1,contextCard:null,isClientPickerOpen:!1,clientPickerSearch:"",clientPickerFilters:{},proactiveSuggestions:[],history:[],isHistoryOpen:!1,viewingHistoryConversation:null,activeScreen:"other",remainingQueries:a.INTELLIGENCE_LIMITS.MAX_QUERIES_PER_HOUR,rateLimitResetAt:null,menuxIntelligenceMode:"focus",aiTone:"neutral",proactiveFrequency:5,proactiveNotifications:!0,isSettingsOpen:!1,isThinking:!1,open:()=>{let a=t();if(a.greetingSent&&a.messages.length>0)return void e({isOpen:!0});let o=R(),n=(0,i.generateGreeting)(o,a.contextCard,!0);e({isOpen:!0,greetingSent:!0,messages:[n],activeConversation:L([n])})},close:()=>e({isOpen:!1}),toggle:()=>{let e=t();e.isOpen?e.close():e.open()},sendMessage:async i=>{let o=t();if(!i.trim()||i.length>a.INTELLIGENCE_LIMITS.MAX_USER_MESSAGE_LENGTH)return;if(o.messages.length>=a.INTELLIGENCE_LIMITS.MAX_MESSAGES_PER_CONVERSATION){let t=I("max-messages");e(e=>({messages:[...e.messages,t]}));return}if(o.remainingQueries<=0){let t=I("rate-limit",{resetTime:o.rateLimitResetAt?new Date(o.rateLimitResetAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"--:--"});e(e=>({messages:[...e.messages,t]}));return}let n={id:E(),role:"user",content:i,contentType:"text",timestamp:P()};e(e=>({messages:[...e.messages,n],isTyping:!0}));try{let t=R(),a=await w({text:i,card:o.contextCard,vendor:t,pipeline:O(),mode:o.menuxIntelligenceMode,tone:o.aiTone});e(e=>({messages:[...e.messages,a],isTyping:!1,remainingQueries:e.remainingQueries-1,activeConversation:e.activeConversation?{...e.activeConversation,messages:[...e.messages,a],messageCount:e.messages.length+1,updatedAt:P()}:null}))}catch{let t=I("api-error");e(e=>({messages:[...e.messages,t],isTyping:!1}))}},executeSlashCommand:async(i,o)=>{let n=t(),r=h.useAuthStore.getState().user?.role,s="master"===r||"admin"===r||"comercial"===r||"cs"===r?r:null,d=M(i);if(!d){let t=I("invalid-command");e(e=>({messages:[...e.messages,t]}));return}if(!s||!d.availableFor.includes(s)){let t=I("forbidden-command",{command:d.command});e(e=>({messages:[...e.messages,t]}));return}if(d.requiresCard&&!n.contextCard){let t=I("no-card");e(e=>({messages:[...e.messages,t]}));return}if(d.requiresInput&&!(o??"").trim()){let t=I("missing-command-input",{command:d.command,hint:d.inputPlaceholder??""});e(e=>({messages:[...e.messages,t]}));return}if(n.remainingQueries<=0){let t=I("rate-limit");e(e=>({messages:[...e.messages,t]}));return}if(n.messages.length>=a.INTELLIGENCE_LIMITS.MAX_MESSAGES_PER_CONVERSATION){let t=I("max-messages");e(e=>({messages:[...e.messages,t]}));return}let l={id:E(),role:"user",content:o?`${i} ${o}`:i,contentType:"text",timestamp:P(),sourceCommand:i};e(e=>({messages:[...e.messages,l],isTyping:!0}));try{let t=R(),a=await w({text:o??"",command:i,card:n.contextCard,vendor:t,pipeline:O(),mode:n.menuxIntelligenceMode,tone:n.aiTone});e(e=>({messages:[...e.messages,a],isTyping:!1,remainingQueries:e.remainingQueries-1,activeConversation:e.activeConversation?{...e.activeConversation,messages:[...e.messages,a],messageCount:e.messages.length+1,updatedAt:P()}:null}))}catch{let t=I("api-error");e(e=>({messages:[...e.messages,t],isTyping:!1}))}},setContextCard:t=>{e({contextCard:t})},openClientPicker:()=>{e({isClientPickerOpen:!0,clientPickerSearch:"",clientPickerFilters:{}})},closeClientPicker:()=>{e({isClientPickerOpen:!1})},setClientPickerSearch:t=>{e({clientPickerSearch:t})},setClientPickerFilters:t=>{e({clientPickerFilters:t})},selectClient:t=>{let a={cardId:t.entityId,cardName:t.companyName,stage:t.stage,stageLabel:t.stageLabel,temperature:t.temperature,contacts:[],tags:t.tags??[],overdueActivities:[],timelineNotes:[],registeredObjections:[],entityType:t.entityType},o=(0,i.generateContextLoaded)(a);e(e=>({contextCard:a,isClientPickerOpen:!1,messages:[...e.messages,o]}))},dismissSuggestion:t=>{e(e=>({proactiveSuggestions:e.proactiveSuggestions.map(e=>e.id===t?{...e,dismissed:!0}:e)}))},startNewConversation:()=>{let o=t();o.activeConversation&&o.messages.length>1&&e({history:[{...o.activeConversation,messages:o.messages,messageCount:o.messages.length,updatedAt:P()},...o.history].slice(0,a.INTELLIGENCE_LIMITS.MAX_STORED_CONVERSATIONS)});let n=R(),r=(0,i.generateGreeting)(n,null,!1);e({messages:[r],greetingSent:!0,activeConversation:L([r]),contextCard:null,viewingHistoryConversation:null,isHistoryOpen:!1})},loadConversation:a=>{let i=t().history.find(e=>e.id===a);i&&e({viewingHistoryConversation:i,isHistoryOpen:!1})},exitHistoryView:()=>{e({viewingHistoryConversation:null})},toggleHistory:()=>{e(e=>({isHistoryOpen:!e.isHistoryOpen}))},setActiveScreen:t=>{e({activeScreen:t})},addProactiveSuggestion:i=>{t().proactiveSuggestions.filter(e=>{let t=new Date(e.createdAt),a=new Date;return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear()&&!e.dismissed}).length>=a.INTELLIGENCE_LIMITS.MAX_PROACTIVE_SUGGESTIONS_PER_DAY||e(e=>({proactiveSuggestions:[...e.proactiveSuggestions,{...i,id:E(),dismissed:!1,createdAt:P()}]}))},markActionExecuted:(t,a)=>{e(e=>({messages:e.messages.map(e=>e.id===t?{...e,suggestedActions:e.suggestedActions?.map(e=>e.id===a?{...e,executed:!0}:e)}:e)}))},addAssistantMessage:t=>{let a={...t,id:E(),timestamp:P(),role:"assistant"};e(e=>({messages:[...e.messages,a]}))},decrementRateLimit:()=>{e(e=>{let t=e.remainingQueries-1;return{remainingQueries:Math.max(0,t),rateLimitResetAt:t<=0&&!e.rateLimitResetAt?new Date(Date.now()+36e5).toISOString():e.rateLimitResetAt}})},resetRateLimit:()=>{e({remainingQueries:a.INTELLIGENCE_LIMITS.MAX_QUERIES_PER_HOUR,rateLimitResetAt:null})},setMenuxIntelligenceMode:t=>e({menuxIntelligenceMode:t}),openSettings:()=>e({isSettingsOpen:!0}),closeSettings:()=>e({isSettingsOpen:!1}),setAiTone:t=>e({aiTone:t}),setProactiveFrequency:t=>e({proactiveFrequency:t}),setProactiveNotifications:t=>e({proactiveNotifications:t})}));e.s(["useIntelligenceStore",0,q],84632)}]);
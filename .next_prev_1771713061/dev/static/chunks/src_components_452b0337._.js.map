{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/layout/sidebar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, startTransition } from \"react\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport { usePathname } from \"next/navigation\";\nimport {\n  LayoutDashboard,\n  CalendarCheck,\n  Kanban,\n  Users,\n  DollarSign,\n  Settings,\n  ChevronLeft,\n  ChevronRight,\n  Target,\n  Sparkles,\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { cn } from \"@/lib/cn\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { useSidebarStore } from \"@/stores/sidebar-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { canAccessIntelligence } from \"@/lib/intelligence-permissions\";\n\n// Simple useMediaQuery hook\nfunction useMediaQuery(query: string): boolean {\n  // Keep first client render equal to SSR to avoid hydration mismatch.\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    const mql = window.matchMedia(query);\n    startTransition(() => {\n      setMatches(mql.matches);\n    });\n\n    function handleChange(e: MediaQueryListEvent) {\n      startTransition(() => {\n        setMatches(e.matches);\n      });\n    }\n\n    mql.addEventListener(\"change\", handleChange);\n    return () => mql.removeEventListener(\"change\", handleChange);\n  }, [query]);\n\n  return matches;\n}\n\nconst PENDING_ACTIVITIES_COUNT = 3;\n\nconst navItems = [\n  {\n    label: \"Dashboard\",\n    href: \"/dashboard\",\n    icon: LayoutDashboard,\n  },\n  {\n    label: \"Atividades\",\n    href: \"/activities\",\n    icon: CalendarCheck,\n    badge: PENDING_ACTIVITIES_COUNT,\n  },\n  {\n    label: \"Pipes\",\n    href: \"/pipes\",\n    icon: Kanban,\n  },\n  {\n    label: \"Clientes\",\n    href: \"/clients\",\n    icon: Users,\n  },\n  {\n    label: \"Financeiro\",\n    href: \"/finance\",\n    icon: DollarSign,\n    permission: \"canViewFinance\" as const,\n  },\n  {\n    label: \"Metas\",\n    href: \"/goals\",\n    icon: Target,\n    permission: \"canManageGoals\" as const,\n  },\n  {\n    label: \"Configurações\",\n    href: \"/settings/general\",\n    icon: Settings,\n    permission: \"canManageSettings\" as const,\n  },\n];\n\nexport function Sidebar() {\n  const pathname = usePathname();\n  const { isExpanded, toggle } = useSidebarStore();\n  const { permissions, user } = useAuthStore();\n  const isDesktop = useMediaQuery(\"(min-width: 768px)\");\n  const [isMobileOpen, setIsMobileOpen] = useState(false);\n  const hasIntelligenceAccess = user?.role ? canAccessIntelligence(user.role) : false;\n\n  // Close mobile sidebar on route change\n  useEffect(() => {\n    startTransition(() => {\n      setIsMobileOpen(false);\n    });\n  }, [pathname]);\n\n  // Expose toggle for header hamburger use\n  useEffect(() => {\n    if (!isDesktop) {\n      // Sync: when sidebar store toggle is called on mobile, open mobile overlay\n      // This is handled via the header's toggle call\n    }\n  }, [isDesktop]);\n  const filteredItems = navItems.filter((item) => {\n    if (!item.permission) return true;\n    if (!permissions) return false;\n    return permissions[item.permission];\n  });\n\n  const sidebarExpanded = isDesktop ? isExpanded : true;\n\n  // On mobile, listen for the sidebar store toggle to open overlay\n  useEffect(() => {\n    if (!isDesktop) {\n      const unsub = useSidebarStore.subscribe((state, prev) => {\n        if (state.isExpanded !== prev.isExpanded) {\n          setIsMobileOpen((open) => !open);\n        }\n      });\n      return unsub;\n    }\n  }, [isDesktop]);\n\n  return (\n    <>\n      {/* Mobile backdrop */}\n      <AnimatePresence>\n        {!isDesktop && isMobileOpen && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"fixed inset-0 top-16 z-40 bg-black/30 backdrop-blur-sm\"\n            onClick={() => setIsMobileOpen(false)}\n          />\n        )}\n      </AnimatePresence>\n\n      {/* Sidebar */}\n      <aside\n        className={cn(\n          \"fixed left-0 top-0 z-40 flex h-screen flex-col border-r border-zinc-200/70 bg-white/90 backdrop-blur-xl transition-[width,transform] duration-200 ease-[cubic-bezier(0.4,0,0.2,1)]\",\n          isDesktop\n            ? isExpanded\n              ? \"w-60\"\n              : \"w-16\"\n            : \"w-60\",\n          !isDesktop && !isMobileOpen && \"-translate-x-full\"\n        )}\n      >\n        <div className=\"border-b border-zinc-200/80 p-3\">\n          <Link\n            href=\"/dashboard\"\n            onClick={() => {\n              if (!isDesktop) setIsMobileOpen(false);\n            }}\n            className={cn(\n              \"premium-shine flex h-11 items-center justify-center rounded-[14px] px-0 transition-colors\",\n              \"hover:bg-zinc-100/80\"\n            )}\n          >\n            <AnimatePresence mode=\"wait\">\n              {sidebarExpanded ? (\n                <motion.div\n                  key=\"expanded-logo\"\n                  initial={{ opacity: 0, x: -6 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: -6 }}\n                  transition={{ duration: 0.14 }}\n                >\n                  <Image\n                    src=\"/flow-logo.svg\"\n                    alt=\"Flow by Menux\"\n                    width={84}\n                    height={22}\n                    priority\n                    className=\"h-[22px] w-auto\"\n                  />\n                </motion.div>\n              ) : (\n                <motion.div\n                  key=\"collapsed-logo\"\n                  initial={{ opacity: 0, scale: 0.9 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  exit={{ opacity: 0, scale: 0.9 }}\n                  transition={{ duration: 0.14 }}\n                  className=\"flex h-8 w-8 items-center justify-center rounded-full bg-brand/10 font-heading text-base font-semibold text-brand-strong\"\n                >\n                  F\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </Link>\n        </div>\n\n        {/* Navigation */}\n        <nav className=\"flex flex-1 flex-col gap-1 p-3\">\n          {filteredItems.map((item) => {\n            const isActive =\n              pathname === item.href || pathname.startsWith(item.href + \"/\");\n            const Icon = item.icon;\n            const hasBadge = item.badge && item.badge > 0;\n\n            const linkContent = (\n              <Link\n                href={item.href}\n                onClick={() => {\n                  if (!isDesktop) setIsMobileOpen(false);\n                }}\n                className={cn(\n                  \"premium-shine flex items-center gap-3 rounded-[15px] px-3 py-2.5 text-sm font-medium transition-colors duration-100\",\n                  isActive\n                    ? \"bg-brand/10 text-brand-strong ring-1 ring-brand/15\"\n                    : \"text-zinc-600 hover:bg-zinc-100/80 hover:text-black\"\n                )}\n              >\n                <div className=\"relative shrink-0\">\n                  <Icon className=\"h-5 w-5\" />\n                  {hasBadge && !sidebarExpanded && (\n                    <span className=\"absolute -right-1.5 -top-1.5 flex h-4 w-4 items-center justify-center rounded-full bg-status-danger text-[10px] font-bold text-white\">\n                      {item.badge}\n                    </span>\n                  )}\n                </div>\n                <AnimatePresence>\n                  {sidebarExpanded && (\n                    <motion.span\n                      initial={{ opacity: 0, width: 0 }}\n                      animate={{ opacity: 1, width: \"auto\" }}\n                      exit={{ opacity: 0, width: 0 }}\n                      transition={{ duration: 0.15 }}\n                      className=\"overflow-hidden whitespace-nowrap font-body\"\n                    >\n                      {item.label}\n                    </motion.span>\n                  )}\n                </AnimatePresence>\n                {hasBadge && sidebarExpanded && (\n                  <span className=\"ml-auto flex h-5 w-5 items-center justify-center rounded-full bg-status-danger text-[10px] font-bold text-white\">\n                    {item.badge}\n                  </span>\n                )}\n              </Link>\n            );\n\n            if (!sidebarExpanded) {\n              return (\n                <Tooltip key={item.href}>\n                  <TooltipTrigger asChild>{linkContent}</TooltipTrigger>\n                  <TooltipContent side=\"right\">\n                    <p>{item.label}</p>\n                  </TooltipContent>\n                </Tooltip>\n              );\n            }\n\n            return <div key={item.href}>{linkContent}</div>;\n          })}\n        </nav>\n\n        {hasIntelligenceAccess && (\n          <div className=\"px-3 pb-3\">\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Link\n                  href=\"/intelligence\"\n                  className={cn(\n                    \"premium-shine group flex items-center gap-3 rounded-[15px] px-3 py-2.5 text-sm font-medium transition-all duration-200\",\n                    pathname === \"/intelligence\"\n                      ? \"menux-intelligence-btn text-slate-100\"\n                      : \"menux-intelligence-btn-soft\"\n                  )}\n                  onClick={() => {\n                    if (!isDesktop) setIsMobileOpen(false);\n                  }}\n                >\n                  <div className=\"relative shrink-0\">\n                    <Sparkles\n                      className={cn(\n                        \"h-5 w-5 transition-transform duration-300\",\n                        pathname === \"/intelligence\" ? \"text-cyan-100\" : \"text-cyan-200\",\n                        \"group-hover:scale-110\"\n                      )}\n                    />\n                    {pathname === \"/intelligence\" && (\n                      <span className=\"absolute inset-0 animate-ping rounded-full bg-white opacity-30\"></span>\n                    )}\n                  </div>\n                  <AnimatePresence>\n                    {sidebarExpanded && (\n                      <motion.span\n                        initial={{ opacity: 0, width: 0 }}\n                        animate={{ opacity: 1, width: \"auto\" }}\n                        exit={{ opacity: 0, width: 0 }}\n                        transition={{ duration: 0.15 }}\n                        className=\"overflow-hidden whitespace-nowrap font-heading font-semibold\"\n                      >\n                        Menux Intelligence\n                      </motion.span>\n                    )}\n                  </AnimatePresence>\n                </Link>\n              </TooltipTrigger>\n              <TooltipContent side=\"right\">\n                <p>Menux Intelligence</p>\n              </TooltipContent>\n            </Tooltip>\n          </div>\n        )}\n\n        {/* Collapse Toggle - only on desktop */}\n        {isDesktop && (\n          <div className=\"border-t border-zinc-200 p-3\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={toggle}\n              className={cn(\n                \"h-9 w-9 rounded-full text-zinc-400 hover:bg-zinc-100 hover:text-zinc-700\",\n                isExpanded && \"ml-auto\"\n              )}\n            >\n              {isExpanded ? (\n                <ChevronLeft className=\"h-4 w-4\" />\n              ) : (\n                <ChevronRight className=\"h-4 w-4\" />\n              )}\n            </Button>\n          </div>\n        )}\n      </aside>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 571, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/layout/app-shell.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef } from \"react\";\nimport { usePathname } from \"next/navigation\";\nimport { cn } from \"@/lib/cn\";\nimport { useSidebarStore } from \"@/stores/sidebar-store\";\nimport { Sidebar } from \"./sidebar\";\n\nexport function AppShell({ children }: { children: React.ReactNode }) {\n  const { isExpanded } = useSidebarStore();\n  const mainRef = useRef<HTMLDivElement>(null);\n  const pathname = usePathname();\n  const isIntelligenceRoute =\n    pathname === \"/intelligence\" || pathname.startsWith(\"/intelligence/\");\n\n  return (\n    <div className=\"flex h-screen w-full overflow-hidden premium-mesh\">\n      {/* Sidebar - Fixed Left, Full Height */}\n      <Sidebar />\n\n      {/* Main Column - Flex Vertical */}\n      <div\n        className={cn(\n          \"flex min-w-0 flex-1 flex-col h-full relative transition-[margin-left] duration-200 ease-[cubic-bezier(0.4,0,0.2,1)]\",\n          \"ml-0 md:ml-0\" // Sidebar handles its own spacing via width interaction if needed, or we adapt layout\n        )}\n        style={{\n          // If sidebar is 'fixed' inside, we might need margin. \n          // But simpler: Sidebar is a flex child? \n          // The current Sidebar component is 'fixed'. We need to align with that or change Sidebar code.\n          // Let's assume we will refactor Sidebar to NOT be fixed-to-viewport but simply a block.\n          // For now, let's keep Sidebar fixed logic in mind, so we add margin-left.\n          marginLeft: isExpanded ? \"15rem\" : \"4rem\" // 60 (15rem) or 16 (4rem)\n        }}\n      >\n        {/* Content Scroll Area */}\n        <main\n          ref={mainRef}\n          className={cn(\n            \"flex-1 overflow-x-hidden\",\n            isIntelligenceRoute\n              ? \"overflow-hidden p-0\"\n              : \"overflow-y-auto px-6 pb-24 pt-4 md:pb-8\"\n          )}\n        >\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQO,SAAS,SAAS,EAAE,QAAQ,EAAiC;;IAClE,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,uJAAe;IACtC,MAAM,UAAU,IAAA,uKAAM,EAAiB;IACvC,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,sBACJ,aAAa,mBAAmB,SAAS,UAAU,CAAC;IAEtD,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC,qJAAO;;;;;0BAGR,6LAAC;gBACC,WAAW,IAAA,yHAAE,EACX,uHACA,eAAe,sFAAsF;;gBAEvG,OAAO;oBACL,uDAAuD;oBACvD,yCAAyC;oBACzC,+FAA+F;oBAC/F,wFAAwF;oBACxF,0EAA0E;oBAC1E,YAAY,aAAa,UAAU,OAAO,0BAA0B;gBACtE;0BAGA,cAAA,6LAAC;oBACC,KAAK;oBACL,WAAW,IAAA,yHAAE,EACX,4BACA,sBACI,wBACA;8BAGL;;;;;;;;;;;;;;;;;AAKX;GA1CgB;;QACS,uJAAe;QAErB,oJAAW;;;KAHd"}},
    {"offset": {"line": 651, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/layout/route-transition.tsx"],"sourcesContent":["\"use client\";\n\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { usePathname } from \"next/navigation\";\nimport { pageSlideFade } from \"@/lib/motion\";\n\nexport function RouteTransition({ children }: { children: React.ReactNode }) {\n  const pathname = usePathname();\n\n  return (\n    <AnimatePresence mode=\"wait\" initial={false}>\n      <motion.div\n        key={pathname}\n        variants={pageSlideFade}\n        initial=\"hidden\"\n        animate=\"show\"\n        exit=\"exit\"\n        className=\"h-full\"\n      >\n        {children}\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;;;AAJA;;;;AAMO,SAAS,gBAAgB,EAAE,QAAQ,EAAiC;;IACzE,MAAM,WAAW,IAAA,oJAAW;IAE5B,qBACE,6LAAC,+MAAe;QAAC,MAAK;QAAO,SAAS;kBACpC,cAAA,6LAAC,uMAAM,CAAC,GAAG;YAET,UAAU,wIAAa;YACvB,SAAQ;YACR,SAAQ;YACR,MAAK;YACL,WAAU;sBAET;WAPI;;;;;;;;;;AAWb;GAjBgB;;QACG,oJAAW;;;KADd"}},
    {"offset": {"line": 705, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/cards/visit-card.tsx"],"sourcesContent":["\nimport * as React from \"react\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport {\n    Calendar,\n    CheckCircle,\n    Clock,\n    Copy,\n    ExternalLink,\n    MapPin,\n    MoreHorizontal,\n    Plus,\n    RefreshCw,\n    Trash2,\n    User,\n    Video,\n    X,\n    AlertCircle,\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n    DropdownMenu,\n    DropdownMenuContent,\n    DropdownMenuItem,\n    DropdownMenuSeparator,\n    DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n// --- Types (Partial, based on usage) ---\n// Ideally these should be imported from @/types or similar\nexport type VisitType = \"presencial\" | \"remoto\" | \"outro\";\nexport type VisitStatus = \"agendada\" | \"realizada\" | \"cancelada\";\n\nexport interface Visit {\n    id: string;\n    type: VisitType;\n    status: VisitStatus;\n    location: string;\n    responsible: string;\n    startAt: string;\n    createdAt: string;\n\n    // Optional fields\n    objective?: string;\n    result?: string;\n    durationMinutes?: number;\n    link?: string;\n    platform?: string;\n    cancellationReason?: string;\n    accessSearch?: string;\n    details?: string;\n\n    // Legacy / Helper fields (optional)\n    date?: string;\n    time?: string;\n    title?: string;\n    duration?: string;\n    description?: string;\n    responsibleId?: string;\n    participants?: string[];\n}\n\ninterface VisitCardProps {\n    visit: Visit;\n    isExpanded: boolean;\n    isLocked?: boolean;\n    onToggleDetails: () => void;\n    onStatusChange: (id: string, status: \"realizada\" | \"cancelada\") => void;\n    onReschedule: (id: string, days: number) => void;\n    onDuplicate: (id: string) => void;\n    onFollowUp: (visit: Visit) => void;\n    onDelete: (id: string) => void;\n}\n\n// --- Helpers ---\nconst visitTypeLabel = {\n    presencial: \"Visita Presencial\",\n    remoto: \"Reunião Remota\",\n    outro: \"Outro\",\n};\n\nconst visitStatusLabel = {\n    agendada: \"Agendada\",\n    realizada: \"Realizada\",\n    cancelada: \"Cancelada\",\n};\n\nconst visitStatusClassName = {\n    agendada: \"bg-blue-100 text-blue-700\",\n    realizada: \"bg-green-100 text-green-700\",\n    cancelada: \"bg-red-100 text-red-700\",\n};\n\nconst formatVisitDateLabel = (date?: Date | string) => {\n    if (!date) return \"--/--\";\n    const d = typeof date === \"string\" ? new Date(date) : date;\n    if (isNaN(d.getTime())) return \"--/--\";\n\n    const today = new Date();\n    const isToday =\n        d.getDate() === today.getDate() &&\n        d.getMonth() === today.getMonth() &&\n        d.getFullYear() === today.getFullYear();\n\n    if (isToday) {\n        return `Hoje, ${format(d, \"HH:mm\")}`;\n    }\n    return format(d, \"dd/MM, HH:mm\", { locale: ptBR });\n};\n\nexport function VisitCard({\n    visit,\n    isExpanded,\n    isLocked = false,\n    onToggleDetails,\n    onStatusChange,\n    onReschedule,\n    onDuplicate,\n    onFollowUp,\n    onDelete,\n}: VisitCardProps) {\n    // Format metadata\n    const locationText =\n        visit.type === 'presencial' ? visit.location :\n            visit.type === 'remoto' ? visit.platform || \"Online\" :\n                \"Outro\";\n\n    const isAgendada = visit.status === 'agendada';\n    const isCancelada = visit.status === 'cancelada';\n\n    return (\n        <div\n            className={cn(\n                \"group relative rounded-2xl border bg-white transition-all duration-200\",\n                isExpanded\n                    ? \"border-brand/30 shadow-[0_8px_24px_rgba(0,0,0,0.08)] ring-1 ring-brand/10\"\n                    : \"border-zinc-100 hover:border-zinc-200 hover:shadow-sm\"\n            )}\n        >\n            {/* Clickable Header / Body area */}\n            <div\n                className=\"flex cursor-pointer items-start gap-4 p-4\"\n                onClick={onToggleDetails}\n            >\n                {/* Icon Column */}\n                <div className={cn(\n                    \"flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl border transition-colors\",\n                    visit.type === \"presencial\"\n                        ? \"border-purple-100 bg-purple-50 text-purple-600\"\n                        : visit.type === \"remoto\"\n                            ? \"border-blue-100 bg-blue-50 text-blue-600\"\n                            : \"border-zinc-200 bg-zinc-50 text-zinc-500\"\n                )}>\n                    {visit.type === \"presencial\" ? (\n                        <MapPin className=\"h-6 w-6\" />\n                    ) : visit.type === \"remoto\" ? (\n                        <Video className=\"h-6 w-6\" />\n                    ) : (\n                        <Calendar className=\"h-6 w-6\" />\n                    )}\n                </div>\n\n                {/* Content Column */}\n                <div className=\"flex-1 min-w-0 space-y-1\">\n                    {/* Row 1: Title & Status */}\n                    <div className=\"flex items-start justify-between gap-3\">\n                        <div>\n                            <h4 className={cn(\n                                \"font-heading text-sm font-semibold transition-colors\",\n                                isExpanded ? \"text-brand\" : \"text-zinc-900\",\n                                isCancelada && \"text-zinc-500 line-through decoration-zinc-400\"\n                            )}>\n                                {visit.title || visitTypeLabel[visit.type]}\n                            </h4>\n                            <p className=\"truncate text-xs text-zinc-500\">\n                                {locationText || \"Sem local definido\"}\n                            </p>\n                        </div>\n\n                        <Badge\n                            variant=\"secondary\"\n                            className={cn(\n                                \"shrink-0 rounded-full px-2.5 py-0.5 text-[10px] font-bold uppercase tracking-wide\",\n                                visitStatusClassName[visit.status]\n                            )}\n                        >\n                            {visitStatusLabel[visit.status]}\n                        </Badge>\n                    </div>\n\n                    {/* Row 2: Metadata */}\n                    <div className=\"flex flex-wrap items-center gap-x-4 gap-y-1 pt-1\">\n                        <div className=\"flex items-center gap-1.5 text-xs text-zinc-500\">\n                            <Calendar className=\"h-3.5 w-3.5 text-zinc-400\" />\n                            <span className=\"font-medium text-zinc-700\">\n                                {formatVisitDateLabel(visit.startAt || (visit.date && visit.time ? `${visit.date}T${visit.time}` : undefined))}\n                            </span>\n                        </div>\n\n                        <div className=\"flex items-center gap-1.5 text-xs text-zinc-500\">\n                            <User className=\"h-3.5 w-3.5 text-zinc-400\" />\n                            <span className=\"truncate max-w-[120px]\">\n                                {visit.responsible || \"Sem responsável\"}\n                            </span>\n                        </div>\n\n                        {visit.durationMinutes ? (\n                            <div className=\"flex items-center gap-1.5 text-xs text-zinc-500\">\n                                <Clock className=\"h-3.5 w-3.5 text-zinc-400\" />\n                                <span>{visit.durationMinutes} min</span>\n                            </div>\n                        ) : null}\n                    </div>\n                </div>\n            </div>\n\n            {/* Actions Strip */}\n            <div className=\"flex items-center justify-between border-t border-zinc-50 bg-zinc-50/50 px-4 py-2 rounded-b-2xl\">\n                <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    className={cn(\n                        \"h-8 -ml-2 gap-1.5 rounded-full px-3 text-xs font-medium transition-colors hover:bg-white hover:shadow-sm\",\n                        isExpanded ? \"text-brand bg-brand/5\" : \"text-zinc-600\"\n                    )}\n                    onClick={onToggleDetails}\n                >\n                    {isExpanded ? (\n                        <>\n                            <X className=\"h-3.5 w-3.5\" /> Fechar detalhes\n                        </>\n                    ) : (\n                        <>\n                            <Plus className=\"h-3.5 w-3.5\" /> Ver detalhes\n                        </>\n                    )}\n                </Button>\n\n                <div className=\"flex items-center gap-1\">\n                    {/* Quick Actions based on Status */}\n                    {isAgendada && !isLocked && (\n                        <>\n                            <Button\n                                size=\"sm\"\n                                variant=\"ghost\"\n                                className=\"h-8 gap-1.5 rounded-full px-3 text-xs font-medium text-green-700 hover:bg-green-50 hover:text-green-800\"\n                                onClick={() => onStatusChange(visit.id, \"realizada\")}\n                            >\n                                <CheckCircle className=\"h-3.5 w-3.5\" />\n                                Realizada\n                            </Button>\n                        </>\n                    )}\n\n                    {/* More Menu */}\n                    <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                            <Button\n                                size=\"sm\"\n                                variant=\"ghost\"\n                                className=\"h-8 w-8 rounded-full p-0 text-zinc-400 hover:bg-white hover:text-zinc-600 hover:shadow-sm\"\n                                disabled={isLocked}\n                            >\n                                <MoreHorizontal className=\"h-4 w-4\" />\n                            </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"end\" className=\"w-48 rounded-xl p-1\">\n                            {isAgendada && (\n                                <>\n                                    <DropdownMenuItem onClick={() => onReschedule(visit.id, 1)}>\n                                        <RefreshCw className=\"mr-2 h-3.5 w-3.5\" />\n                                        Reagendar (+1 dia)\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem\n                                        className=\"text-red-600 focus:text-red-700 focus:bg-red-50\"\n                                        onClick={() => onStatusChange(visit.id, \"cancelada\")}\n                                    >\n                                        <X className=\"mr-2 h-3.5 w-3.5\" />\n                                        Cancelar visita\n                                    </DropdownMenuItem>\n                                    <DropdownMenuSeparator />\n                                </>\n                            )}\n\n                            <DropdownMenuItem onClick={() => onDuplicate(visit.id)}>\n                                <Copy className=\"mr-2 h-3.5 w-3.5\" />\n                                Duplicar\n                            </DropdownMenuItem>\n                            <DropdownMenuItem onClick={() => onFollowUp(visit)}>\n                                <Plus className=\"mr-2 h-3.5 w-3.5\" />\n                                Criar follow-up\n                            </DropdownMenuItem>\n\n                            <DropdownMenuSeparator />\n                            <DropdownMenuItem\n                                className=\"text-red-600 focus:text-red-700 focus:bg-red-50\"\n                                onClick={() => onDelete(visit.id)}\n                            >\n                                <Trash2 className=\"mr-2 h-3.5 w-3.5\" />\n                                Excluir\n                            </DropdownMenuItem>\n                        </DropdownMenuContent>\n                    </DropdownMenu>\n                </div>\n            </div>\n\n            {/* Expanded Details Panel */}\n            <AnimatePresence>\n                {isExpanded && (\n                    <motion.div\n                        initial={{ opacity: 0, height: 0 }}\n                        animate={{ opacity: 1, height: \"auto\" }}\n                        exit={{ opacity: 0, height: 0 }}\n                        transition={{ duration: 0.2, ease: \"easeInOut\" }}\n                        className=\"overflow-hidden border-t border-zinc-100 bg-zinc-50/50\"\n                    >\n                        <div className=\"grid gap-4 p-5 text-sm\">\n                            {/* Context / Objective */}\n                            {visit.objective && (\n                                <div className=\"space-y-1\">\n                                    <h5 className=\"font-heading text-xs font-bold uppercase tracking-wider text-zinc-400\">Objetivo</h5>\n                                    <p className=\"text-zinc-700 leading-relaxed\">{visit.objective}</p>\n                                </div>\n                            )}\n\n                            {/* Result (if any) */}\n                            {visit.result && (\n                                <div className=\"space-y-1 rounded-lg bg-green-50/50 p-3 border border-green-100\">\n                                    <h5 className=\"flex items-center gap-1.5 font-heading text-xs font-bold uppercase tracking-wider text-green-700\">\n                                        <CheckCircle className=\"h-3 w-3\" /> Resultado\n                                    </h5>\n                                    <p className=\"text-zinc-700 leading-relaxed\">{visit.result}</p>\n                                </div>\n                            )}\n\n                            {/* Cancellation Reason (if any) */}\n                            {visit.cancellationReason && (\n                                <div className=\"space-y-1 rounded-lg bg-red-50/50 p-3 border border-red-100\">\n                                    <h5 className=\"flex items-center gap-1.5 font-heading text-xs font-bold uppercase tracking-wider text-red-700\">\n                                        <AlertCircle className=\"h-3 w-3\" /> Motivo do Cancelamento\n                                    </h5>\n                                    <p className=\"text-zinc-700 leading-relaxed\">{visit.cancellationReason}</p>\n                                </div>\n                            )}\n\n                            {/* Internal Details */}\n                            {visit.details && (\n                                <div className=\"space-y-1\">\n                                    <h5 className=\"font-heading text-xs font-bold uppercase tracking-wider text-zinc-400\">Detalhes Internos</h5>\n                                    <p className=\"text-zinc-600 leading-relaxed whitespace-pre-wrap\">{visit.details}</p>\n                                </div>\n                            )}\n\n                            {/* Action Links (e.g. Meeting Link) */}\n                            {visit.link && (visit.type === 'remoto') && (\n                                <div className=\"pt-2\">\n                                    <Button\n                                        variant=\"outline\"\n                                        className=\"h-9 gap-2 w-full justify-start text-zinc-700 hover:text-brand hover:border-brand/30\"\n                                        onClick={() => window.open(visit.link, '_blank')}\n                                    >\n                                        <Video className=\"h-4 w-4\" />\n                                        Entrar na reunião agora\n                                        <ExternalLink className=\"ml-auto h-3 w-3 opacity-50\" />\n                                    </Button>\n                                </div>\n                            )}\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1370, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/intelligence/intelligence-fab.tsx"],"sourcesContent":["\"use client\";\n\n// ============================================================================\n// Menux Intelligence — FAB (Floating Action Button)\n// Ref: docs/Menux Intelligence.md — seção 2.1\n// ============================================================================\n\nimport { useEffect, useCallback } from \"react\";\nimport { useRouter, usePathname } from \"next/navigation\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Sparkles } from \"lucide-react\";\nimport { cn } from \"@/lib/cn\";\nimport { useIntelligenceStore } from \"@/stores/intelligence-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { canAccessIntelligence } from \"@/lib/intelligence-permissions\";\n\nexport function IntelligenceFAB() {\n  const router = useRouter();\n  const pathname = usePathname();\n  const { proactiveSuggestions } = useIntelligenceStore();\n  const user = useAuthStore((s) => s.user);\n\n  // Verificar permissão — seção 9.1 e 11: perfil Leitura não vê o FAB\n  const hasAccess = user?.role ? canAccessIntelligence(user.role) : false;\n\n  // Atalho de teclado global: Ctrl/Cmd + I — seção 2.1\n  const handleKeyDown = useCallback(\n    (e: KeyboardEvent) => {\n      if (!hasAccess) return;\n      if ((e.ctrlKey || e.metaKey) && e.key === \"i\") {\n        e.preventDefault();\n        router.push(\"/intelligence\");\n      }\n    },\n    [hasAccess, router]\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [handleKeyDown]);\n\n  // Não renderizar se não tem permissão — seção 11\n  if (!hasAccess) return null;\n\n  // Badge proativo: sugestões não dispensadas\n  const pendingSuggestions = proactiveSuggestions.filter(\n    (s) => !s.dismissed\n  );\n  const hasPendingSuggestions = pendingSuggestions.length > 0;\n  const highPriority = pendingSuggestions.some((s) => s.priority === \"high\");\n\n  // Hide FAB on the intelligence page itself\n  if (pathname === \"/intelligence\") return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ scale: 0, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0, opacity: 0 }}\n        transition={{ type: \"spring\", stiffness: 300, damping: 25 }}\n        className=\"fixed bottom-6 right-6 z-50 md:block\" // Changed bottom position slightly\n      >\n        <button\n          onClick={() => router.push(\"/intelligence\")}\n          className={cn(\n              \"group relative flex h-14 w-14 items-center justify-center rounded-full border border-white/18 bg-slate-950/94 text-cyan-100 shadow-[0_18px_34px_-18px_rgba(2,6,23,0.9)] transition-all hover:scale-105 hover:border-cyan-300/40 hover:shadow-[0_22px_36px_-16px_rgba(34,211,238,0.34)] active:scale-95\",\n              \"focus:outline-none focus:ring-2 focus:ring-cyan-300/40 focus:ring-offset-2\"\n            )}\n            aria-label=\"Abrir Menux Intelligence\"\n            title=\"Menux Intelligence\"\n          >\n            {/* Pulse animation ring */}\n            <span className=\"absolute inset-0 animate-ping rounded-full bg-cyan-400 opacity-15\" />\n\n            {/* Icon */}\n            <Sparkles className=\"relative z-10 h-5 w-5 transition-transform group-hover:rotate-12\" />\n\n            {/* Proactive suggestion badge com contagem — seção 5.1 */}\n            {hasPendingSuggestions && (\n              <motion.span\n                initial={{ scale: 0 }}\n                animate={{ scale: 1 }}\n                className={cn(\n                  \"absolute -right-1 -top-1 z-20 flex items-center justify-center rounded-full text-[10px] font-bold text-white\",\n                  \"ring-2 ring-white\",\n                  pendingSuggestions.length > 9 ? \"h-5 w-5\" : \"h-4.5 w-4.5 min-w-[18px]\",\n                  highPriority\n                    ? \"bg-red-500\" // Vermelho — atividade vencida / lead quente parado\n                    : \"bg-blue-500\" // Azul — início do dia / resumo\n                )}\n              >\n                {/* Inner pulse for high priority */}\n                {highPriority && (\n                  <span className=\"absolute inset-0 rounded-full bg-red-500 animate-ping opacity-75\" />\n                )}\n                {pendingSuggestions.length > 99 ? \"99+\" : pendingSuggestions.length}\n              </motion.span>\n            )}\n          </button>\n\n          {/* Tooltip on hover */}\n          <div className=\"pointer-events-none absolute -left-[140px] top-1/2 -translate-y-1/2 opacity-0 transition-opacity group-hover:opacity-100\">\n            <div className=\"rounded-lg bg-slate-900 px-3 py-1.5 text-xs font-medium text-white shadow-lg whitespace-nowrap\">\n              Menux Intelligence\n            </div>\n          </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA,+EAA+E;AAC/E,oDAAoD;AACpD,8CAA8C;AAC9C,+EAA+E;AAE/E;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AAdA;;;;;;;;;AAgBO,SAAS;;IACd,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,oBAAoB,EAAE,GAAG,IAAA,iKAAoB;IACrD,MAAM,OAAO,IAAA,iJAAY;8CAAC,CAAC,IAAM,EAAE,IAAI;;IAEvC,oEAAoE;IACpE,MAAM,YAAY,MAAM,OAAO,IAAA,qKAAqB,EAAC,KAAK,IAAI,IAAI;IAElE,qDAAqD;IACrD,MAAM,gBAAgB,IAAA,4KAAW;sDAC/B,CAAC;YACC,IAAI,CAAC,WAAW;YAChB,IAAI,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,EAAE,GAAG,KAAK,KAAK;gBAC7C,EAAE,cAAc;gBAChB,OAAO,IAAI,CAAC;YACd;QACF;qDACA;QAAC;QAAW;KAAO;IAGrB,IAAA,0KAAS;qCAAC;YACR,OAAO,gBAAgB,CAAC,WAAW;YACnC;6CAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;oCAAG;QAAC;KAAc;IAElB,iDAAiD;IACjD,IAAI,CAAC,WAAW,OAAO;IAEvB,4CAA4C;IAC5C,MAAM,qBAAqB,qBAAqB,MAAM,CACpD,CAAC,IAAM,CAAC,EAAE,SAAS;IAErB,MAAM,wBAAwB,mBAAmB,MAAM,GAAG;IAC1D,MAAM,eAAe,mBAAmB,IAAI,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK;IAEnE,2CAA2C;IAC3C,IAAI,aAAa,iBAAiB,OAAO;IAEzC,qBACE,6LAAC,+MAAe;kBACd,cAAA,6LAAC,uMAAM,CAAC,GAAG;YACT,SAAS;gBAAE,OAAO;gBAAG,SAAS;YAAE;YAChC,SAAS;gBAAE,OAAO;gBAAG,SAAS;YAAE;YAChC,MAAM;gBAAE,OAAO;gBAAG,SAAS;YAAE;YAC7B,YAAY;gBAAE,MAAM;gBAAU,WAAW;gBAAK,SAAS;YAAG;YAC1D,WAAU;;8BAEV,6LAAC;oBACC,SAAS,IAAM,OAAO,IAAI,CAAC;oBAC3B,WAAW,IAAA,yHAAE,EACT,0SACA;oBAEF,cAAW;oBACX,OAAM;;sCAGN,6LAAC;4BAAK,WAAU;;;;;;sCAGhB,6LAAC,yNAAQ;4BAAC,WAAU;;;;;;wBAGnB,uCACC,6LAAC,uMAAM,CAAC,IAAI;4BACV,SAAS;gCAAE,OAAO;4BAAE;4BACpB,SAAS;gCAAE,OAAO;4BAAE;4BACpB,WAAW,IAAA,yHAAE,EACX,gHACA,qBACA,mBAAmB,MAAM,GAAG,IAAI,YAAY,4BAC5C,eACI,aAAa,oDAAoD;+BACjE,cAAc,gCAAgC;;;gCAInD,8BACC,6LAAC;oCAAK,WAAU;;;;;;gCAEjB,mBAAmB,MAAM,GAAG,KAAK,QAAQ,mBAAmB,MAAM;;;;;;;;;;;;;8BAMzE,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;kCAAiG;;;;;;;;;;;;;;;;;;;;;;AAO5H;GA/FgB;;QACC,kJAAS;QACP,oJAAW;QACK,iKAAoB;QACxC,iJAAY;;;KAJX"}},
    {"offset": {"line": 1557, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/intelligence/intelligence-provider.tsx"],"sourcesContent":["\"use client\";\n\n// ============================================================================\n// Menux Intelligence — Provider\n// Componente raiz que renderiza FAB + Drawer + gerencia empilhamento\n// Ref: docs/Menux Intelligence.md — seção 2.2.3 (empilhamento)\n// Renderizado no (auth)/layout.tsx junto com GlobalDrawers\n// ============================================================================\n\nimport { useEffect } from \"react\";\nimport { useIntelligenceStore } from \"@/stores/intelligence-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { canAccessIntelligence } from \"@/lib/intelligence-permissions\";\nimport { useProactiveEngine } from \"@/hooks/use-proactive-engine\";\nimport { IntelligenceFAB } from \"./intelligence-fab\";\n\nexport function IntelligenceProvider() {\n  const user = useAuthStore((s) => s.user);\n  const hasAccess = user?.role ? canAccessIntelligence(user.role) : false;\n\n  // Motor proativo: roda a cada 5 min e gera sugestões automáticas\n  useProactiveEngine();\n\n  // Reset de rate limit a cada hora\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const { rateLimitResetAt, resetRateLimit } =\n        useIntelligenceStore.getState();\n      if (rateLimitResetAt && new Date(rateLimitResetAt) <= new Date()) {\n        resetRateLimit();\n      }\n    }, 60000); // Check every minute\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // Não renderizar nada se o perfil não tem acesso — seção 11\n  if (!hasAccess) return null;\n\n  return (\n    <>\n      <IntelligenceFAB />\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA,+EAA+E;AAC/E,gCAAgC;AAChC,qEAAqE;AACrE,+DAA+D;AAC/D,2DAA2D;AAC3D,+EAA+E;AAE/E;AACA;AACA;AACA;AACA;AACA;;;AAdA;;;;;;;AAgBO,SAAS;;IACd,MAAM,OAAO,IAAA,iJAAY;mDAAC,CAAC,IAAM,EAAE,IAAI;;IACvC,MAAM,YAAY,MAAM,OAAO,IAAA,qKAAqB,EAAC,KAAK,IAAI,IAAI;IAElE,iEAAiE;IACjE,IAAA,mKAAkB;IAElB,kCAAkC;IAClC,IAAA,0KAAS;0CAAC;YACR,MAAM,WAAW;2DAAY;oBAC3B,MAAM,EAAE,gBAAgB,EAAE,cAAc,EAAE,GACxC,iKAAoB,CAAC,QAAQ;oBAC/B,IAAI,oBAAoB,IAAI,KAAK,qBAAqB,IAAI,QAAQ;wBAChE;oBACF;gBACF;0DAAG,QAAQ,qBAAqB;YAEhC;kDAAO,IAAM,cAAc;;QAC7B;yCAAG,EAAE;IAEL,4DAA4D;IAC5D,IAAI,CAAC,WAAW,OAAO;IAEvB,qBACE;kBACE,cAAA,6LAAC,+KAAe;;;;;;AAGtB;GA5BgB;;QACD,iJAAY;QAIzB,mKAAkB;;;KALJ"}}]
}
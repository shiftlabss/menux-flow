{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/drawers/lead-card-drawer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect, useMemo, useCallback } from \"react\";\nimport {\n  X,\n  Phone,\n  MessageCircle,\n  Circle,\n  Mail,\n  Calendar,\n  Tag,\n  DollarSign,\n  User,\n  Users,\n  Store,\n  Clock,\n  Flame,\n  Thermometer,\n  Snowflake,\n  MoreHorizontal,\n  Building2,\n  Plus,\n  Trash2,\n  Star,\n  Shield,\n  ChevronRight,\n  Check,\n  CheckCircle,\n  Pencil,\n  Globe,\n  MapPin,\n  TrendingUp,\n  FileText,\n  ArrowRight,\n  AlertTriangle,\n  RefreshCw,\n  Loader2,\n  ChevronDown,\n  Activity,\n  Filter,\n  Instagram,\n  ExternalLink,\n  UtensilsCrossed,\n  Copy,\n  UserCircle,\n  Coffee,\n  Beer,\n  Pizza,\n  ShoppingBasket,\n  Truck,\n  GlassWater,\n  ChefHat,\n  Wine,\n  Clock3,\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { VisitCard } from \"@/components/cards/visit-card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { maskCep } from \"@/lib/masks\";\nimport { PhoneInput } from \"@/components/ui/masked-inputs\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Tabs, TabsContent } from \"@/components/ui/tabs\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogDescription,\n  DialogFooter,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport type { Activity as FlowActivity, Contact, Temperature, PipelineStage, Opportunity } from \"@/types\";\nimport {\n  calculateCardPatentScore,\n  calculateLeadScore,\n  calculateTemperature,\n  getPositionPatentScore,\n  RESTAURANT_POSITIONS,\n} from \"@/lib/business-rules\";\nimport { mockActivities } from \"@/lib/mock-data\";\nimport { stageFieldsConfig } from \"@/lib/mock-stage-fields\";\nimport { StageFieldsPanel } from \"@/components/drawers/stage-fields\";\nimport { NegotiationTab } from \"./lead-negotiation-tab\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport { NewVisitModal } from \"@/components/modals/new-visit-modal\";\nimport type { VisitFormData } from \"@/lib/validations/visit\";\nimport { NewActivityModal } from \"@/components/modals/new-activity-modal\";\nimport type { ActivityFormData } from \"@/lib/validations/activity\";\nimport { useContactStore } from \"@/stores/contact-store\";\nimport { useVisitStore } from \"@/stores/visit-store\";\nimport { useNoteStore } from \"@/stores/note-store\";\nimport { mockUsers } from \"@/lib/mock-data\";\n\n\n// ═══════════════════════════════════════════════════════════════════\n// Types & Constants\n// ═══════════════════════════════════════════════════════════════════\n\ntype DealStatus = \"open\" | \"won\" | \"lost\";\ntype BannerVariant = \"success\" | \"error\" | \"info\" | \"warning\";\ntype TimelineFilterType =\n  | \"all\"\n  | \"activity\"\n  | \"stage-change\"\n  | \"note\"\n  | \"value-change\";\n\ninterface InlineBanner {\n  message: string;\n  variant: BannerVariant;\n  action?: { label: string; onClick: () => void };\n}\n\ntype NoteIntent =\n  | \"general\"\n  | \"pedido_cliente\"\n  | \"objecao\"\n  | \"decisao\"\n  | \"proximo_passo\"\n  | \"system\";\ntype NoteVisibility = \"team\" | \"internal\";\ntype NotesFilter = \"all\" | \"cliente\" | \"decisao\" | \"proximo_passo\";\ntype StageFieldSaveState = \"idle\" | \"saving\" | \"saved\" | \"error\";\ntype LeadDrawerTab =\n  | \"empresa\"\n  | \"contatos\"\n  | \"visitas\"\n  | \"atividades\"\n  | \"negociacao\"\n  | \"anotacoes\"\n  | \"linha-do-tempo\";\n\ninterface OpportunityNote {\n  id: string;\n  body: string;\n  authorId: string;\n  authorName: string;\n  createdAt: string;\n  intent: NoteIntent;\n  visibility: NoteVisibility;\n  isSystem?: boolean;\n}\n\ninterface NextStepDraft {\n  action: string;\n  dueDate: string;\n  channel: \"call\" | \"whatsapp\" | \"email\" | \"meeting\" | \"visit\";\n  ownerId: string;\n}\n\nconst NOTE_EDIT_WINDOW_MS = 15 * 60 * 1000;\nconst NOTE_MIN_LENGTH = 10;\nconst NOTE_MAX_LENGTH = 2000;\nconst EXECUTION_SIGNAL_WINDOW_DAYS = 7;\nconst MIN_CONTACTS_PER_CARD = 1;\nconst MAX_CONTACTS_PER_CARD = 10;\nconst PROPOSAL_STAGE_ID: PipelineStage = \"proposta-enviada\";\nconst LOGGED_USER = {\n  id: \"u1\",\n  name: \"Maria Silva\",\n};\n\nconst noteIntentOptions: Array<{ id: Exclude<NoteIntent, \"system\">; label: string }> = [\n  { id: \"pedido_cliente\", label: \"Pedido do cliente\" },\n  { id: \"objecao\", label: \"Objeção\" },\n  { id: \"decisao\", label: \"Decisão\" },\n  { id: \"proximo_passo\", label: \"Próximo passo\" },\n];\n\nconst noteFilterOptions: Array<{ id: NotesFilter; label: string }> = [\n  { id: \"all\", label: \"Todos\" },\n  { id: \"cliente\", label: \"Cliente\" },\n  { id: \"decisao\", label: \"Decisões\" },\n  { id: \"proximo_passo\", label: \"Próximo passo\" },\n];\n\nconst noteIntentMeta: Record<\n  NoteIntent,\n  { label: string; chipClass: string }\n> = {\n  general: {\n    label: \"Registro\",\n    chipClass: \"border-zinc-200 bg-zinc-100 text-zinc-700\",\n  },\n  pedido_cliente: {\n    label: \"Pedido do cliente\",\n    chipClass: \"border-sky-200 bg-sky-50 text-sky-700\",\n  },\n  objecao: {\n    label: \"Objeção\",\n    chipClass: \"border-amber-200 bg-amber-50 text-amber-700\",\n  },\n  decisao: {\n    label: \"Decisão\",\n    chipClass: \"border-emerald-200 bg-emerald-50 text-emerald-700\",\n  },\n  proximo_passo: {\n    label: \"Próximo passo\",\n    chipClass: \"border-brand/20 bg-brand/10 text-brand\",\n  },\n  system: {\n    label: \"Sistema\",\n    chipClass: \"border-zinc-200 bg-zinc-100 text-zinc-500\",\n  },\n};\n\nfunction resolveLeadDrawerTab(rawTab: unknown): LeadDrawerTab {\n  if (typeof rawTab !== \"string\") return \"empresa\";\n  const tab = rawTab.trim().toLowerCase();\n\n  switch (tab) {\n    case \"empresa\":\n      return \"empresa\";\n    case \"contatos\":\n      return \"contatos\";\n    case \"visitas\":\n      return \"visitas\";\n    case \"atividades\":\n      return \"atividades\";\n    case \"negociacao\":\n    case \"negociação\":\n      return \"negociacao\";\n    case \"anotacoes\":\n    case \"anotações\":\n    case \"notes\":\n      return \"anotacoes\";\n    case \"linha-do-tempo\":\n    case \"timeline\":\n      return \"linha-do-tempo\";\n    default:\n      return \"empresa\";\n  }\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// Telemetria — Frontend event tracking stub\n// ═══════════════════════════════════════════════════════════════════\n\nfunction trackEvent(\n  event: string,\n  properties?: Record<string, string | number | boolean>,\n) {\n  // Stub: em produção, seria integrado com analytics provider\n  if (typeof window !== \"undefined\" && process.env.NODE_ENV === \"development\") {\n    console.debug(`[telemetry] ${event}`, properties);\n  }\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// Config maps\n// ═══════════════════════════════════════════════════════════════════\n\nconst temperatureConfig: Record<\n  Temperature,\n  {\n    label: string;\n    icon: React.ReactNode;\n    color: string;\n    bg: string;\n    border: string;\n    chipClass: string;\n  }\n> = {\n  hot: {\n    label: \"Quente\",\n    icon: <Flame className=\"h-3.5 w-3.5\" />,\n    color: \"text-status-danger\",\n    bg: \"bg-status-danger-light\",\n    border: \"border-status-danger/15\",\n    chipClass: \"bg-red-50 text-red-600 border-red-200/40 hover:bg-red-100/60\",\n  },\n  warm: {\n    label: \"Morna\",\n    icon: <Thermometer className=\"h-3.5 w-3.5\" />,\n    color: \"text-status-warning\",\n    bg: \"bg-status-warning-light\",\n    border: \"border-status-warning/15\",\n    chipClass:\n      \"bg-amber-50 text-amber-600 border-amber-200/40 hover:bg-amber-100/60\",\n  },\n  cold: {\n    label: \"Fria\",\n    icon: <Snowflake className=\"h-3.5 w-3.5\" />,\n    color: \"text-status-info\",\n    bg: \"bg-status-info-light\",\n    border: \"border-status-info/15\",\n    chipClass: \"bg-sky-50 text-sky-600 border-sky-200/40 hover:bg-sky-100/60\",\n  },\n};\n\nconst stageConfig: { id: PipelineStage; label: string }[] = [\n  { id: \"lead-in\", label: \"Lead-In\" },\n  { id: \"contato-feito\", label: \"Contato Feito\" },\n  { id: \"reuniao-agendada\", label: \"Reuniao Agendada\" },\n  { id: \"proposta-enviada\", label: \"Proposta Enviada\" },\n  { id: \"negociacao\", label: \"Negociacao\" },\n  { id: \"fechamento\", label: \"Fechamento\" },\n];\n\nconst statusConfig: Record<\n  DealStatus,\n  { label: string; color: string; bg: string }\n> = {\n  open: { label: \"Aberto\", color: \"text-brand\", bg: \"bg-brand/10\" },\n  won: {\n    label: \"Ganho\",\n    color: \"text-status-success\",\n    bg: \"bg-status-success/10\",\n  },\n  lost: {\n    label: \"Perdido\",\n    color: \"text-status-danger\",\n    bg: \"bg-status-danger/10\",\n  },\n};\n\nconst COMPANY_TYPES = [\n  { id: \"restaurante\", label: \"Restaurante\", icon: UtensilsCrossed },\n  { id: \"cafeteria\", label: \"Cafeteria\", icon: Coffee },\n  { id: \"bar\", label: \"Bar / Pub\", icon: Beer },\n  { id: \"pizzaria\", label: \"Pizzaria\", icon: Pizza },\n  { id: \"hamburgueria\", label: \"Hamburgueria\", icon: ChefHat },\n  { id: \"padaria\", label: \"Padaria\", icon: ShoppingBasket },\n  { id: \"sorveteria\", label: \"Sorveteria\", icon: GlassWater },\n  { id: \"delivery\", label: \"Delivery\", icon: Truck },\n  { id: \"food-truck\", label: \"Food Truck\", icon: Flame },\n  { id: \"bistro\", label: \"Bistrô\", icon: Wine },\n  { id: \"buffet\", label: \"Buffet\", icon: Users },\n  { id: \"adega\", label: \"Adega / Empório\", icon: Store },\n];\n\nconst DAYS_OF_WEEK = [\n  { id: \"seg\", label: \"Segunda\" },\n  { id: \"ter\", label: \"Terça\" },\n  { id: \"qua\", label: \"Quarta\" },\n  { id: \"qui\", label: \"Quinta\" },\n  { id: \"sex\", label: \"Sexta\" },\n  { id: \"sab\", label: \"Sábado\" },\n  { id: \"dom\", label: \"Domingo\" },\n];\n\nconst UF_LIST = [\"AC\", \"AL\", \"AP\", \"AM\", \"BA\", \"CE\", \"DF\", \"ES\", \"GO\", \"MA\", \"MT\", \"MS\", \"MG\", \"PA\", \"PB\", \"PR\", \"PE\", \"PI\", \"RJ\", \"RN\", \"RS\", \"RO\", \"RR\", \"SC\", \"SP\", \"SE\", \"TO\"];\n\n\n// ═══════════════════════════════════════════════════════════════════\n// Mock Data\n// ═══════════════════════════════════════════════════════════════════\n\nconst mockLead = {\n  id: \"1\",\n  clientId: \"client-1\",\n  title: \"Restaurante Bela Vista\",\n  clientName: \"Restaurante Bela Vista Ltda\",\n  nomeFantasia: \"Restaurante Bela Vista\",\n  segmento: \"Food service premium\",\n  nomeInterno: \"\",\n  fonte: \"Indicação parceiro\",\n  cep: \"01411-000\",\n  logradouro: \"Rua das Flores\",\n  numero: \"123\",\n  complemento: \"\",\n  bairro: \"Jardim Paulista\",\n  cidade: \"Sao Paulo\",\n  estado: \"SP\",\n  telefoneEmpresa: \"(11) 3456-7890\",\n  emailEmpresa: \"contato@belavista.com\",\n  value: 12000,\n  monthlyValue: 1000,\n  stage: \"contato-feito\" as PipelineStage,\n  temperature: \"hot\" as Temperature,\n  score: 78,\n  responsibleId: \"u1\",\n  responsibleName: \"Maria Silva\",\n  responsibleAvatar: \"\",\n  tags: [\"food-service\", \"restaurante\", \"premium\"],\n  source: \"Indicacao\",\n  currency: \"BRL\",\n  expectedCloseDate: \"2026-03-15\",\n  createdAt: \"2026-01-15\",\n  updatedAt: \"2026-02-05\",\n  notes:\n    \"Cliente muito interessado. Agendar reuniao de apresentacao do modulo financeiro.\",\n  groupName: null,\n  website: \"https://belavista.com.br\",\n  instagram: \"https://instagram.com/belavistarestaurante\",\n  cardapio: \"https://belavista.com.br/cardapio\",\n  metadata: {\n    stageValues: {\n      origem_lead: \"google\",\n    },\n  },\n};\n\nfunction getCargoLabel(value: string): string {\n  return RESTAURANT_POSITIONS.find((p) => p.value === value)?.label ?? value;\n}\n\nfunction getPatentScore(cargo: string): number {\n  return getPositionPatentScore(cargo);\n}\n\nconst mockTeamMembers = mockUsers.filter(u => u.isActive).map(u => ({ id: u.id, name: u.name, avatar: \"\" }));\n\ninterface TimelineItem {\n  id: string | number;\n  type: string;\n  message?: string;\n  user?: string;\n  date: string;\n  title?: string;\n  description?: string;\n  author?: string;\n  icon?: React.ElementType;\n}\n\nfunction buildTimelineFromStores(opportunityId: string): TimelineItem[] {\n  const visits = useVisitStore.getState().getByOpportunity(opportunityId);\n  const notes = useNoteStore.getState().getByOpportunity(opportunityId);\n\n  const items: TimelineItem[] = [];\n\n  for (const v of visits) {\n    items.push({\n      id: v.id,\n      type: v.status === \"realizada\" ? \"activity\" : \"created\",\n      message: `Visita ${v.type}: ${v.objective ?? v.location}`,\n      user: v.responsible,\n      date: new Date(v.startAt).toLocaleString(\"pt-BR\", { day: \"2-digit\", month: \"2-digit\", year: \"numeric\", hour: \"2-digit\", minute: \"2-digit\" }),\n    });\n  }\n\n  for (const n of notes) {\n    items.push({\n      id: n.id,\n      type: n.isSystem ? \"stage-change\" : \"note\",\n      message: n.body.slice(0, 80) + (n.body.length > 80 ? \"...\" : \"\"),\n      user: n.authorName,\n      date: new Date(n.createdAt).toLocaleString(\"pt-BR\", { day: \"2-digit\", month: \"2-digit\", year: \"numeric\", hour: \"2-digit\", minute: \"2-digit\" }),\n    });\n  }\n\n  return items.sort((a, b) => {\n    const da = new Date(a.date.split(\", \").reverse().join(\"T\") || a.date);\n    const db = new Date(b.date.split(\", \").reverse().join(\"T\") || b.date);\n    return db.getTime() - da.getTime();\n  });\n}\n\ntype VisitType = \"presencial\" | \"remoto\" | \"outro\";\ntype VisitStatus = \"agendada\" | \"realizada\" | \"cancelada\";\n\ninterface VisitRow {\n  id: string;\n  type: VisitType;\n  location: string;\n  status: VisitStatus;\n  startAt: string;\n  responsible: string;\n  objective?: string;\n  result?: string;\n  outcome?: \"realizada\" | \"no-show\" | \"remarcada\";\n  durationMinutes?: number;\n  link?: string;\n  platform?: string;\n  cancellationReason?: string;\n  accessSearch?: string;\n  details?: string;\n  createdAt: string;\n}\n\nconst visitPlatformLabel: Record<string, string> = {\n  \"google-meet\": \"Google Meet\",\n  zoom: \"Zoom\",\n  whatsapp: \"WhatsApp\",\n  outro: \"Outra plataforma\",\n};\n\nconst visitOutcomeLabel: Record<\"realizada\" | \"no-show\" | \"remarcada\", string> = {\n  realizada: \"Realizada\",\n  \"no-show\": \"No-show\",\n  remarcada: \"Remarcada\",\n};\n\nconst visitStatusSortOrder: Record<VisitStatus, number> = {\n  agendada: 0,\n  realizada: 1,\n  cancelada: 2,\n};\n\nfunction formatVisitDateLabel(isoString: string) {\n  const date = new Date(isoString);\n  if (Number.isNaN(date.getTime())) return \"Data inválida\";\n  return date.toLocaleString(\"pt-BR\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n}\n\nconst mockVisits: VisitRow[] = [\n  {\n    id: \"v1\",\n    type: \"presencial\",\n    location: \"Restaurante Bela Vista\",\n    status: \"agendada\",\n    startAt: \"2026-02-15T14:00:00.000Z\",\n    responsible: \"Maria Silva\",\n    objective: \"Validar escopo de onboarding e próximos marcos.\",\n    durationMinutes: 60,\n    createdAt: \"2026-02-10T09:00:00.000Z\",\n  },\n  {\n    id: \"v2\",\n    type: \"remoto\",\n    location: \"Google Meet\",\n    status: \"realizada\",\n    startAt: \"2026-02-10T10:00:00.000Z\",\n    responsible: \"Pedro Santos\",\n    result: \"Cliente demonstrou interesse no módulo financeiro.\",\n    objective: \"Apresentar proposta e mapear objeções.\",\n    platform: \"google-meet\",\n    link: \"https://meet.google.com/abc-defg-hij\",\n    durationMinutes: 60,\n    createdAt: \"2026-02-06T12:00:00.000Z\",\n  },\n];\n\nconst mockNotesSeed: OpportunityNote[] = [\n  {\n    id: \"n1\",\n    authorId: \"u1\",\n    authorName: \"Maria Silva\",\n    createdAt: \"2026-02-14T09:30:00.000Z\",\n    body: \"Cliente solicitou nova proposta com desconto de 5% para fechar ainda este mês.\",\n    intent: \"pedido_cliente\",\n    visibility: \"team\",\n  },\n  {\n    id: \"n2\",\n    authorId: \"u2\",\n    authorName: \"Pedro Santos\",\n    createdAt: \"2026-02-10T16:15:00.000Z\",\n    body: \"Reunião de alinhamento realizada. O cliente gostou bastante da demonstração do painel financeiro.\",\n    intent: \"decisao\",\n    visibility: \"team\",\n  },\n  {\n    id: \"n3\",\n    authorId: \"system\",\n    authorName: \"Sistema\",\n    createdAt: \"2026-02-05T10:00:00.000Z\",\n    body: \"Oportunidade movida para a etapa de Negociação.\",\n    intent: \"system\",\n    visibility: \"team\",\n    isSystem: true,\n  },\n];\n\nconst lostReasons = [\n  \"Preco alto\",\n  \"Escolheu concorrente\",\n  \"Sem orcamento\",\n  \"Projeto cancelado\",\n  \"Sem resposta\",\n  \"Outro\",\n];\n\n// ═══════════════════════════════════════════════════════════════════\n// Utility Functions\n// ═══════════════════════════════════════════════════════════════════\n\nfunction getScoreColor(score: number) {\n  if (score >= 70)\n    return \"bg-emerald-50 text-emerald-700 border border-emerald-200/50\";\n  if (score >= 40)\n    return \"bg-amber-50 text-amber-700 border border-amber-200/50\";\n  return \"bg-red-50 text-red-700 border border-red-200/50\";\n}\n\nfunction getScoreLabel(score: number) {\n  if (score >= 70) return \"Alto\";\n  if (score >= 40) return \"Medio\";\n  return \"Baixo\";\n}\n\n\nfunction getInitials(name: string) {\n  return name\n    .split(\" \")\n    .map((n) => n[0])\n    .join(\"\")\n    .slice(0, 2)\n    .toUpperCase();\n}\n\nfunction isFieldValueEmpty(value: string | number | boolean | null | undefined) {\n  if (value === null || value === undefined) return true;\n  if (typeof value === \"boolean\") return false;\n  if (typeof value === \"number\") return Number.isNaN(value) || value === 0;\n  return value.toString().trim().length === 0;\n}\n\nfunction formatNoteDateTime(dateIso: string) {\n  const date = new Date(dateIso);\n  return date.toLocaleString(\"pt-BR\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n}\n\nfunction formatNoteDayLabel(dateIso: string) {\n  const date = new Date(dateIso);\n  return date.toLocaleDateString(\"pt-BR\", {\n    weekday: \"long\",\n    day: \"2-digit\",\n    month: \"2-digit\",\n  });\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// InlineStatusBanner\n// ═══════════════════════════════════════════════════════════════════\n\nfunction InlineStatusBanner({\n  banner,\n  onDismiss,\n}: {\n  banner: InlineBanner;\n  onDismiss: () => void;\n}) {\n  useEffect(() => {\n    if (banner.variant === \"success\" || banner.variant === \"info\") {\n      const timer = setTimeout(onDismiss, 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [banner, onDismiss]);\n\n  const variantStyles: Record<BannerVariant, string> = {\n    success:\n      \"bg-status-success/10 text-status-success border-status-success/20\",\n    error: \"bg-status-danger/10 text-status-danger border-status-danger/20\",\n    info: \"bg-brand/10 text-brand border-brand/20\",\n    warning:\n      \"bg-status-warning/10 text-status-warning border-status-warning/20\",\n  };\n\n  const icons: Record<BannerVariant, React.ReactNode> = {\n    success: <Check className=\"h-3.5 w-3.5 shrink-0\" />,\n    error: <AlertTriangle className=\"h-3.5 w-3.5 shrink-0\" />,\n    info: <Activity className=\"h-3.5 w-3.5 shrink-0\" />,\n    warning: <AlertTriangle className=\"h-3.5 w-3.5 shrink-0\" />,\n  };\n\n  return (\n    <div\n      className={`flex items-center gap-2 rounded-[10px] border px-3 py-2 font-body text-xs font-medium animate-in fade-in slide-in-from-top-1 duration-200 ${variantStyles[banner.variant]}`}\n      role={banner.variant === \"error\" ? \"alert\" : \"status\"}\n      aria-live={banner.variant === \"error\" ? \"assertive\" : \"polite\"}\n    >\n      {icons[banner.variant]}\n      <span className=\"flex-1\">{banner.message}</span>\n      {banner.action && (\n        <button\n          onClick={banner.action.onClick}\n          className=\"shrink-0 underline underline-offset-2 transition-opacity hover:opacity-70\"\n        >\n          {banner.action.label}\n        </button>\n      )}\n      <button\n        onClick={onDismiss}\n        className=\"shrink-0 rounded p-0.5 transition-colors hover:bg-black/10\"\n        aria-label=\"Fechar\"\n      >\n        <X className=\"h-3 w-3\" />\n      </button>\n    </div>\n  );\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// InlineEditable with save/cancel states\n// ═══════════════════════════════════════════════════════════════════\n\nfunction InlineEditable({\n  value,\n  onSave,\n  className = \"\",\n  inputClassName = \"\",\n  type = \"text\",\n  readOnly = false,\n  validate,\n}: {\n  value: string;\n  onSave: (val: string) => void;\n  className?: string;\n  inputClassName?: string;\n  type?: string;\n  readOnly?: boolean;\n  validate?: (val: string) => string | null;\n}) {\n  const [editing, setEditing] = useState(false);\n  const [draft, setDraft] = useState(value);\n  const [error, setError] = useState<string | null>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (editing && inputRef.current) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, [editing]);\n\n  function handleSave() {\n    if (validate) {\n      const err = validate(draft);\n      if (err) {\n        setError(err);\n        return;\n      }\n    }\n    setEditing(false);\n    setError(null);\n    if (draft !== value) onSave(draft);\n  }\n\n  function handleCancel() {\n    setDraft(value);\n    setEditing(false);\n    setError(null);\n  }\n\n  if (readOnly) {\n    return <span className={className}>{value || \"--\"}</span>;\n  }\n\n  if (editing) {\n    return (\n      <div className=\"flex flex-col gap-1\">\n        <div className=\"flex items-center gap-1\">\n          <Input\n            ref={inputRef}\n            type={type}\n            value={draft}\n            onChange={(e) => {\n              setDraft(e.target.value);\n              setError(null);\n            }}\n            onBlur={handleSave}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") handleSave();\n              if (e.key === \"Escape\") handleCancel();\n            }}\n            className={`h-7 rounded-[10px] font-body text-sm ${inputClassName}`}\n          />\n          <button\n            onMouseDown={(e) => e.preventDefault()}\n            onClick={handleSave}\n            className=\"flex h-6 w-6 shrink-0 items-center justify-center rounded-md text-status-success transition-colors hover:bg-status-success/10\"\n            aria-label=\"Salvar\"\n          >\n            <Check className=\"h-3.5 w-3.5\" />\n          </button>\n          <button\n            onMouseDown={(e) => e.preventDefault()}\n            onClick={handleCancel}\n            className=\"flex h-6 w-6 shrink-0 items-center justify-center rounded-md text-zinc-400 transition-colors hover:bg-zinc-100\"\n            aria-label=\"Cancelar\"\n          >\n            <X className=\"h-3.5 w-3.5\" />\n          </button>\n        </div>\n        {error && (\n          <p className=\"font-body text-[10px] text-status-danger\" role=\"alert\">\n            {error}\n          </p>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <span\n      onClick={() => {\n        setDraft(value);\n        setEditing(true);\n      }}\n      className={`cursor-pointer rounded-md px-1 py-0.5 transition-colors hover:bg-zinc-100 ${className}`}\n      title=\"Clique para editar\"\n      role=\"button\"\n      tabIndex={0}\n      onKeyDown={(e) => {\n        if (e.key === \"Enter\" || e.key === \" \") {\n          e.preventDefault();\n          setDraft(value);\n          setEditing(true);\n        }\n      }}\n    >\n      {value || \"--\"}\n    </span>\n  );\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// StageRail — Premium stage navigation\n// ═══════════════════════════════════════════════════════════════════\n\nfunction StageRail({\n  currentStage,\n  onStageChange,\n  disabled = false,\n  statusBanner,\n  onBannerDismiss,\n}: {\n  currentStage: PipelineStage;\n  onStageChange: (stage: PipelineStage) => void;\n  disabled?: boolean;\n  statusBanner: InlineBanner | null;\n  onBannerDismiss: () => void;\n}) {\n  const currentIndex = stageConfig.findIndex((s) => s.id === currentStage);\n  const currentLabel = stageConfig[currentIndex]?.label ?? \"Etapa\";\n\n  return (\n    <div className=\"space-y-2\">\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <button\n            disabled={disabled}\n            className={`inline-flex h-8 items-center gap-1.5 rounded-full border border-brand/20 bg-brand/10 px-3 py-1.5 font-body text-xs font-semibold text-brand transition-all duration-150 ease-out hover:bg-brand/15 hover:border-brand/30 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-1 ${disabled ? \"pointer-events-none opacity-50\" : \"\"}`}\n            aria-label={`Etapa atual: ${currentLabel}`}\n          >\n            <span className=\"font-body text-[10px] font-medium text-brand/60\">\n              Etapa\n            </span>\n            <span className=\"font-body text-[11px]\">{currentLabel}</span>\n            <ChevronDown className=\"h-3 w-3 opacity-60\" />\n          </button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent\n          align=\"start\"\n          className=\"rounded-[var(--radius-bento-card)] min-w-[200px]\"\n        >\n          {stageConfig.map((stage, i) => {\n            const isActive = stage.id === currentStage;\n            const isPast = i < currentIndex;\n\n            return (\n              <DropdownMenuItem\n                key={stage.id}\n                onClick={() => onStageChange(stage.id)}\n                className={`flex items-center gap-2 font-body text-sm ${isActive\n                  ? \"font-semibold text-brand\"\n                  : isPast\n                    ? \"text-brand/70\"\n                    : \"text-zinc-500\"\n                  }`}\n              >\n                {isPast && <Check className=\"h-3.5 w-3.5 text-brand\" />}\n                {isActive && (\n                  <ChevronRight className=\"h-3.5 w-3.5 text-brand\" />\n                )}\n                {!isPast && !isActive && <span className=\"h-3.5 w-3.5\" />}\n                {stage.label}\n                {isActive && (\n                  <span className=\"ml-auto rounded-full bg-brand/10 px-1.5 py-0.5 font-body text-[9px] font-medium text-brand\">\n                    Atual\n                  </span>\n                )}\n              </DropdownMenuItem>\n            );\n          })}\n        </DropdownMenuContent>\n      </DropdownMenu>\n      {statusBanner && (\n        <InlineStatusBanner banner={statusBanner} onDismiss={onBannerDismiss} />\n      )}\n    </div>\n  );\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// Timeline Premium with filter\n// ═══════════════════════════════════════════════════════════════════\n\n\nfunction getTimelineIcon(type: string, CustomIcon?: React.ElementType) {\n  if (CustomIcon) return <CustomIcon className=\"h-3.5 w-3.5\" />;\n  switch (type) {\n    case \"activity\":\n      return <CheckCircle className=\"h-3.5 w-3.5\" />;\n    case \"stage-change\":\n      return <ArrowRight className=\"h-3.5 w-3.5\" />;\n    case \"note\":\n      return <FileText className=\"h-3.5 w-3.5\" />;\n    case \"value-change\":\n      return <DollarSign className=\"h-3.5 w-3.5\" />;\n    case \"tag-added\":\n      return <Tag className=\"h-3.5 w-3.5\" />;\n    default:\n      return <Clock className=\"h-3.5 w-3.5\" />;\n  }\n}\n\nfunction getTimelineIconColor(type: string) {\n  switch (type) {\n    case \"activity\":\n      return \"bg-brand/10 text-brand\";\n    case \"stage-change\":\n      return \"bg-purple-50 text-purple-600\";\n    case \"note\":\n      return \"bg-yellow-50 text-yellow-600\";\n    case \"value-change\":\n      return \"bg-green-50 text-green-600\";\n    case \"tag-added\":\n      return \"bg-zinc-100 text-zinc-500\";\n    default:\n      return \"bg-zinc-100 text-zinc-500\";\n  }\n}\n\nfunction TimelinePremium({ events }: { events: TimelineItem[] }) {\n  const [filter, setFilter] = useState<TimelineFilterType>(\"all\");\n\n  const filterOptions: { value: TimelineFilterType; label: string }[] = [\n    { value: \"all\", label: \"Todos\" },\n    { value: \"activity\", label: \"Atividades\" },\n    { value: \"stage-change\", label: \"Etapas\" },\n    { value: \"note\", label: \"Notas\" },\n    { value: \"value-change\", label: \"Valores\" },\n  ];\n\n  const filteredEvents =\n    filter === \"all\" ? events : events.filter((e: TimelineItem) => e.type === filter);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Filter chips */}\n      <div className=\"flex items-center gap-2\">\n        <Filter className=\"h-3.5 w-3.5 text-zinc-300\" />\n        {filterOptions.map((opt) => (\n          <button\n            key={opt.value}\n            onClick={() => setFilter(opt.value)}\n            className={cn(\n              \"rounded-full px-2.5 py-1 font-body text-[11px] font-medium transition-all\",\n              filter === opt.value\n                ? \"bg-brand/10 text-brand\"\n                : \"bg-zinc-50 text-zinc-400 hover:bg-zinc-100\"\n            )}\n          >\n            {opt.label}\n          </button>\n        ))}\n      </div>\n\n      {/* Timeline entries */}\n      {filteredEvents.length === 0 ? (\n        <div className=\"flex flex-col items-center py-8 text-center\">\n          <Activity className=\"h-8 w-8 text-zinc-200\" />\n          <p className=\"mt-2 font-body text-sm text-zinc-400\">\n            Sem atividades encontradas\n          </p>\n          <Button\n            size=\"sm\"\n            variant=\"ghost\"\n            className=\"mt-2 rounded-full font-body text-xs text-brand\"\n            onClick={() => setFilter(\"all\")}\n          >\n            Limpar filtro\n          </Button>\n        </div>\n      ) : (\n        <div className=\"relative space-y-0\">\n          {filteredEvents.map((event: TimelineItem, i: number) => (\n            <div key={event.id} className=\"group relative flex gap-3 pb-5\">\n              {i < filteredEvents.length - 1 && (\n                <div className=\"absolute left-[13px] top-7 h-full w-px bg-zinc-100\" />\n              )}\n              <div\n                className={cn(\n                  \"relative z-10 flex h-7 w-7 shrink-0 items-center justify-center rounded-full transition-all ring-4 ring-white\",\n                  getTimelineIconColor(event.type)\n                )}\n              >\n                {getTimelineIcon(event.type, event.icon)}\n              </div>\n              <div className=\"min-w-0 flex-1 pt-0.5\">\n                <div className=\"flex flex-col\">\n                  <span className=\"font-heading text-xs font-semibold text-zinc-900\">\n                    {event.title || \"Evento\"}\n                  </span>\n                  <p className=\"font-body text-sm text-zinc-600\">\n                    {event.description || event.message}\n                  </p>\n                </div>\n                <div className=\"mt-1 flex items-center gap-1.5\">\n                  {/* Tiny avatar placeholder or name */}\n                  <div className=\"flex h-4 w-4 items-center justify-center rounded-full bg-zinc-100 text-[9px] font-bold text-zinc-500\">\n                    {(event.author || event.user || \"?\").charAt(0)}\n                  </div>\n                  <p className=\"font-body text-[10px] text-zinc-400\">\n                    {event.author || event.user} &middot; {event.date}\n                  </p>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// Contact Card\n// ═══════════════════════════════════════════════════════════════════\n\nfunction ContactCard({\n  contact,\n  patentScore,\n  isPrimary,\n  onEdit,\n  onDelete,\n  onToggleDecisionMaker,\n}: {\n  contact: Contact;\n  patentScore: number;\n  isPrimary: boolean;\n  onEdit: () => void;\n  onDelete: () => void;\n  onToggleDecisionMaker: () => void;\n}) {\n  return (\n    <div className=\"group flex items-stretch rounded-[14px] border border-zinc-100 transition-all hover:border-zinc-200 hover:shadow-sm\">\n      {/* Decision-maker toggle — left side */}\n      <button\n        type=\"button\"\n        onClick={onToggleDecisionMaker}\n        className={`flex w-9 shrink-0 items-center justify-center rounded-l-[14px] border-r transition-colors ${contact.isDecisionMaker\n          ? \"border-brand/20 bg-brand/10 text-brand\"\n          : \"border-zinc-100 bg-zinc-50/50 text-zinc-300 hover:bg-zinc-100 hover:text-zinc-400\"\n          }`}\n        aria-label={contact.isDecisionMaker ? \"Remover como decisor\" : \"Marcar como decisor\"}\n        title={contact.isDecisionMaker ? \"Decisor (clique para remover)\" : \"Marcar como decisor\"}\n      >\n        <Shield className=\"h-3.5 w-3.5\" />\n      </button>\n\n      {/* Card content */}\n      <div className=\"flex flex-1 items-start justify-between p-3.5\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"flex h-9 w-9 items-center justify-center rounded-full bg-zinc-50\">\n            <User className=\"h-4 w-4 text-zinc-400\" />\n          </div>\n          <div className=\"min-w-0\">\n            <div className=\"flex items-center gap-2\">\n              <p className=\"font-heading text-sm font-semibold text-black\">\n                {contact.nome}\n              </p>\n              {isPrimary && (\n                <Badge className=\"rounded-[6px] bg-zinc-100 px-1.5 py-0.5 font-body text-[9px] text-zinc-700\">\n                  Principal\n                </Badge>\n              )}\n              {contact.isDecisionMaker && (\n                <Badge className=\"gap-0.5 rounded-[6px] bg-brand/10 px-1.5 py-0.5 font-body text-[9px] text-brand\">\n                  <Shield className=\"h-2.5 w-2.5\" /> Decisor\n                </Badge>\n              )}\n              <Badge className=\"gap-0.5 rounded-[6px] bg-indigo-50 px-1.5 py-0.5 font-body text-[9px] text-indigo-700\">\n                Patente {patentScore}\n              </Badge>\n            </div>\n            <p className=\"font-body text-[11px] text-zinc-400\">{getCargoLabel(contact.cargo)}</p>\n            <div className=\"mt-1.5 flex flex-wrap items-center gap-3\">\n              <span className=\"flex items-center gap-1 font-body text-[11px] text-zinc-500\">\n                <Mail className=\"h-3 w-3\" /> {contact.email}\n              </span>\n              <span className=\"flex items-center gap-1 font-body text-[11px] text-zinc-500\">\n                <Phone className=\"h-3 w-3\" /> {contact.telefone}\n              </span>\n            </div>\n            {contact.personalidade && (\n              <p className=\"mt-1.5 font-body text-[11px] italic text-zinc-400\">\n                &ldquo;{contact.personalidade}&rdquo;\n              </p>\n            )}\n          </div>\n        </div>\n        <div className=\"flex items-center gap-0.5 opacity-0 transition-opacity group-hover:opacity-100\">\n          <button\n            onClick={onEdit}\n            className=\"flex h-7 w-7 items-center justify-center rounded-md text-zinc-400 transition-colors hover:bg-zinc-100 hover:text-zinc-600\"\n            aria-label=\"Editar contato\"\n          >\n            <Pencil className=\"h-3.5 w-3.5\" />\n          </button>\n          <button\n            onClick={onDelete}\n            className=\"flex h-7 w-7 items-center justify-center rounded-md text-zinc-400 transition-colors hover:bg-status-danger/10 hover:text-status-danger\"\n            aria-label=\"Remover contato\"\n          >\n            <Trash2 className=\"h-3.5 w-3.5\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// Temperature Selector (compact)\n// ═══════════════════════════════════════════════════════════════════\n\nfunction TemperatureSelect({\n  current,\n  onChange,\n  suggested,\n  disabled = false,\n}: {\n  current: Temperature;\n  onChange: (t: Temperature) => void;\n  suggested?: Temperature;\n  disabled?: boolean;\n}) {\n  const cfg = temperatureConfig[current];\n\n  return (\n    <div\n      className={`flex items-center gap-2 ${disabled ? \"pointer-events-none opacity-50\" : \"\"}`}\n    >\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <button\n            disabled={disabled}\n            className={`inline-flex h-8 items-center gap-1.5 rounded-full border px-3 py-1.5 font-body text-[11px] font-semibold transition-all duration-150 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-1 ${cfg.chipClass}`}\n            aria-label={`Temperatura: ${cfg.label}`}\n          >\n            {cfg.icon}\n            {cfg.label}\n            <ChevronDown className=\"h-3 w-3 opacity-50\" />\n          </button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent\n          align=\"start\"\n          className=\"rounded-[var(--radius-bento-card)] min-w-[180px]\"\n        >\n          {([\"hot\", \"warm\", \"cold\"] as Temperature[]).map((temp) => {\n            const tempCfg = temperatureConfig[temp];\n            const isSelected = current === temp;\n\n            return (\n              <DropdownMenuItem\n                key={temp}\n                onClick={() => onChange(temp)}\n                className={`flex items-center gap-2 font-body text-sm ${isSelected ? \"font-semibold\" : \"\"}`}\n              >\n                <span className={tempCfg.color}>{tempCfg.icon}</span>\n                <span className={isSelected ? tempCfg.color : \"text-zinc-600\"}>\n                  {tempCfg.label}\n                </span>\n                {isSelected && (\n                  <Check className=\"ml-auto h-3.5 w-3.5 text-brand\" />\n                )}\n              </DropdownMenuItem>\n            );\n          })}\n          {suggested && suggested !== current && (\n            <>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem\n                onClick={() => onChange(suggested)}\n                className=\"flex items-center gap-2 font-body text-xs text-brand\"\n              >\n                <Star className=\"h-3 w-3\" />\n                Sugestao: {temperatureConfig[suggested].label}\n              </DropdownMenuItem>\n            </>\n          )}\n        </DropdownMenuContent>\n      </DropdownMenu>\n    </div>\n  );\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// LostReasonDrawer (inline panel)\n// ═══════════════════════════════════════════════════════════════════\n\nfunction LostReasonPanel({\n  onConfirm,\n  onCancel,\n  isLoading,\n}: {\n  onConfirm: (reason: string) => void;\n  onCancel: () => void;\n  isLoading: boolean;\n}) {\n  const [reason, setReason] = useState(\"\");\n\n  return (\n    <div className=\"animate-in slide-in-from-right-2 space-y-4 rounded-[14px] border border-status-danger/20 bg-status-danger/5 p-4 duration-200\">\n      <div>\n        <h4 className=\"font-heading text-sm font-semibold text-status-danger\">\n          Motivo da perda\n        </h4>\n        <p className=\"mt-0.5 font-body text-xs text-zinc-500\">\n          Marcar como perdido encerra a oportunidade. Voce quer continuar?\n        </p>\n      </div>\n      <div className=\"flex flex-wrap gap-2\">\n        {lostReasons.map((r) => (\n          <button\n            key={r}\n            onClick={() => setReason(r)}\n            className={`rounded-full border px-3 py-1.5 font-body text-xs transition-all ${reason === r\n              ? \"border-status-danger bg-status-danger text-white\"\n              : \"border-zinc-200 bg-white text-zinc-600 hover:border-zinc-300\"\n              }`}\n          >\n            {r}\n          </button>\n        ))}\n      </div>\n      <div className=\"flex items-center justify-end gap-2\">\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"rounded-full font-heading text-xs\"\n          onClick={onCancel}\n          disabled={isLoading}\n        >\n          Cancelar\n        </Button>\n        <Button\n          size=\"sm\"\n          className=\"rounded-full bg-status-danger font-heading text-xs text-white hover:bg-status-danger/90\"\n          onClick={() => {\n            if (reason) onConfirm(reason);\n          }}\n          disabled={!reason || isLoading}\n        >\n          {isLoading ? (\n            <Loader2 className=\"mr-1.5 h-3.5 w-3.5 animate-spin\" />\n          ) : null}\n          Confirmar perda\n        </Button>\n      </div>\n    </div>\n  );\n}\n\n\n\n// ═══════════════════════════════════════════════════════════════════\n// CopyButton — Inline copy-to-clipboard with fade feedback\n// ═══════════════════════════════════════════════════════════════════\n\nfunction CopyButton({\n  value,\n  children,\n  className = \"\",\n}: {\n  value: string;\n  children: React.ReactNode;\n  className?: string;\n}) {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = useCallback(() => {\n    navigator.clipboard.writeText(value).then(() => {\n      setCopied(true);\n      setTimeout(() => setCopied(false), 1200);\n    });\n  }, [value]);\n\n  return (\n    <button\n      onClick={handleCopy}\n      className={`group/copy relative inline-flex items-center gap-1.5 transition-all duration-120 ease-out hover:scale-[1.03] hover:bg-black/[0.04] active:scale-[0.97] rounded-md px-1 py-0.5 ${className}`}\n      title={`Copiar: ${value}`}\n    >\n      {children}\n      {copied ? (\n        <span className=\"inline-flex items-center gap-0.5 font-body text-[9px] font-semibold text-status-success animate-in fade-in duration-[90ms]\">\n          <Check className=\"h-2.5 w-2.5\" />\n          Copiado\n        </span>\n      ) : (\n        <Copy className=\"h-2.5 w-2.5 text-zinc-300 opacity-0 transition-opacity duration-120 group-hover/copy:opacity-100\" />\n      )}\n    </button>\n  );\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// ExecutiveCompanyStrip — Faixa C (3 blocos: Empresa, Contato, Deal)\n// ═══════════════════════════════════════════════════════════════════\n\nfunction ExecutiveCompanyStrip({\n  nomeFantasia,\n  segmento,\n  enderecoFormatado,\n  telefoneEmpresa,\n  emailEmpresa,\n  website,\n  instagramUrl,\n  cardapioUrl,\n  primaryContact,\n  stage,\n  temperature,\n  responsibleName,\n  responsibleId,\n  suggestedTemperature,\n  onStageChange,\n  onTemperatureChange,\n  onResponsibleChange,\n  onOpenPrimaryContact,\n  onCreatePrimaryContact,\n  teamMembers,\n  isLocked,\n  stageBanner,\n  onStageBannerDismiss,\n}: {\n  nomeFantasia: string;\n  segmento: string;\n  enderecoFormatado: string;\n  telefoneEmpresa: string;\n  emailEmpresa: string;\n  website: string;\n  instagramUrl: string;\n  cardapioUrl: string;\n  primaryContact: {\n    nome: string;\n    cargo: string;\n    email: string;\n    telefone: string;\n  } | null;\n  stage: PipelineStage;\n  temperature: Temperature;\n  responsibleName: string;\n  responsibleId: string;\n  suggestedTemperature?: Temperature;\n  onStageChange: (s: PipelineStage) => void;\n  onTemperatureChange: (t: Temperature) => void;\n  onResponsibleChange: (id: string, name: string) => void;\n  onOpenPrimaryContact: () => void;\n  onCreatePrimaryContact: () => void;\n  teamMembers: { id: string; name: string; avatar: string }[];\n  isLocked: boolean;\n  stageBanner: InlineBanner | null;\n  onStageBannerDismiss: () => void;\n}) {\n  const [stripUpdatedLabel, setStripUpdatedLabel] = useState<string | null>(\n    null,\n  );\n  const hasAnyLink = website || instagramUrl || cardapioUrl;\n  const hasAnyContact = telefoneEmpresa || emailEmpresa || hasAnyLink;\n\n  const showStripUpdate = useCallback((msg: string) => {\n    setStripUpdatedLabel(msg);\n    setTimeout(() => setStripUpdatedLabel(null), 1200);\n  }, []);\n\n  return (\n    <div className=\"mt-4 pb-2 animate-in fade-in slide-in-from-bottom-1 duration-[180ms] ease-out\">\n      <div className=\"grid grid-cols-1 gap-4 md:grid-cols-12 md:gap-6\">\n        {/* ─── Bloco A: Empresa & Links (5 cols) ─────────────────── */}\n        <div className=\"md:col-span-5 min-w-0\">\n          <div className=\"flex items-center gap-2.5\">\n            <div className=\"flex h-7 w-7 shrink-0 items-center justify-center rounded-lg bg-brand/8\">\n              <Building2 className=\"h-3.5 w-3.5 text-brand\" />\n            </div>\n            <div className=\"min-w-0 flex-1\">\n              <p className=\"truncate font-heading text-[13px] font-bold text-black leading-tight\">\n                {nomeFantasia || \"Sem empresa vinculada\"}\n              </p>\n              {segmento && (\n                <p className=\"truncate font-body text-[10px] text-zinc-400 leading-tight\">\n                  {segmento}\n                </p>\n              )}\n            </div>\n          </div>\n\n          {/* Endereço */}\n          <div className=\"mt-1.5 pl-[38px]\">\n            {enderecoFormatado ? (\n              <p\n                className=\"truncate font-body text-[10px] text-zinc-400 leading-tight\"\n                title={enderecoFormatado}\n              >\n                <MapPin className=\"mr-0.5 inline h-2.5 w-2.5 text-zinc-300 align-[-1px]\" />\n                {enderecoFormatado}\n              </p>\n            ) : (\n              <p className=\"font-body text-[10px] text-zinc-300 italic leading-tight\">\n                <MapPin className=\"mr-0.5 inline h-2.5 w-2.5 text-zinc-200 align-[-1px]\" />\n                Endereco nao informado\n              </p>\n            )}\n\n            {/* Contact icons & links row */}\n            {hasAnyContact ? (\n              <div className=\"mt-1.5 flex flex-wrap items-center gap-0.5\">\n                {telefoneEmpresa && (\n                  <CopyButton\n                    value={telefoneEmpresa}\n                    className=\"!px-1 !py-0.5\"\n                  >\n                    <Phone className=\"h-2.5 w-2.5 text-zinc-400\" />\n                    <span className=\"font-body text-[10px] text-zinc-500\">\n                      {telefoneEmpresa}\n                    </span>\n                  </CopyButton>\n                )}\n                {emailEmpresa && (\n                  <CopyButton value={emailEmpresa} className=\"!px-1 !py-0.5\">\n                    <Mail className=\"h-2.5 w-2.5 text-zinc-400\" />\n                    <span className=\"truncate max-w-[120px] font-body text-[10px] text-zinc-500\">\n                      {emailEmpresa}\n                    </span>\n                  </CopyButton>\n                )}\n                {website && (\n                  <a\n                    href={website}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center gap-0.5 rounded px-1 py-0.5 font-body text-[10px] text-brand/70 transition-all duration-[120ms] hover:bg-brand/5 hover:text-brand hover:scale-[1.05] active:scale-[0.97]\"\n                  >\n                    <ExternalLink className=\"h-2.5 w-2.5\" />\n                    Site\n                  </a>\n                )}\n                {instagramUrl && (\n                  <a\n                    href={instagramUrl}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center gap-0.5 rounded px-1 py-0.5 font-body text-[10px] text-brand/70 transition-all duration-[120ms] hover:bg-brand/5 hover:text-brand hover:scale-[1.05] active:scale-[0.97]\"\n                  >\n                    <Instagram className=\"h-2.5 w-2.5\" />\n                    IG\n                  </a>\n                )}\n                {cardapioUrl && (\n                  <a\n                    href={cardapioUrl}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center gap-0.5 rounded px-1 py-0.5 font-body text-[10px] text-brand/70 transition-all duration-[120ms] hover:bg-brand/5 hover:text-brand hover:scale-[1.05] active:scale-[0.97]\"\n                  >\n                    <UtensilsCrossed className=\"h-2.5 w-2.5\" />\n                    Menu\n                  </a>\n                )}\n              </div>\n            ) : (\n              <p className=\"mt-1.5 font-body text-[10px] text-zinc-300 italic\">\n                Sem links cadastrados\n              </p>\n            )}\n          </div>\n        </div>\n\n        {/* ─── Bloco B: Decisor (4 cols) ───────────────── */}\n        <div className=\"md:col-span-4 md:border-l md:border-zinc-200/30 md:pl-4 min-w-0\">\n          {primaryContact ? (\n            <div className=\"group/contact relative\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-zinc-100\">\n                  <User className=\"h-3.5 w-3.5 text-zinc-500\" />\n                </div>\n                <div className=\"min-w-0\">\n                  <p className=\"truncate font-heading text-[13px] font-semibold text-black leading-tight\">\n                    {primaryContact.nome}\n                  </p>\n                  <p className=\"truncate font-body text-[10px] text-zinc-400 leading-tight\">\n                    {getCargoLabel(primaryContact.cargo)}\n                  </p>\n                  <p className=\"truncate font-body text-[10px] text-zinc-500 leading-tight\">\n                    Patente {getPatentScore(primaryContact.cargo)}\n                  </p>\n                </div>\n              </div>\n              <div className=\"mt-1.5 flex flex-wrap items-center gap-0.5 pl-[36px]\">\n                {primaryContact.email && (\n                  <CopyButton\n                    value={primaryContact.email}\n                    className=\"!px-1 !py-0.5\"\n                  >\n                    <Mail className=\"h-2.5 w-2.5 text-zinc-400\" />\n                    <span className=\"truncate max-w-[110px] font-body text-[10px] text-zinc-500\">\n                      {primaryContact.email}\n                    </span>\n                  </CopyButton>\n                )}\n                {primaryContact.telefone && (\n                  <CopyButton\n                    value={primaryContact.telefone}\n                    className=\"!px-1 !py-0.5\"\n                  >\n                    <Phone className=\"h-2.5 w-2.5 text-zinc-400\" />\n                    <span className=\"font-body text-[10px] text-zinc-500\">\n                      {primaryContact.telefone}\n                    </span>\n                  </CopyButton>\n                )}\n              </div>\n              <button\n                type=\"button\"\n                onClick={onOpenPrimaryContact}\n                className=\"absolute top-0 right-0 inline-flex items-center gap-0.5 rounded-md border border-zinc-200/50 bg-white px-1.5 py-0.5 font-body text-[9px] font-medium text-zinc-400 shadow-sm opacity-0 transition-all duration-[120ms] group-hover/contact:opacity-100 hover:text-brand hover:border-brand/20 active:scale-[0.98]\"\n              >\n                <ChevronRight className=\"h-2 w-2\" />\n                Abrir\n              </button>\n            </div>\n          ) : (\n            <div className=\"flex items-center gap-2\">\n              <div className=\"flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-zinc-100\">\n                <User className=\"h-3.5 w-3.5 text-zinc-300\" />\n              </div>\n              <div>\n                <p className=\"font-body text-[10px] text-zinc-400\">\n                  Sem decisor definido\n                </p>\n                <button\n                  type=\"button\"\n                  onClick={onCreatePrimaryContact}\n                  className=\"mt-0.5 inline-flex items-center gap-0.5 font-body text-[10px] font-medium text-brand transition-colors hover:text-brand/80\"\n                >\n                  <Plus className=\"h-2.5 w-2.5\" />\n                  Definir contato\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* ─── Bloco C: Operação do Deal (3 cols) ────────────────── */}\n        <div className=\"md:col-span-3 md:border-l md:border-zinc-200/30 md:pl-4 min-w-0\">\n          <div className=\"relative space-y-1.5\">\n            <div className=\"flex flex-wrap items-center gap-1.5\">\n              <StageRail\n                currentStage={stage}\n                onStageChange={(s) => {\n                  onStageChange(s);\n                  showStripUpdate(\"Atualizado\");\n                }}\n                disabled={isLocked}\n                statusBanner={stageBanner}\n                onBannerDismiss={onStageBannerDismiss}\n              />\n              <TemperatureSelect\n                current={temperature}\n                onChange={(t) => {\n                  onTemperatureChange(t);\n                  showStripUpdate(\"Atualizado\");\n                }}\n                suggested={suggestedTemperature}\n                disabled={isLocked}\n              />\n            </div>\n            <div className=\"flex items-center justify-end\">\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <button className=\"group/owner flex items-center gap-1.5 rounded-full py-0.5 pl-0.5 pr-2 transition-colors duration-[140ms] hover:bg-white/80 active:scale-[0.98]\">\n                    <div className=\"flex h-5 w-5 items-center justify-center rounded-full bg-brand text-[8px] font-bold text-white\">\n                      {getInitials(responsibleName)}\n                    </div>\n                    <span className=\"font-body text-[10px] text-zinc-500\">\n                      {responsibleName}\n                    </span>\n                    <Pencil className=\"h-2 w-2 text-zinc-300 opacity-0 transition-opacity duration-[140ms] group-hover/owner:opacity-100\" />\n                  </button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent\n                  align=\"end\"\n                  className=\"rounded-xl min-w-[180px]\"\n                >\n                  {teamMembers.map((member) => (\n                    <DropdownMenuItem\n                      key={member.id}\n                      onClick={() => {\n                        onResponsibleChange(member.id, member.name);\n                        showStripUpdate(\"Atualizado\");\n                      }}\n                      className=\"flex items-center gap-2\"\n                    >\n                      <div className=\"flex h-5 w-5 items-center justify-center rounded-full bg-zinc-200 text-[9px] font-bold text-zinc-600\">\n                        {getInitials(member.name)}\n                      </div>\n                      <span className=\"font-body text-xs\">{member.name}</span>\n                      {member.id === responsibleId && (\n                        <Check className=\"ml-auto h-3.5 w-3.5 text-brand\" />\n                      )}\n                    </DropdownMenuItem>\n                  ))}\n                </DropdownMenuContent>\n              </DropdownMenu>\n            </div>\n            {stripUpdatedLabel && (\n              <div className=\"absolute -top-1.5 right-0 inline-flex items-center gap-0.5 rounded-full bg-status-success/10 px-1.5 py-0.5 font-body text-[8px] font-semibold text-status-success animate-in fade-in duration-90\">\n                <Check className=\"h-2 w-2\" />\n                {stripUpdatedLabel}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// UI Helpers for Company Tab Refactor\n// ═══════════════════════════════════════════════════════════════════\n\nfunction PremiumCard({\n  children,\n  title,\n  description,\n  icon: Icon,\n  delay = 0,\n  successMessage,\n  headerAction,\n}: {\n  children: React.ReactNode;\n  title: string;\n  description: string;\n  icon: React.ElementType;\n  delay?: number;\n  successMessage?: string | null;\n  headerAction?: React.ReactNode;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 6 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.18, delay: delay, ease: \"easeOut\" }}\n      className=\"relative rounded-[20px] border border-zinc-100 bg-white p-5 shadow-sm transition-all duration-300 hover:shadow-md group\"\n    >\n      <AnimatePresence>\n        {successMessage && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            className=\"absolute -top-3 right-5 z-20 flex items-center gap-1.5 rounded-full bg-emerald-50 px-3 py-1 font-heading text-[11px] font-bold text-emerald-600 shadow-sm border border-emerald-100\"\n          >\n            <Check className=\"h-3 w-3\" />\n            {successMessage}\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      <div className=\"mb-5 flex items-start justify-between\">\n        <div className=\"flex items-center gap-3.5\">\n          <div className=\"flex h-11 w-11 items-center justify-center rounded-[14px] bg-zinc-50 text-zinc-400 group-hover:bg-brand/5 group-hover:text-brand transition-colors\">\n            <Icon className=\"h-5.5 w-5.5\" />\n          </div>\n          <div>\n            <h3 className=\"font-heading text-[15px] font-semibold tracking-tight text-zinc-900\">\n              {title}\n            </h3>\n            <p className=\"font-body text-[11px] text-zinc-400 leading-relaxed\">\n              {description}\n            </p>\n          </div>\n        </div>\n        {headerAction && <div>{headerAction}</div>}\n      </div>\n      <div className=\"space-y-4\">{children}</div>\n    </motion.div>\n  );\n}\n\nconst getActivityIcon = (type: string) => {\n  switch (type) {\n    case 'call':\n      return Phone;\n    case 'meeting':\n      return Users;\n    case 'email':\n      return Mail;\n    case 'whatsapp':\n      return MessageCircle;\n    default:\n      return Circle;\n  }\n};\n\n\n// ═══════════════════════════════════════════════════════════════════\n// Main Component — LeadCardDrawer (Premium)\n// ═══════════════════════════════════════════════════════════════════\n\nexport default function LeadCardDrawer() {\n  const { modalType, modalData, closeModal } = useUIStore();\n  const isOpen = modalType === \"lead-card\";\n  const selectedLeadId = modalData?.id as string | undefined;\n  const opportunitySnapshot = useMemo(() => {\n    const raw = modalData?.opportunitySnapshot;\n    if (!raw || typeof raw !== \"object\") return null;\n    const candidate = raw as Partial<Opportunity>;\n    if (typeof candidate.id !== \"string\") return null;\n    return candidate as Opportunity;\n  }, [modalData?.opportunitySnapshot]);\n  const blockedFocusFields = useMemo(() => {\n    const raw = modalData?.focusFields;\n    if (!Array.isArray(raw)) return [] as string[];\n    return raw.filter((item): item is string => typeof item === \"string\" && item.trim().length > 0);\n  }, [modalData?.focusFields]);\n  const pendingStageFromModal = useMemo(() => {\n    if (typeof modalData?.pendingStage !== \"string\") return null;\n    return modalData.pendingStage as PipelineStage;\n  }, [modalData?.pendingStage]);\n  const initialTabFromModal = useMemo(\n    () => resolveLeadDrawerTab(modalData?.initialTab),\n    [modalData?.initialTab]\n  );\n  const prefillNoteFromModal = useMemo(() => {\n    const raw = modalData?.prefillNote;\n    return typeof raw === \"string\" ? raw.trim() : \"\";\n  }, [modalData?.prefillNote]);\n  const opportunities = useOpportunityStore((state) => state.opportunities);\n  const selectedLead = useMemo(() => {\n    const found = opportunities.find((opportunity) => opportunity.id === selectedLeadId);\n    if (found) return found;\n    if (opportunitySnapshot?.id === selectedLeadId) return opportunitySnapshot;\n    return null;\n  }, [opportunities, opportunitySnapshot, selectedLeadId]);\n  const resolvedLead = useMemo(\n    () =>\n      selectedLead\n        ? {\n          ...mockLead,\n          id: selectedLead.id,\n          title: selectedLead.title,\n          clientName: selectedLead.clientName,\n          nomeFantasia: selectedLead.clientName || selectedLead.title,\n          value: selectedLead.value,\n          monthlyValue: selectedLead.monthlyValue,\n          stage: selectedLead.stage,\n          temperature: selectedLead.temperature,\n          responsibleId: selectedLead.responsibleId,\n          responsibleName: selectedLead.responsibleName,\n          tags: selectedLead.tags,\n          source: selectedLead.source ?? mockLead.source,\n          expectedCloseDate:\n            selectedLead.expectedCloseDate ?? mockLead.expectedCloseDate,\n          createdAt: selectedLead.createdAt,\n          updatedAt: selectedLead.updatedAt,\n          notes: selectedLead.notes ?? mockLead.notes,\n        }\n        : mockLead,\n    [selectedLead]\n  );\n  const initialStageValuesForLead = useMemo(\n    () =>\n      (resolvedLead.metadata?.stageValues as Record<\n        string,\n        string | number | boolean | null | undefined\n      >) || {},\n    [resolvedLead.metadata?.stageValues],\n  );\n  const initialLeadNote = useMemo(\n    () => resolvedLead.notes?.trim() || \"\",\n    [resolvedLead.notes],\n  );\n  const initialLeadOwnerId = useMemo(\n    () => resolvedLead.responsibleId ?? LOGGED_USER.id,\n    [resolvedLead.responsibleId],\n  );\n  const initialLeadStage = useMemo(\n    () => resolvedLead.stage,\n    [resolvedLead.stage],\n  );\n\n  // ── Deal state ───────────────────────────────────────────────\n  const [title, setTitle] = useState(resolvedLead.title);\n  const [stage, setStage] = useState<PipelineStage>(initialLeadStage);\n  const [temperature, setTemperature] = useState<Temperature>(\n    resolvedLead.temperature,\n  );\n  const [responsibleId, setResponsibleId] = useState(resolvedLead.responsibleId);\n  const [responsibleName, setResponsibleName] = useState(\n    resolvedLead.responsibleName,\n  );\n  const [contacts, setContacts] = useState<Contact[]>(() => {\n    const storeContacts = useContactStore.getState().getByClient(resolvedLead.clientId ?? \"\");\n    return storeContacts.length > 0 ? storeContacts : [];\n  });\n  const sortedContacts = useMemo(\n    () => [...contacts].sort((a, b) => getPatentScore(b.cargo) - getPatentScore(a.cargo)),\n    [contacts],\n  );\n  const [dealStatus, setDealStatus] = useState<DealStatus>(\"open\");\n  const isLocked = dealStatus !== \"open\";\n  const [source] = useState(resolvedLead.source);\n\n  // Company fields — neste funil, sem CNPJ e sem Razão Social\n  const [nomeFantasia] = useState(resolvedLead.nomeFantasia);\n  const [segmento] = useState(resolvedLead.segmento);\n  const [cep, setCep] = useState(resolvedLead.cep);\n  const [logradouro, setLogradouro] = useState(resolvedLead.logradouro);\n  const [numero, setNumero] = useState(resolvedLead.numero);\n  const [complemento, setComplemento] = useState(resolvedLead.complemento);\n  const [bairro, setBairro] = useState(resolvedLead.bairro);\n  const [cidade, setCidade] = useState(resolvedLead.cidade);\n  const [estado, setEstado] = useState(resolvedLead.estado);\n  const [cepLoading, setCepLoading] = useState(false);\n  const [cepError, setCepError] = useState<string | null>(null);\n  const [telefoneEmpresa] = useState(resolvedLead.telefoneEmpresa);\n  const [emailEmpresa] = useState(resolvedLead.emailEmpresa);\n  const [website, setWebsite] = useState(resolvedLead.website);\n  const [instagramUrl, setInstagramUrl] = useState(resolvedLead.instagram);\n  const [cardapioUrl, setCardapioUrl] = useState(resolvedLead.cardapio);\n\n  // --- Company Refactor State ---\n  const [selectedTypes, setSelectedTypes] = useState<string[]>([]);\n  const [hoursMode, setHoursMode] = useState<\"standard\" | \"daily\">(\"daily\");\n  const [standardHours, setStandardHours] = useState({\n    open: \"08:00\",\n    close: \"18:00\",\n  });\n  const [dailyHours, setDailyHours] = useState<\n    Record<string, { active: boolean; open: string; close: string; isClosed: boolean }>\n  >(\n    DAYS_OF_WEEK.reduce(\n      (acc, day) => ({\n        ...acc,\n        [day.id]: {\n          active: true,\n          open: \"08:00\",\n          close: \"19:00\",\n          isClosed: false,\n        },\n      }),\n      {},\n    ),\n  );\n  const [sectionSuccess] = useState<\n    Record<string, string | null>\n  >({\n    localizacao: null,\n    tipo: null,\n    horario: null,\n    online: null,\n  });\n\n  // --- Stage Fields State ---\n  const [stageValues, setStageValues] = useState<Record<string, string | number | boolean | null | undefined>>(\n    initialStageValuesForLead\n  );\n  const [, setStageFieldSaveState] = useState<Record<string, StageFieldSaveState>>({});\n  const [, setStageFieldErrors] = useState<Record<string, string>>({});\n  const [, setStageFieldsBanner] = useState<InlineBanner | null>(null);\n  const [, setIsSavingStageFields] = useState(false);\n  const stageSaveTimerRef = useRef<Record<string, ReturnType<typeof setTimeout>>>({});\n\n  const [noteDraft, setNoteDraft] = useState(\"\");\n  const [noteIntent, setNoteIntent] = useState<Exclude<NoteIntent, \"system\">>(\"general\");\n  const [noteVisibility, setNoteVisibility] = useState<NoteVisibility>(\"team\");\n  const [noteSaveState, setNoteSaveState] = useState<\"idle\" | \"saving\" | \"saved\" | \"error\">(\"idle\");\n  const [noteError, setNoteError] = useState<string | null>(null);\n  const [notesFilter, setNotesFilter] = useState<NotesFilter>(\"all\");\n  const [editingNoteId, setEditingNoteId] = useState<string | null>(null);\n  const [editingNoteDraft, setEditingNoteDraft] = useState(\"\");\n  const [editingNoteSaveState, setEditingNoteSaveState] = useState<\"idle\" | \"saving\" | \"saved\" | \"error\">(\"idle\");\n  const [editingNoteError, setEditingNoteError] = useState<string | null>(null);\n  const [nextStepDraft, setNextStepDraft] = useState<NextStepDraft>({\n    action: \"\",\n    dueDate: \"\",\n    channel: \"call\",\n    ownerId: initialLeadOwnerId,\n  });\n  const [nextStepState, setNextStepState] = useState<\"idle\" | \"saving\" | \"saved\" | \"error\">(\"idle\");\n  const [nextStepError, setNextStepError] = useState<string | null>(null);\n  const [notesHistory, setNotesHistory] = useState<OpportunityNote[]>(() => {\n    const seed = [...mockNotesSeed];\n    if (initialLeadNote) {\n      seed.unshift({\n        id: `n-init-${resolvedLead.id}`,\n        authorId: LOGGED_USER.id,\n        authorName: LOGGED_USER.name,\n        createdAt: new Date().toISOString(),\n        body: initialLeadNote,\n        intent: \"general\",\n        visibility: \"team\",\n      });\n    }\n    return seed;\n  });\n\n  // --- Company Refactor State ---\n\n  const handleCepChange = async (val: string) => {\n    const masked = maskCep(val);\n    setCep(masked);\n    setCepError(null);\n\n    const newVal = val.replace(/\\D/g, \"\").slice(0, 8);\n\n    if (newVal.length === 8) {\n      setCepLoading(true);\n      try {\n        const response = await fetch(`https://viacep.com.br/ws/${newVal}/json/`);\n        const data = await response.json();\n        if (!data.erro) {\n          setLogradouro(data.logradouro || \"\");\n          setBairro(data.bairro || \"\");\n          setCidade(data.localidade || \"\");\n          setEstado(data.uf || \"\");\n          if (data.complemento) setComplemento(data.complemento);\n          trackEvent(\"cep_lookup_success\", { cep: newVal });\n        } else {\n          setCepError(\"CEP não encontrado.\");\n        }\n      } catch {\n        setCepError(\"Erro ao buscar CEP. Verifique sua conexão.\");\n      } finally {\n        setCepLoading(false);\n      }\n    }\n  };\n\n  const enderecoFormatado = useMemo(() => {\n    const parts: string[] = [];\n    if (logradouro) {\n      parts.push(numero ? `${logradouro}, ${numero}` : logradouro);\n    }\n    if (complemento) parts.push(complemento);\n    if (bairro) parts.push(bairro);\n    if (cidade && estado) {\n      parts.push(`${cidade} - ${estado}`);\n    } else if (cidade) {\n      parts.push(cidade);\n    }\n    return parts.join(\", \");\n  }, [logradouro, numero, complemento, bairro, cidade, estado]);\n\n  // UI state\n  const [headerBanner, setHeaderBanner] = useState<InlineBanner | null>(null);\n  const [stageBanner, setStageBanner] = useState<InlineBanner | null>(null);\n  const [showWinConfirm, setShowWinConfirm] = useState(false);\n\n  // --- Removed dirty state handlers (moved down) ---\n\n  const [showLostPanel, setShowLostPanel] = useState(false);\n  const [isWinLoading, setIsWinLoading] = useState(false);\n  const [isLostLoading, setIsLostLoading] = useState(false);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n\n  // Contact forms\n  const [showAddContact, setShowAddContact] = useState(false);\n  const [contactsBanner, setContactsBanner] = useState<InlineBanner | null>(null);\n  const [newContactError, setNewContactError] = useState<string | null>(null);\n  const [newContact, setNewContact] = useState({\n    nome: \"\",\n    email: \"\",\n    telefone: \"\",\n    cargo: \"\",\n    personalidade: \"\",\n  });\n  const [editingContactId, setEditingContactId] = useState<string | null>(null);\n  const [editContact, setEditContact] = useState({\n    nome: \"\",\n    email: \"\",\n    telefone: \"\",\n    cargo: \"\",\n    personalidade: \"\",\n  });\n  const [activeTab, setActiveTab] = useState<LeadDrawerTab>(initialTabFromModal);\n\n  // --- Dirty State & Tab Navigation ---\n  const isDirty = useMemo(() => {\n    return noteDraft.trim().length > 0 || (editingNoteId !== null && editingNoteDraft.trim().length > 0) || nextStepDraft.action.trim().length > 0;\n  }, [noteDraft, editingNoteId, editingNoteDraft, nextStepDraft.action]);\n\n  const [pendingTab, setPendingTab] = useState<LeadDrawerTab | null>(null);\n  const [showDirtyConfirm, setShowDirtyConfirm] = useState(false);\n  const [pendingAction, setPendingAction] = useState<\"tab\" | \"close\" | null>(null);\n\n  const handleTabChange = useCallback((newTab: string) => {\n    const resolvedTab = resolveLeadDrawerTab(newTab);\n    if (resolvedTab === activeTab) return;\n    if (isDirty) {\n      setPendingTab(resolvedTab);\n      setPendingAction(\"tab\");\n      setShowDirtyConfirm(true);\n    } else {\n      setActiveTab(resolvedTab);\n    }\n  }, [activeTab, isDirty]);\n\n  const handleCloseDrawer = useCallback(() => {\n    if (isDirty) {\n      setPendingAction(\"close\");\n      setShowDirtyConfirm(true);\n    } else {\n      closeModal();\n    }\n  }, [isDirty, closeModal]);\n\n  const confirmDiscardChanges = useCallback(() => {\n    setShowDirtyConfirm(false);\n    // Clear dirty fields\n    setNoteDraft(\"\");\n    setEditingNoteDraft(\"\");\n    setEditingNoteId(null);\n    setNextStepDraft({ action: \"\", dueDate: \"\", channel: \"call\", ownerId: initialLeadOwnerId });\n\n    if (pendingAction === \"tab\" && pendingTab) {\n      setActiveTab(pendingTab);\n    } else if (pendingAction === \"close\") {\n      closeModal();\n    }\n    setPendingAction(null);\n    setPendingTab(null);\n  }, [pendingAction, pendingTab, closeModal, initialLeadOwnerId]);\n\n  const cancelDiscardChanges = useCallback(() => {\n    setShowDirtyConfirm(false);\n    setPendingAction(null);\n    setPendingTab(null);\n  }, []);\n\n  const [isNewVisitModalOpen, setIsNewVisitModalOpen] = useState(false);\n  const [isNewActivityModalOpen, setIsNewActivityModalOpen] = useState(false);\n  const [newActivityType, setNewActivityType] = useState<\"task\" | \"call\" | \"email\" | \"meeting\" | \"whatsapp\">(\"task\");\n\n  const handleOpenActivityModal = useCallback(\n    (type: \"task\" | \"call\" | \"email\" | \"meeting\" | \"whatsapp\" = \"task\") => {\n      if (isLocked) return;\n      setNewActivityType(type);\n      setIsNewActivityModalOpen(true);\n    },\n    [isLocked],\n  );\n\n  const [visitFilter, setVisitFilter] = useState<VisitStatus | \"all\">(\"all\");\n  const [expandedVisitId, setExpandedVisitId] = useState<string | null>(null);\n\n  // State for Visits\n  const [visitRows, setVisitRows] = useState<VisitRow[]>(mockVisits);\n\n  const handleSaveVisit = (data: VisitFormData) => {\n    if (isLocked) return;\n    const type = data.type as VisitType;\n    const hasDateTime = Boolean(data.date && data.time);\n    const startAt = hasDateTime\n      ? new Date(`${data.date}T${data.time}:00`)\n      : new Date();\n    const location =\n      type === \"presencial\"\n        ? data.location || \"Local a confirmar\"\n        : type === \"remoto\"\n          ? visitPlatformLabel[data.platform ?? \"outro\"] ?? \"Reunião remota\"\n          : data.typeDescription || \"Encontro comercial\";\n\n    const responsibleLabel =\n      data.responsibleId === \"u1\"\n        ? \"Eu (Logado)\"\n        : data.responsibleId === \"u2\"\n          ? \"Ana Costa\"\n          : data.responsibleId === \"u3\"\n            ? \"Carlos Mendes\"\n            : \"Responsável do time\";\n\n    const resultWithOutcome =\n      data.status === \"realizada\" && data.result\n        ? `${data.outcome ? `${visitOutcomeLabel[data.outcome]}: ` : \"\"}${data.result}`\n        : data.result || undefined;\n\n    const newVisit: VisitRow = {\n      id: `visit-${Date.now()}`,\n      type,\n      location,\n      status: data.status as VisitStatus,\n      startAt:\n        Number.isNaN(startAt.getTime())\n          ? new Date().toISOString()\n          : startAt.toISOString(),\n      responsible: responsibleLabel,\n      objective: data.objective || undefined,\n      result: resultWithOutcome,\n      outcome: data.outcome || undefined,\n      durationMinutes: Number(data.duration || 60),\n      link: data.link || undefined,\n      platform: data.platform || undefined,\n      cancellationReason: data.cancellationReason || undefined,\n      accessSearch: data.accessSearch || undefined,\n      details: data.details || undefined,\n      createdAt: new Date().toISOString(),\n    };\n\n    setVisitRows((prev) => [newVisit, ...prev]);\n    setVisitFilter(newVisit.status);\n    setExpandedVisitId(newVisit.id);\n    setHeaderBanner({\n      message: \"Visita salva com sucesso\",\n      variant: \"success\",\n    });\n  };\n\n  const visitSummary = useMemo(() => {\n    const summary = {\n      all: visitRows.length,\n      agendada: 0,\n      realizada: 0,\n      cancelada: 0,\n    };\n    for (const visit of visitRows) {\n      summary[visit.status] += 1;\n    }\n    return summary;\n  }, [visitRows]);\n\n  const visibleVisitRows = useMemo(() => {\n    const filtered =\n      visitFilter === \"all\"\n        ? visitRows\n        : visitRows.filter((visit) => visit.status === visitFilter);\n\n    return [...filtered].sort((a, b) => {\n      if (visitFilter === \"all\") {\n        if (a.status !== b.status) {\n          return visitStatusSortOrder[a.status] - visitStatusSortOrder[b.status];\n        }\n      }\n\n      const aTime = new Date(a.startAt).getTime();\n      const bTime = new Date(b.startAt).getTime();\n      if (visitFilter === \"agendada\") return aTime - bTime;\n      if (a.status === \"agendada\" && b.status === \"agendada\") return aTime - bTime;\n      return bTime - aTime;\n    });\n  }, [visitFilter, visitRows]);\n\n  const handleVisitStatusChange = useCallback(\n    (visitId: string, status: VisitStatus) => {\n      if (isLocked) return;\n      const target = visitRows.find((visit) => visit.id === visitId);\n      if (!target) return;\n\n      setVisitRows((prev) =>\n        prev.map((visit) =>\n          visit.id === visitId\n            ? {\n              ...visit,\n              status,\n              result:\n                status === \"realizada\" && !visit.result\n                  ? \"Visita concluída. Próximos passos registrados.\"\n                  : visit.result,\n              cancellationReason:\n                status === \"cancelada\"\n                  ? visit.cancellationReason || \"Cancelada pelo responsável\"\n                  : undefined,\n            }\n            : visit\n        )\n      );\n\n      setHeaderBanner({\n        message: `Visita marcada como ${status}.`,\n        variant: status === \"cancelada\" ? \"warning\" : \"success\",\n      });\n    },\n    [isLocked, visitRows]\n  );\n\n  const handleDuplicateVisit = useCallback((visitId: string) => {\n    if (isLocked) return;\n    const visit = visitRows.find((item) => item.id === visitId);\n    if (!visit) return;\n\n    const originalDate = new Date(visit.startAt);\n    const nextDate = Number.isNaN(originalDate.getTime())\n      ? new Date()\n      : new Date(originalDate.getTime() + 7 * 24 * 60 * 60 * 1000);\n\n    const duplicated: VisitRow = {\n      ...visit,\n      id: `visit-${Date.now()}`,\n      status: \"agendada\",\n      result: undefined,\n      cancellationReason: undefined,\n      startAt: nextDate.toISOString(),\n      createdAt: new Date().toISOString(),\n    };\n\n    setVisitRows((prev) => [duplicated, ...prev]);\n    setVisitFilter(\"agendada\");\n    setExpandedVisitId(duplicated.id);\n    setHeaderBanner({\n      message: \"Visita duplicada e reagendada para a próxima semana\",\n      variant: \"success\",\n    });\n  }, [isLocked, visitRows]);\n\n  const handleRescheduleVisit = useCallback((visitId: string, plusDays: number) => {\n    if (isLocked) return;\n    const visit = visitRows.find((item) => item.id === visitId);\n    if (!visit) return;\n\n    const date = new Date(visit.startAt);\n    if (Number.isNaN(date.getTime())) return;\n    date.setDate(date.getDate() + plusDays);\n\n    setVisitRows((prev) =>\n      prev.map((item) =>\n        item.id === visitId\n          ? {\n            ...item,\n            startAt: date.toISOString(),\n            status: \"agendada\",\n            cancellationReason: undefined,\n          }\n          : item\n      )\n    );\n    setHeaderBanner({\n      message: `Visita reagendada em ${plusDays} dia${plusDays > 1 ? \"s\" : \"\"}.`,\n      variant: \"info\",\n    });\n  }, [isLocked, visitRows]);\n\n  const handleDeleteVisit = useCallback((visitId: string) => {\n    if (isLocked) return;\n    setVisitRows((prev) => prev.filter((visit) => visit.id !== visitId));\n    if (expandedVisitId === visitId) {\n      setExpandedVisitId(null);\n    }\n    setHeaderBanner({\n      message: \"Visita removida da agenda\",\n      variant: \"info\",\n    });\n  }, [expandedVisitId, isLocked]);\n\n  const toggleVisitDetails = useCallback((visitId: string) => {\n    setExpandedVisitId((prev) => (prev === visitId ? null : visitId));\n  }, []);\n\n  const [activityFilter, setActivityFilter] = useState<\"all\" | \"pending\" | \"completed\">(\"all\");\n  const [dealActivities, setDealActivities] = useState<FlowActivity[]>(() =>\n    mockActivities.filter((activity) => activity.opportunityId === resolvedLead.id)\n  );\n\n  // Computed\n  const currentStageIndex = useMemo(\n    () => stageConfig.findIndex((item) => item.id === stage),\n    [stage],\n  );\n  const hasDecisionMaker = useMemo(\n    () => contacts.some((contact) => contact.isDecisionMaker),\n    [contacts],\n  );\n  const cardPatentScore = useMemo(\n    () => calculateCardPatentScore(contacts),\n    [contacts],\n  );\n  const nextStage = useMemo(\n    () => stageConfig[currentStageIndex + 1] ?? null,\n    [currentStageIndex],\n  );\n  const primaryContact = useMemo(\n    () => contacts.find((contact) => contact.isDecisionMaker) ?? sortedContacts[0] ?? null,\n    [contacts, sortedContacts],\n  );\n  const relatedActivities = useMemo(() => dealActivities, [dealActivities]);\n  const visibleDealActivities = useMemo(() => {\n    if (activityFilter === \"pending\") {\n      return dealActivities.filter((activity) => activity.status !== \"completed\");\n    }\n    if (activityFilter === \"completed\") {\n      return dealActivities.filter((activity) => activity.status === \"completed\");\n    }\n    return dealActivities;\n  }, [activityFilter, dealActivities]);\n  const leadScore = useMemo(\n    () => calculateLeadScore(resolvedLead, relatedActivities),\n    [resolvedLead, relatedActivities],\n  );\n  const suggestedTemperature = useMemo(\n    () => calculateTemperature(resolvedLead),\n    [resolvedLead],\n  );\n  const filteredNotes = useMemo(() => {\n    if (notesFilter === \"all\") return notesHistory;\n    if (notesFilter === \"cliente\") {\n      return notesHistory.filter((note) => note.intent === \"pedido_cliente\");\n    }\n    if (notesFilter === \"decisao\") {\n      return notesHistory.filter((note) => note.intent === \"decisao\");\n    }\n    return notesHistory.filter((note) => note.intent === \"proximo_passo\");\n  }, [notesFilter, notesHistory]);\n  const groupedNotes = useMemo(() => {\n    const map = new Map<string, { dayLabel: string; items: OpportunityNote[] }>();\n    const sorted = [...filteredNotes].sort(\n      (a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime(),\n    );\n    sorted.forEach((note) => {\n      const dayKey = note.createdAt.slice(0, 10);\n      if (!map.has(dayKey)) {\n        map.set(dayKey, {\n          dayLabel: formatNoteDayLabel(note.createdAt),\n          items: [],\n        });\n      }\n      map.get(dayKey)?.items.push(note);\n    });\n    return Array.from(map.values());\n  }, [filteredNotes]);\n  const hasRecentExecutionSignal = useMemo(() => {\n    const cutoff = Date.now() - EXECUTION_SIGNAL_WINDOW_DAYS * 24 * 60 * 60 * 1000;\n    const hasRecentNote = notesHistory.some((note) => {\n      if (note.isSystem) return false;\n      const ts = new Date(note.createdAt).getTime();\n      return !Number.isNaN(ts) && ts >= cutoff;\n    });\n    const hasRecentActivity = dealActivities.some((activity) => {\n      const ts = new Date(activity.createdAt).getTime();\n      return !Number.isNaN(ts) && ts >= cutoff;\n    });\n    return hasRecentNote || hasRecentActivity;\n  }, [dealActivities, notesHistory]);\n\n  const validateRequiredFieldsForStage = useCallback(\n    (stageToValidate: PipelineStage) => {\n      const fields = (stageFieldsConfig[stageToValidate] || []).filter(\n        (field) => field.required,\n      );\n      const nextErrors: Record<string, string> = {};\n      const missingFields = fields.filter((field) => {\n        const isMissing = isFieldValueEmpty(stageValues[field.id]);\n        if (isMissing) {\n          nextErrors[field.id] = \"Preencha este campo para avançar etapa.\";\n        }\n        return isMissing;\n      });\n      setStageFieldErrors((prev) => ({ ...prev, ...nextErrors }));\n      return missingFields;\n    },\n    [stageValues],\n  );\n\n  // Telemetry: view_opened\n  useEffect(() => {\n    if (isOpen) {\n      trackEvent(\"view_opened\", {\n        entity_type: \"deal\",\n        entity_id: resolvedLead.id,\n      });\n    }\n  }, [isOpen, resolvedLead.id]);\n\n  useEffect(() => {\n    const timers = stageSaveTimerRef.current;\n    return () => {\n      Object.values(timers).forEach((timer) =>\n        clearTimeout(timer),\n      );\n    };\n  }, []);\n\n  useEffect(() => {\n    setActiveTab(initialTabFromModal);\n    setVisitRows([...mockVisits]);\n    setVisitFilter(\"all\");\n    setExpandedVisitId(null);\n    setIsNewVisitModalOpen(false);\n    setActivityFilter(\"all\");\n    setDealActivities(\n      mockActivities.filter((activity) => activity.opportunityId === resolvedLead.id)\n    );\n    setStage(initialLeadStage);\n    setShowAddContact(false);\n    setStageValues(initialStageValuesForLead);\n    setStageFieldErrors({});\n    setStageFieldSaveState({});\n    setStageFieldsBanner(null);\n    setContactsBanner(null);\n    setNewContactError(null);\n    setIsSavingStageFields(false);\n    setNoteDraft(prefillNoteFromModal);\n    setNoteIntent(\"general\");\n    setNoteVisibility(\"team\");\n    setNoteSaveState(\"idle\");\n    setNoteError(null);\n    setNotesFilter(\"all\");\n    setEditingNoteId(null);\n    setEditingNoteDraft(\"\");\n    setEditingNoteSaveState(\"idle\");\n    setEditingNoteError(null);\n    setNextStepDraft({\n      action: \"\",\n      dueDate: \"\",\n      channel: \"call\",\n      ownerId: initialLeadOwnerId,\n    });\n    setNextStepState(\"idle\");\n    setNextStepError(null);\n    setHeaderBanner(null);\n    setStageBanner(null);\n    const seed = [...mockNotesSeed];\n    if (initialLeadNote) {\n      seed.unshift({\n        id: `n-init-${resolvedLead.id}`,\n        authorId: LOGGED_USER.id,\n        authorName: LOGGED_USER.name,\n        createdAt: new Date().toISOString(),\n        body: initialLeadNote,\n        intent: \"general\",\n        visibility: \"team\",\n      });\n    }\n    setNotesHistory(seed);\n  }, [\n    initialLeadNote,\n    initialLeadOwnerId,\n    initialLeadStage,\n    initialStageValuesForLead,\n    initialTabFromModal,\n    prefillNoteFromModal,\n    resolvedLead.id,\n  ]);\n\n  useEffect(() => {\n    if (!isOpen || blockedFocusFields.length === 0) return;\n    const stageLabel = pendingStageFromModal\n      ? stageConfig.find((stageItem) => stageItem.id === pendingStageFromModal)?.label\n      : null;\n\n    setActiveTab(\"empresa\");\n    setHeaderBanner({\n      message: stageLabel\n        ? `Movimento bloqueado para ${stageLabel}. Preencha os campos obrigatórios.`\n        : \"Movimento bloqueado. Preencha os campos obrigatórios para avançar etapa.\",\n      variant: \"warning\",\n      action: {\n        label: \"Ir para campos\",\n        onClick: () => setActiveTab(\"empresa\"),\n      },\n    });\n  }, [blockedFocusFields.length, isOpen, pendingStageFromModal]);\n\n  // ── Handlers ─────────────────────────────────────────────────\n\n  const handleStageChange = useCallback(\n    (newStage: PipelineStage): boolean => {\n      if (isLocked) return false;\n      if (newStage === stage) return false;\n      const prevStage = stage;\n      const prevIndex = stageConfig.findIndex((stageItem) => stageItem.id === prevStage);\n      const nextIndex = stageConfig.findIndex((stageItem) => stageItem.id === newStage);\n      const isForwardTransition = nextIndex > prevIndex;\n      if (isForwardTransition) {\n        if (contacts.length < MIN_CONTACTS_PER_CARD) {\n          setActiveTab(\"contatos\");\n          setContactsBanner({\n            message: \"Adicione pelo menos 1 contato para avançar no funil.\",\n            variant: \"warning\",\n          });\n          setStageBanner({\n            message: \"Etapa bloqueada. O card precisa ter ao menos 1 contato.\",\n            variant: \"warning\",\n          });\n          trackEvent(\"stage_change_blocked_missing_contact\", {\n            from_stage_id: prevStage,\n            to_stage_id: newStage,\n            entity_id: resolvedLead.id,\n          });\n          return false;\n        }\n        if (newStage === PROPOSAL_STAGE_ID && !hasDecisionMaker) {\n          setActiveTab(\"contatos\");\n          setContactsBanner({\n            message: \"Defina ao menos 1 decisor para avançar para Proposta.\",\n            variant: \"warning\",\n          });\n          setStageBanner({\n            message: \"Etapa bloqueada. É obrigatório ter um decisor para avançar para Proposta.\",\n            variant: \"warning\",\n          });\n          trackEvent(\"stage_change_blocked_missing_decision_maker\", {\n            from_stage_id: prevStage,\n            to_stage_id: newStage,\n            entity_id: resolvedLead.id,\n          });\n          return false;\n        }\n        const missingRequired = validateRequiredFieldsForStage(prevStage);\n        if (missingRequired.length > 0) {\n          const missingLabels = missingRequired.map((field) => field.label).join(\", \");\n          setStageBanner({\n            message: `Etapa bloqueada. Preencha: ${missingLabels}`,\n            variant: \"warning\",\n          });\n          setStageFieldsBanner({\n            message: `${missingRequired.length} campo(s) obrigatório(s) pendente(s) para avançar.`,\n            variant: \"warning\",\n          });\n          trackEvent(\"stage_change_blocked_missing_required\", {\n            from_stage_id: prevStage,\n            to_stage_id: newStage,\n            missing_count: missingRequired.length,\n            entity_id: resolvedLead.id,\n          });\n          return false;\n        }\n      }\n      trackEvent(\"stage_changed\", {\n        from_stage_id: prevStage,\n        to_stage_id: newStage,\n        entity_id: resolvedLead.id,\n      });\n      setStage(newStage);\n      setStageBanner({ message: \"Etapa atualizada\", variant: \"success\" });\n      setStageFieldsBanner({\n        message: `Checklist atualizado para ${stageConfig.find((stageItem) => stageItem.id === newStage)?.label ?? \"nova etapa\"}.`,\n        variant: \"info\",\n      });\n      return true;\n    },\n    [contacts.length, hasDecisionMaker, isLocked, resolvedLead.id, stage, validateRequiredFieldsForStage],\n  );\n\n  // Stage change from StageFieldsPanel still passes through the same business rules.\n  const handleStageChangeFromPanel = useCallback(\n    (newStage: PipelineStage) => handleStageChange(newStage),\n    [handleStageChange],\n  );\n\n  const handleMarkWon = useCallback(() => {\n    if (stage !== \"fechamento\") {\n      setShowWinConfirm(false);\n      setHeaderBanner({\n        message: \"Para marcar como ganho, mova a oportunidade para a etapa Fechamento.\",\n        variant: \"warning\",\n      });\n      return;\n    }\n    const missingRequired = validateRequiredFieldsForStage(stage);\n    if (missingRequired.length > 0) {\n      setShowWinConfirm(false);\n      setActiveTab(\"anotacoes\");\n      setStageFieldsBanner({\n        message: \"Checklist incompleto. Preencha os campos obrigatórios antes de fechar.\",\n        variant: \"warning\",\n      });\n      setHeaderBanner({\n        message: \"Fechamento bloqueado por pendências nos campos da etapa.\",\n        variant: \"warning\",\n      });\n      return;\n    }\n    if (!hasRecentExecutionSignal) {\n      setShowWinConfirm(false);\n      setActiveTab(\"anotacoes\");\n      setHeaderBanner({\n        message: \"Registre ao menos uma nota ou atividade recente antes de encerrar como ganho.\",\n        variant: \"warning\",\n      });\n      return;\n    }\n    trackEvent(\"mark_won_clicked\", { entity_id: resolvedLead.id });\n    setIsWinLoading(true);\n    setTimeout(() => {\n      setDealStatus(\"won\");\n      setShowWinConfirm(false);\n      setIsWinLoading(false);\n      setHeaderBanner({\n        message: \"Oportunidade marcada como ganho\",\n        variant: \"success\",\n      });\n      trackEvent(\"mark_won_succeeded\", { entity_id: resolvedLead.id });\n    }, 600);\n  }, [hasRecentExecutionSignal, resolvedLead.id, stage, validateRequiredFieldsForStage]);\n\n  const handleMarkLost = useCallback((reason: string) => {\n    if (stage !== \"fechamento\") {\n      setShowLostPanel(false);\n      setHeaderBanner({\n        message: \"Para marcar como perdido, mova a oportunidade para a etapa Fechamento.\",\n        variant: \"warning\",\n      });\n      return;\n    }\n    if (!reason?.trim()) {\n      setHeaderBanner({\n        message: \"Selecione um motivo de perda para continuar.\",\n        variant: \"warning\",\n      });\n      return;\n    }\n    if (!hasRecentExecutionSignal) {\n      setShowLostPanel(false);\n      setActiveTab(\"anotacoes\");\n      setHeaderBanner({\n        message: \"Adicione uma nota de contexto antes de encerrar como perdido.\",\n        variant: \"warning\",\n      });\n      return;\n    }\n    trackEvent(\"mark_lost_clicked\", { entity_id: resolvedLead.id, reason });\n    setIsLostLoading(true);\n    setTimeout(() => {\n      setDealStatus(\"lost\");\n      setShowLostPanel(false);\n      setIsLostLoading(false);\n      setHeaderBanner({\n        message: `Oportunidade marcada como perdida — ${reason}`,\n        variant: \"info\",\n      });\n      trackEvent(\"mark_lost_succeeded\", { entity_id: resolvedLead.id, reason });\n    }, 600);\n  }, [hasRecentExecutionSignal, resolvedLead.id, stage]);\n\n  const handleAddContact = () => {\n    if (contacts.length >= MAX_CONTACTS_PER_CARD) {\n      const message = `Limite atingido: no máximo ${MAX_CONTACTS_PER_CARD} contatos por card.`;\n      setContactsBanner({\n        message,\n        variant: \"warning\",\n      });\n      setNewContactError(message);\n      return;\n    }\n    if (!newContact.nome.trim()) {\n      setNewContactError(\"Informe o nome do contato para continuar.\");\n      return;\n    }\n    if (!newContact.cargo) {\n      setNewContactError(\"Selecione o cargo do contato para calcular o score de patente.\");\n      return;\n    }\n    setContacts([\n      ...contacts,\n      { id: `c${Date.now()}`, clientId: selectedLead?.clientId ?? \"1\", ...newContact, isDecisionMaker: false },\n    ]);\n    setNewContact({ nome: \"\", email: \"\", telefone: \"\", cargo: \"\", personalidade: \"\" });\n    setShowAddContact(false);\n    setNewContactError(null);\n    setContactsBanner({\n      message: \"Contato adicionado. O score de patente do card foi recalculado.\",\n      variant: \"success\",\n    });\n  };\n\n  const handleDeleteContact = (id: string) => {\n    if (contacts.length <= MIN_CONTACTS_PER_CARD) {\n      setContactsBanner({\n        message: \"O card precisa manter pelo menos 1 contato.\",\n        variant: \"warning\",\n      });\n      return;\n    }\n    const removedContact = contacts.find((contact) => contact.id === id);\n    const nextContacts = contacts.filter((contact) => contact.id !== id);\n    setContacts(nextContacts);\n    if (removedContact?.isDecisionMaker && !nextContacts.some((contact) => contact.isDecisionMaker)) {\n      setContactsBanner({\n        message: \"Contato removido. Defina outro decisor para manter avanço até Proposta.\",\n        variant: \"warning\",\n      });\n      return;\n    }\n    setContactsBanner({\n      message: \"Contato removido com sucesso.\",\n      variant: \"info\",\n    });\n  };\n\n  const handleToggleDecisionMaker = (id: string) => {\n    const nextContacts = contacts.map((contact) =>\n      contact.id === id\n        ? { ...contact, isDecisionMaker: !contact.isDecisionMaker }\n        : contact,\n    );\n    setContacts(nextContacts);\n    if (nextContacts.some((contact) => contact.isDecisionMaker)) {\n      setContactsBanner({\n        message: \"Decisor atualizado. Regras de avanço para Proposta atendidas.\",\n        variant: \"success\",\n      });\n      return;\n    }\n    setContactsBanner({\n      message: \"Sem decisor definido. A etapa Proposta ficará bloqueada.\",\n      variant: \"warning\",\n    });\n  };\n\n  const handleStartEditContact = (contact: Contact) => {\n    setEditingContactId(contact.id);\n    setEditContact({\n      nome: contact.nome,\n      email: contact.email,\n      telefone: contact.telefone,\n      cargo: contact.cargo,\n      personalidade: contact.personalidade ?? \"\",\n    });\n  };\n\n  const handleSaveEditContact = () => {\n    if (!editingContactId) return;\n    if (!editContact.nome.trim()) {\n      setContactsBanner({\n        message: \"O nome do contato é obrigatório.\",\n        variant: \"warning\",\n      });\n      return;\n    }\n    if (!editContact.cargo) {\n      setContactsBanner({\n        message: \"Selecione o cargo para manter o score de patente correto.\",\n        variant: \"warning\",\n      });\n      return;\n    }\n    setContacts(\n      contacts.map((contact) =>\n        contact.id === editingContactId ? { ...contact, ...editContact } : contact,\n      ),\n    );\n    setEditingContactId(null);\n    setEditContact({ nome: \"\", email: \"\", telefone: \"\", cargo: \"\", personalidade: \"\" });\n    setContactsBanner({\n      message: \"Contato atualizado. Score de patente recalculado.\",\n      variant: \"success\",\n    });\n  };\n\n  const appendActivity = useCallback(\n    (activityTitle: string, type: FlowActivity[\"type\"] = \"follow-up\") => {\n      const dueAt = new Date(Date.now() + 60 * 60 * 1000);\n      const dueDate = `${dueAt.toLocaleDateString(\"pt-BR\", {\n        day: \"2-digit\",\n        month: \"2-digit\",\n      })} ${dueAt.toLocaleTimeString(\"pt-BR\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      })}`;\n\n      const newActivity: FlowActivity = {\n        id: `activity-${Date.now()}`,\n        title: activityTitle,\n        type,\n        status: \"pending\",\n        dueDate,\n        responsibleId,\n        responsibleName,\n        opportunityId: resolvedLead.id,\n        opportunityTitle: title,\n        clientId: resolvedLead.id,\n        clientName: resolvedLead.clientName ?? nomeFantasia,\n        createdAt: new Date().toISOString(),\n      };\n\n      setDealActivities((prev) => [newActivity, ...prev]);\n      setHeaderBanner({\n        message: \"Atividade criada com sucesso\",\n        variant: \"success\",\n      });\n    },\n    [\n      nomeFantasia,\n      resolvedLead.clientName,\n      resolvedLead.id,\n      responsibleId,\n      responsibleName,\n      title,\n    ],\n  );\n\n  const canEditNote = useCallback((note: OpportunityNote) => {\n    if (note.isSystem) return false;\n    if (note.authorId !== LOGGED_USER.id) return false;\n    const elapsed = Date.now() - new Date(note.createdAt).getTime();\n    return elapsed <= NOTE_EDIT_WINDOW_MS;\n  }, []);\n\n  const handleSaveNote = useCallback(() => {\n    if (isLocked) return;\n    const body = noteDraft.trim();\n    if (body.length < NOTE_MIN_LENGTH) {\n      setNoteError(`A nota precisa ter pelo menos ${NOTE_MIN_LENGTH} caracteres.`);\n      setNoteSaveState(\"error\");\n      trackEvent(\"validation_failed\", { field: \"noteDraft\" });\n      return;\n    }\n    if (body.length > NOTE_MAX_LENGTH) {\n      setNoteError(`A nota excedeu o limite de ${NOTE_MAX_LENGTH} caracteres.`);\n      setNoteSaveState(\"error\");\n      trackEvent(\"validation_failed\", { field: \"noteDraft_max\" });\n      return;\n    }\n    setNoteError(null);\n    setNoteSaveState(\"saving\");\n    setTimeout(() => {\n      const newNote: OpportunityNote = {\n        id: `note-${Date.now()}`,\n        body,\n        authorId: LOGGED_USER.id,\n        authorName: LOGGED_USER.name,\n        createdAt: new Date().toISOString(),\n        intent: noteIntent,\n        visibility: noteVisibility,\n      };\n      setNotesHistory((prev) => [newNote, ...prev]);\n      setNoteDraft(\"\");\n      setNoteIntent(\"general\");\n      setNoteVisibility(\"team\");\n      setNoteSaveState(\"saved\");\n      setHeaderBanner({\n        message: \"Nota salva e adicionada ao histórico.\",\n        variant: \"success\",\n      });\n      trackEvent(\"note_created\", {\n        entity_id: resolvedLead.id,\n      });\n      setTimeout(() => setNoteSaveState(\"idle\"), 1600);\n    }, 320);\n  }, [isLocked, noteDraft, noteIntent, noteVisibility, resolvedLead.id]);\n\n  const handleCreateNextStep = useCallback(() => {\n    if (isLocked) return;\n    const action = nextStepDraft.action.trim() || noteDraft.trim();\n    if (action.length < 3) {\n      setNextStepError(\"Defina uma ação para criar o próximo passo.\");\n      setNextStepState(\"error\");\n      return;\n    }\n    if (noteIntent === \"proximo_passo\" && !nextStepDraft.dueDate) {\n      setNextStepError(\"Defina a data do próximo passo.\");\n      setNextStepState(\"error\");\n      return;\n    }\n\n    setNextStepError(null);\n    setNextStepState(\"saving\");\n    const typeMap: Record<NextStepDraft[\"channel\"], FlowActivity[\"type\"]> = {\n      call: \"call\",\n      whatsapp: \"whatsapp\",\n      email: \"email\",\n      meeting: \"meeting\",\n      visit: \"visit\",\n    };\n    setTimeout(() => {\n      const ownerName =\n        mockTeamMembers.find((member) => member.id === nextStepDraft.ownerId)\n          ?.name ?? responsibleName;\n      const dueLabel = nextStepDraft.dueDate\n        ? ` até ${new Date(nextStepDraft.dueDate).toLocaleDateString(\"pt-BR\")}`\n        : \"\";\n      appendActivity(`${action}${dueLabel} • ${ownerName}`, typeMap[nextStepDraft.channel]);\n      setNextStepState(\"saved\");\n      setHeaderBanner({\n        message: \"Próximo passo criado na aba Atividades.\",\n        variant: \"success\",\n      });\n      setTimeout(() => setNextStepState(\"idle\"), 1600);\n    }, 280);\n  }, [appendActivity, isLocked, nextStepDraft, noteDraft, noteIntent, responsibleName]);\n\n  const handleStartEditNote = useCallback(\n    (note: OpportunityNote) => {\n      if (!canEditNote(note)) return;\n      setEditingNoteId(note.id);\n      setEditingNoteDraft(note.body);\n      setEditingNoteError(null);\n      setEditingNoteSaveState(\"idle\");\n    },\n    [canEditNote],\n  );\n\n  const handleSaveEditedNote = useCallback(() => {\n    if (!editingNoteId) return;\n    const body = editingNoteDraft.trim();\n    if (body.length < NOTE_MIN_LENGTH) {\n      setEditingNoteError(`A nota precisa ter pelo menos ${NOTE_MIN_LENGTH} caracteres.`);\n      setEditingNoteSaveState(\"error\");\n      return;\n    }\n    setEditingNoteError(null);\n    setEditingNoteSaveState(\"saving\");\n    setTimeout(() => {\n      setNotesHistory((prev) =>\n        prev.map((note) =>\n          note.id === editingNoteId ? { ...note, body } : note,\n        ),\n      );\n      setEditingNoteSaveState(\"saved\");\n      setEditingNoteId(null);\n      setEditingNoteDraft(\"\");\n      setHeaderBanner({\n        message: \"Nota atualizada.\",\n        variant: \"success\",\n      });\n      setTimeout(() => setEditingNoteSaveState(\"idle\"), 1400);\n      trackEvent(\"note_edited\", { entity_id: resolvedLead.id });\n    }, 280);\n  }, [editingNoteDraft, editingNoteId, resolvedLead.id]);\n\n  const handleDuplicateNote = useCallback((note: OpportunityNote) => {\n    if (note.isSystem) return;\n    setNoteDraft(note.body);\n    setNoteIntent(note.intent === \"system\" ? \"general\" : note.intent);\n    setNotesFilter(\"all\");\n    setHeaderBanner({\n      message: \"Conteúdo duplicado no registro rápido.\",\n      variant: \"info\",\n    });\n  }, []);\n\n  const handleSaveActivity = useCallback((data: ActivityFormData) => {\n    const newActivity: FlowActivity = {\n      id: Math.random().toString(36).substr(2, 9),\n      title: data.title,\n      type: data.type,\n      status: \"pending\",\n      dueDate: `${new Date(data.date).toLocaleDateString('pt-BR')} ${data.time || \"\"}`.trim(),\n      responsibleName: \"Eu (Logado)\",\n      responsibleId: \"u1\",\n      opportunityId: data.opportunityId || resolvedLead.id,\n      clientId: data.clientId,\n      clientName: data.clientName,\n      contactIds: data.contactIds?.length ? data.contactIds : undefined,\n      contactNames: data.contactNames?.length ? data.contactNames : undefined,\n      createdAt: new Date().toISOString(),\n    };\n\n    setDealActivities((prev) => [newActivity, ...prev]);\n\n    setHeaderBanner({\n      message: \"Atividade criada com sucesso\",\n      variant: \"success\",\n    });\n  }, [resolvedLead.id]);\n\n  const handleCreateQuickActivity = useCallback(() => {\n    if (isLocked) return;\n    setActiveTab(\"atividades\");\n    handleOpenActivityModal(\"task\");\n  }, [handleOpenActivityModal, isLocked]);\n\n  const handleCreateVisitFollowUp = useCallback(\n    (visit: VisitRow) => {\n      const scheduleLabel = formatVisitDateLabel(visit.startAt);\n      appendActivity(`Follow-up da visita (${scheduleLabel})`, \"follow-up\");\n      setActiveTab(\"atividades\");\n    },\n    [appendActivity]\n  );\n\n  const handleCompleteDealActivity = useCallback((activityId: string) => {\n    setDealActivities((prev) =>\n      prev.map((activity) =>\n        activity.id === activityId\n          ? {\n            ...activity,\n            status: \"completed\",\n            completedAt: new Date().toISOString(),\n          }\n          : activity,\n      ),\n    );\n    setHeaderBanner({\n      message: \"Atividade concluída\",\n      variant: \"success\",\n    });\n  }, []);\n\n  const handleToggleActivityFilter = useCallback(() => {\n    const nextFilter =\n      activityFilter === \"all\"\n        ? \"pending\"\n        : activityFilter === \"pending\"\n          ? \"completed\"\n          : \"all\";\n\n    setActivityFilter(nextFilter);\n    const label =\n      nextFilter === \"all\"\n        ? \"Todos\"\n        : nextFilter === \"pending\"\n          ? \"Pendentes\"\n          : \"Concluídas\";\n    setHeaderBanner({\n      message: `Filtro de atividades: ${label}`,\n      variant: \"info\",\n    });\n  }, [activityFilter]);\n\n  // --- Company Refactor Handlers ---\n  const toggleType = (id: string) => {\n    if (isLocked) return;\n    setSelectedTypes((prev) =>\n      prev.includes(id) ? prev.filter((t) => t !== id) : [...prev, id],\n    );\n  };\n\n  const handleUpdateDailyHour = (\n    dayId: string,\n    field: string,\n    value: string | boolean,\n  ) => {\n    if (isLocked) return;\n    setDailyHours((prev) => ({\n      ...prev,\n      [dayId]: { ...prev[dayId], [field]: value },\n    }));\n  };\n\n  // Status pill\n  const statusCfg = statusConfig[dealStatus];\n\n  return (\n    <>\n      <Dialog open={isOpen} onOpenChange={(open) => {\n        if (!open) handleCloseDrawer();\n      }}>\n        <DialogContent\n          className=\"flex h-[90vh] !max-h-[90vh] w-[90vw] !max-w-[90vw] flex-col overflow-hidden rounded-[var(--radius-bento-card)] !gap-0 !p-0 bg-zinc-50/50\"\n          showCloseButton={false}\n        >\n          {/* ═══════════════════════════════════════════════════════════\n              HeaderStickyDeal — Premium Glassmorphism layout\n              ═══════════════════════════════════════════════════════════ */}\n          <div className=\"sticky top-0 z-10 border-b border-zinc-200/50 bg-white/85 backdrop-blur-xl transition-shadow duration-[120ms] shadow-[0_4px_30px_rgba(0,0,0,0.02)]\">\n            <div className=\"px-5 pt-3 pb-0 md:px-6\">\n              {/* ─── Camada 1: Top Bar Compacta ────────────────────── */}\n              <div className=\"flex items-center justify-between gap-4\">\n                <div className=\"min-w-0 flex-1\">\n                  {/* Breadcrumb — minimal */}\n                  <nav\n                    className=\"mb-1 flex items-center gap-1 font-body text-[10px] text-zinc-400\"\n                    aria-label=\"Breadcrumb\"\n                  >\n                    <span>Pipes</span>\n                    <ChevronRight className=\"h-2.5 w-2.5\" aria-hidden=\"true\" />\n                    <span className=\"text-zinc-500\">Pipeline Comercial</span>\n                  </nav>\n\n                  {/* Title row: Name + Score + Status */}\n                  <div className=\"flex flex-wrap items-center gap-2\">\n                    <DialogTitle className=\"font-heading text-xl font-bold tracking-tight text-black sm:text-[22px] leading-tight\">\n                      <InlineEditable\n                        value={title}\n                        onSave={setTitle}\n                        className=\"font-heading text-xl font-bold tracking-tight sm:text-[22px] leading-tight\"\n                        readOnly={isLocked}\n                      />\n                    </DialogTitle>\n\n                    {leadScore > 0 && (\n                      <div\n                        className={`inline-flex items-center gap-0.5 rounded-md px-1.5 py-0.5 font-heading text-[10px] font-bold leading-none ${getScoreColor(leadScore)}`}\n                        title={`Lead Score: ${leadScore} (${getScoreLabel(leadScore)})`}\n                      >\n                        <TrendingUp className=\"h-2 w-2\" aria-hidden=\"true\" />\n                        {leadScore}\n                      </div>\n                    )}\n                    <div\n                      className=\"inline-flex items-center gap-0.5 rounded-md border border-indigo-200 bg-indigo-50 px-1.5 py-0.5 font-heading text-[10px] font-bold leading-none text-indigo-700\"\n                      title={`Score de Patente: ${cardPatentScore}`}\n                    >\n                      <Shield className=\"h-2 w-2\" aria-hidden=\"true\" />\n                      {cardPatentScore}\n                    </div>\n\n                    <span\n                      className={`inline-flex items-center gap-0.5 rounded-full px-1.5 py-0.5 font-body text-[10px] font-medium transition-all duration-[140ms] ${statusCfg.color} ${statusCfg.bg}`}\n                    >\n                      {dealStatus === \"won\" && (\n                        <Check className=\"h-2 w-2\" aria-hidden=\"true\" />\n                      )}\n                      {dealStatus === \"lost\" && (\n                        <X className=\"h-2 w-2\" aria-hidden=\"true\" />\n                      )}\n                      {statusCfg.label}\n                    </span>\n\n                    {source && (\n                      <span className=\"font-body text-[10px] text-zinc-400\">\n                        via {source}\n                      </span>\n                    )}\n                  </div>\n                </div>\n\n                {/* ─── Actions: compact ──────────────────────────────── */}\n                <div className=\"flex shrink-0 items-center gap-1\">\n                  {dealStatus === \"open\" && (\n                    <>\n                      <button\n                        onClick={() => setShowWinConfirm(true)}\n                        disabled={isWinLoading}\n                        className=\"group/won inline-flex h-[34px] items-center gap-1 rounded-full border border-emerald-200/80 bg-emerald-50/80 px-3 font-heading text-[11px] font-semibold text-emerald-700 transition-all duration-300 ease-out hover:-translate-y-[1px] hover:border-emerald-500 hover:bg-emerald-600 hover:text-white hover:shadow-[0_4px_12px_rgba(16,185,129,0.2)] active:scale-[0.96] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500/30 disabled:pointer-events-none disabled:opacity-50\"\n                      >\n                        {isWinLoading ? (\n                          <Loader2 className=\"h-3 w-3 animate-spin\" />\n                        ) : (\n                          <Check className=\"h-3 w-3\" aria-hidden=\"true\" />\n                        )}\n                        <span className=\"max-sm:hidden\">Ganho</span>\n                      </button>\n                      <button\n                        onClick={() => setShowLostPanel(true)}\n                        disabled={isLostLoading}\n                        className=\"group/lost inline-flex h-[34px] items-center gap-1 rounded-full border border-zinc-200/80 bg-white px-3 font-heading text-[11px] font-semibold text-zinc-500 transition-all duration-300 ease-out hover:-translate-y-[1px] hover:border-red-400 hover:bg-red-500 hover:text-white hover:shadow-[0_4px_12px_rgba(248,113,113,0.2)] active:scale-[0.96] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/30 disabled:pointer-events-none disabled:opacity-50\"\n                      >\n                        {isLostLoading ? (\n                          <Loader2 className=\"h-3 w-3 animate-spin\" />\n                        ) : (\n                          <X className=\"h-3 w-3\" aria-hidden=\"true\" />\n                        )}\n                        <span className=\"max-sm:hidden\">Perdido</span>\n                      </button>\n                    </>\n                  )}\n\n                  <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                      <button className=\"flex h-7 w-7 items-center justify-center rounded-full text-zinc-400 transition-all duration-[140ms] hover:bg-zinc-100 hover:text-zinc-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/30\">\n                        <MoreHorizontal className=\"h-3.5 w-3.5\" />\n                      </button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"end\" className=\"rounded-[12px]\">\n                      <DropdownMenuItem\n                        onClick={() => {\n                          handleCreateQuickActivity();\n                        }}\n                      >\n                        <Calendar className=\"mr-2 h-4 w-4\" />\n                        Nova atividade\n                      </DropdownMenuItem>\n                      {dealStatus !== \"open\" && (\n                        <DropdownMenuItem\n                          onClick={() => {\n                            setDealStatus(\"open\");\n                            setHeaderBanner({\n                              message: \"Oportunidade reaberta\",\n                              variant: \"info\",\n                            });\n                          }}\n                        >\n                          <RefreshCw className=\"mr-2 h-4 w-4\" />\n                          Reabrir oportunidade\n                        </DropdownMenuItem>\n                      )}\n                      <DropdownMenuSeparator />\n                      <DropdownMenuItem\n                        className=\"text-status-danger focus:text-status-danger\"\n                        onClick={() => setShowDeleteConfirm(true)}\n                      >\n                        <Trash2 className=\"mr-2 h-4 w-4\" />\n                        Excluir\n                      </DropdownMenuItem>\n                    </DropdownMenuContent>\n                  </DropdownMenu>\n\n                  <button\n                    onClick={handleCloseDrawer}\n                    className=\"flex h-7 w-7 items-center justify-center rounded-full text-zinc-400 transition-all duration-[140ms] hover:bg-zinc-100 hover:text-zinc-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/30\"\n                    aria-label=\"Fechar\"\n                  >\n                    <X className=\"h-3.5 w-3.5\" />\n                  </button>\n                </div>\n              </div>\n\n              {/* Header banners */}\n              {headerBanner && (\n                <div className=\"mt-2\">\n                  <InlineStatusBanner\n                    banner={headerBanner}\n                    onDismiss={() => setHeaderBanner(null)}\n                  />\n                </div>\n              )}\n\n              {showLostPanel && dealStatus === \"open\" && (\n                <div className=\"mt-2\">\n                  <LostReasonPanel\n                    onConfirm={handleMarkLost}\n                    onCancel={() => setShowLostPanel(false)}\n                    isLoading={isLostLoading}\n                  />\n                </div>\n              )}\n\n              {/* ─── Faixa C: Executive Company Strip ─────────────────── */}\n              <ExecutiveCompanyStrip\n                nomeFantasia={nomeFantasia}\n                segmento={segmento}\n                enderecoFormatado={enderecoFormatado}\n                telefoneEmpresa={telefoneEmpresa}\n                emailEmpresa={emailEmpresa}\n                website={website}\n                instagramUrl={instagramUrl}\n                cardapioUrl={cardapioUrl}\n                primaryContact={primaryContact}\n                stage={stage}\n                temperature={temperature}\n                responsibleName={responsibleName}\n                responsibleId={responsibleId}\n                suggestedTemperature={suggestedTemperature}\n                onStageChange={handleStageChange}\n                onTemperatureChange={setTemperature}\n                onResponsibleChange={(id, name) => {\n                  setResponsibleId(id);\n                  setResponsibleName(name);\n                }}\n                onOpenPrimaryContact={() => setActiveTab(\"contatos\")}\n                onCreatePrimaryContact={() => {\n                  setActiveTab(\"contatos\");\n                  setShowAddContact(true);\n                }}\n                teamMembers={mockTeamMembers}\n                isLocked={isLocked}\n                stageBanner={stageBanner}\n                onStageBannerDismiss={() => setStageBanner(null)}\n              />\n            </div>\n\n            {/* NEW Native Tabs Row integrated into Header with Framer Motion */}\n            <div className=\"flex w-full items-end overflow-x-auto px-5 md:px-6 scrollbar-hide\">\n              {[\n                { value: \"empresa\", label: \"Empresa\" },\n                { value: \"contatos\", label: \"Contatos\" },\n                { value: \"visitas\", label: \"Visitas\" },\n                { value: \"atividades\", label: \"Atividades\" },\n                { value: \"negociacao\", label: \"Negociação\" },\n                { value: \"anotacoes\", label: \"Anotações\" },\n                { value: \"linha-do-tempo\", label: \"Linha do Tempo\" },\n              ].map((tab) => {\n                const isActive = activeTab === tab.value;\n                return (\n                  <button\n                    key={tab.value}\n                    onClick={() => handleTabChange(tab.value)}\n                    className={cn(\n                      \"relative whitespace-nowrap px-1 py-3 font-heading text-[11px] font-semibold tracking-wide uppercase transition-colors outline-none mr-6\",\n                      isActive\n                        ? \"text-brand\"\n                        : \"text-zinc-500 hover:text-zinc-800 focus-visible:ring-2 focus-visible:ring-brand/30\"\n                    )}\n                  >\n                    {tab.label}\n                    {isActive && (\n                      <motion.div\n                        layoutId=\"activeDrawerTab\"\n                        className=\"absolute bottom-0 left-0 right-0 h-[3px] rounded-t-full bg-brand\"\n                        transition={{ type: \"spring\", stiffness: 400, damping: 30 }}\n                      />\n                    )}\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* ═══════════════════════════════════════════════════════════\n              Body — Split View (Desktop) / Stack (Mobile)\n              ═══════════════════════════════════════════════════════════ */}\n          <div className=\"flex min-h-0 flex-1\">\n            {/* ── Full-width content: Tabs ─────────────────────────── */}\n            <div className=\"min-h-0 flex-1\">\n              <ScrollArea className=\"h-full\">\n                <div className=\"p-5 md:px-8 lg:px-10\">\n                  <Tabs\n                    value={activeTab}\n                    onValueChange={(value) => handleTabChange(value)}\n                  >\n\n\n\n                    <div className=\"mt-5 grid grid-cols-1 md:grid-cols-12 gap-6 pb-10\">\n                      {/* ── Left Column: Tab Content (Span 7) ── */}\n                      <div className=\"md:col-span-12 lg:col-span-7 space-y-4\">\n\n                        {/* ── Tab: Empresa ──────────────────────────────── */}\n                        <TabsContent value=\"empresa\" className=\"mt-0 space-y-4\">\n\n\n                          <PremiumCard\n                            title=\"Localização\"\n                            description=\"\"\n                            icon={MapPin}\n                            delay={0}\n                            successMessage={sectionSuccess.localizacao}\n                          >\n                            <div className=\"space-y-4\">\n                              {/* Row 1: CEP | Endereço | Número */}\n                              <div className=\"flex gap-2\">\n                                <div className=\"w-[140px] flex-none\">\n                                  <Label className=\"mb-1.5 block font-heading text-[10px] font-bold uppercase tracking-wider text-zinc-400\">\n                                    CEP\n                                  </Label>\n                                  <div className=\"relative\">\n                                    <Input\n                                      value={cep}\n                                      onChange={(e) => handleCepChange(e.target.value)}\n                                      placeholder=\"00000-000\"\n                                      className=\"h-9 rounded-lg border-zinc-200 bg-white font-body text-xs transition-all focus:border-brand focus:ring-2 focus:ring-brand/10\"\n                                      readOnly={isLocked}\n                                      maxLength={9}\n                                    />\n                                    {cepLoading && (\n                                      <Loader2 className=\"absolute right-2 top-1/2 h-3 w-3 -translate-y-1/2 animate-spin text-brand\" />\n                                    )}\n                                  </div>\n                                  {cepError && (\n                                    <p className=\"mt-1 font-body text-[10px] text-status-danger\">{cepError}</p>\n                                  )}\n                                </div>\n                                <div className=\"flex-1 min-w-0\">\n                                  <Label className=\"mb-1.5 block font-heading text-[10px] font-bold uppercase tracking-wider text-zinc-400\">\n                                    Endereço\n                                  </Label>\n                                  <Input\n                                    value={logradouro}\n                                    onChange={(e) => setLogradouro(e.target.value)}\n                                    placeholder=\"Logradouro\"\n                                    className=\"h-9 rounded-lg border-zinc-200 bg-white font-body text-xs\"\n                                    readOnly={isLocked}\n                                  />\n                                </div>\n                                <div className=\"w-[70px] flex-none\">\n                                  <Label className=\"mb-1.5 block font-heading text-[10px] font-bold uppercase tracking-wider text-zinc-400\">\n                                    Nº\n                                  </Label>\n                                  <Input\n                                    value={numero}\n                                    onChange={(e) =>\n                                      setNumero(e.target.value.replace(/\\D/g, \"\"))\n                                    }\n                                    placeholder=\"123\"\n                                    className=\"h-9 rounded-lg border-zinc-200 bg-white font-body text-xs\"\n                                    readOnly={isLocked}\n                                  />\n                                </div>\n                              </div>\n\n                              {/* Row 2: Bairro | Cidade | UF */}\n                              <div className=\"flex gap-2\">\n                                <div className=\"flex-1 min-w-0\">\n                                  <Label className=\"mb-1.5 block font-heading text-[10px] font-bold uppercase tracking-wider text-zinc-400\">\n                                    Bairro\n                                  </Label>\n                                  <Input\n                                    value={bairro}\n                                    onChange={(e) => setBairro(e.target.value)}\n                                    placeholder=\"Bairro\"\n                                    className=\"h-9 rounded-lg border-zinc-200 bg-white font-body text-xs\"\n                                    readOnly={isLocked}\n                                  />\n                                </div>\n                                <div className=\"flex-1 min-w-0\">\n                                  <Label className=\"mb-1.5 block font-heading text-[10px] font-bold uppercase tracking-wider text-zinc-400\">\n                                    Cidade\n                                  </Label>\n                                  <Input\n                                    value={cidade}\n                                    onChange={(e) => setCidade(e.target.value)}\n                                    placeholder=\"Cidade\"\n                                    className=\"h-9 rounded-lg border-zinc-200 bg-white font-body text-xs\"\n                                    readOnly={isLocked}\n                                  />\n                                </div>\n                                <div className=\"w-[70px] flex-none\">\n                                  <Label className=\"mb-1.5 block font-heading text-[10px] font-bold uppercase tracking-wider text-zinc-400\">\n                                    UF\n                                  </Label>\n                                  <Select\n                                    value={estado}\n                                    onValueChange={setEstado}\n                                    disabled={isLocked}\n                                  >\n                                    <SelectTrigger className=\"h-9 rounded-lg border-zinc-200 bg-white px-2 font-body text-xs font-medium focus:ring-brand/10\">\n                                      <SelectValue placeholder=\"UF\" />\n                                    </SelectTrigger>\n                                    <SelectContent className=\"max-h-[220px]\">\n                                      {UF_LIST.map((uf) => (\n                                        <SelectItem\n                                          key={uf}\n                                          value={uf}\n                                          className=\"font-body text-xs\"\n                                        >\n                                          {uf}\n                                        </SelectItem>\n                                      ))}\n                                    </SelectContent>\n                                  </Select>\n                                </div>\n                              </div>\n                            </div>\n                          </PremiumCard>\n\n                          {/* ── Section 2: Tipo ── */}\n                          <PremiumCard\n                            title=\"Tipo\"\n                            description=\"\"\n                            icon={Tag}\n                            delay={0.06}\n                            successMessage={sectionSuccess.tipo}\n                          >\n                            <div className=\"grid grid-cols-3 gap-2 sm:grid-cols-4\">\n                              {COMPANY_TYPES.map((type) => (\n                                <button\n                                  key={type.id}\n                                  disabled={isLocked}\n                                  onClick={() => toggleType(type.id)}\n                                  className={cn(\n                                    \"group flex flex-col items-center gap-1.5 rounded-[12px] p-2.5 text-center transition-all duration-200\",\n                                    selectedTypes.includes(type.id)\n                                      ? \"bg-brand/5 border border-brand/20 text-brand shadow-sm\"\n                                      : \"bg-zinc-50/50 border border-transparent text-zinc-400 hover:bg-zinc-100/80 hover:text-zinc-500\",\n                                    !isLocked && \"active:scale-[0.96] hover:scale-[1.02]\",\n                                  )}\n                                >\n                                  <div\n                                    className={cn(\n                                      \"flex h-8 w-8 items-center justify-center rounded-lg transition-all duration-200\",\n                                      selectedTypes.includes(type.id)\n                                        ? \"bg-brand/10 text-brand\"\n                                        : \"bg-white text-zinc-300 group-hover:text-zinc-400 shadow-sm\",\n                                    )}\n                                  >\n                                    <type.icon className=\"h-4 w-4\" />\n                                  </div>\n                                  <span className=\"font-heading text-[9px] font-bold tracking-tight uppercase line-clamp-2\">\n                                    {type.label}\n                                  </span>\n                                </button>\n                              ))}\n                            </div>\n                          </PremiumCard>\n\n                          {/* ── Section 3: Horário + Presença Online (1x2) ── */}\n                          <PremiumCard\n                            title=\"Horário e Online\"\n                            description=\"\"\n                            icon={Clock3}\n                            delay={0.12}\n                            successMessage={sectionSuccess.horario ?? sectionSuccess.online}\n                          >\n                            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n                              <div className=\"space-y-4 rounded-[14px] border border-zinc-100 bg-zinc-50/45 p-3.5\">\n                                <div className=\"mb-1 flex items-center justify-between\">\n                                  <Label className=\"font-heading text-[10px] font-bold uppercase tracking-wider text-zinc-400\">\n                                    Configuração\n                                  </Label>\n                                  <div className=\"flex items-center gap-2\">\n                                    <span\n                                      className={cn(\n                                        \"font-heading text-[10px] font-bold transition-colors\",\n                                        hoursMode === \"standard\" ? \"text-brand\" : \"text-zinc-300\"\n                                      )}\n                                    >\n                                      PADRÃO\n                                    </span>\n                                    <Switch\n                                      checked={hoursMode === \"daily\"}\n                                      onCheckedChange={(v) =>\n                                        setHoursMode(v ? \"daily\" : \"standard\")\n                                      }\n                                      className=\"scale-75 data-[state=checked]:bg-brand\"\n                                      disabled={isLocked}\n                                    />\n                                    <span\n                                      className={cn(\n                                        \"font-heading text-[10px] font-bold transition-colors\",\n                                        hoursMode === \"daily\" ? \"text-brand\" : \"text-zinc-300\"\n                                      )}\n                                    >\n                                      DIÁRIO\n                                    </span>\n                                  </div>\n                                </div>\n\n                                {hoursMode === \"standard\" ? (\n                                  <div className=\"grid grid-cols-2 gap-3\">\n                                    <div>\n                                      <Label className=\"mb-1.5 block font-heading text-[9px] font-bold uppercase text-zinc-400\">\n                                        Abertura\n                                      </Label>\n                                      <Input\n                                        type=\"time\"\n                                        value={standardHours.open}\n                                        onChange={(e) =>\n                                          setStandardHours((prev) => ({\n                                            ...prev,\n                                            open: e.target.value,\n                                          }))\n                                        }\n                                        className=\"h-9 rounded-lg border-zinc-200 bg-white font-body text-xs\"\n                                        disabled={isLocked}\n                                      />\n                                    </div>\n                                    <div>\n                                      <Label className=\"mb-1.5 block font-heading text-[9px] font-bold uppercase text-zinc-400\">\n                                        Fechamento\n                                      </Label>\n                                      <Input\n                                        type=\"time\"\n                                        value={standardHours.close}\n                                        onChange={(e) =>\n                                          setStandardHours((prev) => ({\n                                            ...prev,\n                                            close: e.target.value,\n                                          }))\n                                        }\n                                        className=\"h-9 rounded-lg border-zinc-200 bg-white font-body text-xs\"\n                                        disabled={isLocked}\n                                      />\n                                    </div>\n                                  </div>\n                                ) : (\n                                  <div className=\"space-y-1\">\n                                    {DAYS_OF_WEEK.map((day) => (\n                                      <div key={day.id} className=\"flex items-center justify-between py-1\">\n                                        <div className=\"flex items-center gap-2\">\n                                          <Switch\n                                            checked={dailyHours[day.id].active}\n                                            onCheckedChange={(v) =>\n                                              handleUpdateDailyHour(day.id, \"active\", v)\n                                            }\n                                            className=\"scale-75 data-[state=checked]:bg-brand\"\n                                            disabled={isLocked}\n                                          />\n                                          <span className=\"w-8 font-heading text-[10px] font-bold uppercase text-zinc-500\">\n                                            {day.label.slice(0, 3)}\n                                          </span>\n                                        </div>\n                                        {dailyHours[day.id].active ? (\n                                          <div className=\"flex items-center gap-1.5\">\n                                            <Input\n                                              type=\"time\"\n                                              value={dailyHours[day.id].open}\n                                              onChange={(e) =>\n                                                handleUpdateDailyHour(day.id, \"open\", e.target.value)\n                                              }\n                                              className=\"h-7 w-[60px] rounded-md border-zinc-200 p-1 text-center font-body text-[10px]\"\n                                              disabled={isLocked}\n                                            />\n                                            <span className=\"text-zinc-300\">-</span>\n                                            <Input\n                                              type=\"time\"\n                                              value={dailyHours[day.id].close}\n                                              onChange={(e) =>\n                                                handleUpdateDailyHour(day.id, \"close\", e.target.value)\n                                              }\n                                              className=\"h-7 w-[60px] rounded-md border-zinc-200 p-1 text-center font-body text-[10px]\"\n                                              disabled={isLocked}\n                                            />\n                                          </div>\n                                        ) : (\n                                          <span className=\"font-heading text-[9px] font-bold uppercase text-zinc-300\">\n                                            Fechado\n                                          </span>\n                                        )}\n                                      </div>\n                                    ))}\n                                  </div>\n                                )}\n                              </div>\n\n                              <div className=\"space-y-3 rounded-[14px] border border-zinc-100 bg-zinc-50/45 p-3.5\">\n                                {[\n                                  {\n                                    id: \"site\",\n                                    label: \"Site\",\n                                    icon: Globe,\n                                    value: website,\n                                    setter: setWebsite,\n                                  },\n                                  {\n                                    id: \"ig\",\n                                    label: \"Instagram\",\n                                    icon: Instagram,\n                                    value: instagramUrl,\n                                    setter: setInstagramUrl,\n                                  },\n                                  {\n                                    id: \"menu\",\n                                    label: \"Cardápio\",\n                                    icon: UtensilsCrossed,\n                                    value: cardapioUrl,\n                                    setter: setCardapioUrl,\n                                  },\n                                ].map((channel) => (\n                                  <div key={channel.id} className=\"group/field relative\">\n                                    <Label className=\"font-heading text-[10px] font-bold uppercase tracking-wider text-zinc-400\">\n                                      {channel.label}\n                                    </Label>\n                                    <div className=\"relative mt-1.5 flex items-center\">\n                                      <div className=\"absolute left-3 flex items-center gap-1.5 text-zinc-300\">\n                                        <channel.icon className=\"h-3.5 w-3.5\" />\n                                      </div>\n                                      <Input\n                                        value={channel.value}\n                                        onChange={(e) => channel.setter(e.target.value)}\n                                        placeholder={channel.id === \"menu\" ? \"URL\" : \"URL\"}\n                                        className=\"h-9 rounded-lg border-zinc-200 pl-9 pr-8 font-body text-xs transition-all focus:border-brand focus:ring-2 focus:ring-brand/10\"\n                                        disabled={isLocked}\n                                      />\n                                      <AnimatePresence>\n                                        {channel.value && (\n                                          <motion.button\n                                            initial={{ opacity: 0, scale: 0.9 }}\n                                            animate={{ opacity: 1, scale: 1 }}\n                                            exit={{ opacity: 0, scale: 0.9 }}\n                                            onClick={() =>\n                                              window.open(\n                                                channel.value.startsWith(\"http\")\n                                                  ? channel.value\n                                                  : `https://${channel.value}`,\n                                                \"_blank\"\n                                              )\n                                            }\n                                            className=\"absolute right-2 h-6 rounded-md bg-zinc-900 px-2 font-heading text-[9px] font-bold text-white shadow-sm transition-all hover:bg-black active:scale-[0.97]\"\n                                          >\n                                            Visitar\n                                          </motion.button>\n                                        )}\n                                      </AnimatePresence>\n                                    </div>\n                                  </div>\n                                ))}\n                              </div>\n                            </div>\n                          </PremiumCard>\n\n                        </TabsContent>\n\n                        {/* ── Tab: Contatos ─────────────────────────────── */}\n                        <TabsContent value=\"contatos\" className=\"mt-0\">\n                          <div className=\"mb-4 flex items-center justify-between\">\n                            <div>\n                              <h3 className=\"font-heading text-sm font-semibold text-black\">\n                                Contatos ({sortedContacts.length})\n                              </h3>\n                              <p className=\"mt-1 font-body text-[11px] text-zinc-500\">\n                                Score de Patente do card: <span className=\"font-semibold text-zinc-800\">{cardPatentScore}</span> ·\n                                limite {MIN_CONTACTS_PER_CARD}-{MAX_CONTACTS_PER_CARD} contatos\n                              </p>\n                            </div>\n                            {!isLocked && (\n                              <Button\n                                onClick={() => {\n                                  setNewContactError(null);\n                                  setShowAddContact(true);\n                                }}\n                                disabled={contacts.length >= MAX_CONTACTS_PER_CARD}\n                                className=\"rounded-full bg-brand font-heading text-xs text-white hover:bg-brand/90\"\n                                size=\"sm\"\n                              >\n                                <Plus className=\"mr-1 h-3.5 w-3.5\" /> Adicionar\n                              </Button>\n                            )}\n                          </div>\n\n                          {contactsBanner && (\n                            <div className=\"mb-3\">\n                              <InlineStatusBanner\n                                banner={contactsBanner}\n                                onDismiss={() => setContactsBanner(null)}\n                              />\n                            </div>\n                          )}\n\n                          {sortedContacts.length === 0 ? (\n                            <div className=\"flex flex-col items-center py-8 text-center\">\n                              <User className=\"h-8 w-8 text-zinc-200\" />\n                              <p className=\"mt-2 font-body text-sm text-zinc-400\">\n                                Sem contatos vinculados\n                              </p>\n                              {!isLocked && (\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  className=\"mt-2 rounded-full font-body text-xs text-brand\"\n                                  onClick={() => {\n                                    setNewContactError(null);\n                                    setShowAddContact(true);\n                                  }}\n                                >\n                                  <Plus className=\"mr-1 h-3.5 w-3.5\" /> Vincular\n                                  contato\n                                </Button>\n                              )}\n                            </div>\n                          ) : (\n                            <div className=\"space-y-2\">\n                              {sortedContacts.map((contact) =>\n                                editingContactId === contact.id ? (\n                                  <div\n                                    key={contact.id}\n                                    className=\"space-y-3 rounded-[14px] border border-brand/20 bg-brand/5 p-4\"\n                                  >\n                                    <div className=\"grid grid-cols-2 gap-3\">\n                                      <div>\n                                        <Label className=\"font-body text-[10px] uppercase tracking-wider text-zinc-400\">\n                                          Nome\n                                        </Label>\n                                        <Input\n                                          value={editContact.nome}\n                                          onChange={(e) =>\n                                            setEditContact({\n                                              ...editContact,\n                                              nome: e.target.value,\n                                            })\n                                          }\n                                          className=\"mt-1 h-8 rounded-[10px] font-body text-sm\"\n                                        />\n                                      </div>\n                                      <div>\n                                        <Label className=\"font-body text-[10px] uppercase tracking-wider text-zinc-400\">\n                                          Cargo\n                                        </Label>\n                                        <Select\n                                          value={editContact.cargo}\n                                          onValueChange={(value) =>\n                                            setEditContact({\n                                              ...editContact,\n                                              cargo: value,\n                                            })\n                                          }\n                                        >\n                                          <SelectTrigger className=\"mt-1 h-8 w-full rounded-[10px] border-zinc-200 font-body text-sm\">\n                                            <SelectValue placeholder=\"Selecione o cargo\" />\n                                          </SelectTrigger>\n                                          <SelectContent>\n                                            {RESTAURANT_POSITIONS.map((pos) => (\n                                              <SelectItem key={pos.value} value={pos.value}>\n                                                {pos.label}\n                                              </SelectItem>\n                                            ))}\n                                          </SelectContent>\n                                        </Select>\n                                      </div>\n                                      <div>\n                                        <Label className=\"font-body text-[10px] uppercase tracking-wider text-zinc-400\">\n                                          E-mail\n                                        </Label>\n                                        <Input\n                                          type=\"email\"\n                                          value={editContact.email}\n                                          onChange={(e) =>\n                                            setEditContact({\n                                              ...editContact,\n                                              email: e.target.value,\n                                            })\n                                          }\n                                          className=\"mt-1 h-8 rounded-[10px] font-body text-sm\"\n                                        />\n                                      </div>\n                                      <div>\n                                        <Label className=\"font-body text-[10px] uppercase tracking-wider text-zinc-400\">\n                                          Telefone\n                                        </Label>\n                                        <PhoneInput\n                                          value={editContact.telefone}\n                                          onValueChange={(raw) =>\n                                            setEditContact({\n                                              ...editContact,\n                                              telefone: raw,\n                                            })\n                                          }\n                                          className=\"mt-1 h-8 rounded-[10px] font-body text-sm\"\n                                        />\n                                      </div>\n                                    </div>\n                                    <div>\n                                      <Label className=\"font-body text-[10px] uppercase tracking-wider text-zinc-400\">\n                                        Personalidade\n                                      </Label>\n                                      <Textarea\n                                        value={editContact.personalidade}\n                                        onChange={(e) =>\n                                          setEditContact({\n                                            ...editContact,\n                                            personalidade: e.target.value,\n                                          })\n                                        }\n                                        className=\"mt-1 min-h-[60px] rounded-[10px] font-body text-sm\"\n                                        placeholder=\"Ex: Direto e objetivo, prefere reuniões curtas...\"\n                                      />\n                                    </div>\n                                    <div className=\"flex justify-end gap-2\">\n                                      <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        className=\"rounded-full font-heading text-xs\"\n                                        onClick={() => {\n                                          setEditingContactId(null);\n                                          setEditContact({ nome: \"\", email: \"\", telefone: \"\", cargo: \"\", personalidade: \"\" });\n                                        }}\n                                      >\n                                        Cancelar\n                                      </Button>\n                                      <Button\n                                        size=\"sm\"\n                                        className=\"rounded-full bg-brand font-heading text-xs text-white hover:bg-brand/90\"\n                                        onClick={handleSaveEditContact}\n                                      >\n                                        Salvar\n                                      </Button>\n                                    </div>\n                                  </div>\n                                ) : (\n                                  <ContactCard\n                                    key={contact.id}\n                                    contact={contact}\n                                    patentScore={getPatentScore(contact.cargo)}\n                                    isPrimary={primaryContact?.id === contact.id}\n                                    onEdit={() => handleStartEditContact(contact)}\n                                    onDelete={() => handleDeleteContact(contact.id)}\n                                    onToggleDecisionMaker={() => handleToggleDecisionMaker(contact.id)}\n                                  />\n                                ),\n                              )}\n                            </div>\n                          )}\n                        </TabsContent>\n\n\n\n                        {/* ── Tab: Visitas ──────────────────────────────── */}\n                        <TabsContent value=\"visitas\" className=\"mt-0 space-y-4\">\n                          <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                            <div>\n                              <h3 className=\"font-heading text-sm font-semibold text-zinc-700\">Visitas</h3>\n                              <p className=\"mt-0.5 text-xs text-zinc-500\">\n                                Agenda comercial, resultados e próximos passos.\n                              </p>\n                            </div>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              className=\"h-8 gap-1.5 rounded-full text-xs\"\n                              onClick={() => setIsNewVisitModalOpen(true)}\n                              disabled={isLocked}\n                            >\n                              <Plus className=\"h-3.5 w-3.5\" />\n                              Nova Visita\n                            </Button>\n                          </div>\n\n                          <div className=\"flex flex-wrap items-center gap-2\">\n                            {[\n                              { id: \"all\" as const, label: \"Todas\", count: visitSummary.all },\n                              {\n                                id: \"agendada\" as const,\n                                label: \"Agendadas\",\n                                count: visitSummary.agendada,\n                              },\n                              {\n                                id: \"realizada\" as const,\n                                label: \"Realizadas\",\n                                count: visitSummary.realizada,\n                              },\n                              {\n                                id: \"cancelada\" as const,\n                                label: \"Canceladas\",\n                                count: visitSummary.cancelada,\n                              },\n                            ].map((filter) => (\n                              <button\n                                key={filter.id}\n                                type=\"button\"\n                                onClick={() => setVisitFilter(filter.id)}\n                                className={cn(\n                                  \"inline-flex h-7 items-center gap-1.5 rounded-full border px-2.5 font-body text-[11px] font-medium transition-all duration-150\",\n                                  visitFilter === filter.id\n                                    ? \"border-zinc-300 bg-zinc-100 text-zinc-900\"\n                                    : \"border-zinc-200 bg-white text-zinc-500 hover:border-zinc-300 hover:text-zinc-700\"\n                                )}\n                              >\n                                {filter.label}\n                                <span className=\"rounded-full bg-zinc-200/80 px-1.5 py-0 text-[10px] font-semibold text-zinc-600\">\n                                  {filter.count}\n                                </span>\n                              </button>\n                            ))}\n                          </div>\n\n                          {visibleVisitRows.length === 0 && (\n                            <div className=\"rounded-2xl border border-dashed border-zinc-200 bg-zinc-50/80 p-4\">\n                              <p className=\"font-heading text-sm font-medium text-zinc-700\">\n                                Nenhuma visita neste filtro\n                              </p>\n                              <p className=\"mt-1 text-xs text-zinc-500\">\n                                Agende uma nova visita para manter o follow-up ativo.\n                              </p>\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                className=\"mt-3 h-8 gap-1.5 rounded-full text-xs\"\n                                onClick={() => setIsNewVisitModalOpen(true)}\n                                disabled={isLocked}\n                              >\n                                <Plus className=\"h-3.5 w-3.5\" />\n                                Nova Visita\n                              </Button>\n                            </div>\n                          )}\n\n                          <div className=\"space-y-3\">\n                            {visibleVisitRows.map((visit) => (\n                              <VisitCard\n                                key={visit.id}\n                                visit={visit}\n                                isExpanded={expandedVisitId === visit.id}\n                                isLocked={isLocked}\n                                onToggleDetails={() => toggleVisitDetails(visit.id)}\n                                onStatusChange={handleVisitStatusChange}\n                                onReschedule={handleRescheduleVisit}\n                                onDuplicate={handleDuplicateVisit}\n                                onFollowUp={handleCreateVisitFollowUp}\n                                onDelete={handleDeleteVisit}\n                              />\n                            ))}\n                          </div>\n                        </TabsContent>\n\n                        {/* ── Tab: Atividades ───────────────────────────── */}\n                        <TabsContent value=\"atividades\" className=\"mt-0 space-y-4\">\n                          <div className=\"flex items-center justify-between\">\n                            <h3 className=\"font-heading text-sm font-semibold text-zinc-700\">Atividades</h3>\n                            <div className=\"flex gap-2\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                className=\"h-8 w-8 rounded-full p-0\"\n                                onClick={handleToggleActivityFilter}\n                                title=\"Alternar filtro de atividades\"\n                              >\n                                <Filter className=\"h-3.5 w-3.5\" />\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                className=\"h-8 gap-1.5 rounded-full text-xs\"\n                                onClick={handleCreateQuickActivity}\n                              >\n                                <Plus className=\"h-3.5 w-3.5\" />\n                                Nova\n                              </Button>\n                            </div>\n                          </div>\n\n                          <div className=\"space-y-3\">\n                            {visibleDealActivities.map((activity) => (\n                              <div key={activity.id} className=\"flex items-start gap-3 rounded-2xl border border-zinc-100 bg-white p-3 transition-all hover:border-zinc-200\">\n                                <div className={cn(\n                                  \"flex h-9 w-9 shrink-0 items-center justify-center rounded-full border\",\n                                  activity.status === 'completed' ? \"border-zinc-100 bg-zinc-50 text-zinc-400\" : \"border-brand/10 bg-brand/5 text-brand\"\n                                )}>\n                                  {(() => {\n                                    const Icon = getActivityIcon(activity.type);\n                                    return <Icon className=\"h-4 w-4\" />;\n                                  })()}\n                                </div>\n                                <div className=\"flex-1 space-y-1\">\n                                  <div className=\"flex items-start justify-between\">\n                                    <p className={cn(\"font-heading text-sm font-medium\", activity.status === 'completed' ? \"text-zinc-500 line-through\" : \"text-zinc-900\")}>\n                                      {activity.title}\n                                    </p>\n                                    <div className=\"flex gap-1\">\n                                      <button\n                                        type=\"button\"\n                                        onClick={() => handleCompleteDealActivity(activity.id)}\n                                        disabled={activity.status === \"completed\"}\n                                        className=\"flex h-6 w-6 items-center justify-center rounded-full text-zinc-300 transition-colors hover:bg-zinc-100 hover:text-zinc-600 disabled:cursor-not-allowed disabled:opacity-50\"\n                                        aria-label=\"Concluir atividade\"\n                                      >\n                                        <CheckCircle className=\"h-4 w-4\" />\n                                      </button>\n                                    </div>\n                                  </div>\n                                  <div className=\"flex items-center gap-3 text-xs text-zinc-400\">\n                                    <span className={cn(\n                                      \"flex items-center gap-1\",\n                                      activity.status === 'overdue' && \"text-red-500 font-medium\"\n                                    )}>\n                                      <Clock className=\"h-3 w-3\" />\n                                      {activity.dueDate}\n                                    </span>\n                                    <span className=\"flex items-center gap-1\">\n                                      <UserCircle className=\"h-3 w-3\" />\n                                      {activity.responsibleName}\n                                    </span>\n                                  </div>\n                                </div>\n                              </div>\n                            ))}\n                            {visibleDealActivities.length === 0 && (\n                              <div className=\"rounded-2xl border border-dashed border-zinc-200 bg-zinc-50 p-3 text-xs text-zinc-500\">\n                                Nenhuma atividade para o filtro atual.\n                              </div>\n                            )}\n                          </div>\n                        </TabsContent>\n\n                        {/* ── Tab: Negociação ───────────────────────────── */}\n                        <TabsContent value=\"negociacao\" className=\"mt-0 space-y-4\">\n                          <NegotiationTab dealId={resolvedLead.id} dealTitle={title} />\n                        </TabsContent>\n\n                        {/* ── Tab: Anotações ────────────────────────────── */}\n                        <TabsContent value=\"anotacoes\" className=\"mt-0 space-y-6\">\n                          <div className=\"space-y-3 rounded-[18px] border border-zinc-200 bg-white p-4\">\n                            <div className=\"flex flex-wrap items-start justify-between gap-3\">\n                              <div>\n                                <p className=\"font-heading text-sm font-semibold text-zinc-900\">\n                                  Registro rápido\n                                </p>\n                                <p className=\"mt-1 text-xs text-zinc-500\">\n                                  Escreva o que aconteceu e registre o próximo passo sem perder o contexto.\n                                </p>\n                              </div>\n                              <div className=\"inline-flex items-center gap-1 rounded-full border border-zinc-200 bg-zinc-50 p-1\">\n                                <button\n                                  type=\"button\"\n                                  onClick={() => setNoteVisibility(\"team\")}\n                                  className={cn(\n                                    \"rounded-full px-2.5 py-1 text-[11px] font-medium transition-all\",\n                                    noteVisibility === \"team\"\n                                      ? \"bg-white text-zinc-900 shadow-sm\"\n                                      : \"text-zinc-500 hover:text-zinc-700\",\n                                  )}\n                                >\n                                  Time\n                                </button>\n                                <button\n                                  type=\"button\"\n                                  onClick={() => setNoteVisibility(\"internal\")}\n                                  className={cn(\n                                    \"rounded-full px-2.5 py-1 text-[11px] font-medium transition-all\",\n                                    noteVisibility === \"internal\"\n                                      ? \"bg-white text-zinc-900 shadow-sm\"\n                                      : \"text-zinc-500 hover:text-zinc-700\",\n                                  )}\n                                >\n                                  Interna\n                                </button>\n                              </div>\n                            </div>\n\n                            <div className=\"space-y-2\">\n                              <Textarea\n                                value={noteDraft}\n                                onChange={(event) => {\n                                  if (noteError) setNoteError(null);\n                                  setNoteSaveState(\"idle\");\n                                  setNoteDraft(event.target.value);\n                                }}\n                                className={cn(\n                                  \"min-h-[110px] resize-none rounded-[14px] border-zinc-200 text-sm\",\n                                  noteError && \"border-red-300 focus-visible:ring-red-200\",\n                                )}\n                                placeholder=\"Escreva o que aconteceu e qual é o próximo passo...\"\n                              />\n                              <div className=\"flex items-center justify-between text-[11px]\">\n                                <span className={cn(noteError ? \"text-red-600\" : \"text-zinc-400\")}>\n                                  {noteError ?? `Mínimo de ${NOTE_MIN_LENGTH} caracteres.`}\n                                </span>\n                                <span className=\"text-zinc-400\">\n                                  {noteDraft.trim().length}/{NOTE_MAX_LENGTH}\n                                </span>\n                              </div>\n                            </div>\n\n                            <div className=\"flex flex-wrap items-center gap-2\">\n                              <span className=\"text-[11px] font-medium text-zinc-500\">Intenção:</span>\n                              <button\n                                type=\"button\"\n                                onClick={() => setNoteIntent(\"general\")}\n                                className={cn(\n                                  \"rounded-full border px-2.5 py-1 text-[11px] font-medium transition-all\",\n                                  noteIntent === \"general\"\n                                    ? \"border-zinc-300 bg-zinc-900 text-white\"\n                                    : \"border-zinc-200 bg-zinc-50 text-zinc-500 hover:bg-zinc-100\",\n                                )}\n                              >\n                                Registro\n                              </button>\n                              {noteIntentOptions.map((intent) => (\n                                <button\n                                  key={intent.id}\n                                  type=\"button\"\n                                  onClick={() => setNoteIntent(intent.id)}\n                                  className={cn(\n                                    \"rounded-full border px-2.5 py-1 text-[11px] font-medium transition-all\",\n                                    noteIntent === intent.id\n                                      ? \"border-brand/20 bg-brand/10 text-brand\"\n                                      : \"border-zinc-200 bg-zinc-50 text-zinc-500 hover:bg-zinc-100\",\n                                  )}\n                                >\n                                  {intent.label}\n                                </button>\n                              ))}\n                            </div>\n\n                            <AnimatePresence initial={false}>\n                              {noteIntent === \"proximo_passo\" && (\n                                <motion.div\n                                  initial={{ opacity: 0, y: 6 }}\n                                  animate={{ opacity: 1, y: 0 }}\n                                  exit={{ opacity: 0, y: 4 }}\n                                  transition={{ duration: 0.18, ease: \"easeOut\" }}\n                                  className=\"grid gap-3 rounded-[14px] border border-brand/15 bg-brand/5 p-3 md:grid-cols-2\"\n                                >\n                                  <div className=\"md:col-span-2\">\n                                    <Label className=\"text-[10px] font-bold uppercase tracking-wider text-zinc-500\">\n                                      Ação\n                                    </Label>\n                                    <Input\n                                      value={nextStepDraft.action}\n                                      onChange={(event) =>\n                                        setNextStepDraft((prev) => ({\n                                          ...prev,\n                                          action: event.target.value,\n                                        }))\n                                      }\n                                      className=\"mt-1 h-9 rounded-lg border-zinc-200 text-xs\"\n                                      placeholder=\"Ex.: Confirmar disponibilidade para reunião de proposta\"\n                                    />\n                                  </div>\n                                  <div>\n                                    <Label className=\"text-[10px] font-bold uppercase tracking-wider text-zinc-500\">\n                                      Data limite\n                                    </Label>\n                                    <Input\n                                      type=\"date\"\n                                      value={nextStepDraft.dueDate}\n                                      onChange={(event) =>\n                                        setNextStepDraft((prev) => ({\n                                          ...prev,\n                                          dueDate: event.target.value,\n                                        }))\n                                      }\n                                      className=\"mt-1 h-9 rounded-lg border-zinc-200 text-xs\"\n                                    />\n                                  </div>\n                                  <div>\n                                    <Label className=\"text-[10px] font-bold uppercase tracking-wider text-zinc-500\">\n                                      Canal\n                                    </Label>\n                                    <Select\n                                      value={nextStepDraft.channel}\n                                      onValueChange={(value) =>\n                                        setNextStepDraft((prev) => ({\n                                          ...prev,\n                                          channel: value as NextStepDraft[\"channel\"],\n                                        }))\n                                      }\n                                    >\n                                      <SelectTrigger className=\"mt-1 h-9 rounded-lg border-zinc-200 text-xs\">\n                                        <SelectValue />\n                                      </SelectTrigger>\n                                      <SelectContent>\n                                        <SelectItem value=\"call\">Ligação</SelectItem>\n                                        <SelectItem value=\"whatsapp\">WhatsApp</SelectItem>\n                                        <SelectItem value=\"email\">E-mail</SelectItem>\n                                        <SelectItem value=\"meeting\">Reunião</SelectItem>\n                                        <SelectItem value=\"visit\">Visita</SelectItem>\n                                      </SelectContent>\n                                    </Select>\n                                  </div>\n                                  <div className=\"md:col-span-2\">\n                                    <Label className=\"text-[10px] font-bold uppercase tracking-wider text-zinc-500\">\n                                      Responsável\n                                    </Label>\n                                    <Select\n                                      value={nextStepDraft.ownerId}\n                                      onValueChange={(value) =>\n                                        setNextStepDraft((prev) => ({\n                                          ...prev,\n                                          ownerId: value,\n                                        }))\n                                      }\n                                      disabled={isLocked}\n                                    >\n                                      <SelectTrigger className=\"mt-1 h-9 rounded-lg border-zinc-200 text-xs\">\n                                        <SelectValue />\n                                      </SelectTrigger>\n                                      <SelectContent>\n                                        {mockTeamMembers.map((member) => (\n                                          <SelectItem key={member.id} value={member.id}>\n                                            {member.name}\n                                          </SelectItem>\n                                        ))}\n                                      </SelectContent>\n                                    </Select>\n                                  </div>\n                                </motion.div>\n                              )}\n                            </AnimatePresence>\n\n                            {nextStepError && (\n                              <div className=\"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-600\">\n                                {nextStepError}\n                              </div>\n                            )}\n\n                            <div className=\"flex flex-wrap items-center justify-between gap-2\">\n                              <div className=\"flex items-center gap-2 text-[11px] text-zinc-500\">\n                                {noteSaveState === \"saving\" && (\n                                  <span className=\"inline-flex items-center gap-1\">\n                                    <Loader2 className=\"h-3 w-3 animate-spin\" />\n                                    Salvando nota...\n                                  </span>\n                                )}\n                                {noteSaveState === \"saved\" && (\n                                  <span className=\"inline-flex items-center gap-1 text-emerald-600\">\n                                    <Check className=\"h-3 w-3\" />\n                                    Nota salva agora.\n                                  </span>\n                                )}\n                                {nextStepState === \"saving\" && (\n                                  <span className=\"inline-flex items-center gap-1\">\n                                    <Loader2 className=\"h-3 w-3 animate-spin\" />\n                                    Criando próximo passo...\n                                  </span>\n                                )}\n                                {nextStepState === \"saved\" && (\n                                  <span className=\"inline-flex items-center gap-1 text-emerald-600\">\n                                    <Check className=\"h-3 w-3\" />\n                                    Próximo passo criado.\n                                  </span>\n                                )}\n                              </div>\n                              <div className=\"flex items-center gap-2\">\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  className=\"h-8 rounded-full px-3 text-xs\"\n                                  onClick={handleCreateNextStep}\n                                  disabled={isLocked || nextStepState === \"saving\"}\n                                >\n                                  {nextStepState === \"saving\" ? (\n                                    <Loader2 className=\"mr-1.5 h-3.5 w-3.5 animate-spin\" />\n                                  ) : (\n                                    <ArrowRight className=\"mr-1.5 h-3.5 w-3.5\" />\n                                  )}\n                                  Criar próximo passo\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  className=\"h-8 rounded-full bg-zinc-900 px-3 text-xs text-white hover:bg-black\"\n                                  onClick={handleSaveNote}\n                                  disabled={isLocked || noteSaveState === \"saving\"}\n                                >\n                                  {noteSaveState === \"saving\" ? (\n                                    <Loader2 className=\"mr-1.5 h-3.5 w-3.5 animate-spin\" />\n                                  ) : (\n                                    <Check className=\"mr-1.5 h-3.5 w-3.5\" />\n                                  )}\n                                  Salvar nota\n                                </Button>\n                              </div>\n                            </div>\n                          </div>\n\n                          <Separator />\n\n                          <div className=\"space-y-4\">\n                            <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                              <label className=\"text-xs font-semibold uppercase tracking-wider text-zinc-500\">\n                                Histórico\n                              </label>\n                              <div className=\"inline-flex items-center gap-1 rounded-full border border-zinc-200 bg-white p-1\">\n                                {noteFilterOptions.map((filterOption) => (\n                                  <button\n                                    key={filterOption.id}\n                                    type=\"button\"\n                                    onClick={() => setNotesFilter(filterOption.id)}\n                                    className={cn(\n                                      \"rounded-full px-2.5 py-1 text-[11px] font-medium transition-all\",\n                                      notesFilter === filterOption.id\n                                        ? \"bg-zinc-900 text-white\"\n                                        : \"text-zinc-500 hover:text-zinc-700\",\n                                    )}\n                                  >\n                                    {filterOption.label}\n                                  </button>\n                                ))}\n                              </div>\n                            </div>\n                            {groupedNotes.length === 0 ? (\n                              <div className=\"rounded-2xl border border-dashed border-zinc-200 bg-zinc-50 p-4 text-xs text-zinc-500\">\n                                Nenhuma nota para este filtro.\n                              </div>\n                            ) : (\n                              <div className=\"space-y-5\">\n                                {groupedNotes.map((group) => (\n                                  <div key={group.dayLabel} className=\"space-y-3\">\n                                    <p className=\"text-[11px] font-semibold uppercase tracking-wider text-zinc-400\">\n                                      {group.dayLabel}\n                                    </p>\n                                    <div className=\"space-y-3\">\n                                      {group.items.map((note) => (\n                                        <div\n                                          key={note.id}\n                                          className=\"rounded-[14px] border border-zinc-200 bg-white p-3\"\n                                        >\n                                          <div className=\"flex items-start justify-between gap-3\">\n                                            <div className=\"space-y-1\">\n                                              <div className=\"flex flex-wrap items-center gap-2\">\n                                                <span className=\"font-heading text-xs font-semibold text-zinc-700\">\n                                                  {note.authorName}\n                                                </span>\n                                                <span className=\"text-[10px] text-zinc-400\">\n                                                  {formatNoteDateTime(note.createdAt)}\n                                                </span>\n                                                <span\n                                                  className={cn(\n                                                    \"rounded-full border px-2 py-0.5 text-[10px] font-semibold\",\n                                                    noteIntentMeta[note.intent].chipClass,\n                                                  )}\n                                                >\n                                                  {noteIntentMeta[note.intent].label}\n                                                </span>\n                                                <span className=\"rounded-full border border-zinc-200 bg-zinc-50 px-2 py-0.5 text-[10px] text-zinc-500\">\n                                                  {note.visibility === \"internal\"\n                                                    ? \"Interna\"\n                                                    : \"Time\"}\n                                                </span>\n                                              </div>\n                                              {editingNoteId === note.id ? (\n                                                <div className=\"space-y-2\">\n                                                  <Textarea\n                                                    value={editingNoteDraft}\n                                                    onChange={(event) =>\n                                                      setEditingNoteDraft(event.target.value)\n                                                    }\n                                                    className=\"min-h-[86px] rounded-lg border-zinc-200 text-sm\"\n                                                  />\n                                                  {editingNoteError && (\n                                                    <p className=\"text-xs text-red-600\">\n                                                      {editingNoteError}\n                                                    </p>\n                                                  )}\n                                                  <div className=\"flex items-center gap-2\">\n                                                    <Button\n                                                      size=\"sm\"\n                                                      className=\"h-7 rounded-full bg-zinc-900 px-3 text-[11px] text-white hover:bg-black\"\n                                                      onClick={handleSaveEditedNote}\n                                                      disabled={editingNoteSaveState === \"saving\"}\n                                                    >\n                                                      {editingNoteSaveState === \"saving\" && (\n                                                        <Loader2 className=\"mr-1.5 h-3 w-3 animate-spin\" />\n                                                      )}\n                                                      Salvar edição\n                                                    </Button>\n                                                    <Button\n                                                      size=\"sm\"\n                                                      variant=\"ghost\"\n                                                      className=\"h-7 rounded-full px-3 text-[11px]\"\n                                                      onClick={() => {\n                                                        setEditingNoteId(null);\n                                                        setEditingNoteDraft(\"\");\n                                                        setEditingNoteError(null);\n                                                      }}\n                                                    >\n                                                      Cancelar\n                                                    </Button>\n                                                  </div>\n                                                </div>\n                                              ) : (\n                                                <p className=\"font-body text-sm leading-relaxed text-zinc-700\">\n                                                  {note.body}\n                                                </p>\n                                              )}\n                                            </div>\n                                            <div className=\"flex items-center gap-1\">\n                                              {canEditNote(note) && (\n                                                <Button\n                                                  size=\"sm\"\n                                                  variant=\"ghost\"\n                                                  className=\"h-7 rounded-full px-2 text-[11px]\"\n                                                  onClick={() => handleStartEditNote(note)}\n                                                >\n                                                  <Pencil className=\"mr-1 h-3 w-3\" />\n                                                  Editar\n                                                </Button>\n                                              )}\n                                              {!note.isSystem && (\n                                                <Button\n                                                  size=\"sm\"\n                                                  variant=\"ghost\"\n                                                  className=\"h-7 rounded-full px-2 text-[11px]\"\n                                                  onClick={() => handleDuplicateNote(note)}\n                                                >\n                                                  <Copy className=\"mr-1 h-3 w-3\" />\n                                                  Duplicar\n                                                </Button>\n                                              )}\n                                            </div>\n                                          </div>\n                                        </div>\n                                      ))}\n                                    </div>\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                          </div>\n                        </TabsContent>\n\n                        {/* ── Tab: Linha do Tempo (NEW - replaced Historico) ── */}\n                        <TabsContent value=\"linha-do-tempo\" className=\"mt-0 space-y-4\">\n                          <TimelinePremium events={buildTimelineFromStores(resolvedLead.id)} />\n                        </TabsContent>\n                      </div>\n\n                      {/* ── Right Column: Persistent Sidebar (Span 5) ── */}\n                      <div className=\"md:col-span-12 lg:col-span-5 space-y-4\">\n                        <StageFieldsPanel\n                          opportunityId={resolvedLead.id}\n                          currentStage={stage}\n                          stages={stageConfig}\n                          initialValues={initialStageValuesForLead as Record<string, string | number | boolean | string[] | null | undefined>}\n                          isLocked={isLocked}\n                          onStageChange={(newStage) => handleStageChangeFromPanel(newStage)}\n                          nextStage={nextStage}\n                          canCreateFields={false}\n                          advanceBlockedReason={\n                            contacts.length < MIN_CONTACTS_PER_CARD\n                              ? \"Adicione pelo menos 1 contato para avançar no funil.\"\n                              : nextStage?.id === PROPOSAL_STAGE_ID && !hasDecisionMaker\n                                ? \"Defina ao menos 1 decisor na aba Contatos para avançar para Proposta.\"\n                                : null\n                          }\n                        />\n                      </div>\n                    </div>\n                  </Tabs>\n                </div>\n              </ScrollArea>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* ═══════════════════════════════════════════════════════════\n          Win Confirmation\n          ═══════════════════════════════════════════════════════════ */}\n      <AlertDialog open={showWinConfirm} onOpenChange={setShowWinConfirm}>\n        <AlertDialogContent className=\"rounded-[20px]\">\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"font-heading text-xl\">\n              Marcar como ganho?\n            </AlertDialogTitle>\n            <AlertDialogDescription className=\"font-body text-sm text-zinc-600\">\n              Marcar como ganho encerra a oportunidade. Edicoes sensiveis serao\n              bloqueadas. Voce quer continuar?\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel className=\"rounded-full\" disabled={isWinLoading}>\n              Cancelar\n            </AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleMarkWon}\n              disabled={isWinLoading}\n              className=\"rounded-full bg-status-success text-white hover:bg-status-success/90\"\n            >\n              {isWinLoading ? (\n                <Loader2 className=\"mr-1.5 h-4 w-4 animate-spin\" />\n              ) : (\n                <Check className=\"mr-1.5 h-4 w-4\" />\n              )}\n              Sim, marcar como ganho\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      {/* ═══════════════════════════════════════════════════════════\n          Delete Confirmation\n          ═══════════════════════════════════════════════════════════ */}\n      <AlertDialog open={showDeleteConfirm} onOpenChange={setShowDeleteConfirm}>\n        <AlertDialogContent className=\"rounded-[20px]\">\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"font-heading text-xl\">\n              Excluir oportunidade?\n            </AlertDialogTitle>\n            <AlertDialogDescription className=\"font-body text-sm text-zinc-600\">\n              Esta acao nao pode ser desfeita. Todos os dados desta oportunidade\n              serao removidos permanentemente.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel className=\"rounded-full\">\n              Cancelar\n            </AlertDialogCancel>\n            <AlertDialogAction\n              onClick={() => {\n                setShowDeleteConfirm(false);\n                closeModal();\n              }}\n              className=\"rounded-full bg-status-danger text-white hover:bg-status-danger/90\"\n            >\n              Sim, excluir\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <Dialog\n        open={showAddContact}\n        onOpenChange={(open) => {\n          setShowAddContact(open);\n          if (!open) {\n            setNewContactError(null);\n            setNewContact({\n              nome: \"\",\n              email: \"\",\n              telefone: \"\",\n              cargo: \"\",\n              personalidade: \"\",\n            });\n          }\n        }}\n      >\n        <DialogContent className=\"max-w-3xl gap-0 overflow-hidden rounded-[20px] p-0\">\n          <div className=\"border-b border-zinc-100 px-5 py-4\">\n            <DialogTitle className=\"font-heading text-lg font-semibold text-zinc-900\">\n              Adicionar contato\n            </DialogTitle>\n            <DialogDescription className=\"mt-1 text-sm text-zinc-500\">\n              Cadastre um novo contato para este card. Nome e cargo são obrigatórios.\n            </DialogDescription>\n          </div>\n\n          <div className=\"space-y-4 px-5 py-4\">\n            {newContactError && (\n              <InlineStatusBanner\n                banner={{ message: newContactError, variant: \"warning\" }}\n                onDismiss={() => setNewContactError(null)}\n              />\n            )}\n\n            <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2\">\n              <div>\n                <Label className=\"font-body text-[10px] uppercase tracking-wider text-zinc-400\">\n                  Nome\n                </Label>\n                <Input\n                  value={newContact.nome}\n                  onChange={(e) =>\n                    setNewContact({\n                      ...newContact,\n                      nome: e.target.value,\n                    })\n                  }\n                  className=\"mt-1 h-9 rounded-[10px] font-body text-sm\"\n                  placeholder=\"Nome\"\n                />\n              </div>\n              <div>\n                <Label className=\"font-body text-[10px] uppercase tracking-wider text-zinc-400\">\n                  Cargo\n                </Label>\n                <Select\n                  value={newContact.cargo}\n                  onValueChange={(value) =>\n                    setNewContact({\n                      ...newContact,\n                      cargo: value,\n                    })\n                  }\n                >\n                  <SelectTrigger className=\"mt-1 h-9 w-full rounded-[10px] border-zinc-200 font-body text-sm\">\n                    <SelectValue placeholder=\"Selecione o cargo\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {RESTAURANT_POSITIONS.map((pos) => (\n                      <SelectItem key={pos.value} value={pos.value}>\n                        {pos.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label className=\"font-body text-[10px] uppercase tracking-wider text-zinc-400\">\n                  E-mail\n                </Label>\n                <Input\n                  type=\"email\"\n                  value={newContact.email}\n                  onChange={(e) =>\n                    setNewContact({\n                      ...newContact,\n                      email: e.target.value,\n                    })\n                  }\n                  className=\"mt-1 h-9 rounded-[10px] font-body text-sm\"\n                  placeholder=\"email@empresa.com\"\n                />\n              </div>\n              <div>\n                <Label className=\"font-body text-[10px] uppercase tracking-wider text-zinc-400\">\n                  Telefone\n                </Label>\n                <PhoneInput\n                  value={newContact.telefone}\n                  onValueChange={(raw) =>\n                    setNewContact({\n                      ...newContact,\n                      telefone: raw,\n                    })\n                  }\n                  className=\"mt-1 h-9 rounded-[10px] font-body text-sm\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label className=\"font-body text-[10px] uppercase tracking-wider text-zinc-400\">\n                Personalidade\n              </Label>\n              <Textarea\n                value={newContact.personalidade}\n                onChange={(e) =>\n                  setNewContact({\n                    ...newContact,\n                    personalidade: e.target.value,\n                  })\n                }\n                className=\"mt-1 min-h-[86px] rounded-[10px] font-body text-sm\"\n                placeholder=\"Ex: Direto e objetivo, prefere reuniões curtas...\"\n              />\n            </div>\n          </div>\n\n          <DialogFooter className=\"border-t border-zinc-100 bg-zinc-50/50 px-5 py-3 sm:justify-end\">\n            <Button\n              variant=\"ghost\"\n              className=\"rounded-full font-heading text-xs\"\n              onClick={() => {\n                setShowAddContact(false);\n                setNewContactError(null);\n                setNewContact({\n                  nome: \"\",\n                  email: \"\",\n                  telefone: \"\",\n                  cargo: \"\",\n                  personalidade: \"\",\n                });\n              }}\n            >\n              Cancelar\n            </Button>\n            <Button\n              className=\"rounded-full bg-brand font-heading text-xs text-white hover:bg-brand/90\"\n              onClick={handleAddContact}\n            >\n              Salvar contato\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      <NewVisitModal\n        isOpen={isNewVisitModalOpen}\n        onClose={() => setIsNewVisitModalOpen(false)}\n        onSave={handleSaveVisit}\n        dealId={resolvedLead.id}\n        contacts={contacts}\n        onAddContact={(newContact) => {\n          if (contacts.length >= MAX_CONTACTS_PER_CARD) {\n            setContactsBanner({\n              message: `Limite atingido: no máximo ${MAX_CONTACTS_PER_CARD} contatos por card.`,\n              variant: \"warning\",\n            });\n            return;\n          }\n          // Adapt to the existing handleSaveContact which expects full QuickContactData but we only have partial\n          // Creating a minimal valid contact object\n          const contactToAdd: Contact = {\n            id: `c${Date.now()}`,\n            clientId: selectedLead?.clientId ?? \"1\",\n            nome: newContact.nome || \"Sem Nome\",\n            email: newContact.email || \"\",\n            telefone: newContact.telefone || \"\",\n            cargo: newContact.cargo || \"operacional\",\n            personalidade: \"\",\n            isDecisionMaker: false,\n          };\n          setContacts((prev) => [...prev, contactToAdd]);\n          setContactsBanner({\n            message: \"Contato criado a partir de Visitas.\",\n            variant: \"success\",\n          });\n        }}\n      />\n      <NewActivityModal\n        isOpen={isNewActivityModalOpen}\n        onClose={() => setIsNewActivityModalOpen(false)}\n        onSave={handleSaveActivity}\n        dealId={resolvedLead.id}\n        initialType={newActivityType}\n        initialClientId={selectedLead?.clientId}\n        initialClientName={resolvedLead.clientName}\n        initialContactIds={primaryContact?.id ? [primaryContact.id] : undefined}\n        initialContactNames={primaryContact?.nome ? [primaryContact.nome] : undefined}\n        initialOpportunityId={resolvedLead.id}\n        initialOpportunityTitle={resolvedLead.title}\n        lockClient={!!selectedLead?.clientId}\n        requireClient={!!selectedLead?.clientId}\n      />\n\n      <Dialog open={showDirtyConfirm} onOpenChange={(open) => {\n        if (!open) cancelDiscardChanges();\n      }}>\n        <DialogContent className=\"sm:max-w-md p-6\">\n          <DialogHeader>\n            <DialogTitle className=\"font-heading text-lg font-bold\">Alterações não salvas</DialogTitle>\n            <DialogDescription className=\"font-body text-sm text-zinc-500 mt-2\">\n              Você tem alterações não salvas. Quer descartar as alterações e sair?\n            </DialogDescription>\n          </DialogHeader>\n          <DialogFooter className=\"mt-6 flex sm:justify-end gap-3\">\n            <Button variant=\"outline\" onClick={cancelDiscardChanges}>\n              Cancelar\n            </Button>\n            <Button\n              className=\"bg-red-600 hover:bg-red-700 text-white\"\n              onClick={confirmDiscardChanges}\n            >\n              Sair sem salvar\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}
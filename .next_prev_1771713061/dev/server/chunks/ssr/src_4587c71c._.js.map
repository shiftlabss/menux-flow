{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/hooks/use-now.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\n\n/**\n * Hook that returns a reactive `Date` instance.\n * Updates automatically at the given interval (default: 60 seconds).\n * Ensures date-dependent logic (overdue, today, SLA risk) stays fresh\n * even if the user keeps the tab open across midnight.\n */\nexport function useNow(intervalMs = 60_000): Date {\n  const [now, setNow] = useState(() => new Date());\n\n  useEffect(() => {\n    const id = window.setInterval(() => setNow(new Date()), intervalMs);\n    return () => window.clearInterval(id);\n  }, [intervalMs]);\n\n  return now;\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAUO,SAAS,OAAO,aAAa,MAAM;IACxC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC,IAAM,IAAI;IAEzC,IAAA,kNAAS,EAAC;QACR,MAAM,KAAK,OAAO,WAAW,CAAC,IAAM,OAAO,IAAI,SAAS;QACxD,OAAO,IAAM,OAAO,aAAa,CAAC;IACpC,GAAG;QAAC;KAAW;IAEf,OAAO;AACT"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/activities/components/config.ts"],"sourcesContent":["import {\n  Phone,\n  Mail,\n  Calendar,\n  CheckSquare,\n  RotateCcw,\n  MessageCircle,\n  MapPin,\n  Clock,\n  CheckCircle2,\n  AlertCircle,\n  XCircle,\n} from \"lucide-react\";\nimport type { ActivityType, ActivityStatus } from \"@/types\";\n\n// ═══════════════════════════════════════════════════════════════════\n// Type Config\n// ═══════════════════════════════════════════════════════════════════\n\nexport const typeIconComponents: Record<ActivityType, typeof Phone> = {\n  call: Phone,\n  email: Mail,\n  meeting: Calendar,\n  visit: MapPin,\n  task: CheckSquare,\n  \"follow-up\": RotateCcw,\n  whatsapp: MessageCircle,\n};\n\nexport const typeLabels: Record<ActivityType, string> = {\n  call: \"Ligação\",\n  email: \"E-mail\",\n  meeting: \"Reunião\",\n  visit: \"Visita\",\n  task: \"Tarefa\",\n  \"follow-up\": \"Follow-up\",\n  whatsapp: \"WhatsApp\",\n};\n\nexport const typeLabelsPt: Record<ActivityType, string> = {\n  call: \"Ligações\",\n  email: \"E-mails\",\n  meeting: \"Reuniões\",\n  visit: \"Visitas\",\n  task: \"Tarefas\",\n  \"follow-up\": \"Follow-ups\",\n  whatsapp: \"WhatsApp\",\n};\n\nexport const typeColors: Record<ActivityType, { bg: string; text: string }> = {\n  call: { bg: \"bg-blue-100\", text: \"text-blue-600\" },\n  email: { bg: \"bg-amber-100\", text: \"text-amber-600\" },\n  meeting: { bg: \"bg-purple-100\", text: \"text-purple-600\" },\n  visit: { bg: \"bg-indigo-100\", text: \"text-indigo-600\" },\n  task: { bg: \"bg-emerald-100\", text: \"text-emerald-600\" },\n  \"follow-up\": { bg: \"bg-orange-100\", text: \"text-orange-600\" },\n  whatsapp: { bg: \"bg-green-100\", text: \"text-green-600\" },\n};\n\nexport const typeDotColors: Record<ActivityType, string> = {\n  call: \"bg-blue-500\",\n  email: \"bg-amber-500\",\n  meeting: \"bg-purple-500\",\n  visit: \"bg-indigo-500\",\n  task: \"bg-emerald-500\",\n  \"follow-up\": \"bg-orange-500\",\n  whatsapp: \"bg-green-500\",\n};\n\nexport const allActivityTypes: ActivityType[] = [\n  \"call\",\n  \"email\",\n  \"meeting\",\n  \"visit\",\n  \"task\",\n  \"follow-up\",\n  \"whatsapp\",\n];\n\n// ═══════════════════════════════════════════════════════════════════\n// Status Config\n// ═══════════════════════════════════════════════════════════════════\n\nexport const statusIconComponents: Record<ActivityStatus, typeof Clock> = {\n  pending: Clock,\n  completed: CheckCircle2,\n  overdue: AlertCircle,\n  cancelled: XCircle,\n};\n\nexport const statusLabels: Record<ActivityStatus, string> = {\n  pending: \"Pendente\",\n  completed: \"Concluída\",\n  overdue: \"Atrasada\",\n  cancelled: \"Cancelada\",\n};\n\nexport const statusColors: Record<\n  ActivityStatus,\n  { color: string; dotColor: string; bgColor: string }\n> = {\n  pending: {\n    color: \"text-status-info\",\n    dotColor: \"bg-status-info\",\n    bgColor: \"bg-status-info-light\",\n  },\n  completed: {\n    color: \"text-status-success\",\n    dotColor: \"bg-status-success\",\n    bgColor: \"bg-status-success-light\",\n  },\n  overdue: {\n    color: \"text-status-danger\",\n    dotColor: \"bg-status-danger\",\n    bgColor: \"bg-status-danger-light\",\n  },\n  cancelled: {\n    color: \"text-zinc-400\",\n    dotColor: \"bg-zinc-400\",\n    bgColor: \"bg-zinc-100\",\n  },\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAmBO,MAAM,qBAAyD;IACpE,MAAM,6MAAK;IACX,OAAO,0MAAI;IACX,SAAS,sNAAQ;IACjB,OAAO,oNAAM;IACb,MAAM,0OAAW;IACjB,aAAa,6NAAS;IACtB,UAAU,yOAAa;AACzB;AAEO,MAAM,aAA2C;IACtD,MAAM;IACN,OAAO;IACP,SAAS;IACT,OAAO;IACP,MAAM;IACN,aAAa;IACb,UAAU;AACZ;AAEO,MAAM,eAA6C;IACxD,MAAM;IACN,OAAO;IACP,SAAS;IACT,OAAO;IACP,MAAM;IACN,aAAa;IACb,UAAU;AACZ;AAEO,MAAM,aAAiE;IAC5E,MAAM;QAAE,IAAI;QAAe,MAAM;IAAgB;IACjD,OAAO;QAAE,IAAI;QAAgB,MAAM;IAAiB;IACpD,SAAS;QAAE,IAAI;QAAiB,MAAM;IAAkB;IACxD,OAAO;QAAE,IAAI;QAAiB,MAAM;IAAkB;IACtD,MAAM;QAAE,IAAI;QAAkB,MAAM;IAAmB;IACvD,aAAa;QAAE,IAAI;QAAiB,MAAM;IAAkB;IAC5D,UAAU;QAAE,IAAI;QAAgB,MAAM;IAAiB;AACzD;AAEO,MAAM,gBAA8C;IACzD,MAAM;IACN,OAAO;IACP,SAAS;IACT,OAAO;IACP,MAAM;IACN,aAAa;IACb,UAAU;AACZ;AAEO,MAAM,mBAAmC;IAC9C;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAMM,MAAM,uBAA6D;IACxE,SAAS,6MAAK;IACd,WAAW,qOAAY;IACvB,SAAS,mOAAW;IACpB,WAAW,uNAAO;AACpB;AAEO,MAAM,eAA+C;IAC1D,SAAS;IACT,WAAW;IACX,SAAS;IACT,WAAW;AACb;AAEO,MAAM,eAGT;IACF,SAAS;QACP,OAAO;QACP,UAAU;QACV,SAAS;IACX;IACA,WAAW;QACT,OAAO;QACP,UAAU;QACV,SAAS;IACX;IACA,SAAS;QACP,OAAO;QACP,UAAU;QACV,SAAS;IACX;IACA,WAAW;QACT,OAAO;QACP,UAAU;QACV,SAAS;IACX;AACF"}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/activities/components/generated-content-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { Copy, Check, Sparkles } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogDescription,\n    DialogFooter,\n    DialogClose,\n} from \"@/components/ui/dialog\";\n\ninterface GeneratedContentModalProps {\n    open: boolean;\n    onOpenChange: (open: boolean) => void;\n    title: string;\n    description?: string;\n    content: string;\n}\n\nexport function GeneratedContentModal({\n    open,\n    onOpenChange,\n    title,\n    description,\n    content,\n}: GeneratedContentModalProps) {\n    const [copied, setCopied] = useState(false);\n    const [copyError, setCopyError] = useState<string | null>(null);\n\n    const handleOpenChange = (nextOpen: boolean) => {\n        if (nextOpen) {\n            setCopied(false);\n            setCopyError(null);\n        }\n        onOpenChange(nextOpen);\n    };\n\n    const handleCopy = async () => {\n        try {\n            await navigator.clipboard.writeText(content);\n            setCopied(true);\n            setCopyError(null);\n            setTimeout(() => setCopied(false), 2000);\n        } catch {\n            setCopyError(\"Não foi possível copiar agora. Tente novamente.\");\n        }\n    };\n\n    return (\n        <Dialog open={open} onOpenChange={handleOpenChange}>\n            <DialogContent className=\"sm:max-w-[500px]\">\n                <DialogHeader>\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-violet-100 text-violet-600\">\n                            <Sparkles className=\"h-4 w-4\" />\n                        </div>\n                        <DialogTitle>{title}</DialogTitle>\n                    </div>\n                    {description && <DialogDescription>{description}</DialogDescription>}\n                </DialogHeader>\n\n                <div className=\"relative mt-2 rounded-md border border-zinc-200 bg-zinc-50 p-4\">\n                    <pre className=\"whitespace-pre-wrap font-sans text-sm text-zinc-700\">\n                        {content}\n                    </pre>\n                    <Button\n                        size=\"icon\"\n                        variant=\"ghost\"\n                        className=\"absolute right-2 top-2 h-8 w-8 text-zinc-500 hover:text-zinc-900\"\n                        onClick={handleCopy}\n                    >\n                        {copied ? (\n                            <Check className=\"h-4 w-4 text-emerald-500\" />\n                        ) : (\n                            <Copy className=\"h-4 w-4\" />\n                        )}\n                    </Button>\n                </div>\n\n                {copyError ? (\n                    <p className=\"mt-2 text-xs text-red-600\">{copyError}</p>\n                ) : null}\n\n                <DialogFooter className=\"gap-2 sm:gap-0\">\n                    <DialogClose asChild>\n                        <Button variant=\"outline\">Fechar</Button>\n                    </DialogClose>\n                    <Button onClick={handleCopy} className=\"gap-2\">\n                        {copied ? <Check className=\"h-4 w-4\" /> : <Copy className=\"h-4 w-4\" />}\n                        {copied ? \"Copiado\" : \"Copiar conteúdo\"}\n                    </Button>\n                </DialogFooter>\n            </DialogContent>\n        </Dialog>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AACA;AACA;AALA;;;;;;AAuBO,SAAS,sBAAsB,EAClC,IAAI,EACJ,YAAY,EACZ,KAAK,EACL,WAAW,EACX,OAAO,EACkB;IACzB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgB;IAE1D,MAAM,mBAAmB,CAAC;QACtB,IAAI,UAAU;YACV,UAAU;YACV,aAAa;QACjB;QACA,aAAa;IACjB;IAEA,MAAM,aAAa;QACf,IAAI;YACA,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC;YACpC,UAAU;YACV,aAAa;YACb,WAAW,IAAM,UAAU,QAAQ;QACvC,EAAE,OAAM;YACJ,aAAa;QACjB;IACJ;IAEA,qBACI,8OAAC,4IAAM;QAAC,MAAM;QAAM,cAAc;kBAC9B,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACrB,8OAAC,kJAAY;;sCACT,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC,sNAAQ;wCAAC,WAAU;;;;;;;;;;;8CAExB,8OAAC,iJAAW;8CAAE;;;;;;;;;;;;wBAEjB,6BAAe,8OAAC,uJAAiB;sCAAE;;;;;;;;;;;;8BAGxC,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;sCACV;;;;;;sCAEL,8OAAC,4IAAM;4BACH,MAAK;4BACL,SAAQ;4BACR,WAAU;4BACV,SAAS;sCAER,uBACG,8OAAC,6MAAK;gCAAC,WAAU;;;;;qDAEjB,8OAAC,0MAAI;gCAAC,WAAU;;;;;;;;;;;;;;;;;gBAK3B,0BACG,8OAAC;oBAAE,WAAU;8BAA6B;;;;;2BAC1C;8BAEJ,8OAAC,kJAAY;oBAAC,WAAU;;sCACpB,8OAAC,iJAAW;4BAAC,OAAO;sCAChB,cAAA,8OAAC,4IAAM;gCAAC,SAAQ;0CAAU;;;;;;;;;;;sCAE9B,8OAAC,4IAAM;4BAAC,SAAS;4BAAY,WAAU;;gCAClC,uBAAS,8OAAC,6MAAK;oCAAC,WAAU;;;;;yDAAe,8OAAC,0MAAI;oCAAC,WAAU;;;;;;gCACzD,SAAS,YAAY;;;;;;;;;;;;;;;;;;;;;;;;AAM9C"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/activities/components/helpers.ts"],"sourcesContent":["import type { Activity } from \"@/types\";\nimport { isActivityOverdueAt, isActivitySlaRiskAt } from \"@/lib/business-rules\";\n\n// ═══════════════════════════════════════════════════════════════════\n// Date primitives\n// ═══════════════════════════════════════════════════════════════════\n\nexport const DAY_MS = 24 * 60 * 60 * 1000;\n\nexport function startOfDay(date: Date): Date {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n\nexport function parseDateISO(dateStr: string): Date {\n  const [year, month, day] = dateStr.split(\"-\").map(Number);\n  return new Date(year, month - 1, day);\n}\n\nexport function toISODate(date: Date): string {\n  const y = date.getFullYear();\n  const m = String(date.getMonth() + 1).padStart(2, \"0\");\n  const d = String(date.getDate()).padStart(2, \"0\");\n  return `${y}-${m}-${d}`;\n}\n\nexport function addDays(date: Date, days: number): Date {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate() + days);\n}\n\nexport function startOfMonth(date: Date): Date {\n  return new Date(date.getFullYear(), date.getMonth(), 1);\n}\n\nexport function endOfMonth(date: Date): Date {\n  return new Date(date.getFullYear(), date.getMonth() + 1, 0);\n}\n\nexport function startOfWeek(date: Date): Date {\n  const start = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n  const day = start.getDay();\n  return addDays(start, -day);\n}\n\nexport function endOfWeek(date: Date): Date {\n  const end = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n  const day = end.getDay();\n  return addDays(end, 6 - day);\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// Formatting\n// ═══════════════════════════════════════════════════════════════════\n\nexport function formatMonthTitle(date: Date): string {\n  return new Intl.DateTimeFormat(\"pt-BR\", {\n    month: \"long\",\n    year: \"numeric\",\n  }).format(date);\n}\n\nexport function formatDateBR(dateStr: string): string {\n  return parseDateISO(dateStr).toLocaleDateString(\"pt-BR\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n  });\n}\n\nexport function formatDateFull(dateStr: string): string {\n  return parseDateISO(dateStr).toLocaleDateString(\"pt-BR\", {\n    day: \"2-digit\",\n    month: \"short\",\n  });\n}\n\nexport function formatCompactDateLabel(date: Date): string {\n  const parts = new Intl.DateTimeFormat(\"pt-BR\", {\n    weekday: \"short\",\n    day: \"2-digit\",\n    month: \"short\",\n  }).formatToParts(date);\n  const weekday = (parts.find((part) => part.type === \"weekday\")?.value ?? \"\")\n    .replaceAll(\".\", \"\")\n    .trim();\n  const day = parts.find((part) => part.type === \"day\")?.value ?? \"\";\n  const month = (parts.find((part) => part.type === \"month\")?.value ?? \"\")\n    .replaceAll(\".\", \"\")\n    .trim();\n  return `${weekday.charAt(0).toUpperCase() + weekday.slice(1)}, ${day} ${month}`;\n}\n\nexport function initials(name: string): string {\n  return name\n    .split(\" \")\n    .map((part) => part[0])\n    .join(\"\")\n    .slice(0, 2)\n    .toUpperCase();\n}\n\n// ═══════════════════════════════════════════════════════════════════\n// Activity helpers\n// ═══════════════════════════════════════════════════════════════════\n\nexport function getDelayText(daysOverdue: number): string {\n  if (daysOverdue <= 0) return \"\";\n  if (daysOverdue === 1) return \"1 dia de atraso\";\n  if (daysOverdue < 7) return `${daysOverdue} dias de atraso`;\n  if (daysOverdue < 30) {\n    const weeks = Math.floor(daysOverdue / 7);\n    return weeks === 1 ? \"1 semana de atraso\" : `${weeks} semanas de atraso`;\n  }\n  const months = Math.floor(daysOverdue / 30);\n  return months === 1 ? \"1 mês de atraso\" : `${months} meses de atraso`;\n}\n\nexport function isActivityOverdue(activity: Activity, now: Date): boolean {\n  return isActivityOverdueAt(activity, now);\n}\n\nexport function isSlaRisk(activity: Activity, now: Date): boolean {\n  return isActivitySlaRiskAt(activity, now);\n}\n\nexport function getRelativeTimeLabel(activity: Activity, now: Date): string {\n  const dueDate = startOfDay(parseDateISO(activity.dueDate));\n  const today = startOfDay(now);\n  const diffDays = Math.floor((dueDate.getTime() - today.getTime()) / DAY_MS);\n\n  if (isActivityOverdue(activity, now)) {\n    if (diffDays === 0) {\n      return activity.dueTime ? `Atrasada desde ${activity.dueTime}` : \"Atrasada hoje\";\n    }\n    return getDelayText(Math.max(1, Math.abs(diffDays)));\n  }\n\n  if (diffDays === 0) {\n    return activity.dueTime ? `Hoje · ${activity.dueTime}` : \"Hoje\";\n  }\n\n  if (diffDays === 1) return \"Amanhã\";\n  if (diffDays <= 7) return `Em ${diffDays} dias`;\n  return formatDateFull(activity.dueDate);\n}\n\nexport function getStatusChip(activity: Activity, now: Date): {\n  label: string;\n  className: string;\n} {\n  if (activity.status === \"completed\") {\n    return {\n      label: \"Concluída\",\n      className: \"bg-status-success-light text-status-success border-status-success/20\",\n    };\n  }\n\n  if (activity.status === \"cancelled\") {\n    return {\n      label: \"Cancelada\",\n      className: \"bg-zinc-100 text-zinc-500 border-zinc-200\",\n    };\n  }\n\n  if (isActivityOverdue(activity, now)) {\n    return {\n      label: \"Atrasada\",\n      className: \"bg-status-danger-light text-status-danger border-status-danger/20\",\n    };\n  }\n\n  const due = startOfDay(parseDateISO(activity.dueDate));\n  const today = startOfDay(now);\n\n  if (due.getTime() === today.getTime()) {\n    return {\n      label: \"Hoje\",\n      className: \"bg-status-warning-light text-status-warning border-status-warning/25\",\n    };\n  }\n\n  return {\n    label: \"Pendente\",\n    className: \"bg-status-info-light text-status-info border-status-info/20\",\n  };\n}\n\nexport function getActivityChecklist(activity: Activity): string[] {\n  const base = [\n    \"Contexto do cliente validado\",\n    \"Objetivo da interação definido\",\n    \"Próxima ação registrada\",\n  ];\n\n  if (activity.type === \"meeting\") {\n    return [\n      \"Participantes confirmados\",\n      \"Pauta compartilhada\",\n      \"Follow-up preparado\",\n    ];\n  }\n\n  if (activity.type === \"call\" || activity.type === \"whatsapp\") {\n    return [\n      \"Script revisado\",\n      \"Objeções mapeadas\",\n      \"Próximo passo combinado\",\n    ];\n  }\n\n  return base;\n}\n\nexport function getActivityInsight(activity: Activity, now: Date): {\n  message: string;\n  nextStep: string;\n  risk: string;\n} {\n  const label = activity.clientName || activity.opportunityTitle || \"o cliente\";\n  const overdue = isActivityOverdue(activity, now);\n  const urgency = overdue ? \"urgente\" : \"prioritária\";\n\n  return {\n    message:\n      activity.type === \"email\"\n        ? `Olá! Revendo nossa agenda, gostaria de avançar o próximo passo com ${label}. Podemos alinhar ainda hoje?`\n        : activity.type === \"meeting\"\n          ? `Perfeito, vamos alinhar os pontos críticos de ${label} e sair com decisão clara no final da reunião.`\n          : `Oi! Passando para mantermos ${label} em ritmo ${urgency}. Você consegue me confirmar o melhor horário para avançarmos?`,\n    nextStep:\n      activity.type === \"task\"\n        ? \"Feche esta tarefa e transforme em contato ativo com data definida.\"\n        : \"Registrar compromisso com data/horário e responsável antes de encerrar.\",\n    risk: overdue\n      ? `Se ignorar, ${label} pode perder prioridade e aumentar risco de churn.`\n      : `Se ignorar, ${label} perde cadência e pode esfriar o ciclo de decisão.`,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 583, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Avatar as AvatarPrimitive } from \"radix-ui\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Avatar({\n  className,\n  size = \"default\",\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root> & {\n  size?: \"default\" | \"sm\" | \"lg\"\n}) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      data-size={size}\n      className={cn(\n        \"group/avatar relative flex size-8 shrink-0 overflow-hidden rounded-full select-none data-[size=lg]:size-10 data-[size=sm]:size-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn(\"aspect-square size-full\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        \"bg-muted text-muted-foreground flex size-full items-center justify-center rounded-full text-sm group-data-[size=sm]/avatar:text-xs\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarBadge({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"avatar-badge\"\n      className={cn(\n        \"bg-primary text-primary-foreground ring-background absolute right-0 bottom-0 z-10 inline-flex items-center justify-center rounded-full ring-2 select-none\",\n        \"group-data-[size=sm]/avatar:size-2 group-data-[size=sm]/avatar:[&>svg]:hidden\",\n        \"group-data-[size=default]/avatar:size-2.5 group-data-[size=default]/avatar:[&>svg]:size-2\",\n        \"group-data-[size=lg]/avatar:size-3 group-data-[size=lg]/avatar:[&>svg]:size-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"avatar-group\"\n      className={cn(\n        \"*:data-[slot=avatar]:ring-background group/avatar-group flex -space-x-2 *:data-[slot=avatar]:ring-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarGroupCount({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"avatar-group-count\"\n      className={cn(\n        \"bg-muted text-muted-foreground ring-background relative flex size-8 shrink-0 items-center justify-center rounded-full text-sm ring-2 group-has-data-[size=lg]/avatar-group:size-10 group-has-data-[size=sm]/avatar-group:size-6 [&>svg]:size-4 group-has-data-[size=lg]/avatar-group:[&>svg]:size-5 group-has-data-[size=sm]/avatar-group:[&>svg]:size-3\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Avatar,\n  AvatarImage,\n  AvatarFallback,\n  AvatarBadge,\n  AvatarGroup,\n  AvatarGroupCount,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,OAAO,SAAS,EAChB,GAAG,OAGJ;IACC,qBACE,8OAAC,8MAAe,CAAC,IAAI;QACnB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,yHAAE,EACX,oIACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,8MAAe,CAAC,KAAK;QACpB,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,8OAAC,8MAAe,CAAC,QAAQ;QACvB,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,sIACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAqC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,6JACA,iFACA,6FACA,iFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,4VACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 676, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\n        \"relative overflow-hidden rounded-md bg-slate-200/75\",\n        \"before:absolute before:inset-0 before:animate-pulse\",\n        \"before:bg-linear-to-r before:from-transparent before:via-white/70 before:to-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,uDACA,uDACA,2FACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 700, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/shared/module-command-header.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport type { ReactNode } from \"react\";\nimport { cn } from \"@/lib/cn\";\n\ntype ChipTone = \"neutral\" | \"info\" | \"warning\" | \"danger\" | \"success\";\n\nexport interface ModuleCommandHeaderChip {\n  id: string;\n  label: string;\n  icon?: ReactNode;\n  tone?: ChipTone;\n  onClick?: () => void;\n  href?: string;\n}\n\ninterface ModuleCommandHeaderProps {\n  title: ReactNode;\n  titleAccessory?: ReactNode;\n  description?: string;\n  actions?: ReactNode;\n  actionsClassName?: string;\n  meta?: ReactNode;\n  chips?: ModuleCommandHeaderChip[];\n  fallbackChip?: ModuleCommandHeaderChip;\n  children?: ReactNode;\n  className?: string;\n  sticky?: boolean;\n}\n\nconst chipToneStyles: Record<ChipTone, string> = {\n  neutral: \"border-zinc-200 bg-white/92 text-zinc-700\",\n  info: \"border-sky-200 bg-sky-50/88 text-sky-700\",\n  warning: \"border-amber-200 bg-amber-50/88 text-amber-700\",\n  danger: \"border-red-200 bg-red-50/88 text-red-700\",\n  success: \"border-emerald-200 bg-emerald-50/88 text-emerald-700\",\n};\n\nfunction renderChip(chip: ModuleCommandHeaderChip) {\n  const isInteractive = Boolean(chip.href || chip.onClick);\n  const classes = cn(\n    \"premium-shine inline-flex h-8 shrink-0 items-center justify-center gap-1.5 rounded-full border px-3 text-[12px] font-semibold tracking-tight whitespace-nowrap\",\n    isInteractive\n      ? \"cursor-pointer transition-all duration-150 ease-out hover:bg-white/75 hover:-translate-y-[1px] active:scale-[0.99] active:translate-y-0\"\n      : \"cursor-default select-none opacity-90\",\n    chipToneStyles[chip.tone ?? \"neutral\"]\n  );\n\n  const content = (\n    <>\n      {chip.icon ? <span className=\"shrink-0\">{chip.icon}</span> : null}\n      <span>{chip.label}</span>\n    </>\n  );\n\n  if (chip.href) {\n    return (\n      <Link key={chip.id} href={chip.href} className={classes}>\n        {content}\n      </Link>\n    );\n  }\n\n  if (chip.onClick) {\n    return (\n      <button key={chip.id} type=\"button\" onClick={chip.onClick} className={classes}>\n        {content}\n      </button>\n    );\n  }\n\n  return (\n    <span key={chip.id} className={classes}>\n      {content}\n    </span>\n  );\n}\n\nexport function ModuleCommandHeader({\n  title,\n  titleAccessory,\n  description,\n  actions,\n  actionsClassName,\n  meta,\n  chips = [],\n  fallbackChip,\n  children,\n  className,\n  sticky = false,\n}: ModuleCommandHeaderProps) {\n  const hasChildrenRow = Boolean(children);\n  const hasMeta = Boolean(meta);\n  const hasChips = Boolean(chips.length > 0 || fallbackChip);\n  const hasLowerSection = hasChildrenRow || hasMeta || hasChips;\n  const hasLeftBlock = hasChildrenRow || hasMeta;\n\n  return (\n    <section\n      className={cn(\n        \"relative overflow-hidden rounded-[20px] border border-zinc-200/85 bg-zinc-50/88 px-5 pb-4 pt-3\",\n        \"shadow-[0_10px_24px_-20px_rgba(15,23,42,0.34)] backdrop-blur-sm\",\n        sticky && \"sticky top-4 z-30\",\n        className\n      )}\n    >\n      <div className=\"pointer-events-none absolute inset-0\">\n        <div className=\"absolute inset-x-0 top-0 h-14 bg-linear-to-b from-white/72 to-transparent\" />\n      </div>\n\n      <div className=\"relative z-10 space-y-3\">\n        <div className=\"flex flex-col gap-4 xl:flex-row xl:items-start xl:justify-between\">\n          <div className=\"min-w-0 flex-1 max-w-[600px]\">\n            <div className=\"flex min-w-0 items-center gap-2\">\n              <h1 className=\"min-w-0 font-heading text-2xl font-bold tracking-tight text-zinc-950 sm:text-3xl\">\n                {title}\n              </h1>\n              {titleAccessory ? <div className=\"shrink-0\">{titleAccessory}</div> : null}\n            </div>\n            {description ? (\n              <p className=\"mt-1 font-body text-[13.5px] text-zinc-600/90 leading-relaxed\">{description}</p>\n            ) : null}\n          </div>\n          {actions ? (\n            <div\n              className={cn(\n                \"flex w-full min-w-0 shrink-0 flex-wrap items-center gap-2 rounded-[20px] border border-zinc-200/85 bg-white/95 px-2 py-1.5 shadow-[0_8px_16px_-16px_rgba(15,23,42,0.36)]\",\n                \"xl:w-auto xl:max-w-full xl:justify-end\",\n                actionsClassName\n              )}\n            >\n              {actions}\n            </div>\n          ) : null}\n        </div>\n\n        {hasLowerSection ? (\n          <div className=\"border-t border-zinc-200/75 pt-3\">\n            <div className=\"flex flex-col gap-3 xl:flex-row xl:items-start xl:justify-between\">\n              {hasLeftBlock ? (\n                <div className=\"min-w-0 flex-1 space-y-2\">\n                  {meta ? <div className=\"text-xs text-zinc-500/80\">{meta}</div> : null}\n                  {hasChildrenRow ? <div>{children}</div> : null}\n                </div>\n              ) : null}\n\n              {hasChips ? (\n                <div\n                  className={cn(\n                    \"flex flex-wrap items-center gap-2 shrink-0 max-w-full\",\n                    hasLeftBlock ? \"xl:justify-end\" : \"justify-end\"\n                  )}\n                >\n                  {chips.length > 0 ? chips.map((chip) => renderChip(chip)) : null}\n                  {chips.length === 0 && fallbackChip ? renderChip(fallbackChip) : null}\n                </div>\n              ) : null}\n            </div>\n          </div>\n        ) : null}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AA+BA,MAAM,iBAA2C;IAC/C,SAAS;IACT,MAAM;IACN,SAAS;IACT,QAAQ;IACR,SAAS;AACX;AAEA,SAAS,WAAW,IAA6B;IAC/C,MAAM,gBAAgB,QAAQ,KAAK,IAAI,IAAI,KAAK,OAAO;IACvD,MAAM,UAAU,IAAA,sHAAE,EAChB,kKACA,gBACI,4IACA,yCACJ,cAAc,CAAC,KAAK,IAAI,IAAI,UAAU;IAGxC,MAAM,wBACJ;;YACG,KAAK,IAAI,iBAAG,8OAAC;gBAAK,WAAU;0BAAY,KAAK,IAAI;;;;;uBAAW;0BAC7D,8OAAC;0BAAM,KAAK,KAAK;;;;;;;;IAIrB,IAAI,KAAK,IAAI,EAAE;QACb,qBACE,8OAAC,uKAAI;YAAe,MAAM,KAAK,IAAI;YAAE,WAAW;sBAC7C;WADQ,KAAK,EAAE;;;;;IAItB;IAEA,IAAI,KAAK,OAAO,EAAE;QAChB,qBACE,8OAAC;YAAqB,MAAK;YAAS,SAAS,KAAK,OAAO;YAAE,WAAW;sBACnE;WADU,KAAK,EAAE;;;;;IAIxB;IAEA,qBACE,8OAAC;QAAmB,WAAW;kBAC5B;OADQ,KAAK,EAAE;;;;;AAItB;AAEO,SAAS,oBAAoB,EAClC,KAAK,EACL,cAAc,EACd,WAAW,EACX,OAAO,EACP,gBAAgB,EAChB,IAAI,EACJ,QAAQ,EAAE,EACV,YAAY,EACZ,QAAQ,EACR,SAAS,EACT,SAAS,KAAK,EACW;IACzB,MAAM,iBAAiB,QAAQ;IAC/B,MAAM,UAAU,QAAQ;IACxB,MAAM,WAAW,QAAQ,MAAM,MAAM,GAAG,KAAK;IAC7C,MAAM,kBAAkB,kBAAkB,WAAW;IACrD,MAAM,eAAe,kBAAkB;IAEvC,qBACE,8OAAC;QACC,WAAW,IAAA,sHAAE,EACX,kGACA,mEACA,UAAU,qBACV;;0BAGF,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;;;;;;;;;;0BAGjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAG,WAAU;0DACX;;;;;;4CAEF,+BAAiB,8OAAC;gDAAI,WAAU;0DAAY;;;;;uDAAwB;;;;;;;oCAEtE,4BACC,8OAAC;wCAAE,WAAU;kDAAiE;;;;;+CAC5E;;;;;;;4BAEL,wBACC,8OAAC;gCACC,WAAW,IAAA,sHAAE,EACX,4KACA,0CACA;0CAGD;;;;;uCAED;;;;;;;oBAGL,gCACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;gCACZ,6BACC,8OAAC;oCAAI,WAAU;;wCACZ,qBAAO,8OAAC;4CAAI,WAAU;sDAA4B;;;;;mDAAc;wCAChE,+BAAiB,8OAAC;sDAAK;;;;;mDAAkB;;;;;;2CAE1C;gCAEH,yBACC,8OAAC;oCACC,WAAW,IAAA,sHAAE,EACX,yDACA,eAAe,mBAAmB;;wCAGnC,MAAM,MAAM,GAAG,IAAI,MAAM,GAAG,CAAC,CAAC,OAAS,WAAW,SAAS;wCAC3D,MAAM,MAAM,KAAK,KAAK,eAAe,WAAW,gBAAgB;;;;;;2CAEjE;;;;;;;;;;;+BAGN;;;;;;;;;;;;;AAIZ"}},
    {"offset": {"line": 925, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/activities/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { memo, Suspense, useCallback, useDeferredValue, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNow } from \"@/hooks/use-now\";\nimport {\n  AlertTriangle,\n  ArrowRight,\n  Bot,\n  CalendarClock,\n  CalendarDays,\n  Check,\n  CheckCircle2,\n  ChevronLeft,\n  ChevronRight,\n  ChevronDown,\n  ChevronUp,\n  CircleAlert,\n  CircleDashed,\n  Copy,\n  Filter,\n  List,\n  Loader2,\n  Plus,\n  Search,\n  Sparkles,\n  WandSparkles,\n  XCircle,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { usePathname, useRouter, useSearchParams } from \"next/navigation\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { useVirtualizer } from \"@tanstack/react-virtual\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { useActivityStore } from \"@/stores/activity-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport type { Activity, ActivityStatus, ActivityType } from \"@/types\";\nimport { allActivityTypes, typeColors, typeIconComponents, typeLabels } from \"./components/config\";\nimport { GeneratedContentModal } from \"./components/generated-content-modal\";\nimport {\n  DAY_MS,\n  startOfDay,\n  parseDateISO,\n  toISODate,\n  addDays,\n  startOfMonth,\n  endOfMonth,\n  startOfWeek,\n  endOfWeek,\n  formatMonthTitle,\n  formatDateBR,\n  formatDateFull,\n  formatCompactDateLabel,\n  initials,\n  isActivityOverdue,\n  isSlaRisk,\n  getRelativeTimeLabel,\n  getStatusChip,\n  getActivityChecklist,\n  getActivityInsight,\n} from \"./components/helpers\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { ModuleCommandHeader } from \"@/components/shared/module-command-header\";\nimport { cn } from \"@/lib/utils\";\n\ntype ViewMode = \"list\" | \"agenda\";\ntype SlaFilter = \"all\" | \"breached\" | \"risk\";\ntype SectionKey = \"intelligence\" | \"overdue\" | \"today\" | \"next7\" | \"future\";\n\ntype RecommendationActionState = \"idle\" | \"loading\" | \"success\" | \"error\";\ntype ActivityFeedbackState =\n  | \"idle\"\n  | \"loading-complete\"\n  | \"loading-cancel\"\n  | \"complete-success\"\n  | \"loading-postpone\"\n  | \"postpone-success\"\n  | \"info\"\n  | \"error\";\n\ninterface MenuxIntelligenceRecommendation {\n  id: string;\n  activityId: string;\n  title: string;\n  context: string;\n  why: string;\n  primaryActionLabel: string;\n  actionKind: \"message\" | \"call\" | \"prepare\";\n}\n\ninterface ActivityFeedback {\n  state: ActivityFeedbackState;\n  message?: string;\n}\n\ninterface CommandResult {\n  status: \"success\" | \"error\";\n  text: string;\n}\n\ninterface InlineFeedback {\n  tone: \"success\" | \"error\" | \"info\";\n  message: string;\n}\n\nconst STATUS_OPTIONS: { value: ActivityStatus; label: string }[] = [\n  { value: \"pending\", label: \"Pendente\" },\n  { value: \"overdue\", label: \"Atrasada\" },\n  { value: \"completed\", label: \"Concluída\" },\n  { value: \"cancelled\", label: \"Cancelada\" },\n];\n\nconst DEFAULT_STATUS_FILTER = new Set<ActivityStatus>([\n  \"pending\",\n  \"overdue\",\n]);\n\nconst SLA_OPTIONS: { value: SlaFilter; label: string }[] = [\n  { value: \"all\", label: \"Todos\" },\n  { value: \"breached\", label: \"Estourado\" },\n  { value: \"risk\", label: \"Em risco\" },\n];\n\nconst STATUS_VALUES = STATUS_OPTIONS.map((status) => status.value);\nconst ALL_ACTIVITY_TYPE_SET = new Set<ActivityType>(allActivityTypes);\nconst DATE_PARAM_REGEX = /^\\d{4}-\\d{2}-\\d{2}$/;\n\nfunction isSameSet<T>(left: Set<T>, right: Set<T>): boolean {\n  if (left.size !== right.size) return false;\n  for (const value of left) {\n    if (!right.has(value)) return false;\n  }\n  return true;\n}\n\nfunction getEffectiveStatus(activity: Activity, now: Date): ActivityStatus {\n  if (activity.status === \"completed\" || activity.status === \"cancelled\") {\n    return activity.status;\n  }\n  return isActivityOverdue(activity, now) ? \"overdue\" : \"pending\";\n}\n\nfunction getExecuteChannelLabel(value: string | null): string {\n  if (!value) return \"atividade\";\n  if (value === \"call\") return \"ligação\";\n  if (value === \"email\") return \"e-mail\";\n  if (value === \"meeting\") return \"reunião\";\n  if (value === \"whatsapp\") return \"WhatsApp\";\n  return \"atividade\";\n}\n\nfunction parseSetParam<T extends string>(\n  rawParam: string | null,\n  allowedValues: readonly T[],\n  fallbackValues: Set<T>\n): Set<T> {\n  if (!rawParam) return new Set(fallbackValues);\n\n  const allowed = new Set(allowedValues);\n  const parsed = rawParam\n    .split(\",\")\n    .map((value) => value.trim())\n    .filter((value): value is T => allowed.has(value as T));\n\n  if (parsed.length === 0) {\n    return new Set(fallbackValues);\n  }\n\n  return new Set(parsed);\n}\n\n// Utility functions are imported from ./components/helpers\n\nfunction buildRecommendations(\n  activities: Activity[],\n  now: Date,\n  seed: number\n): MenuxIntelligenceRecommendation[] {\n  const sorted = [...activities].sort((a, b) => {\n    const aDue = parseDateISO(a.dueDate).getTime();\n    const bDue = parseDateISO(b.dueDate).getTime();\n\n    const aScore =\n      (isActivityOverdue(a, now) ? 1000 : 0) +\n      (a.type === \"follow-up\" ? 120 : 0) +\n      (a.type === \"call\" ? 90 : 0) +\n      (a.status === \"pending\" ? 40 : 0);\n    const bScore =\n      (isActivityOverdue(b, now) ? 1000 : 0) +\n      (b.type === \"follow-up\" ? 120 : 0) +\n      (b.type === \"call\" ? 90 : 0) +\n      (b.status === \"pending\" ? 40 : 0);\n\n    if (aScore !== bScore) return bScore - aScore;\n    if (aDue !== bDue) return aDue - bDue;\n    return a.title.localeCompare(b.title);\n  });\n\n  const offset = seed % 2;\n  return sorted.slice(offset, offset + 3).map((activity, index) => {\n    const context = `${activity.clientName || activity.opportunityTitle || \"Sem contexto\"} · ${typeLabels[activity.type]}`;\n    const overdue = isActivityOverdue(activity, now);\n\n    return {\n      id: `intelligence-rec-${activity.id}`,\n      activityId: activity.id,\n      title: index === 0 ? \"Faça isso agora\" : \"Ação recomendada\",\n      context,\n      why: overdue\n        ? \"Prazo estourado com alto impacto no ritmo do pipeline.\"\n        : \"Atividade com potencial de destravar avanço ainda hoje.\",\n      primaryActionLabel: \"Ir para atividade\",\n      actionKind:\n        activity.type === \"call\" || activity.type === \"whatsapp\"\n          ? \"call\"\n          : activity.type === \"meeting\"\n            ? \"prepare\"\n            : \"message\",\n    };\n  });\n}\n\nfunction buildCommandResult(\n  commandId: string,\n  data: {\n    overdueCount: number;\n    riskCount: number;\n    totalActive: number;\n    selectedActivity?: Activity;\n  }\n): CommandResult {\n  switch (commandId) {\n    case \"bulk-messages\":\n      if (data.overdueCount === 0) {\n        return {\n          status: \"error\",\n          text: \"Sem atividades atrasadas para gerar mensagens no momento.\",\n        };\n      }\n      return {\n        status: \"success\",\n        text: `Geradas sugestões para ${data.overdueCount} atividades atrasadas.`,\n      };\n    case \"sla-priority\":\n      if (data.overdueCount === 0) {\n        return {\n          status: \"error\",\n          text: \"Não há SLAs estourados agora. Tudo sob controle.\",\n        };\n      }\n      return {\n        status: \"success\",\n        text: `${data.overdueCount} SLAs críticos priorizados para execução imediata.`,\n      };\n    case \"week-summary\":\n      return {\n        status: \"success\",\n        text: `Resumo gerado com base em ${data.totalActive} atividades ativas da semana.`,\n      };\n    case \"risk-client\":\n      if (data.overdueCount === 0 && data.riskCount === 0) {\n        return {\n          status: \"error\",\n          text: \"Nenhum cliente em risco crítico detectado neste momento.\",\n        };\n      }\n      return {\n        status: \"success\",\n        text: \"Cliente com maior risco identificado e destacado para ação imediata.\",\n      };\n    case \"call-script\":\n      return {\n        status: \"success\",\n        text: data.selectedActivity\n          ? `Script de ligação gerado para ${data.selectedActivity.clientName || data.selectedActivity.opportunityTitle || \"atividade selecionada\"}.`\n          : \"Script de ligação gerado para o bloco de maior urgência.\",\n      };\n    default:\n      return {\n        status: \"error\",\n        text: \"Não foi possível executar este comando agora.\",\n      };\n  }\n}\n\nconst RAIL_COMMANDS = [\n  { id: \"bulk-messages\", label: \"Gerar mensagens para atrasadas\" },\n  { id: \"sla-priority\", label: \"Priorizar SLAs estourados\" },\n  { id: \"week-summary\", label: \"Resumir a semana\" },\n  { id: \"risk-client\", label: \"Identificar cliente em risco\" },\n  { id: \"call-script\", label: \"Gerar scripts de ligação\" },\n] as const;\n\nexport default function ActivitiesPage() {\n  return (\n    <Suspense\n      fallback={\n        <div className=\"flex h-[calc(100dvh-2rem)] w-full flex-col gap-4\">\n          <div className=\"shrink-0 rounded-[20px] border border-zinc-200/80 bg-zinc-50/85 px-5 py-4\">\n            <Skeleton className=\"h-8 w-40\" />\n            <Skeleton className=\"mt-2 h-4 w-56\" />\n          </div>\n          <div className=\"flex-1 space-y-4\">\n            <Skeleton className=\"h-[200px] rounded-[18px]\" />\n            <Skeleton className=\"h-[400px] rounded-[18px]\" />\n          </div>\n        </div>\n      }\n    >\n      <ActivitiesPageContent />\n    </Suspense>\n  );\n}\n\nfunction ActivitiesPageContent() {\n  const { openDrawer } = useUIStore();\n  const { user, permissions } = useAuthStore();\n  const router = useRouter();\n  const pathname = usePathname();\n  const searchParams = useSearchParams();\n  const {\n    activities: storeActivities,\n    completeActivity,\n    cancelActivity,\n    postponeActivity,\n  } = useActivityStore();\n\n  const isLoading = false;\n  const [viewMode, setViewMode] = useState<ViewMode>(\"list\");\n  const [isFilterOpen, setIsFilterOpen] = useState(false);\n  const [ownerOverrideId, setOwnerOverrideId] = useState<string | null>(null);\n\n  const [filterTypes, setFilterTypes] = useState<Set<ActivityType>>(\n    () => new Set(allActivityTypes)\n  );\n  const [filterStatuses, setFilterStatuses] = useState<Set<ActivityStatus>>(\n    () => new Set(DEFAULT_STATUS_FILTER)\n  );\n  const [filterDateStart, setFilterDateStart] = useState(\"\");\n  const [filterDateEnd, setFilterDateEnd] = useState(\"\");\n  const [filterSla, setFilterSla] = useState<SlaFilter>(\"all\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const [collapsedSections, setCollapsedSections] = useState<Record<SectionKey, boolean>>({\n    intelligence: false,\n    overdue: false,\n    today: false,\n    next7: false,\n    future: true,\n  });\n\n  const [sectionErrors, setSectionErrors] = useState<Record<SectionKey, string | null>>({\n    intelligence: null,\n    overdue: null,\n    today: null,\n    next7: null,\n    future: null,\n  });\n\n  const [planSeed, setPlanSeed] = useState(0);\n  const [isPlanning, setIsPlanning] = useState(false);\n  const [recommendationStates, setRecommendationStates] = useState<\n    Record<string, RecommendationActionState>\n  >({});\n\n  const [selectedActivityId, setSelectedActivityId] = useState<string | null>(null);\n  const [expandedActivityId, setExpandedActivityId] = useState<string | null>(null);\n  const [selectedActivityIds, setSelectedActivityIds] = useState<Set<string>>(\n    () => new Set()\n  );\n  const [confirmBulkCancelOpen, setConfirmBulkCancelOpen] = useState(false);\n  const [confirmBulkCompleteOpen, setConfirmBulkCompleteOpen] = useState(false);\n  const [bulkPostponeOpen, setBulkPostponeOpen] = useState(false);\n  const [bulkPostponeCustomDate, setBulkPostponeCustomDate] = useState(\"\");\n  const [activityFeedback, setActivityFeedback] = useState<Record<string, ActivityFeedback>>(\n    {}\n  );\n  const [headerInlineFeedback, setHeaderInlineFeedback] = useState<InlineFeedback | null>(null);\n  const [bulkInlineFeedback, setBulkInlineFeedback] = useState<InlineFeedback | null>(null);\n  const [summaryInlineFeedback, setSummaryInlineFeedback] = useState<InlineFeedback | null>(null);\n  const [highlightedPostponedId, setHighlightedPostponedId] = useState<string | null>(null);\n\n  const [commandLoadingId, setCommandLoadingId] = useState<string | null>(null);\n  const [commandResult, setCommandResult] = useState<CommandResult | null>(null);\n  const [isExporting, setIsExporting] = useState(false);\n  const [isPageScrolled, setIsPageScrolled] = useState(false);\n\n  // Modal State\n  const [generatedModalOpen, setGeneratedModalOpen] = useState(false);\n  const [generatedContent, setGeneratedContent] = useState({ title: \"\", content: \"\" });\n  const [detailsModalActivityId, setDetailsModalActivityId] = useState<string | null>(null);\n\n  const timeoutRef = useRef<number[]>([]);\n  const appliedQueryRef = useRef<string | null>(null);\n  const intelligenceRailRef = useRef<HTMLDivElement | null>(null);\n  const now = useNow(60_000);\n  const deferredSearchQuery = useDeferredValue(searchQuery);\n  const [calendarMonth, setCalendarMonth] = useState<Date>(() => startOfMonth(now));\n  const [selectedCalendarDate, setSelectedCalendarDate] = useState<string>(\n    () => toISODate(startOfDay(now))\n  );\n\n  const canViewTeamScope = Boolean(permissions?.canViewAllUnits || user?.role === \"master\");\n  const canCreateActivity = Boolean(permissions?.canCreateActivity);\n  const canExecuteActivityActions = Boolean(permissions?.canEditActivity);\n  const canCancelActivity = Boolean(permissions?.canCancelActivity);\n  const canExportActivities = Boolean(permissions?.canExportData);\n\n  const { scopedOwnerId, scopeMode } = useMemo(() => {\n    const preferredOwnerId = user?.id ?? null;\n\n    if (canViewTeamScope) {\n      if (\n        ownerOverrideId &&\n        storeActivities.some((activity) => activity.responsibleId === ownerOverrideId)\n      ) {\n        return {\n          scopedOwnerId: ownerOverrideId,\n          scopeMode: \"override\" as const,\n        };\n      }\n\n      if (preferredOwnerId) {\n        return { scopedOwnerId: preferredOwnerId, scopeMode: \"self\" as const };\n      }\n\n      return { scopedOwnerId: null, scopeMode: \"team\" as const };\n    }\n\n    return { scopedOwnerId: preferredOwnerId, scopeMode: \"self\" as const };\n  }, [canViewTeamScope, ownerOverrideId, storeActivities, user?.id]);\n\n  const isTeamScope = canViewTeamScope && scopeMode === \"team\";\n\n  const activities = useMemo(\n    () => {\n      if (canViewTeamScope && scopedOwnerId === null) {\n        return storeActivities;\n      }\n\n      if (!scopedOwnerId) {\n        return [];\n      }\n\n      return storeActivities.filter((activity) => activity.responsibleId === scopedOwnerId);\n    },\n    [canViewTeamScope, scopedOwnerId, storeActivities]\n  );\n\n  const hasNoScopedActivities = activities.length === 0;\n\n  const schedule = useCallback((fn: () => void, ms: number) => {\n    const id = window.setTimeout(() => {\n      fn();\n      timeoutRef.current = timeoutRef.current.filter((item) => item !== id);\n    }, ms);\n    timeoutRef.current.push(id);\n  }, []);\n\n  const pushHeaderInlineFeedback = useCallback(\n    (feedback: InlineFeedback) => {\n      setHeaderInlineFeedback(feedback);\n      schedule(() => setHeaderInlineFeedback(null), 2600);\n    },\n    [schedule]\n  );\n\n  const pushBulkInlineFeedback = useCallback(\n    (feedback: InlineFeedback) => {\n      setBulkInlineFeedback(feedback);\n      schedule(() => setBulkInlineFeedback(null), 2600);\n    },\n    [schedule]\n  );\n\n  const pushSummaryInlineFeedback = useCallback(\n    (feedback: InlineFeedback) => {\n      setSummaryInlineFeedback(feedback);\n      schedule(() => setSummaryInlineFeedback(null), 2600);\n    },\n    [schedule]\n  );\n\n  // Loading is instant since data comes from the local store (no API).\n\n  // Auto-dismiss commandResult after 6 seconds\n  useEffect(() => {\n    if (!commandResult) return;\n    const timer = window.setTimeout(() => setCommandResult(null), 6000);\n    return () => window.clearTimeout(timer);\n  }, [commandResult]);\n\n  useEffect(() => {\n    return () => {\n      timeoutRef.current.forEach((id) => window.clearTimeout(id));\n    };\n  }, []);\n\n  useEffect(() => {\n    const onScroll = () => setIsPageScrolled(window.scrollY > 8);\n    onScroll();\n    window.addEventListener(\"scroll\", onScroll, { passive: true });\n    return () => window.removeEventListener(\"scroll\", onScroll);\n  }, []);\n\n  const applyStatusFromParam = useCallback((statusParam: string) => {\n    const normalized = statusParam.trim().toLowerCase();\n\n    setViewMode(\"list\");\n    setFilterTypes(new Set(allActivityTypes));\n    setFilterDateStart(\"\");\n    setFilterDateEnd(\"\");\n\n    if (normalized === \"overdue\") {\n      setFilterStatuses(new Set<ActivityStatus>([\"pending\", \"overdue\"]));\n      setFilterSla(\"breached\");\n      return;\n    }\n\n    if (normalized === \"risk\") {\n      setFilterStatuses(new Set<ActivityStatus>([\"pending\"]));\n      setFilterSla(\"risk\");\n      return;\n    }\n\n    if (normalized === \"pace\") {\n      setFilterStatuses(new Set<ActivityStatus>([\"pending\", \"overdue\"]));\n      setFilterSla(\"all\");\n      return;\n    }\n\n    if (normalized === \"achieved\") {\n      setFilterStatuses(new Set<ActivityStatus>([\"completed\"]));\n      setFilterSla(\"all\");\n      return;\n    }\n\n    if (\n      normalized === \"pending\" ||\n      normalized === \"completed\" ||\n      normalized === \"cancelled\"\n    ) {\n      setFilterStatuses(new Set<ActivityStatus>([normalized]));\n      setFilterSla(\"all\");\n      return;\n    }\n\n    setFilterStatuses(new Set(DEFAULT_STATUS_FILTER));\n    setFilterSla(\"all\");\n  }, []);\n\n  const applyExplicitUrlFilters = useCallback(\n    (data: {\n      viewMode: ViewMode;\n      query: string;\n      types: Set<ActivityType>;\n      statuses: Set<ActivityStatus>;\n      sla: SlaFilter;\n      start: string;\n      end: string;\n    }) => {\n      setViewMode(data.viewMode);\n      setSearchQuery(data.query);\n      setFilterTypes(data.types);\n      setFilterStatuses(data.statuses);\n      setFilterSla(data.sla);\n      setFilterDateStart(data.start);\n      setFilterDateEnd(data.end);\n    },\n    []\n  );\n\n  const resetFiltersToDefault = useCallback(() => {\n    setViewMode(\"list\");\n    setSearchQuery(\"\");\n    setFilterTypes(new Set(allActivityTypes));\n    setFilterStatuses(new Set(DEFAULT_STATUS_FILTER));\n    setFilterDateStart(\"\");\n    setFilterDateEnd(\"\");\n    setFilterSla(\"all\");\n  }, []);\n\n  useEffect(() => {\n    const queryString = searchParams.toString();\n    if (appliedQueryRef.current === queryString) return;\n    appliedQueryRef.current = queryString;\n\n    const sourceParam = searchParams.get(\"source\");\n    const statusParam = searchParams.get(\"status\");\n    const focusParam = searchParams.get(\"focus\");\n    const goalParam = searchParams.get(\"goal\");\n    const activityIdParam = searchParams.get(\"activityId\") ?? searchParams.get(\"id\");\n    const executeParam = searchParams.get(\"execute\");\n    const viewParam = searchParams.get(\"view\");\n    const queryParam = searchParams.get(\"q\");\n    const typesParam = searchParams.get(\"types\");\n    const statusesParam = searchParams.get(\"statuses\");\n    const slaParam = searchParams.get(\"sla\");\n    const startParam = searchParams.get(\"start\");\n    const endParam = searchParams.get(\"end\");\n    const hasExplicitUrlFilters =\n      viewParam !== null ||\n      queryParam !== null ||\n      typesParam !== null ||\n      statusesParam !== null ||\n      slaParam !== null ||\n      startParam !== null ||\n      endParam !== null;\n\n    if (hasExplicitUrlFilters) {\n      applyExplicitUrlFilters({\n        viewMode: viewParam === \"agenda\" ? \"agenda\" : \"list\",\n        query: queryParam ?? \"\",\n        types: parseSetParam(typesParam, allActivityTypes, new Set(allActivityTypes)),\n        statuses: parseSetParam(\n          statusesParam,\n          STATUS_VALUES,\n          new Set(DEFAULT_STATUS_FILTER)\n        ),\n        sla: slaParam === \"breached\" || slaParam === \"risk\" ? slaParam : \"all\",\n        start: startParam && DATE_PARAM_REGEX.test(startParam) ? startParam : \"\",\n        end: endParam && DATE_PARAM_REGEX.test(endParam) ? endParam : \"\",\n      });\n    } else if (statusParam) {\n      applyStatusFromParam(statusParam);\n      setSearchQuery(\"\");\n    } else {\n      resetFiltersToDefault();\n    }\n\n    if (sourceParam === \"goals\" && goalParam) {\n      setCommandResult({\n        status: \"success\",\n        text: `Filtro aplicado para acompanhar a meta \"${goalParam}\".`,\n      });\n    } else if (sourceParam === \"goals\" && focusParam === \"metas\") {\n      setCommandResult({\n        status: \"success\",\n        text: \"Painel ajustado para apoiar execução de metas.\",\n      });\n    }\n\n    if (activityIdParam) {\n      const linkedActivity = storeActivities.find(\n        (activity) => activity.id === activityIdParam\n      );\n\n      if (!linkedActivity) {\n        setOwnerOverrideId(null);\n        setCommandResult({\n          status: \"error\",\n          text: \"Atividade do link não encontrada na sua carteira atual.\",\n        });\n        return;\n      }\n\n      const canAccessLinkedActivity =\n        canViewTeamScope || linkedActivity.responsibleId === user?.id;\n\n      if (!canAccessLinkedActivity) {\n        setOwnerOverrideId(null);\n        setCommandResult({\n          status: \"error\",\n          text: \"Essa atividade não pertence à sua carteira.\",\n        });\n        return;\n      }\n\n      setOwnerOverrideId(canViewTeamScope ? linkedActivity.responsibleId : null);\n      setSelectedActivityId(linkedActivity.id);\n      setExpandedActivityId(linkedActivity.id);\n\n      schedule(() => {\n        const target = document.getElementById(\n          `activity-card-${linkedActivity.id}`\n        );\n        if (target) {\n          target.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n        }\n      }, 80);\n\n      if (executeParam) {\n        pushHeaderInlineFeedback({\n          tone: \"info\",\n          message: `Canal de ${getExecuteChannelLabel(executeParam)} pronto para execução desta atividade.`,\n        });\n      }\n    } else {\n      setOwnerOverrideId(null);\n    }\n  }, [\n    applyExplicitUrlFilters,\n    canViewTeamScope,\n    applyStatusFromParam,\n    pushHeaderInlineFeedback,\n    resetFiltersToDefault,\n    schedule,\n    searchParams,\n    storeActivities,\n    user?.id,\n  ]);\n\n  useEffect(() => {\n    if (appliedQueryRef.current === null) return;\n\n    const params = new URLSearchParams(searchParams.toString());\n    const normalizedQuery = searchQuery.trim();\n    const selectedTypes = allActivityTypes.filter((type) => filterTypes.has(type));\n    const selectedStatuses = STATUS_VALUES.filter((status) =>\n      filterStatuses.has(status)\n    );\n\n    if (viewMode !== \"list\") params.set(\"view\", viewMode);\n    else params.delete(\"view\");\n\n    if (normalizedQuery) params.set(\"q\", normalizedQuery);\n    else params.delete(\"q\");\n\n    if (selectedTypes.length === allActivityTypes.length) params.delete(\"types\");\n    else params.set(\"types\", selectedTypes.join(\",\"));\n\n    if (selectedStatuses.length === STATUS_VALUES.length) params.delete(\"statuses\");\n    else params.set(\"statuses\", selectedStatuses.join(\",\"));\n\n    if (filterSla === \"all\") params.delete(\"sla\");\n    else params.set(\"sla\", filterSla);\n\n    if (filterDateStart) params.set(\"start\", filterDateStart);\n    else params.delete(\"start\");\n\n    if (filterDateEnd) params.set(\"end\", filterDateEnd);\n    else params.delete(\"end\");\n\n    // Legacy status param can diverge from explicit filters.\n    params.delete(\"status\");\n    params.delete(\"id\");\n    params.delete(\"activityId\");\n    params.delete(\"execute\");\n    params.delete(\"source\");\n    params.delete(\"focus\");\n    params.delete(\"goal\");\n\n    const nextQuery = params.toString();\n    const currentQuery = searchParams.toString();\n    if (nextQuery === currentQuery) return;\n\n    appliedQueryRef.current = nextQuery;\n    router.replace(nextQuery ? `${pathname}?${nextQuery}` : pathname, {\n      scroll: false,\n    });\n  }, [\n    filterDateEnd,\n    filterDateStart,\n    filterSla,\n    filterStatuses,\n    filterTypes,\n    pathname,\n    router,\n    searchParams,\n    searchQuery,\n    viewMode,\n  ]);\n\n  const filteredActivities = useMemo(() => {\n    const normalizedQuery = deferredSearchQuery.trim().toLowerCase();\n\n    return activities.filter((activity) => {\n      const effectiveStatus = getEffectiveStatus(activity, now);\n      if (!filterTypes.has(activity.type)) return false;\n      if (!filterStatuses.has(effectiveStatus)) return false;\n      if (filterDateStart && activity.dueDate < filterDateStart) return false;\n      if (filterDateEnd && activity.dueDate > filterDateEnd) return false;\n      if (normalizedQuery) {\n        const searchableContent = [\n          activity.title,\n          activity.description || \"\",\n          activity.clientName || \"\",\n          activity.opportunityTitle || \"\",\n          activity.responsibleName,\n          typeLabels[activity.type],\n        ]\n          .join(\" \")\n          .toLowerCase();\n\n        if (!searchableContent.includes(normalizedQuery)) return false;\n      }\n\n      if (filterSla === \"breached\" && !isActivityOverdue(activity, now)) return false;\n      if (filterSla === \"risk\" && !isSlaRisk(activity, now)) return false;\n\n      return true;\n    });\n  }, [\n    activities,\n    filterTypes,\n    filterStatuses,\n    filterDateStart,\n    filterDateEnd,\n    filterSla,\n    deferredSearchQuery,\n    now,\n  ]);\n\n  const executionActivities = useMemo(\n    () =>\n      filteredActivities.filter(\n        (activity) => activity.status !== \"completed\" && activity.status !== \"cancelled\"\n      ),\n    [filteredActivities]\n  );\n\n  const executionActivityIdSet = useMemo(\n    () => new Set(executionActivities.map((activity) => activity.id)),\n    [executionActivities]\n  );\n\n  const selectedExecutionIds = useMemo(\n    () =>\n      Array.from(selectedActivityIds).filter((activityId) =>\n        executionActivityIdSet.has(activityId)\n      ),\n    [selectedActivityIds, executionActivityIdSet]\n  );\n\n  const allVisibleExecutionSelected =\n    executionActivities.length > 0 &&\n    selectedExecutionIds.length === executionActivities.length;\n\n  const toggleActivitySelection = useCallback((activityId: string) => {\n    setSelectedActivityIds((prev) => {\n      const next = new Set(prev);\n      if (next.has(activityId)) next.delete(activityId);\n      else next.add(activityId);\n      return next;\n    });\n  }, []);\n\n  const handleSelectAllVisibleActivities = useCallback((checked: boolean) => {\n    if (!checked) {\n      setSelectedActivityIds(new Set());\n      return;\n    }\n\n    setSelectedActivityIds(new Set(executionActivities.map((activity) => activity.id)));\n  }, [executionActivities]);\n\n  const clearSelectedActivities = useCallback(() => {\n    setSelectedActivityIds(new Set());\n  }, []);\n\n  const calendarActivitiesByDate = useMemo(() => {\n    const byDate = new Map<string, Activity[]>();\n\n    for (const activity of executionActivities) {\n      const key = activity.dueDate;\n      const list = byDate.get(key) || [];\n      list.push(activity);\n      byDate.set(key, list);\n    }\n\n    for (const [key, list] of byDate.entries()) {\n      list.sort((a, b) => (a.dueTime || \"99:99\").localeCompare(b.dueTime || \"99:99\"));\n      byDate.set(key, list);\n    }\n\n    return byDate;\n  }, [executionActivities]);\n\n  const calendarDays = useMemo(() => {\n    const monthStart = startOfMonth(calendarMonth);\n    const monthEnd = endOfMonth(calendarMonth);\n    const gridStart = startOfWeek(monthStart);\n    const gridEnd = endOfWeek(monthEnd);\n\n    const days: Date[] = [];\n    let cursor = gridStart;\n\n    while (cursor.getTime() <= gridEnd.getTime()) {\n      days.push(cursor);\n      cursor = addDays(cursor, 1);\n    }\n\n    return days;\n  }, [calendarMonth]);\n\n  const selectedCalendarDayActivities = useMemo(() => {\n    return calendarActivitiesByDate.get(selectedCalendarDate) || [];\n  }, [calendarActivitiesByDate, selectedCalendarDate]);\n\n  const overdueActivities = useMemo(\n    () =>\n      executionActivities\n        .filter((activity) => isActivityOverdue(activity, now))\n        .sort((a, b) => parseDateISO(a.dueDate).getTime() - parseDateISO(b.dueDate).getTime()),\n    [executionActivities, now]\n  );\n\n  const todayActivities = useMemo(() => {\n    const todayDate = startOfDay(now).getTime();\n    return executionActivities\n      .filter((activity) => {\n        if (isActivityOverdue(activity, now)) return false;\n        return startOfDay(parseDateISO(activity.dueDate)).getTime() === todayDate;\n      })\n      .sort((a, b) => (a.dueTime || \"99:99\").localeCompare(b.dueTime || \"99:99\"));\n  }, [executionActivities, now]);\n\n  const next7Activities = useMemo(() => {\n    const todayDate = startOfDay(now);\n    const next7Date = addDays(todayDate, 7);\n\n    return executionActivities\n      .filter((activity) => {\n        if (isActivityOverdue(activity, now)) return false;\n        const due = startOfDay(parseDateISO(activity.dueDate));\n        return due > todayDate && due <= next7Date;\n      })\n      .sort((a, b) => {\n        const diff = parseDateISO(a.dueDate).getTime() - parseDateISO(b.dueDate).getTime();\n        if (diff !== 0) return diff;\n        return (a.dueTime || \"99:99\").localeCompare(b.dueTime || \"99:99\");\n      });\n  }, [executionActivities, now]);\n\n  const futureActivities = useMemo(() => {\n    const next7Date = addDays(startOfDay(now), 7);\n\n    return executionActivities\n      .filter((activity) => {\n        if (isActivityOverdue(activity, now)) return false;\n        const due = startOfDay(parseDateISO(activity.dueDate));\n        return due > next7Date;\n      })\n      .sort((a, b) => {\n        const diff = parseDateISO(a.dueDate).getTime() - parseDateISO(b.dueDate).getTime();\n        if (diff !== 0) return diff;\n        return (a.dueTime || \"99:99\").localeCompare(b.dueTime || \"99:99\");\n      });\n  }, [executionActivities, now]);\n\n  const completedActivities = useMemo(\n    () =>\n      filteredActivities\n        .filter((activity) => activity.status === \"completed\")\n        .sort((a, b) => {\n          const aDate = a.completedAt || a.dueDate;\n          const bDate = b.completedAt || b.dueDate;\n          return bDate.localeCompare(aDate);\n        }),\n    [filteredActivities]\n  );\n\n  const overdueCount = overdueActivities.length;\n  const riskCount = executionActivities.filter((activity) => isSlaRisk(activity, now)).length;\n  const headerMetaText = useMemo(\n    () =>\n      `${formatCompactDateLabel(now)} · Olá, ${user?.name?.trim().split(\" \")[0] ?? \"Vendedor\"\n      }`,\n    [now, user?.name]\n  );\n\n  const typeCounts = useMemo(() => {\n    const counts: Record<ActivityType, number> = {\n      call: 0,\n      email: 0,\n      meeting: 0,\n      visit: 0,\n      task: 0,\n      \"follow-up\": 0,\n      whatsapp: 0,\n    };\n\n    for (const activity of filteredActivities) {\n      counts[activity.type] += 1;\n    }\n\n    return counts;\n  }, [filteredActivities]);\n\n  const hotspotType = useMemo(() => {\n    return Object.entries(typeCounts).sort((a, b) => b[1] - a[1])[0] as\n      | [ActivityType, number]\n      | undefined;\n  }, [typeCounts]);\n\n  const weeklyCompletionRate = useMemo(() => {\n    const todayDate = startOfDay(now);\n    const weekStart = addDays(todayDate, -7);\n\n    const weekSlice = filteredActivities.filter((activity) => {\n      const due = startOfDay(parseDateISO(activity.dueDate));\n      return due >= weekStart && due <= todayDate;\n    });\n\n    if (weekSlice.length === 0) return 0;\n\n    const completedCount = weekSlice.filter((activity) => activity.status === \"completed\").length;\n    return Math.round((completedCount / weekSlice.length) * 100);\n  }, [filteredActivities, now]);\n\n  const menuxIntelligenceRecommendations = useMemo(\n    () => buildRecommendations(executionActivities, now, planSeed),\n    [executionActivities, now, planSeed]\n  );\n\n  const selectedActivity = useMemo(\n    () => activities.find((activity) => activity.id === selectedActivityId) || null,\n    [activities, selectedActivityId]\n  );\n\n  const detailsModalActivity = useMemo(\n    () => activities.find((activity) => activity.id === detailsModalActivityId) || null,\n    [activities, detailsModalActivityId]\n  );\n\n  const hasActiveFilters =\n    !isSameSet(filterTypes, ALL_ACTIVITY_TYPE_SET) ||\n    !isSameSet(filterStatuses, DEFAULT_STATUS_FILTER) ||\n    filterDateStart !== \"\" ||\n    filterDateEnd !== \"\" ||\n    filterSla !== \"all\" ||\n    searchQuery.trim() !== \"\";\n\n  const activeFilterChips = useMemo(() => {\n    const chips: Array<{ id: string; label: string; onRemove: () => void }> = [];\n\n    if (filterTypes.size < allActivityTypes.length) {\n      allActivityTypes.forEach((type) => {\n        if (!filterTypes.has(type)) return;\n        chips.push({\n          id: `type-${type}`,\n          label: `Tipo: ${typeLabels[type]}`,\n          onRemove: () => {\n            setFilterTypes((prev) => {\n              const next = new Set(prev);\n              next.delete(type);\n              if (next.size === 0) return new Set(allActivityTypes);\n              return next;\n            });\n          },\n        });\n      });\n    }\n\n    if (!isSameSet(filterStatuses, DEFAULT_STATUS_FILTER)) {\n      STATUS_OPTIONS.forEach((option) => {\n        if (!filterStatuses.has(option.value)) return;\n        chips.push({\n          id: `status-${option.value}`,\n          label: `Status: ${option.label}`,\n          onRemove: () => {\n            setFilterStatuses((prev) => {\n              const next = new Set(prev);\n              next.delete(option.value);\n              if (next.size === 0) return new Set(DEFAULT_STATUS_FILTER);\n              return next;\n            });\n          },\n        });\n      });\n    }\n\n    if (filterDateStart) {\n      chips.push({\n        id: \"date-start\",\n        label: `De: ${formatDateBR(filterDateStart)}`,\n        onRemove: () => setFilterDateStart(\"\"),\n      });\n    }\n\n    if (filterDateEnd) {\n      chips.push({\n        id: \"date-end\",\n        label: `Até: ${formatDateBR(filterDateEnd)}`,\n        onRemove: () => setFilterDateEnd(\"\"),\n      });\n    }\n\n    if (filterSla !== \"all\") {\n      chips.push({\n        id: \"sla\",\n        label: `SLA: ${filterSla === \"breached\" ? \"Estourado\" : \"Em risco\"}`,\n        onRemove: () => setFilterSla(\"all\"),\n      });\n    }\n\n    if (searchQuery.trim()) {\n      chips.push({\n        id: \"search\",\n        label: `Busca: \"${searchQuery.trim()}\"`,\n        onRemove: () => setSearchQuery(\"\"),\n      });\n    }\n\n    return chips;\n  }, [\n    filterTypes,\n    filterStatuses,\n    filterDateStart,\n    filterDateEnd,\n    filterSla,\n    searchQuery,\n  ]);\n\n  const clearFilters = useCallback(() => {\n    setFilterTypes(new Set(allActivityTypes));\n    setFilterStatuses(new Set(DEFAULT_STATUS_FILTER));\n    setFilterDateStart(\"\");\n    setFilterDateEnd(\"\");\n    setFilterSla(\"all\");\n    setSearchQuery(\"\");\n    setSelectedActivityIds(new Set());\n  }, []);\n\n  const toggleSection = useCallback((key: SectionKey) => {\n    setCollapsedSections((prev) => ({\n      ...prev,\n      [key]: !prev[key],\n    }));\n  }, []);\n\n  const handleGeneratePlan = useCallback(() => {\n    setIsPlanning(true);\n    setSectionErrors((prev) => ({ ...prev, intelligence: null }));\n\n    schedule(() => {\n      if (executionActivities.length === 0) {\n        setIsPlanning(false);\n        setSectionErrors((prev) => ({\n          ...prev,\n          intelligence: \"Não há atividades ativas para montar um plano agora.\",\n        }));\n        pushHeaderInlineFeedback({\n          tone: \"error\",\n          message: \"Não há atividades ativas para montar um plano agora.\",\n        });\n        return;\n      }\n\n      setPlanSeed((prev) => prev + 1);\n      setCommandResult({\n        status: \"success\",\n        text: \"Plano do dia gerado com foco em impacto e risco.\",\n      });\n      pushHeaderInlineFeedback({\n        tone: \"success\",\n        message: \"Plano do dia gerado com foco em impacto e risco.\",\n      });\n      setIsPlanning(false);\n    }, 260);\n  }, [executionActivities.length, pushHeaderInlineFeedback, schedule]);\n\n  const handleQuickFilterOverdue = useCallback(() => {\n    setViewMode(\"list\");\n    setFilterStatuses(new Set<ActivityStatus>([\"pending\", \"overdue\"]));\n    setFilterSla(\"breached\");\n    setFilterDateStart(\"\");\n    setFilterDateEnd(\"\");\n  }, []);\n\n  const handleQuickFilterToday = useCallback(() => {\n    const todayIso = toISODate(startOfDay(now));\n    setViewMode(\"list\");\n    setFilterStatuses(new Set<ActivityStatus>([\"pending\", \"overdue\"]));\n    setFilterDateStart(todayIso);\n    setFilterDateEnd(todayIso);\n    setFilterSla(\"all\");\n  }, [now]);\n\n  const handleQuickFilterSlaRisk = useCallback(() => {\n    setViewMode(\"list\");\n    setFilterStatuses(new Set<ActivityStatus>([\"pending\"]));\n    setFilterSla(\"risk\");\n    setFilterDateStart(\"\");\n    setFilterDateEnd(\"\");\n  }, []);\n\n  const handleExecuteRecommendation = useCallback(\n    (recommendation: MenuxIntelligenceRecommendation) => {\n      if (!canExecuteActivityActions) {\n        setCommandResult({\n          status: \"error\",\n          text: \"Você não tem permissão para executar ações nesta carteira.\",\n        });\n        return;\n      }\n\n      setRecommendationStates((prev) => ({\n        ...prev,\n        [recommendation.id]: \"loading\",\n      }));\n\n      schedule(() => {\n        const target = activities.find((item) => item.id === recommendation.activityId);\n\n        if (!target) {\n          setRecommendationStates((prev) => ({\n            ...prev,\n            [recommendation.id]: \"error\",\n          }));\n          schedule(() => {\n            setRecommendationStates((prev) => ({\n              ...prev,\n              [recommendation.id]: \"idle\",\n            }));\n          }, 1200);\n          return;\n        }\n\n        setSelectedActivityId(target.id);\n        setExpandedActivityId(target.id);\n\n        setRecommendationStates((prev) => ({\n          ...prev,\n          [recommendation.id]: \"success\",\n        }));\n\n        setCommandResult({\n          status: \"success\",\n          text:\n            recommendation.actionKind === \"message\"\n              ? `Mensagem preparada para ${target.clientName || target.opportunityTitle || \"atividade\"}.`\n              : recommendation.actionKind === \"call\"\n                ? `Roteiro de contato acionado para ${target.clientName || target.opportunityTitle || \"atividade\"}.`\n                : `Checklist de preparação gerado para ${target.clientName || target.opportunityTitle || \"atividade\"}.`,\n        });\n\n        schedule(() => {\n          setRecommendationStates((prev) => ({\n            ...prev,\n            [recommendation.id]: \"idle\",\n          }));\n        }, 1200);\n      }, 220);\n    },\n    [activities, canExecuteActivityActions, schedule]\n  );\n\n  const handleViewActivityFromRecommendation = useCallback((activityId: string) => {\n    setSelectedActivityId(activityId);\n    setExpandedActivityId(activityId);\n\n    const target = document.getElementById(`activity-card-${activityId}`);\n    if (target) {\n      target.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n    }\n  }, []);\n\n  const clearActivityFeedback = useCallback((activityId: string) => {\n    setActivityFeedback((prev) => {\n      const next = { ...prev };\n      delete next[activityId];\n      return next;\n    });\n  }, []);\n\n  const handleActionDenied = useCallback(\n    (activityId: string, message: string) => {\n      setActivityFeedback((prev) => ({\n        ...prev,\n        [activityId]: { state: \"error\", message },\n      }));\n\n      schedule(() => {\n        clearActivityFeedback(activityId);\n      }, 2200);\n    },\n    [clearActivityFeedback, schedule]\n  );\n\n  const canRunActionOnActivity = useCallback(\n    (activityId: string) => activities.some((activity) => activity.id === activityId),\n    [activities]\n  );\n\n  const handleCompleteActivity = useCallback(\n    (activityId: string, notes?: string) => {\n      if (!canExecuteActivityActions) {\n        handleActionDenied(activityId, \"Você não tem permissão para concluir atividades.\");\n        return;\n      }\n\n      if (!canRunActionOnActivity(activityId)) {\n        handleActionDenied(activityId, \"A atividade não pertence à sua carteira.\");\n        return;\n      }\n\n      setActivityFeedback((prev) => ({\n        ...prev,\n        [activityId]: { state: \"loading-complete\" },\n      }));\n\n      schedule(() => {\n        try {\n          completeActivity(activityId, notes);\n          setActivityFeedback((prev) => ({\n            ...prev,\n            [activityId]: { state: \"complete-success\", message: \"Concluída\" },\n          }));\n        } catch {\n          setActivityFeedback((prev) => ({\n            ...prev,\n            [activityId]: { state: \"error\", message: \"Falha ao concluir atividade.\" },\n          }));\n        }\n      }, 180);\n\n      schedule(() => {\n        clearActivityFeedback(activityId);\n      }, 1500);\n    },\n    [\n      canExecuteActivityActions,\n      canRunActionOnActivity,\n      clearActivityFeedback,\n      completeActivity,\n      handleActionDenied,\n      schedule,\n    ]\n  );\n\n  const handleCancelActivity = useCallback(\n    (activityId: string) => {\n      if (!canCancelActivity) {\n        handleActionDenied(activityId, \"Você não tem permissão para cancelar atividades.\");\n        return;\n      }\n\n      if (!canRunActionOnActivity(activityId)) {\n        handleActionDenied(activityId, \"A atividade não pertence à sua carteira.\");\n        return;\n      }\n\n      setActivityFeedback((prev) => ({\n        ...prev,\n        [activityId]: { state: \"loading-cancel\" },\n      }));\n\n      schedule(() => {\n        try {\n          cancelActivity(activityId);\n          setActivityFeedback((prev) => ({\n            ...prev,\n            [activityId]: { state: \"complete-success\", message: \"Cancelada\" },\n          }));\n        } catch {\n          setActivityFeedback((prev) => ({\n            ...prev,\n            [activityId]: { state: \"error\", message: \"Falha ao cancelar atividade.\" },\n          }));\n        }\n      }, 180);\n\n      schedule(() => {\n        clearActivityFeedback(activityId);\n      }, 1500);\n    },\n    [\n      canCancelActivity,\n      canRunActionOnActivity,\n      cancelActivity,\n      clearActivityFeedback,\n      handleActionDenied,\n      schedule,\n    ]\n  );\n\n  const handlePostponeActivity = useCallback(\n    (activityId: string, newDate: string) => {\n      if (!canExecuteActivityActions) {\n        handleActionDenied(activityId, \"Você não tem permissão para reagendar atividades.\");\n        return;\n      }\n\n      if (!canRunActionOnActivity(activityId)) {\n        handleActionDenied(activityId, \"A atividade não pertence à sua carteira.\");\n        return;\n      }\n\n      if (!DATE_PARAM_REGEX.test(newDate)) {\n        handleActionDenied(activityId, \"Data de reagendamento inválida.\");\n        return;\n      }\n\n      const todayIso = toISODate(startOfDay(now));\n      if (newDate < todayIso) {\n        handleActionDenied(activityId, \"Escolha uma data a partir de hoje.\");\n        return;\n      }\n\n      setActivityFeedback((prev) => ({\n        ...prev,\n        [activityId]: { state: \"loading-postpone\" },\n      }));\n\n      schedule(() => {\n        try {\n          postponeActivity(activityId, newDate);\n          setHighlightedPostponedId(activityId);\n          setActivityFeedback((prev) => ({\n            ...prev,\n            [activityId]: {\n              state: \"postpone-success\",\n              message: `Reagendada para ${formatDateBR(newDate)}`,\n            },\n          }));\n        } catch {\n          setActivityFeedback((prev) => ({\n            ...prev,\n            [activityId]: { state: \"error\", message: \"Falha ao reagendar atividade.\" },\n          }));\n        }\n      }, 180);\n\n      schedule(() => {\n        setHighlightedPostponedId((current) => (current === activityId ? null : current));\n        clearActivityFeedback(activityId);\n      }, 1500);\n    },\n    [\n      canExecuteActivityActions,\n      canRunActionOnActivity,\n      clearActivityFeedback,\n      handleActionDenied,\n      now,\n      postponeActivity,\n      schedule,\n    ]\n  );\n\n  const handleRequestBulkCompleteActivities = useCallback(() => {\n    if (selectedExecutionIds.length === 0) return;\n\n    if (!canExecuteActivityActions) {\n      setCommandResult({\n        status: \"error\",\n        text: \"Você não tem permissão para concluir atividades em lote.\",\n      });\n      pushBulkInlineFeedback({\n        tone: \"error\",\n        message: \"Você não tem permissão para concluir atividades em lote.\",\n      });\n      return;\n    }\n\n    setConfirmBulkCompleteOpen(true);\n  }, [canExecuteActivityActions, pushBulkInlineFeedback, selectedExecutionIds.length]);\n\n  const handleConfirmBulkCompleteActivities = useCallback(() => {\n    if (selectedExecutionIds.length === 0) {\n      setConfirmBulkCompleteOpen(false);\n      return;\n    }\n\n    let successCount = 0;\n    let deniedCount = 0;\n    selectedExecutionIds.forEach((activityId) => {\n      if (!canRunActionOnActivity(activityId)) {\n        deniedCount += 1;\n        return;\n      }\n      handleCompleteActivity(activityId);\n      successCount += 1;\n    });\n    clearSelectedActivities();\n    setConfirmBulkCompleteOpen(false);\n    const message =\n      deniedCount > 0\n        ? `${successCount} concluída(s), ${deniedCount} sem permissão/escopo.`\n        : `${successCount} atividade(s) concluída(s) em lote.`;\n    setCommandResult({\n      status: deniedCount > 0 ? \"error\" : \"success\",\n      text: message,\n    });\n    pushBulkInlineFeedback({\n      tone: deniedCount > 0 ? \"error\" : \"success\",\n      message,\n    });\n  }, [\n    canRunActionOnActivity,\n    clearSelectedActivities,\n    handleCompleteActivity,\n    pushBulkInlineFeedback,\n    selectedExecutionIds,\n  ]);\n\n  const handleRequestBulkCancelActivities = useCallback(() => {\n    if (selectedExecutionIds.length === 0) return;\n\n    if (!canCancelActivity) {\n      setCommandResult({\n        status: \"error\",\n        text: \"Você não tem permissão para cancelar atividades em lote.\",\n      });\n      pushBulkInlineFeedback({\n        tone: \"error\",\n        message: \"Você não tem permissão para cancelar atividades em lote.\",\n      });\n      return;\n    }\n\n    setConfirmBulkCancelOpen(true);\n  }, [canCancelActivity, pushBulkInlineFeedback, selectedExecutionIds.length]);\n\n  const handleConfirmBulkCancelActivities = useCallback(() => {\n    if (selectedExecutionIds.length === 0) {\n      setConfirmBulkCancelOpen(false);\n      return;\n    }\n\n    let successCount = 0;\n    let deniedCount = 0;\n    selectedExecutionIds.forEach((activityId) => {\n      if (!canRunActionOnActivity(activityId)) {\n        deniedCount += 1;\n        return;\n      }\n      handleCancelActivity(activityId);\n      successCount += 1;\n    });\n    clearSelectedActivities();\n    setConfirmBulkCancelOpen(false);\n    const message =\n      deniedCount > 0\n        ? `${successCount} cancelada(s), ${deniedCount} sem permissão/escopo.`\n        : `${successCount} atividade(s) cancelada(s) em lote.`;\n    setCommandResult({\n      status: deniedCount > 0 ? \"error\" : \"success\",\n      text: message,\n    });\n    pushBulkInlineFeedback({\n      tone: deniedCount > 0 ? \"error\" : \"success\",\n      message,\n    });\n  }, [\n    canRunActionOnActivity,\n    clearSelectedActivities,\n    handleCancelActivity,\n    pushBulkInlineFeedback,\n    selectedExecutionIds,\n  ]);\n\n  const handleBulkPostponeActivities = useCallback(\n    (targetDate: string) => {\n      if (selectedExecutionIds.length === 0) return;\n\n      if (!canExecuteActivityActions) {\n        setCommandResult({\n          status: \"error\",\n          text: \"Você não tem permissão para reagendar atividades em lote.\",\n        });\n        pushBulkInlineFeedback({\n          tone: \"error\",\n          message: \"Você não tem permissão para reagendar atividades em lote.\",\n        });\n        return;\n      }\n\n      if (!DATE_PARAM_REGEX.test(targetDate)) {\n        pushBulkInlineFeedback({\n          tone: \"error\",\n          message: \"Data de reagendamento inválida para lote.\",\n        });\n        return;\n      }\n\n      const todayIso = toISODate(startOfDay(now));\n      if (targetDate < todayIso) {\n        pushBulkInlineFeedback({\n          tone: \"error\",\n          message: \"Escolha uma data de lote a partir de hoje.\",\n        });\n        return;\n      }\n\n      let successCount = 0;\n      let deniedCount = 0;\n      selectedExecutionIds.forEach((activityId) => {\n        if (!canRunActionOnActivity(activityId)) {\n          deniedCount += 1;\n          return;\n        }\n        handlePostponeActivity(activityId, targetDate);\n        successCount += 1;\n      });\n      clearSelectedActivities();\n      setBulkPostponeOpen(false);\n      setBulkPostponeCustomDate(\"\");\n      const message =\n        deniedCount > 0\n          ? `${successCount} reagendada(s), ${deniedCount} sem permissão/escopo.`\n          : `${successCount} atividade(s) reagendada(s) para ${formatDateBR(targetDate)}.`;\n      setCommandResult({\n        status: deniedCount > 0 ? \"error\" : \"success\",\n        text: message,\n      });\n      pushBulkInlineFeedback({\n        tone: deniedCount > 0 ? \"error\" : \"success\",\n        message,\n      });\n    },\n    [\n      canExecuteActivityActions,\n      canRunActionOnActivity,\n      clearSelectedActivities,\n      handlePostponeActivity,\n      now,\n      pushBulkInlineFeedback,\n      selectedExecutionIds,\n    ]\n  );\n\n  const handleOpenIntelligenceFromActivity = useCallback(\n    (activity: Activity) => {\n      const insight = getActivityInsight(activity, now);\n      const contextLabel =\n        activity.clientName || activity.opportunityTitle || \"atividade selecionada\";\n\n      setSelectedActivityId(activity.id);\n      setGeneratedContent({\n        title: `Menux Intelligence · ${contextLabel}`,\n        content: `Mensagem pronta:\\n${insight.message}\\n\\nPróximo passo:\\n${insight.nextStep}\\n\\nRisco se ignorar:\\n${insight.risk}`,\n      });\n      setGeneratedModalOpen(true);\n      setCommandResult({\n        status: \"success\",\n        text: `Sugestões da Menux Intelligence abertas para ${contextLabel}.`,\n      });\n\n      setActivityFeedback((prev) => ({\n        ...prev,\n        [activity.id]: {\n          state: \"info\",\n          message: \"Insights gerados para esta atividade.\",\n        },\n      }));\n      schedule(() => clearActivityFeedback(activity.id), 1800);\n    },\n    [clearActivityFeedback, now, schedule]\n  );\n\n  const handleGenerateFollowup = useCallback(\n    (activity: Activity) => {\n      const insight = getActivityInsight(activity, now);\n      const contextLabel =\n        activity.clientName || activity.opportunityTitle || \"atividade selecionada\";\n\n      setSelectedActivityId(activity.id);\n      setGeneratedContent({\n        title: `Follow-up · ${contextLabel}`,\n        content: insight.message,\n      });\n      setGeneratedModalOpen(true);\n      setCommandResult({\n        status: \"success\",\n        text: `Follow-up pronto para ${contextLabel}.`,\n      });\n\n      setActivityFeedback((prev) => ({\n        ...prev,\n        [activity.id]: {\n          state: \"info\",\n          message: \"Follow-up gerado e pronto para envio.\",\n        },\n      }));\n      schedule(() => clearActivityFeedback(activity.id), 1800);\n    },\n    [clearActivityFeedback, now, schedule]\n  );\n\n  const handleRunCommand = useCallback(\n    (commandId: string) => {\n      setCommandLoadingId(commandId);\n\n      schedule(() => {\n        if (commandId === \"sla-priority\") {\n          setFilterSla(\"breached\");\n          setViewMode(\"list\");\n          setCommandResult({\n            status: \"success\",\n            text: \"Filtro de SLA 'Estourado' aplicado.\",\n          });\n        } else if (commandId === \"risk-client\") {\n          setCommandLoadingId(null);\n          router.push(\"/clients?filter=risk\");\n          return; // Navigation handles feedback\n        } else if (commandId === \"week-summary\") {\n          setGeneratedContent({\n            title: \"Resumo da Semana\",\n            content: `### Minha semana em atividades\\n- Total ativas: ${executionActivities.length}\\n- Atrasadas: ${overdueCount}\\n- SLAs em risco: ${riskCount}\\n\\n**Próximo passo recomendado:** focar primeiro nas atividades atrasadas de maior impacto comercial.`,\n          });\n          setGeneratedModalOpen(true);\n          setCommandResult({\n            status: \"success\",\n            text: \"Resumo semanal gerado com foco na sua carteira.\",\n          });\n        } else if (commandId === \"bulk-messages\") {\n          if (overdueCount === 0) {\n            setCommandResult({\n              status: \"error\",\n              text: \"Sem atividades atrasadas para gerar mensagens no momento.\",\n            });\n            setCommandLoadingId(null);\n            return;\n          }\n\n          setGeneratedContent({\n            title: \"Mensagens para Atrasadas\",\n            content: `Olá [Nome], vi que não conseguimos nos falar na data combinada. Como está sua agenda para retomarmos amanhã?\\n\\nOi [Nome], tudo bem? Gostaria de reagendar nosso papo sobre [Assunto]. Teria disponibilidade esta tarde?`\n          });\n          setGeneratedModalOpen(true);\n          setCommandResult({ status: \"success\", text: \"Sugestões de mensagem geradas.\" });\n        } else if (commandId === \"call-script\") {\n          setGeneratedContent({\n            title: \"Script de Ligação\",\n            content: `**Abertura:** \"Olá [Nome], aqui é ${user?.name || \"Consultor\"} da [Empresa]. Tudo bem?\"\\n\\n**Gancho:** \"Estou ligando pois vi que ficou pendente nosso alinhamento sobre [Assunto] e não gostaria de deixar passar...\"\\n\\n**Fechamento:** \"Conseguimos 5 minutinhos agora ou prefere agendar?\"`\n          });\n          setGeneratedModalOpen(true);\n          setCommandResult({ status: \"success\", text: \"Script de ligação gerado.\" });\n        } else {\n          // Fallback for others\n          const result = buildCommandResult(commandId, {\n            overdueCount,\n            riskCount,\n            totalActive: executionActivities.length,\n            selectedActivity: selectedActivity || undefined,\n          });\n          setCommandResult(result);\n        }\n\n        setCommandLoadingId(null);\n      }, 500);\n    },\n    [executionActivities.length, overdueCount, riskCount, selectedActivity, schedule, router, user?.name]\n  );\n\n  const handleExportCSV = useCallback(() => {\n    if (!canExportActivities) {\n      setCommandResult({\n        status: \"error\",\n        text: \"Você não tem permissão para exportar dados desta tela.\",\n      });\n      pushSummaryInlineFeedback({\n        tone: \"error\",\n        message: \"Você não tem permissão para exportar dados desta tela.\",\n      });\n      return;\n    }\n\n    setIsExporting(true);\n    pushSummaryInlineFeedback({\n      tone: \"info\",\n      message: \"Exportando lista de atividades...\",\n    });\n\n    const header = [\"Título\", \"Tipo\", \"Status\", \"Cliente\", \"Oportunidade\", \"Data\", \"Horário\", \"Responsável\"];\n    try {\n      const rows = filteredActivities.map((activity) => {\n        const effectiveStatus = getEffectiveStatus(activity, now);\n        return [\n          activity.title,\n          typeLabels[activity.type],\n          effectiveStatus === \"pending\"\n            ? \"Pendente\"\n            : effectiveStatus === \"completed\"\n              ? \"Concluída\"\n              : effectiveStatus === \"overdue\"\n                ? \"Atrasada\"\n                : \"Cancelada\",\n          activity.clientName || \"\",\n          activity.opportunityTitle || \"\",\n          formatDateBR(activity.dueDate),\n          activity.dueTime || \"\",\n          activity.responsibleName,\n        ];\n      });\n\n      const csvContent = [\n        header.join(\";\"),\n        ...rows.map((row) => row.map((cell) => `\"${cell.replace(/\"/g, '\"\"')}\"`).join(\";\")),\n      ].join(\"\\n\");\n\n      const BOM = \"\\uFEFF\";\n      const blob = new Blob([BOM + csvContent], { type: \"text/csv;charset=utf-8\" });\n      const link = document.createElement(\"a\");\n      link.href = URL.createObjectURL(blob);\n      link.download = `atividades-${toISODate(now)}.csv`;\n      link.click();\n      URL.revokeObjectURL(link.href);\n\n      setCommandResult({\n        status: \"success\",\n        text: `${filteredActivities.length} atividades exportadas em CSV.`,\n      });\n      pushSummaryInlineFeedback({\n        tone: \"success\",\n        message: `${filteredActivities.length} atividade(s) exportada(s) em CSV.`,\n      });\n    } catch {\n      setCommandResult({\n        status: \"error\",\n        text: \"Não foi possível exportar a lista agora.\",\n      });\n      pushSummaryInlineFeedback({\n        tone: \"error\",\n        message: \"Não foi possível exportar a lista agora.\",\n      });\n    } finally {\n      setIsExporting(false);\n    }\n  }, [canExportActivities, filteredActivities, now, pushSummaryInlineFeedback]);\n\n  const renderSectionBody = useCallback(\n    (items: Activity[], sectionKey: Exclude<SectionKey, \"intelligence\">) => {\n      if (sectionErrors[sectionKey]) {\n        return (\n          <InlineSectionError\n            message={sectionErrors[sectionKey] || \"Erro ao carregar seção.\"}\n            onRetry={() =>\n              setSectionErrors((prev) => ({\n                ...prev,\n                [sectionKey]: null,\n              }))\n            }\n          />\n        );\n      }\n\n      if (isLoading) {\n        return (\n          <div className=\"space-y-3\">\n            {Array.from({ length: 2 }).map((_, index) => (\n              <Skeleton\n                key={`${sectionKey}-skeleton-${index}`}\n                className=\"h-[118px] rounded-[18px]\"\n              />\n            ))}\n          </div>\n        );\n      }\n\n      if (items.length === 0) {\n        if (sectionKey === \"overdue\") {\n          return (\n            <div className=\"rounded-[16px] border border-emerald-200 bg-emerald-50/70 px-4 py-3\">\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-emerald-600\" />\n                <p className=\"font-body text-sm font-medium text-emerald-700\">\n                  Tudo em dia. Nenhuma atividade atrasada.\n                </p>\n              </div>\n            </div>\n          );\n        }\n\n        if (sectionKey === \"today\") {\n          return (\n            <div className=\"rounded-[16px] border border-zinc-200 bg-zinc-50 px-4 py-4\">\n              <p className=\"font-body text-sm text-zinc-600\">\n                Nenhuma atividade para hoje.\n              </p>\n              <div className=\"mt-3 flex flex-wrap gap-2\">\n                <Button\n                  size=\"sm\"\n                  className=\"rounded-full bg-zinc-900 text-white hover:bg-zinc-800\"\n                  onClick={() => openDrawer(\"new-activity\")}\n                  disabled={!canCreateActivity}\n                >\n                  <Plus className=\"h-3.5 w-3.5\" />\n                  Criar atividade\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  className=\"rounded-full\"\n                  onClick={handleGeneratePlan}\n                >\n                  <WandSparkles className=\"h-3.5 w-3.5\" />\n                  Pedir recomendação\n                </Button>\n              </div>\n            </div>\n          );\n        }\n\n        return (\n          <div className=\"rounded-[16px] border border-zinc-200 bg-zinc-50 px-4 py-4\">\n            <p className=\"font-body text-sm text-zinc-600\">\n              Nenhuma atividade nesse bloco por enquanto.\n            </p>\n          </div>\n        );\n      }\n\n      if (viewMode === \"agenda\") {\n        const groupedByDate = items.reduce<Record<string, Activity[]>>((acc, activity) => {\n          if (!acc[activity.dueDate]) acc[activity.dueDate] = [];\n          acc[activity.dueDate].push(activity);\n          return acc;\n        }, {});\n\n        const dates = Object.keys(groupedByDate).sort((a, b) =>\n          parseDateISO(a).getTime() - parseDateISO(b).getTime()\n        );\n\n        return (\n          <div className=\"space-y-3\">\n            {dates.map((date) => (\n              <div key={date} className=\"rounded-[16px] border border-zinc-200 bg-white/80 p-3\">\n                <div className=\"mb-3 flex items-center justify-between\">\n                  <p className=\"font-heading text-sm font-semibold text-zinc-900\">\n                    {formatDateFull(date)}\n                  </p>\n                  <Badge className=\"rounded-full bg-zinc-100 text-zinc-600\">\n                    {groupedByDate[date].length}\n                  </Badge>\n                </div>\n                <div className=\"space-y-2\">\n                  <AnimatePresence initial={false}>\n                    {groupedByDate[date].map((activity) => (\n                      <motion.div\n                        key={activity.id}\n                        layout\n                        initial={{ opacity: 0, y: 6 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        exit={{ opacity: 0, y: -4 }}\n                        transition={{ duration: 0.16, ease: \"easeOut\" }}\n                      >\n                        <ExecutionActivityCard\n                          activity={activity}\n                          now={now}\n                          isExpanded={expandedActivityId === activity.id}\n                          isHighlighted={highlightedPostponedId === activity.id}\n                          selected={selectedActivityIds.has(activity.id)}\n                          canExecuteActions={canExecuteActivityActions}\n                          canCancelActions={canCancelActivity}\n                          feedback={activityFeedback[activity.id]}\n                          onToggleExpand={() => {\n                            setExpandedActivityId((prev) =>\n                              prev === activity.id ? null : activity.id\n                            );\n                            setSelectedActivityId(activity.id);\n                          }}\n                          onToggleSelect={() => toggleActivitySelection(activity.id)}\n                          onComplete={(notes) => handleCompleteActivity(activity.id, notes)}\n                          onCancel={() => handleCancelActivity(activity.id)}\n                          onPostpone={(newDate) => handlePostponeActivity(activity.id, newDate)}\n                          onSelectIntelligence={() => setSelectedActivityId(activity.id)}\n                          onGenerateFollowup={() => handleGenerateFollowup(activity)}\n                        />\n                      </motion.div>\n                    ))}\n                  </AnimatePresence>\n                </div>\n              </div>\n            ))}\n          </div>\n        );\n      }\n\n      return (\n        <VirtualizedActivityList\n          items={items}\n          estimateSize={214}\n          renderItem={(activity) => (\n            <ExecutionActivityCard\n              activity={activity}\n              now={now}\n              isExpanded={expandedActivityId === activity.id}\n              isHighlighted={highlightedPostponedId === activity.id}\n              selected={selectedActivityIds.has(activity.id)}\n              canExecuteActions={canExecuteActivityActions}\n              canCancelActions={canCancelActivity}\n              feedback={activityFeedback[activity.id]}\n              onToggleExpand={() => {\n                setExpandedActivityId((prev) => (prev === activity.id ? null : activity.id));\n                setSelectedActivityId(activity.id);\n              }}\n              onToggleSelect={() => toggleActivitySelection(activity.id)}\n              onComplete={(notes) => handleCompleteActivity(activity.id, notes)}\n              onCancel={() => handleCancelActivity(activity.id)}\n              onPostpone={(newDate) => handlePostponeActivity(activity.id, newDate)}\n              onSelectIntelligence={() => setSelectedActivityId(activity.id)}\n              onGenerateFollowup={() => handleGenerateFollowup(activity)}\n            />\n          )}\n        />\n      );\n    },\n    [\n      sectionErrors,\n      isLoading,\n      viewMode,\n      now,\n      expandedActivityId,\n      highlightedPostponedId,\n      selectedActivityIds,\n      activityFeedback,\n      canCreateActivity,\n      canExecuteActivityActions,\n      canCancelActivity,\n      openDrawer,\n      handleGeneratePlan,\n      toggleActivitySelection,\n      handleCompleteActivity,\n      handleCancelActivity,\n      handlePostponeActivity,\n      handleGenerateFollowup,\n    ]\n  );\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 6 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.18, ease: [0.22, 0.61, 0.36, 1] }}\n      className=\"space-y-7 lg:space-y-8\"\n    >\n      <ModuleCommandHeader\n        title=\"Atividades\"\n        description=\"Execução do dia, com prioridades e próximos passos.\"\n        className={cn(\n          \"border-zinc-200/80 bg-zinc-50/88\",\n          isPageScrolled && \"shadow-[0_14px_24px_-18px_rgba(15,23,42,0.32)]\"\n        )}\n        meta={headerMetaText}\n        chips={[\n          {\n            id: \"overdue\",\n            label: `${overdueCount} atrasadas`,\n            icon: <AlertTriangle className=\"h-3.5 w-3.5\" />,\n            tone: overdueCount > 0 ? \"danger\" : \"neutral\",\n            onClick: handleQuickFilterOverdue,\n          },\n          {\n            id: \"today\",\n            label: `${todayActivities.length} para hoje`,\n            icon: <CalendarClock className=\"h-3.5 w-3.5\" />,\n            tone: todayActivities.length > 0 ? \"info\" : \"neutral\",\n            onClick: handleQuickFilterToday,\n          },\n          hasActiveFilters\n            ? {\n                id: \"active-filters\",\n                label: `${activeFilterChips.length} filtros ativos`,\n                icon: <Filter className=\"h-3.5 w-3.5\" />,\n                tone: \"warning\",\n                onClick: () => setIsFilterOpen(true),\n              }\n            : {\n                id: \"sla-risk\",\n                label: `${riskCount} SLAs em risco`,\n                icon: <CircleAlert className=\"h-3.5 w-3.5\" />,\n                tone: riskCount > 0 ? \"warning\" : \"success\",\n                onClick: handleQuickFilterSlaRisk,\n              },\n        ]}\n        actions={\n          <div className=\"flex w-full flex-col gap-3\">\n            <div className=\"flex w-full flex-col gap-2.5 min-[1180px]:flex-row min-[1180px]:items-center min-[1180px]:justify-between\">\n              <div className=\"flex w-full flex-col gap-2.5 sm:flex-row sm:items-center min-[1180px]:w-auto min-[1180px]:flex-1\">\n                <div className=\"relative w-full sm:flex-1 min-[1180px]:max-w-[380px]\">\n                  <Search className=\"pointer-events-none absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-zinc-400\" />\n                  <Input\n                    value={searchQuery}\n                    onChange={(event) => setSearchQuery(event.target.value)}\n                    placeholder=\"Buscar atividade, cliente ou oportunidade...\"\n                    className=\"h-10 rounded-full border-zinc-200 bg-white/90 pl-8 text-sm\"\n                  />\n                </div>\n\n                <div className=\"flex w-full items-center gap-1 rounded-full border border-zinc-200/90 bg-white/90 p-1 shadow-sm sm:w-auto\">\n                  {[\n                    { key: \"list\" as const, label: \"Lista\", icon: List },\n                    { key: \"agenda\" as const, label: \"Agenda\", icon: CalendarDays },\n                  ].map((mode) => {\n                    const active = viewMode === mode.key;\n                    return (\n                      <button\n                        key={mode.key}\n                        onClick={() => setViewMode(mode.key)}\n                        className={cn(\n                          \"inline-flex h-8 flex-1 items-center justify-center gap-1.5 rounded-full px-3 text-xs font-medium transition-all duration-120 ease-out active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-300 focus-visible:ring-offset-2 focus-visible:ring-offset-zinc-50 sm:flex-none\",\n                          active\n                            ? \"bg-brand text-white shadow-[0_6px_14px_-8px_rgba(29,78,216,0.7)]\"\n                            : \"text-zinc-600 hover:bg-zinc-100/90\"\n                        )}\n                      >\n                        <mode.icon className=\"h-3.5 w-3.5\" />\n                        <span>{mode.label}</span>\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n\n              <div className=\"flex flex-wrap items-center gap-2 sm:justify-end min-[1180px]:shrink-0\">\n                <Popover open={isFilterOpen} onOpenChange={setIsFilterOpen}>\n                  <PopoverTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      className=\"rounded-full border-zinc-200 bg-white/90 transition-all duration-120 ease-out hover:bg-zinc-100/90 active:scale-[0.98] focus-visible:ring-zinc-300\"\n                    >\n                      <Filter className=\"h-4 w-4\" />\n                      Filtros\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent\n                    align=\"end\"\n                    side=\"bottom\"\n                    sideOffset={8}\n                    className=\"w-[min(96vw,430px)] rounded-[18px] border-zinc-200 bg-white p-4 shadow-xl\"\n                  >\n                    <div className=\"space-y-4\">\n                      <div>\n                        <p className=\"mb-2 font-heading text-sm font-semibold text-zinc-900\">Tipo</p>\n                        <div className=\"grid grid-cols-2 gap-2\">\n                          {allActivityTypes.map((type) => {\n                            const Icon = typeIconComponents[type];\n                            const active = filterTypes.has(type);\n                            return (\n                              <label\n                                key={type}\n                                className={cn(\n                                  \"flex cursor-pointer items-center gap-2 rounded-[12px] border px-2.5 py-2 text-xs\",\n                                  active\n                                    ? \"border-brand/35 bg-brand/8 text-brand\"\n                                    : \"border-zinc-200 bg-white text-zinc-600\"\n                                )}\n                              >\n                                <Checkbox\n                                  checked={active}\n                                  onCheckedChange={(checked) => {\n                                    setFilterTypes((prev) => {\n                                      const next = new Set(prev);\n                                      if (checked === true) next.add(type);\n                                      else next.delete(type);\n                                      return next.size === 0 ? new Set(allActivityTypes) : next;\n                                    });\n                                  }}\n                                />\n                                <Icon className=\"h-3.5 w-3.5\" />\n                                <span>{typeLabels[type]}</span>\n                              </label>\n                            );\n                          })}\n                        </div>\n                      </div>\n\n                      <Separator />\n\n                      <div>\n                        <p className=\"mb-2 font-heading text-sm font-semibold text-zinc-900\">Status</p>\n                        <div className=\"grid grid-cols-2 gap-2\">\n                          {STATUS_OPTIONS.map((status) => (\n                            <label\n                              key={status.value}\n                              className=\"flex cursor-pointer items-center gap-2 rounded-[12px] border border-zinc-200 px-2.5 py-2 text-xs text-zinc-700\"\n                            >\n                              <Checkbox\n                                checked={filterStatuses.has(status.value)}\n                                onCheckedChange={(checked) => {\n                                  setFilterStatuses((prev) => {\n                                    const next = new Set(prev);\n                                    if (checked === true) next.add(status.value);\n                                    else next.delete(status.value);\n                                    return next.size === 0 ? new Set(DEFAULT_STATUS_FILTER) : next;\n                                  });\n                                }}\n                              />\n                              <span>{status.label}</span>\n                            </label>\n                          ))}\n                        </div>\n                      </div>\n\n                      <Separator />\n\n                      <div className=\"grid grid-cols-1 gap-3\">\n                        <div>\n                          <Label className=\"mb-1 block text-xs text-zinc-500\">SLA</Label>\n                          <div className=\"flex rounded-[12px] border border-zinc-200 p-1\">\n                            {SLA_OPTIONS.map((option) => (\n                              <button\n                                key={option.value}\n                                onClick={() => setFilterSla(option.value)}\n                                className={cn(\n                                  \"flex-1 rounded-[9px] px-2 py-1.5 text-xs transition-colors\",\n                                  filterSla === option.value\n                                    ? \"bg-zinc-900 text-white\"\n                                    : \"text-zinc-500 hover:bg-zinc-100\"\n                                )}\n                              >\n                                {option.label}\n                              </button>\n                            ))}\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"grid grid-cols-2 gap-2\">\n                        <div>\n                          <Label className=\"mb-1 block text-xs text-zinc-500\">Período de</Label>\n                          <Input\n                            type=\"date\"\n                            value={filterDateStart}\n                            onChange={(event) => setFilterDateStart(event.target.value)}\n                            className=\"h-9 rounded-[12px]\"\n                          />\n                        </div>\n                        <div>\n                          <Label className=\"mb-1 block text-xs text-zinc-500\">até</Label>\n                          <Input\n                            type=\"date\"\n                            value={filterDateEnd}\n                            onChange={(event) => setFilterDateEnd(event.target.value)}\n                            className=\"h-9 rounded-[12px]\"\n                          />\n                        </div>\n                      </div>\n\n                      <div className=\"flex gap-2\">\n                        <Button variant=\"outline\" className=\"flex-1 rounded-full\" onClick={clearFilters}>\n                          Limpar tudo\n                        </Button>\n                        <Button\n                          className=\"flex-1 rounded-full bg-zinc-900 text-white hover:bg-zinc-800\"\n                          onClick={() => setIsFilterOpen(false)}\n                        >\n                          Fechar\n                        </Button>\n                      </div>\n                    </div>\n                  </PopoverContent>\n                </Popover>\n\n                {hasActiveFilters && (\n                  <Button\n                    variant=\"ghost\"\n                    className=\"rounded-full px-3 text-xs text-zinc-500 transition-all duration-120 ease-out hover:bg-zinc-100/90 active:scale-[0.98] focus-visible:ring-zinc-300\"\n                    onClick={clearFilters}\n                  >\n                    Limpar tudo\n                  </Button>\n                )}\n\n                <Button\n                  variant=\"outline\"\n                  className=\"h-9 rounded-full border-zinc-200 bg-white/90 px-4 transition-all duration-120 ease-out hover:bg-zinc-100/90 active:scale-[0.98] focus-visible:ring-zinc-300\"\n                  onClick={handleGeneratePlan}\n                  disabled={isPlanning}\n                >\n                  {isPlanning ? (\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  ) : (\n                    <WandSparkles className=\"h-4 w-4\" />\n                  )}\n                  Pedir plano do dia\n                </Button>\n\n                <Button\n                  className=\"h-9 rounded-full bg-zinc-900 px-4 text-white transition-all duration-120 ease-out hover:bg-zinc-800 active:scale-[0.98] focus-visible:ring-zinc-300\"\n                  onClick={() => openDrawer(\"new-activity\")}\n                  disabled={!canCreateActivity}\n                >\n                  <Plus className=\"h-4 w-4\" />\n                  Nova atividade\n                </Button>\n              </div>\n            </div>\n          </div>\n        }\n      />\n\n      {headerInlineFeedback ? (\n        <InlineFeedbackMessage\n          tone={headerInlineFeedback.tone}\n          message={headerInlineFeedback.message}\n        />\n      ) : null}\n\n      {hasActiveFilters && activeFilterChips.length > 0 && (\n        <div className=\"flex flex-wrap gap-2\">\n          {activeFilterChips.map((chip) => (\n            <button\n              key={chip.id}\n              type=\"button\"\n              onClick={chip.onRemove}\n              className=\"inline-flex items-center gap-1 rounded-full border border-zinc-200 bg-white px-3 py-1.5 text-xs text-zinc-600 transition-colors hover:bg-zinc-50\"\n            >\n              <span>{chip.label}</span>\n              <span className=\"text-zinc-400\">×</span>\n            </button>\n          ))}\n        </div>\n      )}\n\n      {isTeamScope && activities.length > 0 && (\n        <div className=\"rounded-[14px] border border-blue-200 bg-blue-50/80 px-4 py-3\">\n          <p className=\"font-body text-sm text-blue-800\">\n            <span className=\"font-semibold\">Visão de equipe:</span> você está navegando atividades agregadas da equipe.\n          </p>\n        </div>\n      )}\n\n      {hasNoScopedActivities && !isTeamScope && (\n        <div className=\"rounded-[14px] border border-zinc-200 bg-white px-4 py-4\">\n          <p className=\"font-body text-sm text-zinc-700\">\n            Você não possui atividades atribuídas na sua carteira no momento.\n          </p>\n          <div className=\"mt-3 flex flex-wrap gap-2\">\n            <Button\n              size=\"sm\"\n              className=\"h-8 rounded-full bg-zinc-900 px-3 text-xs text-white hover:bg-zinc-800\"\n              onClick={() => openDrawer(\"new-activity\")}\n              disabled={!canCreateActivity}\n            >\n              <Plus className=\"h-3.5 w-3.5\" />\n              Criar atividade\n            </Button>\n            <Button\n              size=\"sm\"\n              variant=\"outline\"\n              className=\"h-8 rounded-full px-3 text-xs\"\n              onClick={handleGeneratePlan}\n              disabled={isPlanning}\n            >\n              <WandSparkles className=\"h-3.5 w-3.5\" />\n              Pedir plano\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {viewMode === \"list\" && executionActivities.length > 0 && (\n        <div className=\"space-y-3 rounded-[18px] border border-zinc-200 bg-white px-4 py-3.5 md:px-5\">\n          <div className=\"flex flex-wrap items-center justify-between gap-3\">\n            <div className=\"flex items-center gap-2 text-sm text-zinc-600\">\n              <Checkbox\n                checked={allVisibleExecutionSelected}\n                onCheckedChange={(checked) =>\n                  handleSelectAllVisibleActivities(Boolean(checked))\n                }\n              />\n              <span>\n                Selecionar todas visíveis ({executionActivities.length})\n              </span>\n            </div>\n            {selectedExecutionIds.length > 0 ? (\n              <span className=\"text-xs font-medium text-zinc-600\">\n                {selectedExecutionIds.length} selecionada(s)\n              </span>\n            ) : (\n              <span className=\"text-xs text-zinc-500\">\n                Selecione atividades para usar ações em lote.\n              </span>\n            )}\n          </div>\n\n          {selectedExecutionIds.length > 0 && (\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <Button\n                size=\"sm\"\n                className=\"h-8 rounded-full bg-zinc-900 px-3 text-xs text-white hover:bg-zinc-800\"\n                onClick={handleRequestBulkCompleteActivities}\n                disabled={!canExecuteActivityActions}\n              >\n                <CheckCircle2 className=\"h-3.5 w-3.5\" />\n                Concluir em lote\n              </Button>\n              <Popover open={bulkPostponeOpen} onOpenChange={setBulkPostponeOpen}>\n                <PopoverTrigger asChild>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    className=\"h-8 rounded-full px-3 text-xs\"\n                    disabled={!canExecuteActivityActions}\n                  >\n                    <CalendarClock className=\"h-3.5 w-3.5\" />\n                    Adiar\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent\n                  align=\"start\"\n                  sideOffset={8}\n                  className=\"w-[250px] rounded-[16px] border-zinc-200 p-3\"\n                >\n                  <p className=\"mb-2 text-xs font-semibold uppercase tracking-wide text-zinc-500\">\n                    Reagendar em lote\n                  </p>\n                  <div className=\"space-y-2\">\n                    {[1, 3, 7].map((days) => (\n                      <button\n                        key={days}\n                        onClick={() =>\n                          handleBulkPostponeActivities(\n                            toISODate(addDays(startOfDay(now), days))\n                          )\n                        }\n                        className=\"flex w-full items-center justify-between rounded-[10px] border border-zinc-200 px-3 py-2 text-sm text-zinc-700 transition-colors hover:bg-zinc-50\"\n                      >\n                        <span>+{days} {days === 1 ? \"dia\" : \"dias\"}</span>\n                        <ArrowRight className=\"h-3.5 w-3.5 text-zinc-400\" />\n                      </button>\n                    ))}\n                  </div>\n                  <div className=\"mt-3 space-y-2\">\n                    <Label className=\"text-xs text-zinc-500\">Escolher data</Label>\n                    <Input\n                      type=\"date\"\n                      value={bulkPostponeCustomDate}\n                      min={toISODate(startOfDay(now))}\n                      onChange={(event) => setBulkPostponeCustomDate(event.target.value)}\n                      className=\"h-9 rounded-[10px]\"\n                    />\n                    <Button\n                      size=\"sm\"\n                      className=\"h-8 w-full rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800\"\n                      disabled={!bulkPostponeCustomDate}\n                      onClick={() =>\n                        handleBulkPostponeActivities(bulkPostponeCustomDate)\n                      }\n                    >\n                      Confirmar data\n                    </Button>\n                  </div>\n                </PopoverContent>\n              </Popover>\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                className=\"h-8 rounded-full px-3 text-xs text-red-600 hover:bg-red-50\"\n                onClick={handleRequestBulkCancelActivities}\n                disabled={!canCancelActivity}\n              >\n                <XCircle className=\"h-3.5 w-3.5\" />\n                Cancelar em lote\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                className=\"h-8 rounded-full px-3 text-xs text-zinc-500\"\n                onClick={clearSelectedActivities}\n              >\n                Limpar seleção\n              </Button>\n            </div>\n          )}\n\n          {bulkInlineFeedback ? (\n            <InlineFeedbackMessage\n              tone={bulkInlineFeedback.tone}\n              message={bulkInlineFeedback.message}\n              className=\"mt-2\"\n            />\n          ) : null}\n        </div>\n      )}\n\n      <div className=\"grid gap-6 2xl:grid-cols-[minmax(0,7fr)_minmax(340px,3fr)]\">\n        <div className=\"space-y-5\">\n          {viewMode === \"agenda\" ? (\n            <ActivitiesCalendarView\n              now={now}\n              monthDate={calendarMonth}\n              days={calendarDays}\n              selectedDate={selectedCalendarDate}\n              activitiesByDate={calendarActivitiesByDate}\n              selectedDayActivities={selectedCalendarDayActivities}\n              expandedActivityId={expandedActivityId}\n              highlightedPostponedId={highlightedPostponedId}\n              selectedActivityIds={selectedActivityIds}\n              canExecuteActions={canExecuteActivityActions}\n              canCancelActions={canCancelActivity}\n              activityFeedback={activityFeedback}\n              onPreviousMonth={() =>\n                setCalendarMonth((prev) => new Date(prev.getFullYear(), prev.getMonth() - 1, 1))\n              }\n              onNextMonth={() =>\n                setCalendarMonth((prev) => new Date(prev.getFullYear(), prev.getMonth() + 1, 1))\n              }\n              onGoToToday={() => {\n                const todayDate = startOfDay(now);\n                setCalendarMonth(startOfMonth(todayDate));\n                setSelectedCalendarDate(toISODate(todayDate));\n              }}\n              onSelectDate={(date) => {\n                const monthStart = startOfMonth(date);\n                const iso = toISODate(date);\n                setSelectedCalendarDate(iso);\n                setCalendarMonth(monthStart);\n              }}\n              onToggleExpand={(activityId) => {\n                setExpandedActivityId((prev) => (prev === activityId ? null : activityId));\n                setSelectedActivityId(activityId);\n              }}\n              onComplete={handleCompleteActivity}\n              onCancel={handleCancelActivity}\n              onPostpone={handlePostponeActivity}\n              onToggleSelectActivity={toggleActivitySelection}\n              onSelectIntelligence={setSelectedActivityId}\n              onGenerateFollowup={handleGenerateFollowup}\n              onOpenActivityDetails={(activity) => {\n                setSelectedActivityId(activity.id);\n                setDetailsModalActivityId(activity.id);\n              }}\n            />\n          ) : (\n            <>\n          <ExecutionSection\n            title=\"O que a Menux Intelligence recomenda agora\"\n            count={menuxIntelligenceRecommendations.length}\n            collapsed={collapsedSections.intelligence}\n            onToggle={() => toggleSection(\"intelligence\")}\n            tone=\"violet\"\n          >\n            {sectionErrors.intelligence ? (\n              <InlineSectionError\n                message={sectionErrors.intelligence}\n                onRetry={() => {\n                  setSectionErrors((prev) => ({ ...prev, intelligence: null }));\n                  handleGeneratePlan();\n                }}\n              />\n            ) : isLoading ? (\n              <div className=\"grid gap-4 lg:grid-cols-2 2xl:grid-cols-3\">\n                {Array.from({ length: 3 }).map((_, index) => (\n                  <Skeleton key={`intelligence-skeleton-${index}`} className=\"h-44 rounded-[18px]\" />\n                ))}\n              </div>\n            ) : menuxIntelligenceRecommendations.length === 0 ? (\n              <div className=\"rounded-[18px] border border-cyan-200/20 bg-slate-900/45 px-5 py-5\">\n                <p className=\"font-body text-sm text-slate-200\">\n                  Sem recomendações no momento.\n                </p>\n                <Button\n                  size=\"sm\"\n                  className=\"mt-3 rounded-full border border-cyan-300/25 bg-cyan-500/18 text-cyan-50 hover:bg-cyan-500/28\"\n                  onClick={handleGeneratePlan}\n                >\n                  <Sparkles className=\"h-3.5 w-3.5\" />\n                  Gerar plano do dia\n                </Button>\n              </div>\n            ) : (\n              <div className=\"grid gap-4 lg:grid-cols-2 2xl:grid-cols-3\">\n                {menuxIntelligenceRecommendations.map((recommendation) => {\n                  const state = recommendationStates[recommendation.id] || \"idle\";\n\n                  return (\n                    <article\n                      key={recommendation.id}\n                      className=\"rounded-[20px] border border-cyan-200/20 bg-slate-900/52 p-5 shadow-[0_12px_24px_-20px_rgba(2,6,23,0.75)] transition-all duration-140 hover:-translate-y-[1px] hover:border-cyan-200/35\"\n                    >\n                      <div className=\"mb-3 flex items-start justify-between gap-3\">\n                        <div className=\"flex items-center gap-2.5\">\n                          <div className=\"flex h-10 w-10 shrink-0 items-center justify-center rounded-[12px] border border-cyan-300/25 bg-cyan-500/16 text-cyan-100\">\n                            <Bot className=\"h-4 w-4\" />\n                          </div>\n                          <div className=\"min-w-0\">\n                            <p className=\"font-heading text-sm font-semibold text-slate-100\">\n                              {recommendation.title}\n                            </p>\n                            <p className=\"font-body text-sm leading-snug text-slate-400\">{recommendation.context}</p>\n                          </div>\n                        </div>\n                      </div>\n\n                      <p className=\"min-h-[62px] font-body text-sm leading-relaxed text-slate-300\">\n                        <span className=\"font-medium text-slate-100\">Por que:</span> {recommendation.why}\n                      </p>\n\n                      <div className=\"mt-4 grid gap-2 sm:grid-cols-2\">\n                        <Button\n                          size=\"sm\"\n                          className=\"h-9 rounded-full border border-cyan-300/24 bg-cyan-500/18 text-xs text-cyan-50 hover:bg-cyan-500/28\"\n                          disabled={state === \"loading\"}\n                          onClick={() => handleExecuteRecommendation(recommendation)}\n                        >\n                          {state === \"loading\" ? (\n                            <>\n                              <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n                              Executando\n                            </>\n                          ) : state === \"success\" ? (\n                            <>\n                              <Check className=\"h-3.5 w-3.5\" />\n                              Executado\n                            </>\n                          ) : (\n                            recommendation.primaryActionLabel\n                          )}\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          className=\"h-9 rounded-full border-white/16 bg-white/6 text-xs text-slate-200 hover:bg-white/10\"\n                          onClick={() =>\n                            handleViewActivityFromRecommendation(recommendation.activityId)\n                          }\n                        >\n                          Ver atividade\n                        </Button>\n                      </div>\n\n                      {state === \"error\" && (\n                        <p className=\"mt-2 text-xs text-status-danger\">\n                          Falha ao executar. Tentar novamente.\n                        </p>\n                      )}\n                    </article>\n                  );\n                })}\n              </div>\n            )}\n          </ExecutionSection>\n\n          <ExecutionSection\n            title=\"Atrasadas\"\n            count={overdueActivities.length}\n            collapsed={collapsedSections.overdue}\n            onToggle={() => toggleSection(\"overdue\")}\n            tone=\"danger\"\n          >\n            {renderSectionBody(overdueActivities, \"overdue\")}\n          </ExecutionSection>\n\n          <ExecutionSection\n            title=\"Hoje\"\n            count={todayActivities.length}\n            collapsed={collapsedSections.today}\n            onToggle={() => toggleSection(\"today\")}\n            tone=\"warning\"\n          >\n            {renderSectionBody(todayActivities, \"today\")}\n          </ExecutionSection>\n\n          <ExecutionSection\n            title=\"Próximos 7 dias\"\n            count={next7Activities.length}\n            collapsed={collapsedSections.next7}\n            onToggle={() => toggleSection(\"next7\")}\n            tone=\"neutral\"\n          >\n            {renderSectionBody(next7Activities, \"next7\")}\n          </ExecutionSection>\n\n          <ExecutionSection\n            title=\"Futuras\"\n            count={futureActivities.length}\n            collapsed={collapsedSections.future}\n            onToggle={() => toggleSection(\"future\")}\n            tone=\"neutral\"\n          >\n            {renderSectionBody(futureActivities, \"future\")}\n          </ExecutionSection>\n\n          <div className=\"rounded-[20px] border border-zinc-200 bg-white p-4 shadow-sm md:p-5\">\n            <div className=\"flex flex-wrap items-center justify-between gap-2\">\n              <div>\n                <h3 className=\"font-heading text-lg font-semibold text-zinc-900\">Resumo do dia</h3>\n                <p className=\"font-body text-xs text-zinc-500\">\n                  Panorama rápido de execução e produtividade.\n                </p>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  className=\"rounded-full text-xs\"\n                  onClick={() => {\n                    setGeneratedContent({\n                      title: \"Resumo do dia\",\n                      content: `### Execução do dia\\n- Total de atividades: ${filteredActivities.length}\\n- Conclusão semanal: ${weeklyCompletionRate}%\\n- Atrasadas: ${overdueCount}\\n\\n**Próximo passo:** atacar primeiro as atividades atrasadas com maior risco de SLA.`,\n                    });\n                    setGeneratedModalOpen(true);\n                  }}\n                >\n                  Ver resumo\n                </Button>\n                {canExportActivities ? (\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    className=\"rounded-full text-xs\"\n                    disabled={isExporting}\n                    onClick={handleExportCSV}\n                  >\n                    {isExporting ? (\n                      <>\n                        <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n                        Exportando...\n                      </>\n                    ) : (\n                      \"Exportar lista\"\n                    )}\n                  </Button>\n                ) : null}\n              </div>\n            </div>\n\n            {summaryInlineFeedback ? (\n              <InlineFeedbackMessage\n                tone={summaryInlineFeedback.tone}\n                message={summaryInlineFeedback.message}\n                className=\"mt-3\"\n              />\n            ) : null}\n\n            <div className=\"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-4\">\n              <SummaryMetric label=\"Total de atividades\" value={String(filteredActivities.length)} />\n              <SummaryMetric label=\"Conclusão semanal\" value={`${weeklyCompletionRate}%`} />\n              <SummaryMetric\n                label=\"Tipo dominante\"\n                value={hotspotType ? typeLabels[hotspotType[0]] : \"-\"}\n              />\n              <SummaryMetric\n                label=\"SLA estourado\"\n                value={String(overdueCount)}\n                accent={overdueCount > 0 ? \"danger\" : \"success\"}\n              />\n            </div>\n\n            <div className=\"mt-4 grid gap-3 lg:grid-cols-1\">\n              <div className=\"rounded-[14px] border border-zinc-200 bg-zinc-50/70 p-3\">\n                <p className=\"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-zinc-500\">\n                  Por tipo\n                </p>\n                <div className=\"space-y-1.5\">\n                  {Object.entries(typeCounts)\n                    .sort((a, b) => b[1] - a[1])\n                    .slice(0, 4)\n                    .map(([type, count]) => (\n                      <div key={type} className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-zinc-600\">{typeLabels[type as ActivityType]}</span>\n                        <span className=\"font-medium text-zinc-900\">{count}</span>\n                      </div>\n                    ))}\n                </div>\n              </div>\n            </div>\n\n            {completedActivities.length > 0 && (\n              <div className=\"mt-4 rounded-[14px] border border-zinc-200 bg-white p-3\">\n                <p className=\"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-zinc-500\">\n                  Concluídas recentes\n                </p>\n                <div className=\"space-y-1.5\">\n                  {completedActivities.slice(0, 4).map((activity) => (\n                    <div\n                      key={activity.id}\n                      className=\"flex items-center justify-between rounded-[10px] bg-zinc-50 px-2.5 py-2\"\n                    >\n                      <p className=\"truncate text-sm text-zinc-700\">{activity.title}</p>\n                      <span className=\"text-xs text-zinc-500\">\n                        {formatDateBR(activity.completedAt || activity.dueDate)}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n            </>\n          )}\n        </div>\n\n        <aside\n          ref={intelligenceRailRef}\n          className={cn(\n            \"self-start 2xl:sticky 2xl:top-6\",\n            \"transition-shadow duration-120 ease-out\",\n            isPageScrolled && \"2xl:drop-shadow-[0_8px_20px_rgba(15,23,42,0.08)]\"\n          )}\n        >\n          <div className=\"menux-intelligence-theme space-y-5 rounded-[20px] border border-cyan-300/16 p-5 shadow-[0_14px_26px_-22px_rgba(2,6,23,0.8)] md:p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"font-heading text-lg font-semibold text-slate-100\">Menux Intelligence</h2>\n                <p className=\"mt-1 flex items-center gap-2 text-xs text-slate-300\">\n                  <span className=\"h-2 w-2 rounded-full bg-emerald-500\" />\n                  Online\n                </p>\n              </div>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                className=\"rounded-full border-white/16 bg-white/8 text-slate-100 hover:bg-white/12\"\n                onClick={handleGeneratePlan}\n                disabled={isPlanning}\n              >\n                {isPlanning ? (\n                  <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n                ) : (\n                  <Sparkles className=\"h-3.5 w-3.5\" />\n                )}\n                Gerar plano do dia\n              </Button>\n            </div>\n\n            <div className=\"rounded-[16px] border border-white/14 bg-white/7 p-4\">\n              <p className=\"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-slate-300\">\n                Diagnóstico do dia\n              </p>\n              <div className=\"space-y-1.5 text-sm\">\n                <DiagnosticItem label=\"Atrasadas\" value={String(overdueCount)} tone={overdueCount > 0 ? \"danger\" : \"success\"} />\n                <DiagnosticItem label=\"SLAs críticos\" value={String(overdueActivities.filter((a) => {\n                  const daysLate = Math.floor((startOfDay(now).getTime() - parseDateISO(a.dueDate).getTime()) / DAY_MS);\n                  return daysLate >= 3;\n                }).length)} tone={overdueActivities.some((a) => {\n                  const daysLate = Math.floor((startOfDay(now).getTime() - parseDateISO(a.dueDate).getTime()) / DAY_MS);\n                  return daysLate >= 3;\n                }) ? \"danger\" : \"success\"} />\n                <DiagnosticItem label=\"SLAs em risco\" value={String(riskCount)} tone={riskCount > 0 ? \"warning\" : \"success\"} />\n                <DiagnosticItem\n                  label=\"Tipo mais afetado\"\n                  value={hotspotType ? typeLabels[hotspotType[0]] : \"Sem dados\"}\n                  tone=\"neutral\"\n                />\n              </div>\n            </div>\n\n            <div className=\"rounded-[16px] border border-white/14 bg-white/7 p-4\">\n              <p className=\"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-slate-300\">\n                Sugestões rápidas\n              </p>\n              <div className=\"grid gap-2 sm:grid-cols-2 xl:grid-cols-1\">\n                {RAIL_COMMANDS.map((command) => {\n                  const loading = commandLoadingId === command.id;\n                  return (\n                    <button\n                      key={command.id}\n                      onClick={() => handleRunCommand(command.id)}\n                      disabled={loading}\n                      className=\"flex items-center justify-between rounded-[12px] border border-white/14 bg-white/8 px-3 py-2 text-left text-xs text-slate-200 transition-colors duration-120 hover:bg-white/12 disabled:opacity-70\"\n                    >\n                      <span>{command.label}</span>\n                      {loading ? (\n                        <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n                      ) : (\n                        <ArrowRight className=\"h-3.5 w-3.5 text-slate-400\" />\n                      )}\n                    </button>\n                  );\n                })}\n              </div>\n\n              <AnimatePresence>\n                {commandResult && (\n                  <motion.div\n                    initial={{ opacity: 0, y: 4 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: 4 }}\n                    transition={{ duration: 0.14 }}\n                    className={cn(\n                      \"mt-3 rounded-[12px] border px-3 py-2 text-xs\",\n                      commandResult.status === \"success\"\n                        ? \"border-emerald-300/28 bg-emerald-500/14 text-emerald-100\"\n                        : \"border-red-300/30 bg-red-500/14 text-red-100\"\n                    )}\n                  >\n                    {commandResult.text}\n                  </motion.div>\n                )}\n              </AnimatePresence>\n            </div>\n\n            <div className=\"rounded-[16px] border border-white/14 bg-white/7 p-4\">\n              <p className=\"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-slate-300\">\n                Mensagens prontas\n              </p>\n\n              {selectedActivity ? (\n                <SelectedActivityMessages activity={selectedActivity} now={now} />\n              ) : (\n                <div className=\"rounded-[12px] border border-dashed border-white/20 bg-white/6 px-3 py-3 text-xs text-slate-300\">\n                  Selecione uma atividade para ver mensagens sugeridas aqui.\n                </div>\n              )}\n            </div>\n          </div>\n        </aside>\n      </div>\n\n      <AlertDialog\n        open={confirmBulkCompleteOpen}\n        onOpenChange={setConfirmBulkCompleteOpen}\n      >\n        <AlertDialogContent className=\"rounded-[20px]\">\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"font-heading text-xl\">\n              Concluir atividades em lote?\n            </AlertDialogTitle>\n            <AlertDialogDescription className=\"font-body text-sm text-zinc-600\">\n              Essa ação conclui {selectedExecutionIds.length} atividade(s) selecionada(s) e\n              registra o status imediatamente.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel className=\"rounded-full\">\n              Voltar\n            </AlertDialogCancel>\n            <AlertDialogAction\n              className=\"rounded-full bg-zinc-900 text-white hover:bg-zinc-800\"\n              onClick={handleConfirmBulkCompleteActivities}\n            >\n              Confirmar conclusão\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <AlertDialog\n        open={confirmBulkCancelOpen}\n        onOpenChange={setConfirmBulkCancelOpen}\n      >\n        <AlertDialogContent className=\"rounded-[20px]\">\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"font-heading text-xl\">\n              Cancelar atividades em lote?\n            </AlertDialogTitle>\n            <AlertDialogDescription className=\"font-body text-sm text-zinc-600\">\n              Essa ação cancela {selectedExecutionIds.length} atividade(s) selecionada(s) e\n              registra o status imediatamente.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel className=\"rounded-full\">\n              Voltar\n            </AlertDialogCancel>\n            <AlertDialogAction\n              className=\"rounded-full bg-red-600 text-white hover:bg-red-700\"\n              onClick={handleConfirmBulkCancelActivities}\n            >\n              Confirmar cancelamento\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <GeneratedContentModal\n        open={generatedModalOpen}\n        onOpenChange={setGeneratedModalOpen}\n        title={generatedContent.title}\n        content={generatedContent.content}\n      />\n\n      <ActivityDetailsModal\n        open={Boolean(detailsModalActivity)}\n        activity={detailsModalActivity}\n        now={now}\n        onOpenChange={(open) => {\n          if (!open) {\n            setDetailsModalActivityId(null);\n          }\n        }}\n        onSelectIntelligence={(activity) => {\n          setDetailsModalActivityId(null);\n          handleOpenIntelligenceFromActivity(activity);\n        }}\n        onGenerateFollowup={(activity) => {\n          setDetailsModalActivityId(null);\n          handleGenerateFollowup(activity);\n        }}\n      />\n    </motion.div>\n  );\n}\n\nfunction VirtualizedActivityList({\n  items,\n  renderItem,\n  estimateSize = 176,\n}: {\n  items: Activity[];\n  renderItem: (activity: Activity) => React.ReactNode;\n  estimateSize?: number;\n}) {\n  const parentRef = useRef<HTMLDivElement | null>(null);\n  const shouldVirtualize = items.length > 14;\n\n  // eslint-disable-next-line react-hooks/incompatible-library -- TanStack Virtual is intentional here for large lists.\n  const rowVirtualizer = useVirtualizer({\n    count: items.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: () => estimateSize,\n    overscan: 6,\n  });\n\n  if (!shouldVirtualize) {\n    return (\n      <div className=\"space-y-3\">\n        <AnimatePresence initial={false}>\n          {items.map((activity) => (\n            <motion.div\n              key={activity.id}\n              layout\n              initial={{ opacity: 0, y: 6 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -4, scale: 0.995 }}\n              transition={{ duration: 0.16, ease: \"easeOut\" }}\n            >\n              {renderItem(activity)}\n            </motion.div>\n          ))}\n        </AnimatePresence>\n      </div>\n    );\n  }\n\n  const viewportHeight = Math.min(720, Math.max(320, Math.round(items.length * estimateSize)));\n\n  return (\n    <div\n      ref={parentRef}\n      className=\"overflow-auto pr-1\"\n      style={{ height: viewportHeight }}\n    >\n      <div\n        style={{\n          height: `${rowVirtualizer.getTotalSize()}px`,\n          width: \"100%\",\n          position: \"relative\",\n        }}\n      >\n        {rowVirtualizer.getVirtualItems().map((virtualRow) => {\n          const activity = items[virtualRow.index];\n\n          return (\n            <div\n              key={activity.id}\n              data-index={virtualRow.index}\n              ref={rowVirtualizer.measureElement}\n              style={{\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                width: \"100%\",\n                transform: `translateY(${virtualRow.start}px)`,\n              }}\n            >\n              <div className=\"pb-3\">{renderItem(activity)}</div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nfunction ActivitiesCalendarView({\n  now,\n  monthDate,\n  days,\n  selectedDate,\n  activitiesByDate,\n  selectedDayActivities,\n  expandedActivityId,\n  highlightedPostponedId,\n  selectedActivityIds,\n  canExecuteActions,\n  canCancelActions,\n  activityFeedback,\n  onPreviousMonth,\n  onNextMonth,\n  onGoToToday,\n  onSelectDate,\n  onToggleExpand,\n  onComplete,\n  onCancel,\n  onPostpone,\n  onToggleSelectActivity,\n  onSelectIntelligence,\n  onGenerateFollowup,\n  onOpenActivityDetails,\n}: {\n  now: Date;\n  monthDate: Date;\n  days: Date[];\n  selectedDate: string;\n  activitiesByDate: Map<string, Activity[]>;\n  selectedDayActivities: Activity[];\n  expandedActivityId: string | null;\n  highlightedPostponedId: string | null;\n  selectedActivityIds: Set<string>;\n  canExecuteActions: boolean;\n  canCancelActions: boolean;\n  activityFeedback: Record<string, ActivityFeedback>;\n  onPreviousMonth: () => void;\n  onNextMonth: () => void;\n  onGoToToday: () => void;\n  onSelectDate: (date: Date) => void;\n  onToggleExpand: (activityId: string) => void;\n  onComplete: (activityId: string, notes?: string) => void;\n  onCancel: (activityId: string) => void;\n  onPostpone: (activityId: string, newDate: string) => void;\n  onToggleSelectActivity: (activityId: string) => void;\n  onSelectIntelligence: (activityId: string) => void;\n  onGenerateFollowup: (activity: Activity) => void;\n  onOpenActivityDetails: (activity: Activity) => void;\n}) {\n  const monthStart = startOfMonth(monthDate);\n  const selectedDateLabel = formatDateFull(selectedDate);\n  const weekdayLabels = [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sáb\"];\n  const todayIso = toISODate(startOfDay(now));\n\n  return (\n    <section className=\"rounded-[20px] border border-zinc-200 bg-white p-4 shadow-sm md:p-5\">\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div>\n          <h3 className=\"font-heading text-lg font-semibold text-zinc-900\">Agenda em calendário</h3>\n          <p className=\"font-body text-xs text-zinc-500\">\n            Visualização mensal para planejar a execução por dia.\n          </p>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            className=\"rounded-full border-zinc-200 text-xs\"\n            onClick={onGoToToday}\n          >\n            Hoje\n          </Button>\n          <div className=\"flex items-center gap-2 rounded-full border border-zinc-200 bg-zinc-50/90 p-1\">\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"h-8 w-8 rounded-full text-zinc-600\"\n              onClick={onPreviousMonth}\n              aria-label=\"Mês anterior\"\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n            <span className=\"min-w-[164px] text-center font-heading text-sm font-semibold text-zinc-900 capitalize\">\n              {formatMonthTitle(monthDate)}\n            </span>\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              className=\"h-8 w-8 rounded-full text-zinc-600\"\n              onClick={onNextMonth}\n              aria-label=\"Próximo mês\"\n            >\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"mt-4 overflow-hidden rounded-[16px] border border-zinc-200 bg-white\">\n        <div className=\"grid grid-cols-7 border-b border-zinc-200 bg-zinc-50/80\">\n          {weekdayLabels.map((label) => (\n            <div\n              key={label}\n              className=\"px-2 py-2 text-center text-[11px] font-semibold uppercase tracking-[0.06em] text-zinc-500\"\n            >\n              {label}\n            </div>\n          ))}\n        </div>\n\n        <div className=\"grid grid-cols-7 gap-px bg-zinc-200/80\">\n          {days.map((date) => {\n            const iso = toISODate(date);\n            const activities = activitiesByDate.get(iso) || [];\n            const inCurrentMonth = date.getMonth() === monthStart.getMonth();\n            const isSelected = iso === selectedDate;\n            const isToday = iso === todayIso;\n\n            return (\n              <div\n                key={iso}\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => onSelectDate(date)}\n                onKeyDown={(event) => {\n                  if (event.key === \"Enter\" || event.key === \" \") {\n                    event.preventDefault();\n                    onSelectDate(date);\n                  }\n                }}\n                className={cn(\n                  \"min-h-[116px] bg-white px-2 py-2 text-left transition-colors duration-120 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-brand/35\",\n                  \"hover:bg-zinc-50\",\n                  !inCurrentMonth && \"bg-zinc-50/70 text-zinc-400\",\n                  isSelected && \"bg-brand/6 ring-2 ring-inset ring-brand/35\",\n                  isToday && !isSelected && \"ring-1 ring-inset ring-zinc-300\"\n                )}\n                aria-label={`Dia ${date.getDate()} com ${activities.length} atividade${activities.length === 1 ? \"\" : \"s\"}`}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <span\n                    className={cn(\n                      \"inline-flex h-6 min-w-6 items-center justify-center rounded-full px-1.5 text-xs font-semibold\",\n                      isSelected\n                        ? \"bg-brand text-white\"\n                        : isToday\n                          ? \"bg-zinc-900 text-white\"\n                          : \"text-zinc-700\"\n                    )}\n                  >\n                    {date.getDate()}\n                  </span>\n\n                  {activities.length > 0 ? (\n                    <span className=\"rounded-full bg-zinc-100 px-1.5 py-0.5 text-[10px] font-semibold text-zinc-600\">\n                      {activities.length}\n                    </span>\n                  ) : null}\n                </div>\n\n                <div className=\"mt-2 space-y-1\">\n                  {activities.slice(0, 2).map((activity) => (\n                    <button\n                      key={activity.id}\n                      type=\"button\"\n                      onClick={(event) => {\n                        event.stopPropagation();\n                        onSelectDate(date);\n                        onOpenActivityDetails(activity);\n                      }}\n                      className=\"block w-full truncate rounded-[8px] bg-zinc-100/85 px-1.5 py-1 text-left text-[10px] text-zinc-700 transition-colors duration-120 hover:bg-zinc-200/70\"\n                    >\n                      {activity.dueTime ? `${activity.dueTime} ` : \"\"}\n                      {activity.title}\n                    </button>\n                  ))}\n\n                  {activities.length > 2 ? (\n                    <button\n                      type=\"button\"\n                      onClick={(event) => {\n                        event.stopPropagation();\n                        onSelectDate(date);\n                      }}\n                      className=\"text-[10px] font-medium text-brand hover:underline\"\n                    >\n                      +{activities.length - 2} atividades\n                    </button>\n                  ) : null}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      <div className=\"mt-4 rounded-[16px] border border-zinc-200 bg-zinc-50/70 p-3 md:p-4\">\n        <div className=\"mb-3 flex items-center justify-between\">\n          <div>\n            <p className=\"font-heading text-sm font-semibold text-zinc-900\">\n              {selectedDateLabel}\n            </p>\n            <p className=\"text-xs text-zinc-500\">\n              {selectedDayActivities.length}{\" \"}\n              {selectedDayActivities.length === 1 ? \"atividade\" : \"atividades\"} no dia\n            </p>\n          </div>\n        </div>\n\n        {selectedDayActivities.length === 0 ? (\n          <div className=\"rounded-[12px] border border-dashed border-zinc-200 bg-white px-3 py-4 text-sm text-zinc-500\">\n            Sem atividades para este dia.\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            <AnimatePresence initial={false}>\n              {selectedDayActivities.map((activity) => (\n                <motion.div\n                  key={activity.id}\n                  layout\n                  initial={{ opacity: 0, y: 6 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -4, scale: 0.995 }}\n                  transition={{ duration: 0.16, ease: \"easeOut\" }}\n                >\n                  <ExecutionActivityCard\n                    activity={activity}\n                    now={now}\n                    isExpanded={expandedActivityId === activity.id}\n                    isHighlighted={highlightedPostponedId === activity.id}\n                    selected={selectedActivityIds.has(activity.id)}\n                    canExecuteActions={canExecuteActions}\n                    canCancelActions={canCancelActions}\n                    feedback={activityFeedback[activity.id]}\n                    onToggleExpand={() => onToggleExpand(activity.id)}\n                    onToggleSelect={() => onToggleSelectActivity(activity.id)}\n                    onComplete={(notes) => onComplete(activity.id, notes)}\n                    onCancel={() => onCancel(activity.id)}\n                    onPostpone={(newDate) => onPostpone(activity.id, newDate)}\n                    onSelectIntelligence={() => onSelectIntelligence(activity.id)}\n                    onGenerateFollowup={() => onGenerateFollowup(activity)}\n                  />\n                </motion.div>\n              ))}\n            </AnimatePresence>\n          </div>\n        )}\n      </div>\n    </section>\n  );\n}\n\nfunction ActivityDetailsModal({\n  open,\n  activity,\n  now,\n  onOpenChange,\n  onSelectIntelligence,\n  onGenerateFollowup,\n}: {\n  open: boolean;\n  activity: Activity | null;\n  now: Date;\n  onOpenChange: (open: boolean) => void;\n  onSelectIntelligence: (activity: Activity) => void;\n  onGenerateFollowup: (activity: Activity) => void;\n}) {\n  if (!activity) return null;\n\n  const statusChip = getStatusChip(activity, now);\n  const insight = getActivityInsight(activity, now);\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-[680px] rounded-[20px] border-zinc-200 p-5 sm:p-6\">\n        <DialogHeader>\n          <DialogTitle className=\"font-heading text-xl font-semibold text-zinc-900\">\n            {activity.title}\n          </DialogTitle>\n          <DialogDescription className=\"text-sm text-zinc-500\">\n            {activity.clientName || activity.opportunityTitle || \"Atividade comercial\"}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <span className={cn(\"rounded-full border px-2.5 py-1 text-xs font-semibold\", statusChip.className)}>\n              {statusChip.label}\n            </span>\n            <span className=\"rounded-full border border-zinc-200 bg-zinc-50 px-2.5 py-1 text-xs font-medium text-zinc-600\">\n              {typeLabels[activity.type]}\n            </span>\n            <span className=\"rounded-full border border-zinc-200 bg-zinc-50 px-2.5 py-1 text-xs font-medium text-zinc-600\">\n              {getRelativeTimeLabel(activity, now)}\n            </span>\n          </div>\n\n          <div className=\"grid gap-2 sm:grid-cols-2\">\n            <div className=\"rounded-[12px] border border-zinc-200 bg-zinc-50/80 px-3 py-2.5\">\n              <p className=\"text-[11px] font-semibold uppercase tracking-wide text-zinc-500\">Responsável</p>\n              <p className=\"mt-1 text-sm text-zinc-700\">{activity.responsibleName}</p>\n            </div>\n            <div className=\"rounded-[12px] border border-zinc-200 bg-zinc-50/80 px-3 py-2.5\">\n              <p className=\"text-[11px] font-semibold uppercase tracking-wide text-zinc-500\">Prazo</p>\n              <p className=\"mt-1 text-sm text-zinc-700\">\n                {formatDateBR(activity.dueDate)}\n                {activity.dueTime ? ` · ${activity.dueTime}` : \"\"}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"rounded-[14px] border border-zinc-200 bg-white p-3.5\">\n            <p className=\"text-xs font-semibold uppercase tracking-wide text-zinc-500\">Descrição</p>\n            <p className=\"mt-1 text-sm text-zinc-700\">\n              {activity.description || \"Sem descrição detalhada para esta atividade.\"}\n            </p>\n          </div>\n\n          <div className=\"rounded-[14px] border border-zinc-200 bg-zinc-50/80 p-3.5\">\n            <p className=\"text-xs font-semibold uppercase tracking-wide text-zinc-500\">\n              Recomendação da Menux Intelligence\n            </p>\n            <p className=\"mt-1 text-sm text-zinc-700\">{insight.nextStep}</p>\n            <p className=\"mt-2 text-xs text-zinc-500\">{insight.risk}</p>\n          </div>\n        </div>\n\n        <div className=\"mt-1 flex flex-wrap items-center justify-end gap-2\">\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            className=\"h-9 rounded-full\"\n            onClick={() => onSelectIntelligence(activity)}\n          >\n            <Sparkles className=\"h-3.5 w-3.5\" />\n            Menux Intelligence\n          </Button>\n          <Button\n            size=\"sm\"\n            className=\"h-9 rounded-full bg-zinc-900 text-white hover:bg-zinc-800\"\n            onClick={() => onGenerateFollowup(activity)}\n          >\n            Gerar follow-up\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nfunction ExecutionSection({\n  title,\n  count,\n  collapsed,\n  onToggle,\n  tone,\n  children,\n}: {\n  title: string;\n  count: number;\n  collapsed: boolean;\n  onToggle: () => void;\n  tone: \"violet\" | \"danger\" | \"warning\" | \"neutral\";\n  children: React.ReactNode;\n}) {\n  const toneStyles: Record<typeof tone, { badge: string; icon: string; border: string }> = {\n    violet: {\n      badge: \"border border-cyan-300/25 bg-cyan-500/18 text-cyan-100\",\n      icon: \"text-cyan-200\",\n      border: \"border-cyan-300/20\",\n    },\n    danger: {\n      badge: \"bg-red-100 text-red-700\",\n      icon: \"text-red-600\",\n      border: \"border-red-200/70\",\n    },\n    warning: {\n      badge: \"bg-amber-100 text-amber-700\",\n      icon: \"text-amber-600\",\n      border: \"border-amber-200/70\",\n    },\n    neutral: {\n      badge: \"bg-zinc-100 text-zinc-700\",\n      icon: \"text-zinc-500\",\n      border: \"border-zinc-200\",\n    },\n  };\n\n  const style = toneStyles[tone];\n  const isIntelligenceTone = tone === \"violet\";\n\n  return (\n    <section\n      className={cn(\n        \"rounded-[20px] border p-5 shadow-sm md:p-6\",\n        style.border,\n        isIntelligenceTone\n          ? \"bg-slate-900/62 shadow-[0_12px_24px_-20px_rgba(2,6,23,0.82)]\"\n          : \"bg-white\"\n      )}\n    >\n      <button\n        onClick={onToggle}\n        className=\"flex w-full items-center justify-between\"\n      >\n        <div className=\"flex items-center gap-2\">\n          {tone === \"violet\" ? (\n            <Sparkles className={cn(\"h-4 w-4\", style.icon)} />\n          ) : tone === \"danger\" ? (\n            <AlertTriangle className={cn(\"h-4 w-4\", style.icon)} />\n          ) : tone === \"warning\" ? (\n            <CircleAlert className={cn(\"h-4 w-4\", style.icon)} />\n          ) : (\n            <CircleDashed className={cn(\"h-4 w-4\", style.icon)} />\n          )}\n          <h3\n            className={cn(\n              \"font-heading text-[15px] font-semibold\",\n              isIntelligenceTone ? \"text-slate-100\" : \"text-zinc-900\"\n            )}\n          >\n            {title}\n          </h3>\n          <span className={cn(\"rounded-full px-2 py-0.5 text-xs font-semibold\", style.badge)}>\n            {count}\n          </span>\n        </div>\n        {collapsed ? (\n          <ChevronDown className={cn(\"h-4 w-4\", isIntelligenceTone ? \"text-slate-300\" : \"text-zinc-500\")} />\n        ) : (\n          <ChevronUp className={cn(\"h-4 w-4\", isIntelligenceTone ? \"text-slate-300\" : \"text-zinc-500\")} />\n        )}\n      </button>\n\n      <AnimatePresence initial={false}>\n        {!collapsed && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.18, ease: \"easeOut\" }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"pt-4\">{children}</div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </section>\n  );\n}\n\nfunction InlineSectionError({\n  message,\n  onRetry,\n}: {\n  message: string;\n  onRetry: () => void;\n}) {\n  return (\n    <div className=\"rounded-[14px] border border-red-200 bg-red-50 px-4 py-3\">\n      <div className=\"flex items-center justify-between gap-3\">\n        <p className=\"text-sm text-red-700\">{message}</p>\n        <Button\n          size=\"sm\"\n          variant=\"outline\"\n          className=\"h-7 rounded-full border-red-300 text-red-700\"\n          onClick={onRetry}\n        >\n          Tentar novamente\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nfunction InlineFeedbackMessage({\n  tone,\n  message,\n  className,\n}: {\n  tone: \"success\" | \"error\" | \"info\";\n  message: string;\n  className?: string;\n}) {\n  return (\n    <div\n      className={cn(\n        \"rounded-[12px] border px-3 py-2 text-xs\",\n        tone === \"success\" && \"border-emerald-200 bg-emerald-50 text-emerald-700\",\n        tone === \"error\" && \"border-red-200 bg-red-50 text-red-700\",\n        tone === \"info\" && \"border-blue-200 bg-blue-50 text-blue-700\",\n        className\n      )}\n    >\n      {message}\n    </div>\n  );\n}\n\nconst ExecutionActivityCard = memo(function ExecutionActivityCard({\n  activity,\n  now,\n  feedback,\n  isExpanded,\n  isHighlighted,\n  selected,\n  canExecuteActions,\n  canCancelActions,\n  onToggleExpand,\n  onToggleSelect,\n  onComplete,\n  onCancel,\n  onPostpone,\n  onSelectIntelligence,\n  onGenerateFollowup,\n}: {\n  activity: Activity;\n  now: Date;\n  feedback?: ActivityFeedback;\n  isExpanded: boolean;\n  isHighlighted: boolean;\n  selected: boolean;\n  canExecuteActions: boolean;\n  canCancelActions: boolean;\n  onToggleExpand: () => void;\n  onToggleSelect: () => void;\n  onComplete: (notes?: string) => void;\n  onCancel: () => void;\n  onPostpone: (newDate: string) => void;\n  onSelectIntelligence: () => void;\n  onGenerateFollowup: () => void;\n}) {\n  const [postponeOpen, setPostponeOpen] = useState(false);\n  const [insightOpen, setInsightOpen] = useState(false);\n  const [completeOpen, setCompleteOpen] = useState(false);\n  const [confirmCancelOpen, setConfirmCancelOpen] = useState(false);\n  const [completionNotes, setCompletionNotes] = useState(\"\");\n  const [customPostponeDate, setCustomPostponeDate] = useState(\"\");\n  const [copied, setCopied] = useState(false);\n  const [copyError, setCopyError] = useState<string | null>(null);\n\n  const TypeIcon = typeIconComponents[activity.type];\n  const chip = getStatusChip(activity, now);\n  const insight = getActivityInsight(activity, now);\n\n  const isBusy =\n    feedback?.state === \"loading-complete\" || feedback?.state === \"loading-cancel\" || feedback?.state === \"loading-postpone\";\n\n  const handleCopyMessage = async () => {\n    try {\n      await navigator.clipboard.writeText(insight.message);\n      setCopied(true);\n      setCopyError(null);\n      setTimeout(() => setCopied(false), 1200);\n    } catch {\n      setCopied(false);\n      setCopyError(\"Não foi possível copiar agora.\");\n    }\n  };\n\n  return (\n    <article\n      id={`activity-card-${activity.id}`}\n      className={cn(\n        \"rounded-[20px] border border-zinc-200 bg-white p-5 transition-all duration-140 md:p-6\",\n        \"hover:-translate-y-[2px] hover:shadow-[0_14px_28px_-18px_rgba(15,23,42,0.48)]\",\n        isHighlighted && \"ring-2 ring-brand/35\",\n        feedback?.state === \"complete-success\" && \"border-emerald-300 bg-emerald-50/40\"\n      )}\n      onClick={onToggleExpand}\n    >\n      <div className=\"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between\">\n        <div className=\"min-w-0 flex items-start gap-3.5\">\n          <div\n            className={cn(\n              \"mt-0.5 flex h-11 w-11 shrink-0 items-center justify-center rounded-[13px]\",\n              typeColors[activity.type].bg,\n              typeColors[activity.type].text\n            )}\n          >\n            <TypeIcon className=\"h-4 w-4\" />\n          </div>\n\n          <div className=\"min-w-0\">\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <h4 className=\"truncate font-heading text-[17px] font-semibold text-zinc-900\">\n                {activity.title}\n              </h4>\n              <span className={cn(\"rounded-full border px-2 py-0.5 text-[11px] font-medium\", chip.className)}>\n                {chip.label}\n              </span>\n            </div>\n\n            <div className=\"mt-2 flex flex-wrap items-center gap-2 text-sm text-zinc-500\">\n              <span className=\"truncate max-w-[420px]\">\n                {activity.clientId ? (\n                  <Link href={`/clients?clientId=${activity.clientId}`} className=\"hover:text-brand hover:underline\">\n                    {activity.clientName || \"Sem nome\"}\n                  </Link>\n                ) : activity.opportunityId ? (\n                  <Link href={`/pipes?opportunityId=${activity.opportunityId}`} className=\"hover:text-brand hover:underline\">\n                    {activity.opportunityTitle || \"Sem título\"}\n                  </Link>\n                ) : (\n                  activity.clientName || activity.opportunityTitle || \"Sem contexto\"\n                )}\n              </span>\n              <span className=\"text-zinc-300\">•</span>\n              <span>{typeLabels[activity.type]}</span>\n            </div>\n\n            <div className=\"mt-3 flex items-center gap-2\">\n              <Avatar size=\"sm\">\n                <AvatarFallback className=\"bg-brand/10 text-[10px] font-semibold text-brand\">\n                  {initials(activity.responsibleName)}\n                </AvatarFallback>\n              </Avatar>\n              <span className=\"text-xs text-zinc-600\">{activity.responsibleName}</span>\n              <span className=\"text-zinc-300\">•</span>\n              <span className=\"text-xs text-zinc-500\">\n                {formatDateBR(activity.dueDate)}\n                {activity.dueTime ? ` ${activity.dueTime}` : \"\"}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"text-left lg:text-right\">\n          <p className=\"text-xs font-medium text-zinc-500\">{getRelativeTimeLabel(activity, now)}</p>\n        </div>\n      </div>\n\n      <div\n        className=\"mt-4 flex flex-wrap items-center gap-2.5\"\n        onClick={(event) => event.stopPropagation()}\n      >\n        <label className=\"inline-flex items-center gap-2 rounded-full border border-zinc-200 bg-zinc-50 px-3 py-2 text-xs font-medium text-zinc-600\">\n          <Checkbox\n            checked={selected}\n            onCheckedChange={() => onToggleSelect()}\n            disabled={!canExecuteActions}\n          />\n          Selecionar\n        </label>\n\n        <Popover open={completeOpen} onOpenChange={setCompleteOpen}>\n          <PopoverTrigger asChild>\n            <Button\n              size=\"sm\"\n              className=\"h-9 rounded-full bg-zinc-900 px-4 text-xs text-white hover:bg-zinc-800\"\n              disabled={isBusy || !canExecuteActions}\n            >\n              {feedback?.state === \"loading-complete\" ? (\n                <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n              ) : (\n                <CheckCircle2 className=\"h-3.5 w-3.5\" />\n              )}\n              Concluir\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent\n            align=\"start\"\n            sideOffset={8}\n            className=\"w-[280px] rounded-[16px] border-zinc-200 p-3\"\n            onClick={(event) => event.stopPropagation()}\n          >\n            <p className=\"mb-2 text-xs font-semibold uppercase tracking-wide text-zinc-500\">\n              Concluir atividade\n            </p>\n            <textarea\n              placeholder=\"Observações da conclusão (opcional)\"\n              value={completionNotes}\n              onChange={(event) => setCompletionNotes(event.target.value)}\n              className=\"w-full resize-none rounded-[10px] border border-zinc-200 bg-zinc-50 px-3 py-2 text-sm text-zinc-700 placeholder:text-zinc-400 focus:border-brand/40 focus:outline-none focus:ring-2 focus:ring-brand/20\"\n              rows={3}\n            />\n            <div className=\"mt-2 flex gap-2\">\n              <Button\n                size=\"sm\"\n                className=\"h-8 flex-1 rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800\"\n                onClick={() => {\n                  onComplete(completionNotes.trim() || undefined);\n                  setCompleteOpen(false);\n                  setCompletionNotes(\"\");\n                }}\n                disabled={!canExecuteActions}\n              >\n                <CheckCircle2 className=\"h-3.5 w-3.5\" />\n                Confirmar\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                className=\"h-8 rounded-full text-xs\"\n                onClick={() => {\n                  setCompleteOpen(false);\n                  setCompletionNotes(\"\");\n                }}\n              >\n                Cancelar\n              </Button>\n            </div>\n          </PopoverContent>\n        </Popover>\n\n        <Popover open={postponeOpen} onOpenChange={setPostponeOpen}>\n          <PopoverTrigger asChild>\n            <Button\n              size=\"sm\"\n              variant=\"outline\"\n              className=\"h-9 rounded-full px-4 text-xs\"\n              disabled={isBusy || !canExecuteActions}\n            >\n              {feedback?.state === \"loading-postpone\" ? (\n                <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\n              ) : (\n                <CalendarClock className=\"h-3.5 w-3.5\" />\n              )}\n              Adiar\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent\n            align=\"start\"\n            sideOffset={8}\n            className=\"w-[250px] rounded-[16px] border-zinc-200 p-3\"\n            onClick={(event) => event.stopPropagation()}\n          >\n            <p className=\"mb-2 text-xs font-semibold uppercase tracking-wide text-zinc-500\">\n              Reagendar\n            </p>\n            <div className=\"space-y-2\">\n              {[1, 3, 7].map((days) => (\n                <button\n                  key={days}\n                  onClick={() => {\n                    onPostpone(toISODate(addDays(startOfDay(now), days)));\n                    setPostponeOpen(false);\n                  }}\n                  className=\"flex w-full items-center justify-between rounded-[10px] border border-zinc-200 px-3 py-2 text-sm text-zinc-700 transition-colors hover:bg-zinc-50\"\n                >\n                  <span>+{days} {days === 1 ? \"dia\" : \"dias\"}</span>\n                  <ArrowRight className=\"h-3.5 w-3.5 text-zinc-400\" />\n                </button>\n              ))}\n            </div>\n            <div className=\"mt-3 space-y-2\">\n              <Label className=\"text-xs text-zinc-500\">Escolher data</Label>\n              <Input\n                type=\"date\"\n                value={customPostponeDate}\n                min={toISODate(startOfDay(now))}\n                onChange={(event) => setCustomPostponeDate(event.target.value)}\n                className=\"h-9 rounded-[10px]\"\n              />\n              <Button\n                size=\"sm\"\n                className=\"h-8 w-full rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800\"\n                disabled={!customPostponeDate || !canExecuteActions}\n                onClick={() => {\n                  onPostpone(customPostponeDate);\n                  setPostponeOpen(false);\n                  setCustomPostponeDate(\"\");\n                }}\n              >\n                Confirmar data\n              </Button>\n            </div>\n          </PopoverContent>\n        </Popover>\n\n        <Popover open={insightOpen} onOpenChange={setInsightOpen}>\n          <PopoverTrigger asChild>\n            <Button\n              size=\"sm\"\n              variant=\"outline\"\n              className=\"menux-intelligence-btn-soft h-9 rounded-full px-4 text-xs text-slate-100\"\n              onClick={onSelectIntelligence}\n            >\n              <Sparkles className=\"h-3.5 w-3.5 text-cyan-100\" />\n              Menux Intelligence\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent\n            align=\"start\"\n            sideOffset={8}\n            className=\"w-[min(92vw,340px)] rounded-[16px] border-white/14 bg-slate-950/94 p-3 text-slate-100 shadow-2xl shadow-black/40 backdrop-blur-xl\"\n            onClick={(event) => event.stopPropagation()}\n          >\n            <p className=\"mb-2 text-xs font-semibold uppercase tracking-wide text-slate-300\">\n              Sugestões da Menux Intelligence\n            </p>\n            <div className=\"space-y-2 rounded-[12px] border border-white/14 bg-white/8 p-2.5\">\n              <p className=\"text-[11px] font-medium text-slate-200\">Mensagem pronta</p>\n              <p className=\"text-xs leading-relaxed text-slate-300\">{insight.message}</p>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                className=\"h-7 rounded-full border-white/14 bg-white/7 px-2.5 text-[11px] text-slate-100 hover:bg-white/11\"\n                onClick={handleCopyMessage}\n              >\n                <Copy className=\"h-3 w-3\" />\n                {copied ? \"Copiado\" : \"Copiar\"}\n              </Button>\n            </div>\n            <div className=\"mt-2 rounded-[12px] border border-white/14 bg-white/8 p-2.5\">\n              <p className=\"text-[11px] font-medium text-slate-200\">Próximo passo</p>\n              <p className=\"text-xs text-slate-300\">{insight.nextStep}</p>\n            </div>\n            <div className=\"mt-2 rounded-[12px] border border-white/14 bg-white/8 p-2.5\">\n              <p className=\"text-[11px] font-medium text-slate-200\">Risco se ignorar</p>\n              <p className=\"text-xs text-slate-300\">{insight.risk}</p>\n            </div>\n            {copyError ? (\n              <p className=\"mt-2 text-[11px] text-red-300\">{copyError}</p>\n            ) : null}\n          </PopoverContent>\n        </Popover>\n\n        <div className=\"basis-full\" />\n\n        <div className=\"flex w-full flex-wrap items-center justify-between gap-2\">\n          <div className=\"flex flex-wrap items-center gap-2\">\n            {feedback?.state === \"complete-success\" && (\n              <span className=\"rounded-full bg-emerald-100 px-2.5 py-1 text-[11px] font-medium text-emerald-700\">\n                {feedback.message || \"Concluída\"}\n              </span>\n            )}\n\n            {feedback?.state === \"postpone-success\" && (\n              <span className=\"rounded-full bg-blue-100 px-2.5 py-1 text-[11px] font-medium text-blue-700\">\n                {feedback.message || \"Reagendada\"}\n              </span>\n            )}\n\n            {feedback?.state === \"error\" && (\n              <span className=\"rounded-full bg-red-100 px-2.5 py-1 text-[11px] font-medium text-red-700\">\n                {feedback.message || \"Falha ao executar\"}\n              </span>\n            )}\n          </div>\n\n          <div className=\"flex flex-wrap items-center gap-1.5\">\n            <Button\n              size=\"sm\"\n              variant=\"ghost\"\n              className=\"h-8 rounded-full px-3 text-xs text-zinc-600 hover:bg-zinc-100\"\n              onClick={onToggleExpand}\n            >\n              {isExpanded ? \"Ocultar detalhes\" : \"Ver detalhes\"}\n            </Button>\n\n            {activity.status !== \"completed\" && activity.status !== \"cancelled\" && (\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                className=\"h-8 rounded-full px-3 text-xs text-red-500 hover:bg-red-50 hover:text-red-600\"\n                disabled={isBusy || !canCancelActions}\n                onClick={() => setConfirmCancelOpen(true)}\n              >\n                <XCircle className=\"h-3.5 w-3.5\" />\n                Cancelar\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <AlertDialog open={confirmCancelOpen} onOpenChange={setConfirmCancelOpen}>\n        <AlertDialogContent className=\"rounded-[20px]\">\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"font-heading text-xl\">\n              Cancelar atividade?\n            </AlertDialogTitle>\n            <AlertDialogDescription className=\"font-body text-sm text-zinc-600\">\n              Esta ação define a atividade como cancelada e interrompe o ciclo de execução.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel className=\"rounded-full\">\n              Voltar\n            </AlertDialogCancel>\n            <AlertDialogAction\n              className=\"rounded-full bg-red-600 text-white hover:bg-red-700\"\n              onClick={onCancel}\n            >\n              Confirmar cancelamento\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <AnimatePresence initial={false}>\n        {isExpanded && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.18, ease: \"easeOut\" }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"mt-3 rounded-[14px] border border-zinc-200 bg-zinc-50/80 p-3.5\">\n              <div className=\"grid gap-3 lg:grid-cols-3\">\n                <div className=\"lg:col-span-2\">\n                  <p className=\"text-xs font-semibold uppercase tracking-wide text-zinc-500\">\n                    Descrição\n                  </p>\n                  <p className=\"mt-1 text-sm text-zinc-700\">\n                    {activity.description || \"Sem descrição detalhada para esta atividade.\"}\n                  </p>\n\n                  {activity.completionNotes && (\n                    <>\n                      <p className=\"mt-3 text-xs font-semibold uppercase tracking-wide text-zinc-500\">\n                        Notas de conclusão\n                      </p>\n                      <p className=\"mt-1 rounded-[8px] border border-emerald-200 bg-emerald-50/60 px-2.5 py-2 text-sm text-emerald-800\">\n                        {activity.completionNotes}\n                      </p>\n                    </>\n                  )}\n\n                  <p className=\"mt-3 text-xs font-semibold uppercase tracking-wide text-zinc-500\">\n                    Checklist de preparação\n                  </p>\n                  <ul className=\"mt-1.5 space-y-1.5\">\n                    {getActivityChecklist(activity).map((item) => (\n                      <li key={item} className=\"flex items-center gap-2 text-sm text-zinc-700\">\n                        <span className=\"inline-block h-1.5 w-1.5 shrink-0 rounded-full bg-zinc-400\" />\n                        <span>{item}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n\n                <div>\n                  <p className=\"text-xs font-semibold uppercase tracking-wide text-zinc-500\">\n                    Histórico curto\n                  </p>\n                  <div className=\"mt-1.5 space-y-2 text-sm text-zinc-700\">\n                    <div className=\"rounded-[10px] border border-zinc-200 bg-white px-2.5 py-2\">\n                      <p className=\"text-xs text-zinc-500\">Criada em</p>\n                      <p>{formatDateBR(activity.createdAt.slice(0, 10))}</p>\n                    </div>\n                    <div className=\"rounded-[10px] border border-zinc-200 bg-white px-2.5 py-2\">\n                      <p className=\"text-xs text-zinc-500\">Prazo atual</p>\n                      <p>\n                        {formatDateBR(activity.dueDate)}\n                        {activity.dueTime ? ` · ${activity.dueTime}` : \"\"}\n                      </p>\n                    </div>\n                  </div>\n\n                  <Button\n                    size=\"sm\"\n                    className=\"mt-3 h-8 w-full rounded-full border border-cyan-300/22 bg-cyan-500/18 text-xs text-cyan-50 hover:bg-cyan-500/28\"\n                    onClick={onGenerateFollowup}\n                  >\n                    <Sparkles className=\"h-3.5 w-3.5\" />\n                    Gerar mensagem de follow-up\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </article>\n  );\n});\n\nconst SelectedActivityMessages = memo(function SelectedActivityMessages({\n  activity,\n  now,\n}: {\n  activity: Activity;\n  now: Date;\n}) {\n  const [copiedId, setCopiedId] = useState<string | null>(null);\n  const [copyError, setCopyError] = useState<string | null>(null);\n\n  const insight = getActivityInsight(activity, now);\n\n  const templates = [\n    {\n      id: \"msg-1\",\n      title: \"Mensagem principal\",\n      body: insight.message,\n    },\n    {\n      id: \"msg-2\",\n      title: \"Próximo passo\",\n      body: insight.nextStep,\n    },\n    {\n      id: \"msg-3\",\n      title: \"Risco se ignorar\",\n      body: insight.risk,\n    },\n  ];\n\n  const handleCopy = async (id: string, text: string) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedId(id);\n      setCopyError(null);\n      setTimeout(() => setCopiedId(null), 1200);\n    } catch {\n      setCopiedId(null);\n      setCopyError(\"Não foi possível copiar o conteúdo.\");\n    }\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"rounded-[12px] border border-white/14 bg-white/8 px-3 py-2.5\">\n        <p className=\"truncate text-xs font-medium text-slate-100\">{activity.title}</p>\n        <p className=\"mt-0.5 text-[11px] text-slate-400\">\n          {activity.clientName || activity.opportunityTitle || \"Sem contexto\"}\n        </p>\n      </div>\n\n      {templates.map((template) => (\n        <div key={template.id} className=\"rounded-[12px] border border-white/14 bg-white/8 px-3 py-2.5\">\n          <p className=\"text-[11px] font-semibold uppercase tracking-wide text-slate-300\">\n            {template.title}\n          </p>\n          <p className=\"mt-1 text-xs leading-relaxed text-slate-200\">{template.body}</p>\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            className=\"mt-2 h-7 rounded-full border-white/14 bg-white/7 px-2.5 text-[11px] text-slate-100 hover:bg-white/11\"\n            onClick={() => handleCopy(template.id, template.body)}\n          >\n            <Copy className=\"h-3 w-3\" />\n            {copiedId === template.id ? \"Copiado\" : \"Copiar\"}\n          </Button>\n        </div>\n      ))}\n\n      {copyError ? (\n        <p className=\"text-[11px] text-red-300\">{copyError}</p>\n      ) : null}\n    </div>\n  );\n});\n\nfunction DiagnosticItem({\n  label,\n  value,\n  tone,\n}: {\n  label: string;\n  value: string;\n  tone: \"success\" | \"warning\" | \"danger\" | \"neutral\";\n}) {\n  const toneClass: Record<typeof tone, string> = {\n    success: \"text-emerald-100\",\n    warning: \"text-amber-100\",\n    danger: \"text-red-100\",\n    neutral: \"text-slate-100\",\n  };\n\n  return (\n    <div className=\"flex items-center justify-between rounded-[10px] border border-white/10 bg-white/7 px-2.5 py-2\">\n      <span className=\"text-slate-300\">{label}</span>\n      <span className={cn(\"font-semibold\", toneClass[tone])}>{value}</span>\n    </div>\n  );\n}\n\nfunction SummaryMetric({\n  label,\n  value,\n  accent = \"neutral\",\n}: {\n  label: string;\n  value: string;\n  accent?: \"neutral\" | \"danger\" | \"success\";\n}) {\n  return (\n    <div className=\"rounded-[14px] border border-zinc-200 bg-zinc-50/70 p-3\">\n      <p className=\"text-[11px] font-semibold uppercase tracking-wide text-zinc-500\">{label}</p>\n      <p\n        className={cn(\n          \"mt-1 font-heading text-2xl font-semibold\",\n          accent === \"danger\"\n            ? \"text-red-700\"\n            : accent === \"success\"\n              ? \"text-emerald-700\"\n              : \"text-zinc-900\"\n        )}\n      >\n        {value}\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/shared/filters-panel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useMemo, useEffect, useCallback } from \"react\";\nimport {\n  X,\n  Filter,\n  Calendar,\n  DollarSign,\n  User,\n  Tag,\n  Flame,\n  Thermometer,\n  Snowflake,\n  Heart,\n  Activity,\n  CheckSquare,\n  BarChart3,\n  Save,\n  Bookmark,\n  AlertTriangle,\n  TimerReset,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { CurrencyInput } from \"@/components/ui/masked-inputs\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetFooter,\n} from \"@/components/ui/sheet\";\nimport { useUIStore } from \"@/stores/ui-store\";\n\n// ── Types ───────────────────────────────────────────────────────────────────\ntype FilterContext = \"pipes\" | \"clients\" | \"activities\" | \"finance\";\n\ninterface FiltersPanelProps {\n  context: FilterContext;\n  onApplyFilters?: (filters: Record<string, unknown>) => void;\n}\n\n// ── Saved Filter Types ──────────────────────────────────────────────────────\ninterface SavedFilter {\n  id: string;\n  name: string;\n  filters: PipesFilterState | ClientsFilterState | ActivitiesFilterState | FinanceFilterState;\n}\n\nconst MAX_SAVED_FILTERS = 10;\nconst FILTERS_APPLIED_EVENT = \"flow:filters-applied\";\n\nfunction getSavedFiltersKey(context: FilterContext) {\n  return `flow-saved-filters-${context}`;\n}\n\nfunction getActiveFilterCountKey(context: FilterContext) {\n  return `flow-active-filters-count-${context}`;\n}\n\nfunction loadSavedFilters(context: FilterContext): SavedFilter[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    const raw = localStorage.getItem(getSavedFiltersKey(context));\n    if (!raw) return [];\n    return JSON.parse(raw) as SavedFilter[];\n  } catch {\n    return [];\n  }\n}\n\nfunction persistSavedFilters(context: FilterContext, filters: SavedFilter[]) {\n  if (typeof window === \"undefined\") return;\n  try {\n    localStorage.setItem(getSavedFiltersKey(context), JSON.stringify(filters));\n  } catch {\n    // Ignore storage errors in mock frontend mode.\n  }\n}\n\nfunction persistActiveFilterCount(context: FilterContext, count: number) {\n  if (typeof window === \"undefined\") return;\n  try {\n    localStorage.setItem(getActiveFilterCountKey(context), String(count));\n  } catch {\n    // Ignore storage errors in mock frontend mode.\n  }\n}\n\n// ── Mock options ────────────────────────────────────────────────────────────\nconst mockResponsibles = [\n  { id: \"user-3\", name: \"Lucas Oliveira\" },\n  { id: \"user-4\", name: \"Juliana Costa\" },\n  { id: \"user-5\", name: \"Fernanda Lima\" },\n  { id: \"user-6\", name: \"Marcos Pereira\" },\n  { id: \"user-7\", name: \"Carolina Santos\" },\n];\n\nconst mockStages = [\n  { id: \"lead-in\", label: \"Lead-In\" },\n  { id: \"contato-feito\", label: \"Contato Feito\" },\n  { id: \"reuniao-agendada\", label: \"Reuniao Agendada\" },\n  { id: \"proposta-enviada\", label: \"Proposta Enviada\" },\n  { id: \"negociacao\", label: \"Negociacao\" },\n  { id: \"fechamento\", label: \"Fechamento\" },\n];\n\nconst mockClientStages = [\n  { id: \"onboarding\", label: \"Onboarding\" },\n  { id: \"implantacao\", label: \"Implantacao\" },\n  { id: \"acompanhamento\", label: \"Acompanhamento\" },\n  { id: \"retencao\", label: \"Retencao\" },\n  { id: \"churn\", label: \"Churn\" },\n];\n\nconst mockTemperatures = [\n  { id: \"hot\", label: \"Quente\", icon: <Flame className=\"h-3.5 w-3.5 text-status-danger\" /> },\n  { id: \"warm\", label: \"Morna\", icon: <Thermometer className=\"h-3.5 w-3.5 text-status-warning\" /> },\n  { id: \"cold\", label: \"Fria\", icon: <Snowflake className=\"h-3.5 w-3.5 text-status-info\" /> },\n];\n\nconst mockTags = [\n  \"food-service\",\n  \"restaurante\",\n  \"premium\",\n  \"varejo\",\n  \"saude\",\n  \"tecnologia\",\n  \"educacao\",\n  \"industria\",\n];\n\nconst mockActivityTypes = [\n  { id: \"call\", label: \"Ligacao\" },\n  { id: \"email\", label: \"E-mail\" },\n  { id: \"meeting\", label: \"Reuniao\" },\n  { id: \"task\", label: \"Tarefa\" },\n  { id: \"follow-up\", label: \"Follow-up\" },\n  { id: \"whatsapp\", label: \"WhatsApp\" },\n];\n\nconst mockActivityStatuses = [\n  { id: \"pending\", label: \"Pendente\" },\n  { id: \"completed\", label: \"Concluida\" },\n  { id: \"overdue\", label: \"Atrasada\" },\n  { id: \"cancelled\", label: \"Cancelada\" },\n];\n\nconst mockHealthScores = [\n  { id: \"good\", label: \"Saudavel\", icon: <Heart className=\"h-3.5 w-3.5 text-status-success\" /> },\n  { id: \"warning\", label: \"Atencao\", icon: <Heart className=\"h-3.5 w-3.5 text-status-warning\" /> },\n  { id: \"critical\", label: \"Critico\", icon: <Heart className=\"h-3.5 w-3.5 text-status-danger\" /> },\n];\n\nconst mockFinanceStatuses = [\n  { id: \"projected\", label: \"Projetado\" },\n  { id: \"confirmed\", label: \"Confirmado\" },\n  { id: \"paid\", label: \"Pago\" },\n  { id: \"contested\", label: \"Contestado\" },\n];\n\nconst mockPeriods = [\n  { id: \"this-month\", label: \"Este mes\" },\n  { id: \"last-month\", label: \"Mes passado\" },\n  { id: \"this-quarter\", label: \"Este trimestre\" },\n  { id: \"last-quarter\", label: \"Trimestre passado\" },\n  { id: \"this-year\", label: \"Este ano\" },\n];\n\n// ── Checkbox Group ──────────────────────────────────────────────────────────\nfunction CheckboxGroup({\n  label,\n  options,\n  selected,\n  onChange,\n  icon,\n}: {\n  label: string;\n  options: { id: string; label: string; icon?: React.ReactNode }[];\n  selected: string[];\n  onChange: (selected: string[]) => void;\n  icon?: React.ReactNode;\n}) {\n  function toggle(id: string) {\n    if (selected.includes(id)) {\n      onChange(selected.filter((s) => s !== id));\n    } else {\n      onChange([...selected, id]);\n    }\n  }\n\n  return (\n    <div>\n      <div className=\"mb-2.5 flex items-center gap-2\">\n        {icon && <span className=\"text-zinc-400\">{icon}</span>}\n        <Label className=\"font-heading text-sm font-semibold text-black\">{label}</Label>\n        {selected.length > 0 && (\n          <Badge className=\"rounded-[10px] bg-brand px-1.5 py-0 font-body text-[10px] text-white\">\n            {selected.length}\n          </Badge>\n        )}\n      </div>\n      <div className=\"space-y-2\">\n        {options.map((opt) => (\n          <label\n            key={opt.id}\n            className=\"flex cursor-pointer items-center gap-2.5 rounded-lg px-2 py-1.5 transition-colors hover:bg-zinc-50\"\n          >\n            <Checkbox\n              checked={selected.includes(opt.id)}\n              onCheckedChange={() => toggle(opt.id)}\n              className=\"rounded-checkbox\"\n            />\n            {opt.icon && <span>{opt.icon}</span>}\n            <span className=\"font-body text-sm text-zinc-700\">{opt.label}</span>\n          </label>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// ── Range Input ─────────────────────────────────────────────────────────────\nfunction RangeInput({\n  label,\n  icon,\n  minValue,\n  maxValue,\n  onMinChange,\n  onMaxChange,\n  placeholder,\n  type = \"text\",\n}: {\n  label: string;\n  icon?: React.ReactNode;\n  minValue: string;\n  maxValue: string;\n  onMinChange: (v: string) => void;\n  onMaxChange: (v: string) => void;\n  placeholder?: { min: string; max: string };\n  type?: string;\n}) {\n  return (\n    <div>\n      <div className=\"mb-2.5 flex items-center gap-2\">\n        {icon && <span className=\"text-zinc-400\">{icon}</span>}\n        <Label className=\"font-heading text-sm font-semibold text-black\">{label}</Label>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <Input\n          type={type}\n          value={minValue}\n          onChange={(e) => onMinChange(e.target.value)}\n          placeholder={placeholder?.min || \"Min\"}\n          className=\"h-9 rounded-[15px] font-body text-sm\"\n        />\n        <span className=\"font-body text-xs text-zinc-400\">ate</span>\n        <Input\n          type={type}\n          value={maxValue}\n          onChange={(e) => onMaxChange(e.target.value)}\n          placeholder={placeholder?.max || \"Max\"}\n          className=\"h-9 rounded-[15px] font-body text-sm\"\n        />\n      </div>\n    </div>\n  );\n}\n\n// ── Pipes Filters ───────────────────────────────────────────────────────────\nfunction PipesFilters({\n  filters,\n  setFilters,\n}: {\n  filters: PipesFilterState;\n  setFilters: React.Dispatch<React.SetStateAction<PipesFilterState>>;\n}) {\n  return (\n    <div className=\"space-y-6\">\n      <CheckboxGroup\n        label=\"Responsavel\"\n        icon={<User className=\"h-4 w-4\" />}\n        options={mockResponsibles.map((r) => ({ id: r.id, label: r.name }))}\n        selected={filters.responsible}\n        onChange={(v) => setFilters((f) => ({ ...f, responsible: v }))}\n      />\n\n      <Separator />\n\n      <CheckboxGroup\n        label=\"Estagio\"\n        icon={<BarChart3 className=\"h-4 w-4\" />}\n        options={mockStages}\n        selected={filters.stage}\n        onChange={(v) => setFilters((f) => ({ ...f, stage: v }))}\n      />\n\n      <Separator />\n\n      <CheckboxGroup\n        label=\"Temperatura\"\n        icon={<Flame className=\"h-4 w-4\" />}\n        options={mockTemperatures}\n        selected={filters.temperature}\n        onChange={(v) => setFilters((f) => ({ ...f, temperature: v }))}\n      />\n\n      <Separator />\n\n      <CheckboxGroup\n        label=\"Tags\"\n        icon={<Tag className=\"h-4 w-4\" />}\n        options={mockTags.map((t) => ({ id: t, label: t }))}\n        selected={filters.tags}\n        onChange={(v) => setFilters((f) => ({ ...f, tags: v }))}\n      />\n\n      <Separator />\n\n      <div>\n        <div className=\"mb-2.5 flex items-center gap-2\">\n          <span className=\"text-zinc-400\"><AlertTriangle className=\"h-4 w-4\" /></span>\n          <Label className=\"font-heading text-sm font-semibold text-black\">Alertas</Label>\n        </div>\n        <div className=\"space-y-2\">\n          <label className=\"flex cursor-pointer items-center gap-2.5 rounded-lg px-2 py-1.5 transition-colors hover:bg-zinc-50\">\n            <Checkbox\n              checked={filters.overdue}\n              onCheckedChange={(c) => setFilters((f) => ({ ...f, overdue: !!c }))}\n              className=\"rounded-checkbox\"\n            />\n            <Flame className=\"h-3.5 w-3.5 text-status-danger\" />\n            <span className=\"font-body text-sm text-zinc-700\">Somente Estourados</span>\n          </label>\n          <label className=\"flex cursor-pointer items-center gap-2.5 rounded-lg px-2 py-1.5 transition-colors hover:bg-zinc-50\">\n            <Checkbox\n              checked={filters.stale}\n              onCheckedChange={(c) => setFilters((f) => ({ ...f, stale: !!c }))}\n              className=\"rounded-checkbox\"\n            />\n            <TimerReset className=\"h-3.5 w-3.5 text-status-warning\" />\n            <span className=\"font-body text-sm text-zinc-700\">Somente Sem Atividade</span>\n          </label>\n        </div>\n      </div>\n\n      <Separator />\n\n      <RangeInput\n        label=\"Periodo\"\n        icon={<Calendar className=\"h-4 w-4\" />}\n        minValue={filters.dateStart}\n        maxValue={filters.dateEnd}\n        onMinChange={(v) => setFilters((f) => ({ ...f, dateStart: v }))}\n        onMaxChange={(v) => setFilters((f) => ({ ...f, dateEnd: v }))}\n        placeholder={{ min: \"Data inicio\", max: \"Data fim\" }}\n        type=\"date\"\n      />\n\n      <Separator />\n\n      <div>\n        <div className=\"mb-2.5 flex items-center gap-2\">\n          <span className=\"text-zinc-400\"><DollarSign className=\"h-4 w-4\" /></span>\n          <Label className=\"font-heading text-sm font-semibold text-black\">Faixa de Valor</Label>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <CurrencyInput\n            value={filters.valueMin ? Number(filters.valueMin) : undefined}\n            onValueChange={(v) => setFilters((f) => ({ ...f, valueMin: v > 0 ? String(v) : \"\" }))}\n            className=\"h-9 rounded-[15px] font-body text-sm\"\n            placeholder=\"R$ Min\"\n          />\n          <span className=\"font-body text-xs text-zinc-400\">ate</span>\n          <CurrencyInput\n            value={filters.valueMax ? Number(filters.valueMax) : undefined}\n            onValueChange={(v) => setFilters((f) => ({ ...f, valueMax: v > 0 ? String(v) : \"\" }))}\n            className=\"h-9 rounded-[15px] font-body text-sm\"\n            placeholder=\"R$ Max\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ── Clients Filters ─────────────────────────────────────────────────────────\nfunction ClientsFilters({\n  filters,\n  setFilters,\n}: {\n  filters: ClientsFilterState;\n  setFilters: React.Dispatch<React.SetStateAction<ClientsFilterState>>;\n}) {\n  return (\n    <div className=\"space-y-6\">\n      <CheckboxGroup\n        label=\"Responsavel\"\n        icon={<User className=\"h-4 w-4\" />}\n        options={mockResponsibles.map((r) => ({ id: r.id, label: r.name }))}\n        selected={filters.responsible}\n        onChange={(v) => setFilters((f) => ({ ...f, responsible: v }))}\n      />\n\n      <Separator />\n\n      <CheckboxGroup\n        label=\"Estagio\"\n        icon={<BarChart3 className=\"h-4 w-4\" />}\n        options={mockClientStages}\n        selected={filters.stage}\n        onChange={(v) => setFilters((f) => ({ ...f, stage: v }))}\n      />\n\n      <Separator />\n\n      <CheckboxGroup\n        label=\"Health Score\"\n        icon={<Heart className=\"h-4 w-4\" />}\n        options={mockHealthScores}\n        selected={filters.healthScore}\n        onChange={(v) => setFilters((f) => ({ ...f, healthScore: v }))}\n      />\n\n      <Separator />\n\n      <div>\n        <div className=\"mb-2.5 flex items-center gap-2\">\n          <span className=\"text-zinc-400\"><DollarSign className=\"h-4 w-4\" /></span>\n          <Label className=\"font-heading text-sm font-semibold text-black\">Faixa de MRR</Label>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <CurrencyInput\n            value={filters.mrrMin ? Number(filters.mrrMin) : undefined}\n            onValueChange={(v) => setFilters((f) => ({ ...f, mrrMin: v > 0 ? String(v) : \"\" }))}\n            className=\"h-9 rounded-[15px] font-body text-sm\"\n            placeholder=\"R$ Min\"\n          />\n          <span className=\"font-body text-xs text-zinc-400\">ate</span>\n          <CurrencyInput\n            value={filters.mrrMax ? Number(filters.mrrMax) : undefined}\n            onValueChange={(v) => setFilters((f) => ({ ...f, mrrMax: v > 0 ? String(v) : \"\" }))}\n            className=\"h-9 rounded-[15px] font-body text-sm\"\n            placeholder=\"R$ Max\"\n          />\n        </div>\n      </div>\n\n      <Separator />\n\n      <RangeInput\n        label=\"Ultima Interacao\"\n        icon={<Calendar className=\"h-4 w-4\" />}\n        minValue={filters.lastInteractionStart}\n        maxValue={filters.lastInteractionEnd}\n        onMinChange={(v) => setFilters((f) => ({ ...f, lastInteractionStart: v }))}\n        onMaxChange={(v) => setFilters((f) => ({ ...f, lastInteractionEnd: v }))}\n        placeholder={{ min: \"Data inicio\", max: \"Data fim\" }}\n        type=\"date\"\n      />\n    </div>\n  );\n}\n\n// ── Activities Filters ──────────────────────────────────────────────────────\nfunction ActivitiesFilters({\n  filters,\n  setFilters,\n}: {\n  filters: ActivitiesFilterState;\n  setFilters: React.Dispatch<React.SetStateAction<ActivitiesFilterState>>;\n}) {\n  return (\n    <div className=\"space-y-6\">\n      <CheckboxGroup\n        label=\"Tipo\"\n        icon={<Activity className=\"h-4 w-4\" />}\n        options={mockActivityTypes}\n        selected={filters.type}\n        onChange={(v) => setFilters((f) => ({ ...f, type: v }))}\n      />\n\n      <Separator />\n\n      <CheckboxGroup\n        label=\"Responsavel\"\n        icon={<User className=\"h-4 w-4\" />}\n        options={mockResponsibles.map((r) => ({ id: r.id, label: r.name }))}\n        selected={filters.responsible}\n        onChange={(v) => setFilters((f) => ({ ...f, responsible: v }))}\n      />\n\n      <Separator />\n\n      <CheckboxGroup\n        label=\"Status\"\n        icon={<CheckSquare className=\"h-4 w-4\" />}\n        options={mockActivityStatuses}\n        selected={filters.status}\n        onChange={(v) => setFilters((f) => ({ ...f, status: v }))}\n      />\n\n      <Separator />\n\n      <RangeInput\n        label=\"Periodo\"\n        icon={<Calendar className=\"h-4 w-4\" />}\n        minValue={filters.dateStart}\n        maxValue={filters.dateEnd}\n        onMinChange={(v) => setFilters((f) => ({ ...f, dateStart: v }))}\n        onMaxChange={(v) => setFilters((f) => ({ ...f, dateEnd: v }))}\n        placeholder={{ min: \"Data inicio\", max: \"Data fim\" }}\n        type=\"date\"\n      />\n    </div>\n  );\n}\n\n// ── Finance Filters ─────────────────────────────────────────────────────────\nfunction FinanceFilters({\n  filters,\n  setFilters,\n}: {\n  filters: FinanceFilterState;\n  setFilters: React.Dispatch<React.SetStateAction<FinanceFilterState>>;\n}) {\n  return (\n    <div className=\"space-y-6\">\n      <CheckboxGroup\n        label=\"Vendedor\"\n        icon={<User className=\"h-4 w-4\" />}\n        options={mockResponsibles.map((r) => ({ id: r.id, label: r.name }))}\n        selected={filters.seller}\n        onChange={(v) => setFilters((f) => ({ ...f, seller: v }))}\n      />\n\n      <Separator />\n\n      <CheckboxGroup\n        label=\"Status\"\n        icon={<CheckSquare className=\"h-4 w-4\" />}\n        options={mockFinanceStatuses}\n        selected={filters.status}\n        onChange={(v) => setFilters((f) => ({ ...f, status: v }))}\n      />\n\n      <Separator />\n\n      <CheckboxGroup\n        label=\"Periodo\"\n        icon={<Calendar className=\"h-4 w-4\" />}\n        options={mockPeriods}\n        selected={filters.period}\n        onChange={(v) => setFilters((f) => ({ ...f, period: v }))}\n      />\n    </div>\n  );\n}\n\n// ── Filter State Types ──────────────────────────────────────────────────────\ninterface PipesFilterState {\n  responsible: string[];\n  stage: string[];\n  temperature: string[];\n  tags: string[];\n  dateStart: string;\n  dateEnd: string;\n  valueMin: string;\n  valueMax: string;\n  overdue: boolean;\n  stale: boolean;\n}\n\ninterface ClientsFilterState {\n  responsible: string[];\n  stage: string[];\n  healthScore: string[];\n  mrrMin: string;\n  mrrMax: string;\n  lastInteractionStart: string;\n  lastInteractionEnd: string;\n}\n\ninterface ActivitiesFilterState {\n  type: string[];\n  responsible: string[];\n  status: string[];\n  dateStart: string;\n  dateEnd: string;\n}\n\ninterface FinanceFilterState {\n  seller: string[];\n  status: string[];\n  period: string[];\n}\n\nconst initialPipesFilters: PipesFilterState = {\n  responsible: [],\n  stage: [],\n  temperature: [],\n  tags: [],\n  dateStart: \"\",\n  dateEnd: \"\",\n  valueMin: \"\",\n  valueMax: \"\",\n  overdue: false,\n  stale: false,\n};\n\nconst initialClientsFilters: ClientsFilterState = {\n  responsible: [],\n  stage: [],\n  healthScore: [],\n  mrrMin: \"\",\n  mrrMax: \"\",\n  lastInteractionStart: \"\",\n  lastInteractionEnd: \"\",\n};\n\nconst initialActivitiesFilters: ActivitiesFilterState = {\n  type: [],\n  responsible: [],\n  status: [],\n  dateStart: \"\",\n  dateEnd: \"\",\n};\n\nconst initialFinanceFilters: FinanceFilterState = {\n  seller: [],\n  status: [],\n  period: [],\n};\n\n// ── Context labels ──────────────────────────────────────────────────────────\nconst contextLabels: Record<FilterContext, string> = {\n  pipes: \"Pipeline\",\n  clients: \"Clientes\",\n  activities: \"Atividades\",\n  finance: \"Financeiro\",\n};\n\n// ── Saved Filters Section ───────────────────────────────────────────────────\nfunction SavedFiltersSection({\n  savedFilters,\n  onApply,\n  onRemove,\n  onSave,\n  canSave,\n}: {\n  savedFilters: SavedFilter[];\n  onApply: (saved: SavedFilter) => void;\n  onRemove: (id: string) => void;\n  onSave: (name: string) => void;\n  canSave: boolean;\n}) {\n  const [newFilterName, setNewFilterName] = useState(\"\");\n  const [isAdding, setIsAdding] = useState(false);\n\n  function handleSave() {\n    const trimmed = newFilterName.trim();\n    if (!trimmed) return;\n    onSave(trimmed);\n    setNewFilterName(\"\");\n    setIsAdding(false);\n  }\n\n  return (\n    <div>\n      <div className=\"mb-2.5 flex items-center gap-2\">\n        <span className=\"text-zinc-400\">\n          <Bookmark className=\"h-4 w-4\" />\n        </span>\n        <Label className=\"font-heading text-sm font-semibold text-black\">\n          Filtros Salvos\n        </Label>\n        {savedFilters.length > 0 && (\n          <Badge className=\"rounded-[10px] bg-zinc-100 px-1.5 py-0 font-body text-[10px] text-zinc-600\">\n            {savedFilters.length}\n          </Badge>\n        )}\n      </div>\n\n      {/* Saved filter chips */}\n      {savedFilters.length > 0 && (\n        <div className=\"mb-3 flex flex-wrap gap-2\">\n          {savedFilters.map((sf) => (\n            <div\n              key={sf.id}\n              className=\"group flex items-center gap-1.5 rounded-[10px] border border-zinc-200 bg-zinc-50 px-3 py-1.5 transition-colors hover:border-brand hover:bg-brand-light\"\n            >\n              <button\n                type=\"button\"\n                className=\"font-body text-sm text-zinc-700 group-hover:text-brand\"\n                onClick={() => onApply(sf)}\n              >\n                {sf.name}\n              </button>\n              <button\n                type=\"button\"\n                className=\"ml-0.5 text-zinc-400 transition-colors hover:text-status-danger\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  onRemove(sf.id);\n                }}\n              >\n                <X className=\"h-3 w-3\" />\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {savedFilters.length === 0 && !isAdding && (\n        <p className=\"mb-3 font-body text-xs text-zinc-400\">\n          Nenhum filtro salvo ainda.\n        </p>\n      )}\n\n      {/* Save current filter */}\n      {isAdding ? (\n        <div className=\"flex items-center gap-2\">\n          <Input\n            value={newFilterName}\n            onChange={(e) => setNewFilterName(e.target.value)}\n            placeholder=\"Nome do filtro\"\n            className=\"h-8 flex-1 rounded-[15px] font-body text-sm\"\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") handleSave();\n              if (e.key === \"Escape\") {\n                setIsAdding(false);\n                setNewFilterName(\"\");\n              }\n            }}\n            autoFocus\n          />\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"h-8 rounded-full font-heading text-xs\"\n            onClick={handleSave}\n            disabled={!newFilterName.trim()}\n          >\n            <Save className=\"mr-1 h-3 w-3\" />\n            Salvar\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-8 rounded-full font-heading text-xs text-zinc-400\"\n            onClick={() => {\n              setIsAdding(false);\n              setNewFilterName(\"\");\n            }}\n          >\n            <X className=\"h-3 w-3\" />\n          </Button>\n        </div>\n      ) : (\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"h-8 rounded-full border-dashed border-zinc-300 font-heading text-xs text-zinc-500 hover:border-brand hover:text-brand\"\n          onClick={() => setIsAdding(true)}\n          disabled={!canSave}\n          title={\n            !canSave\n              ? `Maximo de ${MAX_SAVED_FILTERS} filtros salvos`\n              : undefined\n          }\n        >\n          <Save className=\"mr-1.5 h-3 w-3\" />\n          Salvar filtro atual\n        </Button>\n      )}\n    </div>\n  );\n}\n\n// ── Main Component ──────────────────────────────────────────────────────────\nexport function FiltersPanel({ context, onApplyFilters }: FiltersPanelProps) {\n  const { drawerType, closeDrawer } = useUIStore();\n  const isOpen = drawerType === \"filters\";\n\n  // Filter states per context\n  const [pipesFilters, setPipesFilters] = useState<PipesFilterState>(initialPipesFilters);\n  const [clientsFilters, setClientsFilters] = useState<ClientsFilterState>(initialClientsFilters);\n  const [activitiesFilters, setActivitiesFilters] = useState<ActivitiesFilterState>(initialActivitiesFilters);\n  const [financeFilters, setFinanceFilters] = useState<FinanceFilterState>(initialFinanceFilters);\n\n  // Saved filters state\n  const [savedFilters, setSavedFilters] = useState<SavedFilter[]>([]);\n\n  // Load saved filters from localStorage on mount and when context changes\n  useEffect(() => {\n    setSavedFilters(loadSavedFilters(context));\n  }, [context]);\n\n  // Get current filters for the active context\n  const getCurrentFilters = useCallback(():\n    | PipesFilterState\n    | ClientsFilterState\n    | ActivitiesFilterState\n    | FinanceFilterState => {\n    switch (context) {\n      case \"pipes\":\n        return pipesFilters;\n      case \"clients\":\n        return clientsFilters;\n      case \"activities\":\n        return activitiesFilters;\n      case \"finance\":\n        return financeFilters;\n    }\n  }, [context, pipesFilters, clientsFilters, activitiesFilters, financeFilters]);\n\n  // Save a filter\n  function handleSaveFilter(name: string) {\n    const newSaved: SavedFilter = {\n      id: `${Date.now()}-${Math.random().toString(36).slice(2, 8)}`,\n      name,\n      filters: getCurrentFilters(),\n    };\n    const updated = [...savedFilters, newSaved].slice(-MAX_SAVED_FILTERS);\n    setSavedFilters(updated);\n    persistSavedFilters(context, updated);\n  }\n\n  // Remove a saved filter\n  function handleRemoveSavedFilter(id: string) {\n    const updated = savedFilters.filter((sf) => sf.id !== id);\n    setSavedFilters(updated);\n    persistSavedFilters(context, updated);\n  }\n\n  // Apply a saved filter\n  function handleApplySavedFilter(saved: SavedFilter) {\n    switch (context) {\n      case \"pipes\":\n        setPipesFilters(saved.filters as PipesFilterState);\n        break;\n      case \"clients\":\n        setClientsFilters(saved.filters as ClientsFilterState);\n        break;\n      case \"activities\":\n        setActivitiesFilters(saved.filters as ActivitiesFilterState);\n        break;\n      case \"finance\":\n        setFinanceFilters(saved.filters as FinanceFilterState);\n        break;\n    }\n  }\n\n  // Calculate total active filter count\n  const filterCount = useMemo(() => {\n    switch (context) {\n      case \"pipes\": {\n        const f = pipesFilters;\n        return (\n          f.responsible.length +\n          f.stage.length +\n          f.temperature.length +\n          f.tags.length +\n          (f.dateStart ? 1 : 0) +\n          (f.dateEnd ? 1 : 0) +\n          (f.valueMin ? 1 : 0) +\n          (f.valueMax ? 1 : 0) +\n          (f.overdue ? 1 : 0) +\n          (f.stale ? 1 : 0)\n        );\n      }\n      case \"clients\": {\n        const f = clientsFilters;\n        return (\n          f.responsible.length +\n          f.stage.length +\n          f.healthScore.length +\n          (f.mrrMin ? 1 : 0) +\n          (f.mrrMax ? 1 : 0) +\n          (f.lastInteractionStart ? 1 : 0) +\n          (f.lastInteractionEnd ? 1 : 0)\n        );\n      }\n      case \"activities\": {\n        const f = activitiesFilters;\n        return (\n          f.type.length +\n          f.responsible.length +\n          f.status.length +\n          (f.dateStart ? 1 : 0) +\n          (f.dateEnd ? 1 : 0)\n        );\n      }\n      case \"finance\": {\n        const f = financeFilters;\n        return f.seller.length + f.status.length + f.period.length;\n      }\n      default:\n        return 0;\n    }\n  }, [context, pipesFilters, clientsFilters, activitiesFilters, financeFilters]);\n\n  const handleClear = useCallback(() => {\n    switch (context) {\n      case \"pipes\":\n        setPipesFilters(initialPipesFilters);\n        break;\n      case \"clients\":\n        setClientsFilters(initialClientsFilters);\n        break;\n      case \"activities\":\n        setActivitiesFilters(initialActivitiesFilters);\n        break;\n      case \"finance\":\n        setFinanceFilters(initialFinanceFilters);\n        break;\n    }\n  }, [context]);\n\n  function handleApply() {\n    const currentFilters = getCurrentFilters();\n\n    // Call the onApplyFilters callback if provided\n    if (onApplyFilters) {\n      onApplyFilters(currentFilters as unknown as Record<string, unknown>);\n    }\n\n    persistActiveFilterCount(context, filterCount);\n    if (typeof window !== \"undefined\") {\n      window.dispatchEvent(\n        new CustomEvent(FILTERS_APPLIED_EVENT, {\n          detail: { context, count: filterCount, filters: currentFilters },\n        })\n      );\n    }\n\n    closeDrawer();\n  }\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    const handleClearEvent = (e: Event) => {\n      const customEvent = e as CustomEvent<{ context: string }>;\n      if (customEvent.detail?.context === context) {\n        handleClear();\n        persistActiveFilterCount(context, 0);\n      }\n    };\n    const handleUpdateEvent = (e: Event) => {\n      const customEvent = e as CustomEvent<{ context: string; filters: Record<string, unknown> }>;\n      if (customEvent.detail?.context === context && customEvent.detail.filters) {\n        if (context === \"pipes\") setPipesFilters(customEvent.detail.filters as unknown as PipesFilterState);\n        else if (context === \"clients\") setClientsFilters(customEvent.detail.filters as unknown as ClientsFilterState);\n        else if (context === \"activities\") setActivitiesFilters(customEvent.detail.filters as unknown as ActivitiesFilterState);\n        else if (context === \"finance\") setFinanceFilters(customEvent.detail.filters as unknown as FinanceFilterState);\n      }\n    };\n\n    window.addEventListener(\"flow:filters-clear\", handleClearEvent);\n    window.addEventListener(\"flow:filters-update\", handleUpdateEvent);\n    return () => {\n      window.removeEventListener(\"flow:filters-clear\", handleClearEvent);\n      window.removeEventListener(\"flow:filters-update\", handleUpdateEvent);\n    };\n  }, [context, handleClear]);\n\n  return (\n    <Sheet open={isOpen} onOpenChange={() => closeDrawer()}>\n      <SheetContent\n        side=\"right\"\n        className=\"flex w-[400px] max-w-full flex-col overflow-hidden border-l border-zinc-200 p-0 sm:max-w-[400px]\"\n        showCloseButton={false}\n      >\n        {/* Header */}\n        <SheetHeader className=\"flex flex-row items-center justify-between border-b border-zinc-200 px-6 py-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex h-9 w-9 items-center justify-center rounded-full bg-brand-light\">\n              <Filter className=\"h-4 w-4 text-brand\" />\n            </div>\n            <div>\n              <SheetTitle className=\"font-heading text-lg font-semibold text-black\">\n                Filtros\n              </SheetTitle>\n              <p className=\"font-body text-xs text-zinc-500\">\n                {contextLabels[context]}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            {filterCount > 0 && (\n              <Badge className=\"rounded-[10px] bg-brand px-2 py-0.5 font-body text-xs text-white\">\n                {filterCount} ativo{filterCount !== 1 ? \"s\" : \"\"}\n              </Badge>\n            )}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"text-zinc-400\"\n              onClick={() => closeDrawer()}\n            >\n              <X className=\"h-5 w-5\" />\n            </Button>\n          </div>\n        </SheetHeader>\n\n        {/* Body -- scrollable */}\n        <div className=\"flex-1 overflow-y-auto px-6 py-5\">\n          {/* Saved Filters Section */}\n          <SavedFiltersSection\n            savedFilters={savedFilters}\n            onApply={handleApplySavedFilter}\n            onRemove={handleRemoveSavedFilter}\n            onSave={handleSaveFilter}\n            canSave={savedFilters.length < MAX_SAVED_FILTERS}\n          />\n\n          <Separator className=\"my-5\" />\n\n          {/* Context-specific filters */}\n          {context === \"pipes\" && (\n            <PipesFilters filters={pipesFilters} setFilters={setPipesFilters} />\n          )}\n          {context === \"clients\" && (\n            <ClientsFilters filters={clientsFilters} setFilters={setClientsFilters} />\n          )}\n          {context === \"activities\" && (\n            <ActivitiesFilters filters={activitiesFilters} setFilters={setActivitiesFilters} />\n          )}\n          {context === \"finance\" && (\n            <FinanceFilters filters={financeFilters} setFilters={setFinanceFilters} />\n          )}\n        </div>\n\n        {/* Footer */}\n        <SheetFooter className=\"border-t border-zinc-200 px-6 py-4\">\n          <div className=\"flex w-full items-center justify-between\">\n            <Button\n              variant=\"ghost\"\n              onClick={handleClear}\n              className=\"font-heading text-sm text-zinc-500 hover:text-zinc-700\"\n            >\n              Limpar\n            </Button>\n            <Button\n              onClick={handleApply}\n              className=\"rounded-full bg-brand px-6 font-heading text-sm text-white hover:bg-brand/90\"\n            >\n              Aplicar Filtros\n              {filterCount > 0 && (\n                <Badge className=\"ml-2 rounded-full bg-white/20 px-1.5 py-0 font-body text-[10px] text-white\">\n                  {filterCount}\n                </Badge>\n              )}\n            </Button>\n          </div>\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1852, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/shared/global-drawers.tsx"],"sourcesContent":["\"use client\";\n\nimport LeadCardDrawer from \"@/components/drawers/lead-card-drawer\";\nimport { ClientCardDrawer } from \"@/components/drawers/client-card-drawer\";\nimport { FiltersPanel } from \"@/components/shared/filters-panel\";\nimport { NewOpportunityModal } from \"@/components/modals/new-opportunity-modal\";\nimport { NewActivityModal } from \"@/components/modals/new-activity-modal\";\nimport { WinOpportunityModal } from \"@/components/modals/win-opportunity-modal\";\nimport { LoseOpportunityModal } from \"@/components/modals/lose-opportunity-modal\";\nimport { InviteUserModal } from \"@/components/modals/invite-user-modal\";\nimport { ConfirmDeleteModal } from \"@/components/modals/confirm-delete-modal\";\nimport { ConfirmDeactivateModal } from \"@/components/modals/confirm-deactivate-modal\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { useActivityStore } from \"@/stores/activity-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport type { ActivityFormData } from \"@/lib/validations/activity\";\n\nexport function GlobalDrawers() {\n  const { modalData, drawerData, drawerType, closeDrawer } = useUIStore();\n  const { addActivity } = useActivityStore();\n  const { user } = useAuthStore();\n  const leadDrawerKey = `lead-${String(modalData?.id ?? \"default\")}`;\n  const clientDrawerKey = `client-${String(drawerData?.id ?? \"default\")}`;\n\n  const handleSaveActivity = (data: ActivityFormData) => {\n    if (!user?.id) {\n      throw new Error(\"Usuário não autenticado para criar atividade.\");\n    }\n\n    addActivity({\n      title: data.title,\n      type: data.type,\n      status: \"pending\",\n      description: data.description || \"\",\n      dueDate: data.date,\n      dueTime: data.time,\n      responsibleId: user.id,\n      responsibleName: user.name,\n      opportunityId: data.opportunityId || undefined,\n      opportunityTitle: data.opportunityTitle || undefined,\n      clientId: data.clientId || undefined,\n      clientName: data.clientName || undefined,\n      contactIds: data.contactIds?.length ? data.contactIds : undefined,\n      contactNames: data.contactNames?.length ? data.contactNames : undefined,\n    });\n  };\n\n  return (\n    <>\n      {/* Drawers */}\n      <ClientCardDrawer key={clientDrawerKey} />\n      <FiltersPanel context=\"pipes\" />\n\n      {/* Modals */}\n      <LeadCardDrawer key={leadDrawerKey} />\n      <NewOpportunityModal />\n      <NewActivityModal\n        isOpen={drawerType === \"new-activity\"}\n        onClose={closeDrawer}\n        onSave={handleSaveActivity}\n        initialType={(drawerData?.type as \"call\" | \"email\" | \"meeting\" | \"visit\" | \"task\" | \"follow-up\" | \"whatsapp\") || undefined}\n        initialClientId={typeof drawerData?.clientId === \"string\" ? drawerData.clientId : undefined}\n        initialClientName={typeof drawerData?.clientName === \"string\" ? drawerData.clientName : undefined}\n        initialContactIds={Array.isArray(drawerData?.contactIds) ? drawerData.contactIds as string[] : undefined}\n        initialContactNames={Array.isArray(drawerData?.contactNames) ? drawerData.contactNames as string[] : undefined}\n        initialOpportunityId={typeof drawerData?.opportunityId === \"string\" ? drawerData.opportunityId : undefined}\n        initialOpportunityTitle={typeof drawerData?.opportunityTitle === \"string\" ? drawerData.opportunityTitle : undefined}\n        lockClient={drawerData?.lockClient === true}\n        requireClient={drawerData?.requireClient === true}\n      />\n      <WinOpportunityModal />\n      <LoseOpportunityModal />\n      <InviteUserModal />\n      <ConfirmDeleteModal />\n      <ConfirmDeactivateModal />\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;;;;;;;;;;;;;;;AAiBO,SAAS;IACd,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,EAAE,WAAW,EAAE,GAAG,IAAA,0IAAU;IACrE,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,sJAAgB;IACxC,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,8IAAY;IAC7B,MAAM,gBAAgB,CAAC,KAAK,EAAE,OAAO,WAAW,MAAM,YAAY;IAClE,MAAM,kBAAkB,CAAC,OAAO,EAAE,OAAO,YAAY,MAAM,YAAY;IAEvE,MAAM,qBAAqB,CAAC;QAC1B,IAAI,CAAC,MAAM,IAAI;YACb,MAAM,IAAI,MAAM;QAClB;QAEA,YAAY;YACV,OAAO,KAAK,KAAK;YACjB,MAAM,KAAK,IAAI;YACf,QAAQ;YACR,aAAa,KAAK,WAAW,IAAI;YACjC,SAAS,KAAK,IAAI;YAClB,SAAS,KAAK,IAAI;YAClB,eAAe,KAAK,EAAE;YACtB,iBAAiB,KAAK,IAAI;YAC1B,eAAe,KAAK,aAAa,IAAI;YACrC,kBAAkB,KAAK,gBAAgB,IAAI;YAC3C,UAAU,KAAK,QAAQ,IAAI;YAC3B,YAAY,KAAK,UAAU,IAAI;YAC/B,YAAY,KAAK,UAAU,EAAE,SAAS,KAAK,UAAU,GAAG;YACxD,cAAc,KAAK,YAAY,EAAE,SAAS,KAAK,YAAY,GAAG;QAChE;IACF;IAEA,qBACE;;0BAEE,8OAAC,6KAAgB,MAAM;;;;;0BACvB,8OAAC,gKAAY;gBAAC,SAAQ;;;;;;0BAGtB,8OAAC,kKAAc,MAAM;;;;;0BACrB,8OAAC,kLAAmB;;;;;0BACpB,8OAAC,4KAAgB;gBACf,QAAQ,eAAe;gBACvB,SAAS;gBACT,QAAQ;gBACR,aAAa,AAAC,YAAY,QAAuF;gBACjH,iBAAiB,OAAO,YAAY,aAAa,WAAW,WAAW,QAAQ,GAAG;gBAClF,mBAAmB,OAAO,YAAY,eAAe,WAAW,WAAW,UAAU,GAAG;gBACxF,mBAAmB,MAAM,OAAO,CAAC,YAAY,cAAc,WAAW,UAAU,GAAe;gBAC/F,qBAAqB,MAAM,OAAO,CAAC,YAAY,gBAAgB,WAAW,YAAY,GAAe;gBACrG,sBAAsB,OAAO,YAAY,kBAAkB,WAAW,WAAW,aAAa,GAAG;gBACjG,yBAAyB,OAAO,YAAY,qBAAqB,WAAW,WAAW,gBAAgB,GAAG;gBAC1G,YAAY,YAAY,eAAe;gBACvC,eAAe,YAAY,kBAAkB;;;;;;0BAE/C,8OAAC,kLAAmB;;;;;0BACpB,8OAAC,oLAAoB;;;;;0BACrB,8OAAC,0KAAe;;;;;0BAChB,8OAAC,gLAAkB;;;;;0BACnB,8OAAC,wLAAsB;;;;;;;AAG7B"}},
    {"offset": {"line": 1986, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/shared/global-search.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useRef, useState, startTransition } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  LayoutDashboard,\n  CalendarCheck,\n  Kanban,\n  Users,\n  DollarSign,\n  Settings,\n  User,\n  Target,\n  BarChart3,\n  ShieldCheck,\n  Building2,\n  Handshake,\n} from \"lucide-react\";\nimport {\n  CommandDialog,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n  CommandSeparator,\n} from \"@/components/ui/command\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { canAccessIntelligence } from \"@/lib/intelligence-permissions\";\n\n// ---------------------------------------------------------------------------\n// Mock data\n// ---------------------------------------------------------------------------\n\ninterface SearchableItem {\n  type: \"opportunity\" | \"client\";\n  name: string;\n  razaoSocial: string;\n  cnpj: string;\n  phone: string;\n  email: string;\n  contact: string;\n  city: string;\n  stage?: string;\n  healthScore?: string;\n  responsible: string;\n}\n\nconst mockSearchableItems: SearchableItem[] = [\n  // Opportunities\n  {\n    type: \"opportunity\",\n    name: \"Restaurante Bela Vista\",\n    razaoSocial: \"Restaurante Bela Vista Ltda ME\",\n    cnpj: \"12.345.678/0001-00\",\n    phone: \"(11) 99999-1234\",\n    email: \"contato@belavista.com\",\n    contact: \"João Silva\",\n    city: \"São Paulo\",\n    stage: \"Contato Feito\",\n    responsible: \"Maria Silva\",\n  },\n  {\n    type: \"opportunity\",\n    name: \"Pizzaria Don Corleone\",\n    razaoSocial: \"Don Corleone Alimentos Ltda\",\n    cnpj: \"23.456.789/0001-11\",\n    phone: \"(11) 98765-4321\",\n    email: \"contato@doncorleone.com\",\n    contact: \"Pedro Oliveira\",\n    city: \"São Paulo\",\n    stage: \"Proposta Enviada\",\n    responsible: \"Pedro Santos\",\n  },\n  {\n    type: \"opportunity\",\n    name: \"Bistrô La Maison\",\n    razaoSocial: \"La Maison Gastronomia Ltda\",\n    cnpj: \"34.567.890/0001-22\",\n    phone: \"(21) 97654-3210\",\n    email: \"contato@lamaison.com\",\n    contact: \"Ana Costa\",\n    city: \"Rio de Janeiro\",\n    stage: \"Negociação\",\n    responsible: \"Maria Silva\",\n  },\n  {\n    type: \"opportunity\",\n    name: \"Churrascaria Fogo de Chão\",\n    razaoSocial: \"Fogo de Chão Restaurantes SA\",\n    cnpj: \"45.678.901/0001-33\",\n    phone: \"(11) 96543-2109\",\n    email: \"contato@fogodechao.com\",\n    contact: \"Carlos Santos\",\n    city: \"São Paulo\",\n    stage: \"Lead-In\",\n    responsible: \"Julia Fernandes\",\n  },\n  {\n    type: \"opportunity\",\n    name: \"Sushi Yamamoto\",\n    razaoSocial: \"Yamamoto Culinária Japonesa Ltda\",\n    cnpj: \"56.789.012/0001-44\",\n    phone: \"(11) 95432-1098\",\n    email: \"contato@sushiyamamoto.com\",\n    contact: \"Yuki Yamamoto\",\n    city: \"São Paulo\",\n    stage: \"Reunião Agendada\",\n    responsible: \"Rafael Costa\",\n  },\n  {\n    type: \"opportunity\",\n    name: \"Café Colonial Oma\",\n    razaoSocial: \"Oma Café Colonial Eireli\",\n    cnpj: \"67.890.123/0001-55\",\n    phone: \"(41) 94321-0987\",\n    email: \"contato@cafeoma.com\",\n    contact: \"Klaus Schmidt\",\n    city: \"Curitiba\",\n    stage: \"Qualificação\",\n    responsible: \"Maria Silva\",\n  },\n  {\n    type: \"opportunity\",\n    name: \"Cantina Famiglia Mancini\",\n    razaoSocial: \"Famiglia Mancini Restaurante Ltda\",\n    cnpj: \"11.222.333/0001-66\",\n    phone: \"(11) 93210-9876\",\n    email: \"contato@famigliamancini.com\",\n    contact: \"Marco Mancini\",\n    city: \"São Paulo\",\n    stage: \"Contato Feito\",\n    responsible: \"Pedro Santos\",\n  },\n  {\n    type: \"opportunity\",\n    name: \"Doceria Amor aos Pedaços\",\n    razaoSocial: \"Amor aos Pedaços Doces Ltda\",\n    cnpj: \"22.333.444/0001-77\",\n    phone: \"(11) 92109-8765\",\n    email: \"contato@amorpedacos.com\",\n    contact: \"Lucia Ferreira\",\n    city: \"São Paulo\",\n    stage: \"Proposta Enviada\",\n    responsible: \"Julia Fernandes\",\n  },\n  // Clients\n  {\n    type: \"client\",\n    name: \"Restaurante Panorâmico\",\n    razaoSocial: \"Restaurante Panorâmico Ltda ME\",\n    cnpj: \"78.901.234/0001-66\",\n    phone: \"(11) 3456-7890\",\n    email: \"contato@panoramico.com\",\n    contact: \"Ana Costa\",\n    city: \"São Paulo\",\n    healthScore: \"Saudável\",\n    responsible: \"Maria Silva\",\n  },\n  {\n    type: \"client\",\n    name: \"Hotel Fazenda Serra Azul\",\n    razaoSocial: \"Serra Azul Hotelaria Ltda\",\n    cnpj: \"89.012.345/0001-77\",\n    phone: \"(35) 3456-7891\",\n    email: \"contato@serraazul.com\",\n    contact: \"Fernando Lima\",\n    city: \"Monte Verde\",\n    healthScore: \"Atenção\",\n    responsible: \"Pedro Santos\",\n  },\n  {\n    type: \"client\",\n    name: \"Padaria Pão de Ouro\",\n    razaoSocial: \"Pão de Ouro Panificação Ltda\",\n    cnpj: \"90.123.456/0001-88\",\n    phone: \"(11) 2345-6789\",\n    email: \"contato@paodeouro.com\",\n    contact: \"Rosa Mendes\",\n    city: \"São Paulo\",\n    healthScore: \"Saudável\",\n    responsible: \"Julia Fernandes\",\n  },\n  {\n    type: \"client\",\n    name: \"Bar do Zé\",\n    razaoSocial: \"José da Silva Bebidas ME\",\n    cnpj: \"01.234.567/0001-99\",\n    phone: \"(21) 1234-5678\",\n    email: \"contato@bardoze.com\",\n    contact: \"José da Silva\",\n    city: \"Rio de Janeiro\",\n    healthScore: \"Crítico\",\n    responsible: \"Rafael Costa\",\n  },\n  {\n    type: \"client\",\n    name: \"Confeitaria Colombo\",\n    razaoSocial: \"Confeitaria Colombo SA\",\n    cnpj: \"33.444.555/0001-00\",\n    phone: \"(21) 2345-9876\",\n    email: \"contato@colombo.com\",\n    contact: \"Helena Oliveira\",\n    city: \"Rio de Janeiro\",\n    healthScore: \"Saudável\",\n    responsible: \"Maria Silva\",\n  },\n  {\n    type: \"client\",\n    name: \"Empório Santa Maria\",\n    razaoSocial: \"Empório Santa Maria Alimentos Ltda\",\n    cnpj: \"44.555.666/0001-11\",\n    phone: \"(11) 3456-1234\",\n    email: \"contato@emporiosantamaria.com\",\n    contact: \"Roberto Almeida\",\n    city: \"São Paulo\",\n    healthScore: \"Atenção\",\n    responsible: \"Rafael Costa\",\n  },\n];\n\n// ---------------------------------------------------------------------------\n// Pages for navigation\n// ---------------------------------------------------------------------------\n\nconst basePages = [\n  { path: \"/dashboard\", label: \"Dashboard\", icon: LayoutDashboard },\n  { path: \"/activities\", label: \"Atividades\", icon: CalendarCheck },\n  { path: \"/pipes\", label: \"Pipeline de Vendas\", icon: Kanban },\n  { path: \"/clients\", label: \"Clientes\", icon: Users },\n];\n\nconst privilegedPages = [\n  { path: \"/reports\", label: \"Relatórios\", icon: BarChart3 },\n  { path: \"/audit\", label: \"Auditoria\", icon: ShieldCheck },\n  { path: \"/settings/general\", label: \"Configurações\", icon: Settings },\n  { path: \"/settings/users\", label: \"Gestão de Usuários\", icon: User },\n  { path: \"/settings/profile\", label: \"Meu Perfil\", icon: User },\n];\n\n// ---------------------------------------------------------------------------\n// Helpers\n// ---------------------------------------------------------------------------\n\nconst MAX_RESULTS_PER_GROUP = 5;\nconst DEBOUNCE_MS = 300;\nconst MIN_QUERY_LENGTH = 2;\n\nfunction normalize(str: string): string {\n  return str\n    .toLowerCase()\n    .normalize(\"NFD\")\n    .replace(/[\\u0300-\\u036f]/g, \"\");\n}\n\nfunction matchesQuery(item: SearchableItem, query: string): boolean {\n  const q = normalize(query);\n  return (\n    normalize(item.name).includes(q) ||\n    normalize(item.razaoSocial).includes(q) ||\n    normalize(item.cnpj).includes(q) ||\n    normalize(item.phone).includes(q) ||\n    normalize(item.email).includes(q) ||\n    normalize(item.contact).includes(q) ||\n    normalize(item.city).includes(q)\n  );\n}\n\nfunction healthScoreColor(score: string | undefined): string {\n  switch (score) {\n    case \"Saudável\":\n      return \"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-400\";\n    case \"Atenção\":\n      return \"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-400\";\n    case \"Crítico\":\n      return \"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400\";\n    default:\n      return \"\";\n  }\n}\n\n// ---------------------------------------------------------------------------\n// Hook: debounced value\n// ---------------------------------------------------------------------------\n\nfunction useDebouncedValue<T>(value: T, delay: number): T {\n  const [debounced, setDebounced] = useState(value);\n  useEffect(() => {\n    const id = setTimeout(() => setDebounced(value), delay);\n    return () => clearTimeout(id);\n  }, [value, delay]);\n  return debounced;\n}\n\n// ---------------------------------------------------------------------------\n// Component\n// ---------------------------------------------------------------------------\n\nexport function GlobalSearch() {\n  const { isSearchOpen, setSearchOpen, openDrawer, openModal } = useUIStore();\n  const { user, permissions } = useAuthStore();\n  const router = useRouter();\n\n  const [query, setQuery] = useState(\"\");\n  const debouncedQuery = useDebouncedValue(query, DEBOUNCE_MS);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Reset query when dialog closes\n  useEffect(() => {\n    if (!isSearchOpen) {\n      startTransition(() => {\n        setQuery(\"\");\n      });\n    }\n  }, [isSearchOpen]);\n  // Cmd+K / Ctrl+K shortcut\n  useEffect(() => {\n    function onKeyDown(e: KeyboardEvent) {\n      if ((e.metaKey || e.ctrlKey) && e.key === \"k\") {\n        e.preventDefault();\n        const currentOpen = useUIStore.getState().isSearchOpen;\n        setSearchOpen(!currentOpen);\n      }\n    }\n    document.addEventListener(\"keydown\", onKeyDown);\n    return () => document.removeEventListener(\"keydown\", onKeyDown);\n  }, [setSearchOpen]);\n\n  // Filter mock results based on debounced query\n  const hasSearchQuery = debouncedQuery.trim().length >= MIN_QUERY_LENGTH;\n  const currentSellerName = useMemo(() => {\n    const preferredName = user?.name?.trim();\n    if (\n      preferredName &&\n      mockSearchableItems.some((item) => item.responsible === preferredName)\n    ) {\n      return preferredName;\n    }\n    return \"Maria Silva\";\n  }, [user?.name]);\n\n  const isSellerMode = !permissions?.canViewAllUnits;\n\n  const searchableItems = useMemo(() => {\n    if (!isSellerMode) return mockSearchableItems;\n    return mockSearchableItems.filter(\n      (item) => item.responsible === currentSellerName\n    );\n  }, [currentSellerName, isSellerMode]);\n  const hasIntelligenceAccess = user?.role\n    ? canAccessIntelligence(user.role)\n    : false;\n\n  const pages = useMemo(() => {\n    const items = [...basePages];\n    if (permissions?.canViewFinance) {\n      items.push({ path: \"/finance\", label: \"Financeiro\", icon: DollarSign });\n    }\n    if (permissions?.canManageGoals) {\n      items.push({ path: \"/goals\", label: \"Metas\", icon: Target });\n    }\n    if (hasIntelligenceAccess) {\n      items.push({\n        path: \"/intelligence\",\n        label: \"Menux Intelligence\",\n        icon: Handshake,\n      });\n    }\n    if (permissions?.canViewReports) {\n      items.push(\n        ...privilegedPages.filter((page) => page.path.startsWith(\"/reports\"))\n      );\n    }\n    if (permissions?.canManageSettings) {\n      items.push(\n        ...privilegedPages.filter((page) => page.path.startsWith(\"/settings\"))\n      );\n    }\n    if (permissions?.canViewAllUnits) {\n      items.push(\n        ...privilegedPages.filter((page) => page.path.startsWith(\"/audit\"))\n      );\n    }\n    return items;\n  }, [\n    hasIntelligenceAccess,\n    permissions?.canManageSettings,\n    permissions?.canManageGoals,\n    permissions?.canViewFinance,\n    permissions?.canViewAllUnits,\n    permissions?.canViewReports,\n  ]);\n\n  const opportunities = useMemo(() => {\n    if (!hasSearchQuery) return [];\n    return searchableItems\n      .filter((i) => i.type === \"opportunity\" && matchesQuery(i, debouncedQuery))\n      .slice(0, MAX_RESULTS_PER_GROUP);\n  }, [debouncedQuery, hasSearchQuery, searchableItems]);\n\n  const clients = useMemo(() => {\n    if (!hasSearchQuery) return [];\n    return searchableItems\n      .filter((i) => i.type === \"client\" && matchesQuery(i, debouncedQuery))\n      .slice(0, MAX_RESULTS_PER_GROUP);\n  }, [debouncedQuery, hasSearchQuery, searchableItems]);\n\n  const hasResults = opportunities.length > 0 || clients.length > 0;\n  const showNoResults = hasSearchQuery && !hasResults;\n\n  // Navigation helpers\n  const navigate = useCallback(\n    (path: string) => {\n      router.push(path);\n      setSearchOpen(false);\n    },\n    [router, setSearchOpen],\n  );\n\n  const openOpportunity = useCallback(\n    (item: SearchableItem) => {\n      openModal(\"lead-card\", {\n        name: item.name,\n        razaoSocial: item.razaoSocial,\n        cnpj: item.cnpj,\n        phone: item.phone,\n        email: item.email,\n        contact: item.contact,\n        city: item.city,\n        stage: item.stage,\n        responsible: item.responsible,\n      });\n      setSearchOpen(false);\n    },\n    [openModal, setSearchOpen],\n  );\n\n  const openClient = useCallback(\n    (item: SearchableItem) => {\n      openDrawer(\"client-card\", {\n        name: item.name,\n        razaoSocial: item.razaoSocial,\n        cnpj: item.cnpj,\n        phone: item.phone,\n        email: item.email,\n        contact: item.contact,\n        city: item.city,\n        healthScore: item.healthScore,\n        responsible: item.responsible,\n      });\n      setSearchOpen(false);\n    },\n    [openDrawer, setSearchOpen],\n  );\n\n  // Build a unique value for each cmdk item to avoid collisions\n  const itemValue = (item: SearchableItem) =>\n    `${item.type}-${item.cnpj}-${item.name}`;\n\n  return (\n    <CommandDialog\n      open={isSearchOpen}\n      onOpenChange={(open) => {\n        setSearchOpen(open);\n        if (!open) setQuery(\"\");\n      }}\n      title=\"Busca Global\"\n      description=\"Busque por páginas, oportunidades e clientes\"\n      showCloseButton={false}\n    >\n      <CommandInput\n        ref={inputRef}\n        placeholder=\"Buscar páginas, oportunidades, clientes...\"\n        className=\"font-body\"\n        value={query}\n        onValueChange={setQuery}\n      />\n\n      <CommandList className=\"max-h-[420px]\">\n        {/* ---- Empty state ---- */}\n        {showNoResults && (\n          <div className=\"py-8 text-center\">\n            <p className=\"font-body text-sm text-zinc-500\">\n              Nenhum resultado para{\" \"}\n              <span className=\"font-medium text-zinc-700 dark:text-zinc-300\">\n                &ldquo;{debouncedQuery}&rdquo;\n              </span>\n            </p>\n          </div>\n        )}\n\n        {/* ---- Opportunities ---- */}\n        {opportunities.length > 0 && (\n          <>\n            <CommandGroup\n              heading={\n                <span className=\"font-heading text-xs font-semibold uppercase tracking-wider text-brand\">\n                  Oportunidades\n                </span>\n              }\n            >\n              {opportunities.map((item) => (\n                <CommandItem\n                  key={itemValue(item)}\n                  value={itemValue(item)}\n                  onSelect={() => openOpportunity(item)}\n                  className=\"flex items-center gap-3 rounded-[10px] px-3 py-2.5\"\n                >\n                  <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-[10px] bg-amber-100 dark:bg-amber-900/40\">\n                    <Handshake className=\"h-4 w-4 text-amber-600 dark:text-amber-400\" />\n                  </div>\n                  <div className=\"flex min-w-0 flex-1 flex-col gap-0.5\">\n                    <span className=\"font-body text-sm font-medium truncate\">\n                      {item.name}\n                    </span>\n                    <span className=\"font-body text-xs text-muted-foreground truncate\">\n                      {item.contact} &middot; {item.city}\n                    </span>\n                  </div>\n                  <Badge\n                    variant=\"secondary\"\n                    className=\"rounded-[10px] text-[10px] font-body shrink-0\"\n                  >\n                    {item.stage}\n                  </Badge>\n                </CommandItem>\n              ))}\n            </CommandGroup>\n            <CommandSeparator />\n          </>\n        )}\n\n        {/* ---- Clients ---- */}\n        {clients.length > 0 && (\n          <>\n            <CommandGroup\n              heading={\n                <span className=\"font-heading text-xs font-semibold uppercase tracking-wider text-brand\">\n                  Clientes\n                </span>\n              }\n            >\n              {clients.map((item) => (\n                <CommandItem\n                  key={itemValue(item)}\n                  value={itemValue(item)}\n                  onSelect={() => openClient(item)}\n                  className=\"flex items-center gap-3 rounded-[10px] px-3 py-2.5\"\n                >\n                  <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-[10px] bg-blue-100 dark:bg-blue-900/40\">\n                    <Building2 className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n                  </div>\n                  <div className=\"flex min-w-0 flex-1 flex-col gap-0.5\">\n                    <span className=\"font-body text-sm font-medium truncate\">\n                      {item.name}\n                    </span>\n                    <span className=\"font-body text-xs text-muted-foreground truncate\">\n                      {item.contact} &middot; {item.city}\n                    </span>\n                  </div>\n                  <Badge\n                    variant=\"secondary\"\n                    className={`rounded-[10px] text-[10px] font-body shrink-0 border-0 ${healthScoreColor(item.healthScore)}`}\n                  >\n                    {item.healthScore}\n                  </Badge>\n                </CommandItem>\n              ))}\n            </CommandGroup>\n            <CommandSeparator />\n          </>\n        )}\n\n        {/* ---- Pages ---- */}\n        <CommandGroup\n          heading={\n            <span className=\"font-heading text-xs font-semibold uppercase tracking-wider text-muted-foreground\">\n              Páginas\n            </span>\n          }\n        >\n          {pages.map((page) => {\n            const Icon = page.icon;\n            return (\n              <CommandItem\n                key={page.path}\n                value={`page-${page.label}`}\n                onSelect={() => navigate(page.path)}\n                className=\"rounded-[10px] px-3 py-2\"\n              >\n                <Icon className=\"mr-2 h-4 w-4\" />\n                <span className=\"font-body\">{page.label}</span>\n              </CommandItem>\n            );\n          })}\n        </CommandGroup>\n      </CommandList>\n\n      {/* ---- Footer hints ---- */}\n      <div className=\"flex items-center justify-between border-t px-3 py-2\">\n        <div className=\"flex items-center gap-3 font-body text-[11px] text-muted-foreground\">\n          <span className=\"flex items-center gap-1\">\n            <kbd className=\"rounded-[5px] border bg-muted px-1.5 py-0.5 text-[10px] font-medium\">\n              &uarr;&darr;\n            </kbd>\n            navegar\n          </span>\n          <span className=\"flex items-center gap-1\">\n            <kbd className=\"rounded-[5px] border bg-muted px-1.5 py-0.5 text-[10px] font-medium\">\n              &crarr;\n            </kbd>\n            selecionar\n          </span>\n          <span className=\"flex items-center gap-1\">\n            <kbd className=\"rounded-[5px] border bg-muted px-1.5 py-0.5 text-[10px] font-medium\">\n              esc\n            </kbd>\n            fechar\n          </span>\n        </div>\n        <div className=\"flex items-center gap-1 font-body text-[11px] text-muted-foreground\">\n          <kbd className=\"rounded-[5px] border bg-muted px-1.5 py-0.5 text-[10px] font-medium\">\n            &#8984;K\n          </kbd>\n          busca rápida\n        </div>\n      </div>\n    </CommandDialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAQA;AACA;AACA;AACA;AA7BA;;;;;;;;;;AAiDA,MAAM,sBAAwC;IAC5C,gBAAgB;IAChB;QACE,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,OAAO;QACP,OAAO;QACP,SAAS;QACT,MAAM;QACN,OAAO;QACP,aAAa;IACf;IACA;QACE,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,OAAO;QACP,OAAO;QACP,SAAS;QACT,MAAM;QACN,OAAO;QACP,aAAa;IACf;IACA;QACE,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,OAAO;QACP,OAAO;QACP,SAAS;QACT,MAAM;QACN,OAAO;QACP,aAAa;IACf;IACA;QACE,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,OAAO;QACP,OAAO;QACP,SAAS;QACT,MAAM;QACN,OAAO;QACP,aAAa;IACf;IACA;QACE,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,OAAO;QACP,OAAO;QACP,SAAS;QACT,MAAM;QACN,OAAO;QACP,aAAa;IACf;IACA;QACE,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,OAAO;QACP,OAAO;QACP,SAAS;QACT,MAAM;QACN,OAAO;QACP,aAAa;IACf;IACA;QACE,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,OAAO;QACP,OAAO;QACP,SAAS;QACT,MAAM;QACN,OAAO;QACP,aAAa;IACf;IACA;QACE,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,OAAO;QACP,OAAO;QACP,SAAS;QACT,MAAM;QACN,OAAO;QACP,aAAa;IACf;IACA,UAAU;IACV;QACE,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,OAAO;QACP,OAAO;QACP,SAAS;QACT,MAAM;QACN,aAAa;QACb,aAAa;IACf;IACA;QACE,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,OAA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"}},
    {"offset": {"line": 2815, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/shared/mobile-bottom-nav.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport {\n  LayoutDashboard,\n  CalendarCheck,\n  Kanban,\n  Users,\n  MoreHorizontal,\n  DollarSign,\n  Settings,\n  Sparkles,\n  LogOut,\n} from \"lucide-react\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { cn } from \"@/lib/utils\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { canAccessIntelligence } from \"@/lib/intelligence-permissions\";\n\n// ── Nav item type ──────────────────────────────────────────────────\ninterface NavItem {\n  label: string;\n  href: string;\n  matchPrefix?: string;\n  icon: React.ComponentType<{ className?: string }>;\n}\n\nconst mainNavItems: NavItem[] = [\n  { label: \"Dashboard\", href: \"/dashboard\", icon: LayoutDashboard },\n  { label: \"Atividades\", href: \"/activities\", icon: CalendarCheck },\n  { label: \"Pipeline\", href: \"/pipes\", icon: Kanban },\n  { label: \"Clientes\", href: \"/clients\", icon: Users },\n];\n\nconst moreNavItemsBase: NavItem[] = [\n  { label: \"Financeiro\", href: \"/finance\", icon: DollarSign },\n];\n\n// ── Mobile Bottom Nav ──────────────────────────────────────────────\nexport function MobileBottomNav() {\n  const pathname = usePathname();\n  const router = useRouter();\n  const permissions = useAuthStore((state) => state.permissions);\n  const user = useAuthStore((state) => state.user);\n  const logout = useAuthStore((state) => state.logout);\n  const [isMoreOpen, setIsMoreOpen] = useState(false);\n  const isIntelligencePage = pathname.startsWith(\"/intelligence\");\n  const hasIntelligenceAccess = user?.role\n    ? canAccessIntelligence(user.role)\n    : false;\n\n  const moreNavItems = useMemo(() => {\n    const items: NavItem[] = permissions?.canViewFinance\n      ? [...moreNavItemsBase]\n      : moreNavItemsBase.filter((item) => item.href !== \"/finance\");\n    if (permissions?.canManageSettings) {\n      items.splice(1, 0, {\n        label: \"Configurações\",\n        href: \"/settings/general\",\n        matchPrefix: \"/settings\",\n        icon: Settings,\n      });\n    }\n    if (hasIntelligenceAccess) {\n      items.push({\n        label: \"Menux Intelligence\",\n        href: \"/intelligence\",\n        icon: Sparkles,\n      });\n    }\n    return items;\n  }, [\n    hasIntelligenceAccess,\n    permissions?.canManageSettings,\n    permissions?.canViewFinance,\n  ]);\n\n  const isActive = (item: NavItem) => {\n    const target = item.matchPrefix ?? item.href;\n    return pathname.startsWith(target);\n  };\n\n  const isMoreActive = moreNavItems.some((item) => isActive(item));\n\n  const handleLogout = () => {\n    logout();\n    setIsMoreOpen(false);\n    router.replace(\"/login\");\n  };\n\n  return (\n    <>\n      {/* Bottom nav bar - visible only on mobile (below md breakpoint) */}\n      <nav className=\"premium-grain fixed bottom-0 left-0 right-0 z-50 h-16 border-t border-zinc-200/75 bg-white/90 backdrop-blur-xl md:hidden\">\n        <div className=\"pointer-events-none absolute inset-x-0 top-0 h-px bg-linear-to-r from-transparent via-brand/35 to-transparent\" />\n        <div className=\"flex items-center justify-around h-full px-2\">\n          {mainNavItems.map((item) => {\n            const Icon = item.icon;\n            const active = isActive(item);\n\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                className={cn(\n                  \"premium-shine flex h-full flex-1 flex-col items-center justify-center gap-1 rounded-xl transition-colors\",\n                  active\n                    ? \"bg-brand/10 text-brand-strong\"\n                    : \"text-zinc-400 hover:text-zinc-600\"\n                )}\n              >\n                <Icon className=\"size-5\" />\n                <span className=\"text-[10px] font-heading font-medium\">\n                  {item.label}\n                </span>\n              </Link>\n            );\n          })}\n\n          {/* \"Mais\" button */}\n          <button\n            type=\"button\"\n            onClick={() => setIsMoreOpen(true)}\n            className={cn(\n              \"premium-shine flex h-full flex-1 flex-col items-center justify-center gap-1 rounded-xl transition-colors\",\n              isIntelligencePage\n                ? \"menux-intelligence-btn-soft text-slate-100\"\n                : isMoreActive\n                  ? \"bg-brand/10 text-brand-strong\"\n                  : \"text-zinc-400 hover:text-zinc-600\"\n            )}\n          >\n            <MoreHorizontal className=\"size-5\" />\n            <span className=\"text-[10px] font-heading font-medium\">Mais</span>\n          </button>\n        </div>\n      </nav>\n\n      {/* \"Mais\" Sheet */}\n      <Sheet open={isMoreOpen} onOpenChange={setIsMoreOpen}>\n        <SheetContent side=\"bottom\" className=\"rounded-t-[15px] premium-panel\">\n          <SheetHeader>\n            <SheetTitle className=\"font-heading\">Mais opções</SheetTitle>\n          </SheetHeader>\n\n          <div className=\"flex flex-col gap-1 py-2\">\n            {moreNavItems.map((item) => {\n              const Icon = item.icon;\n              const active = isActive(item);\n              const isIntelligenceItem = item.href === \"/intelligence\";\n\n              return (\n                <Link\n                  key={item.href}\n                  href={item.href}\n                  onClick={() => setIsMoreOpen(false)}\n                  className={cn(\n                    \"flex items-center gap-3 px-4 py-3 rounded-[10px] transition-colors\",\n                    isIntelligenceItem &&\n                      (active\n                        ? \"menux-intelligence-btn\"\n                        : \"menux-intelligence-btn-soft\"),\n                    !isIntelligenceItem &&\n                      (active\n                        ? \"bg-brand/10 text-brand\"\n                        : \"text-zinc-700 hover:bg-zinc-100\")\n                  )}\n                >\n                  <Icon\n                    className={cn(\n                      \"size-5\",\n                      isIntelligenceItem && \"text-cyan-100\"\n                    )}\n                  />\n                  <span className=\"font-body text-sm font-medium\">\n                    {item.label}\n                  </span>\n                </Link>\n              );\n            })}\n\n            {/* Separator */}\n            <div className=\"h-px bg-zinc-200 my-2\" />\n\n            {/* Sair */}\n            <button\n              type=\"button\"\n              className=\"flex items-center gap-3 px-4 py-3 rounded-[10px] text-status-danger hover:bg-status-danger-light transition-colors\"\n              onClick={handleLogout}\n            >\n              <LogOut className=\"size-5\" />\n              <span className=\"font-body text-sm font-medium\">Sair</span>\n            </button>\n          </div>\n        </SheetContent>\n      </Sheet>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3113, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/shared/error-fallback.tsx"],"sourcesContent":["\"use client\";\n\nimport { AlertTriangle, RotateCcw } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface ErrorFallbackProps {\n  error?: Error | null;\n  onRetry?: () => void;\n}\n\nexport function ErrorFallback({ error, onRetry }: ErrorFallbackProps) {\n  return (\n    <div className=\"flex min-h-[200px] flex-col items-center justify-center gap-4 rounded-xl border border-zinc-200 bg-white p-6 text-center\">\n      <div className=\"flex h-12 w-12 items-center justify-center rounded-full bg-red-50\">\n        <AlertTriangle className=\"h-6 w-6 text-red-500\" />\n      </div>\n      <div className=\"space-y-1\">\n        <h3 className=\"font-heading text-sm font-semibold text-zinc-900\">Algo deu errado</h3>\n        <p className=\"max-w-sm font-body text-xs text-zinc-500\">\n          {error?.message || \"Ocorreu um erro inesperado. Tente novamente.\"}\n        </p>\n      </div>\n      {onRetry && (\n        <Button variant=\"outline\" size=\"sm\" onClick={onRetry} className=\"gap-1.5\">\n          <RotateCcw className=\"h-3.5 w-3.5\" />\n          Tentar novamente\n        </Button>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAHA;;;;AAUO,SAAS,cAAc,EAAE,KAAK,EAAE,OAAO,EAAsB;IAClE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,yOAAa;oBAAC,WAAU;;;;;;;;;;;0BAE3B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmD;;;;;;kCACjE,8OAAC;wBAAE,WAAU;kCACV,OAAO,WAAW;;;;;;;;;;;;YAGtB,yBACC,8OAAC,4IAAM;gBAAC,SAAQ;gBAAU,MAAK;gBAAK,SAAS;gBAAS,WAAU;;kCAC9D,8OAAC,6NAAS;wBAAC,WAAU;;;;;;oBAAgB;;;;;;;;;;;;;AAM/C"}},
    {"offset": {"line": 3199, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/shared/error-boundary.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { ErrorFallback } from \"./error-fallback\";\n\ninterface ErrorBoundaryProps {\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n  onError?: (error: Error, errorInfo: React.ErrorInfo) => void;\n  name?: string;\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo): void {\n    console.error(`[ErrorBoundary${this.props.name ? `: ${this.props.name}` : \"\"}]`, error, errorInfo);\n    this.props.onError?.(error, errorInfo);\n  }\n\n  private handleReset = () => {\n    this.setState({ hasError: false, error: null });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n      return <ErrorFallback error={this.state.error} onRetry={this.handleReset} />;\n    }\n    return this.props.children;\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAiBO,MAAM,sBAAsB,gNAAK,CAAC,SAAS;IAChD,YAAY,KAAyB,CAAE;QACrC,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG;YAAE,UAAU;YAAO,OAAO;QAAK;IAC9C;IAEA,OAAO,yBAAyB,KAAY,EAAsB;QAChE,OAAO;YAAE,UAAU;YAAM;QAAM;IACjC;IAEA,kBAAkB,KAAY,EAAE,SAA0B,EAAQ;QAChE,QAAQ,KAAK,CAAC,CAAC,cAAc,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,GAAG,CAAC,CAAC,EAAE,OAAO;QACxF,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO;IAC9B;IAEQ,cAAc;QACpB,IAAI,CAAC,QAAQ,CAAC;YAAE,UAAU;YAAO,OAAO;QAAK;IAC/C,EAAE;IAEF,SAAS;QACP,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACvB,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACvB,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;YAC5B;YACA,qBAAO,8OAAC,kKAAa;gBAAC,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK;gBAAE,SAAS,IAAI,CAAC,WAAW;;;;;;QAC1E;QACA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;IAC5B;AACF"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/pipes/lib/pipeline-config.tsx"],"sourcesContent":["import { Flame, Thermometer, Snowflake } from \"lucide-react\";\nimport type { Opportunity, PipelineStage, Temperature } from \"@/types\";\n\n// ===================================================================\n// Funnel Definitions\n// ===================================================================\n\nexport interface FunnelDefinition {\n  id: string;\n  label: string;\n  stages: { id: PipelineStage; label: string; slaHours: number }[];\n}\n\nexport const funnels: FunnelDefinition[] = [\n  {\n    id: \"comercial\",\n    label: \"Leads\",\n    stages: [\n      { id: \"lead-in\", label: \"Lead-In\", slaHours: 48 },\n      { id: \"contato-feito\", label: \"Contato Feito\", slaHours: 72 },\n      { id: \"reuniao-agendada\", label: \"Reuniao Agendada\", slaHours: 120 },\n      { id: \"proposta-enviada\", label: \"Proposta Enviada\", slaHours: 96 },\n      { id: \"negociacao\", label: \"Negociacao\", slaHours: 168 },\n      { id: \"fechamento\", label: \"Fechamento\", slaHours: 48 },\n    ],\n  },\n  {\n    id: \"indicacao\",\n    label: \"Indicacao\",\n    stages: [\n      { id: \"lead-in\", label: \"Lead-In\", slaHours: 24 },\n      { id: \"contato-feito\", label: \"Contato Feito\", slaHours: 48 },\n      { id: \"proposta-enviada\", label: \"Proposta Enviada\", slaHours: 72 },\n      { id: \"fechamento\", label: \"Fechamento\", slaHours: 48 },\n    ],\n  },\n];\n\n// ===================================================================\n// Stage Validation Required Fields\n// ===================================================================\n\nexport const stageRequiredFields: Record<\n  PipelineStage,\n  { field: keyof Opportunity; label: string }[]\n> = {\n  \"lead-in\": [],\n  \"contato-feito\": [{ field: \"clientName\", label: \"Nome do contato\" }],\n  \"reuniao-agendada\": [\n    { field: \"clientName\", label: \"Nome do contato\" },\n    { field: \"expectedCloseDate\", label: \"Data prevista de fechamento\" },\n  ],\n  \"proposta-enviada\": [\n    { field: \"clientName\", label: \"Nome do contato\" },\n    { field: \"expectedCloseDate\", label: \"Data prevista de fechamento\" },\n    { field: \"value\", label: \"Valor da proposta\" },\n  ],\n  negociacao: [\n    { field: \"clientName\", label: \"Nome do contato\" },\n    { field: \"expectedCloseDate\", label: \"Data prevista de fechamento\" },\n    { field: \"value\", label: \"Valor da proposta\" },\n    { field: \"monthlyValue\", label: \"Valor mensal\" },\n  ],\n  fechamento: [\n    { field: \"clientName\", label: \"Nome do contato\" },\n    { field: \"expectedCloseDate\", label: \"Data prevista de fechamento\" },\n    { field: \"value\", label: \"Valor da proposta\" },\n    { field: \"monthlyValue\", label: \"Valor mensal\" },\n  ],\n};\n\n// ===================================================================\n// Temperature Config\n// ===================================================================\n\nexport const temperatureConfig: Record<\n  Temperature,\n  { icon: React.ReactNode; label: string; colorClass: string }\n> = {\n  hot: {\n    icon: <Flame className=\"h-3.5 w-3.5\" />,\n    label: \"Quente\",\n    colorClass: \"text-status-danger\",\n  },\n  warm: {\n    icon: <Thermometer className=\"h-3.5 w-3.5\" />,\n    label: \"Morno\",\n    colorClass: \"text-status-warning\",\n  },\n  cold: {\n    icon: <Snowflake className=\"h-3.5 w-3.5\" />,\n    label: \"Frio\",\n    colorClass: \"text-status-info\",\n  },\n};\n\n// ===================================================================\n// Stage Color Palette\n// ===================================================================\n\nexport const stageColorPalette = [\n  { id: \"default\", label: \"Padrao\", bg: \"bg-brand\", hex: \"#1d4ed8\" },\n  { id: \"blue\", label: \"Azul\", bg: \"bg-blue-500\", hex: \"#3b82f6\" },\n  { id: \"cyan\", label: \"Ciano\", bg: \"bg-cyan-500\", hex: \"#06b6d4\" },\n  { id: \"green\", label: \"Verde\", bg: \"bg-emerald-500\", hex: \"#10b981\" },\n  { id: \"yellow\", label: \"Amarelo\", bg: \"bg-amber-400\", hex: \"#fbbf24\" },\n  { id: \"orange\", label: \"Laranja\", bg: \"bg-orange-500\", hex: \"#f97316\" },\n  { id: \"red\", label: \"Vermelho\", bg: \"bg-red-500\", hex: \"#ef4444\" },\n  { id: \"pink\", label: \"Rosa\", bg: \"bg-pink-500\", hex: \"#ec4899\" },\n  { id: \"gray\", label: \"Cinza\", bg: \"bg-zinc-400\", hex: \"#a1a1aa\" },\n];\n\n// ===================================================================\n// Stage Customization\n// ===================================================================\n\nexport interface StageCustomization {\n  label?: string;\n  colorId?: string;\n}\n\nexport const STAGE_CUSTOM_STORAGE_KEY = \"flow-stage-customizations\";\n\nexport function loadStageCustomizations(): Record<string, StageCustomization> {\n  if (typeof window === \"undefined\") return {};\n  try {\n    const raw = localStorage.getItem(STAGE_CUSTOM_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  } catch {\n    try { localStorage.removeItem(STAGE_CUSTOM_STORAGE_KEY); } catch { }\n    return {};\n  }\n}\n\nexport function saveStageCustomizations(\n  data: Record<string, StageCustomization>\n): void {\n  if (typeof window === \"undefined\") return;\n  try {\n    localStorage.setItem(STAGE_CUSTOM_STORAGE_KEY, JSON.stringify(data));\n  } catch {\n    // Silently ignore quota errors\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;;;AAaO,MAAM,UAA8B;IACzC;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;YACN;gBAAE,IAAI;gBAAW,OAAO;gBAAW,UAAU;YAAG;YAChD;gBAAE,IAAI;gBAAiB,OAAO;gBAAiB,UAAU;YAAG;YAC5D;gBAAE,IAAI;gBAAoB,OAAO;gBAAoB,UAAU;YAAI;YACnE;gBAAE,IAAI;gBAAoB,OAAO;gBAAoB,UAAU;YAAG;YAClE;gBAAE,IAAI;gBAAc,OAAO;gBAAc,UAAU;YAAI;YACvD;gBAAE,IAAI;gBAAc,OAAO;gBAAc,UAAU;YAAG;SACvD;IACH;IACA;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;YACN;gBAAE,IAAI;gBAAW,OAAO;gBAAW,UAAU;YAAG;YAChD;gBAAE,IAAI;gBAAiB,OAAO;gBAAiB,UAAU;YAAG;YAC5D;gBAAE,IAAI;gBAAoB,OAAO;gBAAoB,UAAU;YAAG;YAClE;gBAAE,IAAI;gBAAc,OAAO;gBAAc,UAAU;YAAG;SACvD;IACH;CACD;AAMM,MAAM,sBAGT;IACF,WAAW,EAAE;IACb,iBAAiB;QAAC;YAAE,OAAO;YAAc,OAAO;QAAkB;KAAE;IACpE,oBAAoB;QAClB;YAAE,OAAO;YAAc,OAAO;QAAkB;QAChD;YAAE,OAAO;YAAqB,OAAO;QAA8B;KACpE;IACD,oBAAoB;QAClB;YAAE,OAAO;YAAc,OAAO;QAAkB;QAChD;YAAE,OAAO;YAAqB,OAAO;QAA8B;QACnE;YAAE,OAAO;YAAS,OAAO;QAAoB;KAC9C;IACD,YAAY;QACV;YAAE,OAAO;YAAc,OAAO;QAAkB;QAChD;YAAE,OAAO;YAAqB,OAAO;QAA8B;QACnE;YAAE,OAAO;YAAS,OAAO;QAAoB;QAC7C;YAAE,OAAO;YAAgB,OAAO;QAAe;KAChD;IACD,YAAY;QACV;YAAE,OAAO;YAAc,OAAO;QAAkB;QAChD;YAAE,OAAO;YAAqB,OAAO;QAA8B;QACnE;YAAE,OAAO;YAAS,OAAO;QAAoB;QAC7C;YAAE,OAAO;YAAgB,OAAO;QAAe;KAChD;AACH;AAMO,MAAM,oBAGT;IACF,KAAK;QACH,oBAAM,8OAAC,6MAAK;YAAC,WAAU;;;;;;QACvB,OAAO;QACP,YAAY;IACd;IACA,MAAM;QACJ,oBAAM,8OAAC,+NAAW;YAAC,WAAU;;;;;;QAC7B,OAAO;QACP,YAAY;IACd;IACA,MAAM;QACJ,oBAAM,8OAAC,yNAAS;YAAC,WAAU;;;;;;QAC3B,OAAO;QACP,YAAY;IACd;AACF;AAMO,MAAM,oBAAoB;IAC/B;QAAE,IAAI;QAAW,OAAO;QAAU,IAAI;QAAY,KAAK;IAAU;IACjE;QAAE,IAAI;QAAQ,OAAO;QAAQ,IAAI;QAAe,KAAK;IAAU;IAC/D;QAAE,IAAI;QAAQ,OAAO;QAAS,IAAI;QAAe,KAAK;IAAU;IAChE;QAAE,IAAI;QAAS,OAAO;QAAS,IAAI;QAAkB,KAAK;IAAU;IACpE;QAAE,IAAI;QAAU,OAAO;QAAW,IAAI;QAAgB,KAAK;IAAU;IACrE;QAAE,IAAI;QAAU,OAAO;QAAW,IAAI;QAAiB,KAAK;IAAU;IACtE;QAAE,IAAI;QAAO,OAAO;QAAY,IAAI;QAAc,KAAK;IAAU;IACjE;QAAE,IAAI;QAAQ,OAAO;QAAQ,IAAI;QAAe,KAAK;IAAU;IAC/D;QAAE,IAAI;QAAQ,OAAO;QAAS,IAAI;QAAe,KAAK;IAAU;CACjE;AAWM,MAAM,2BAA2B;AAEjC,SAAS;IACd,wCAAmC,OAAO,CAAC;;;AAQ7C;AAEO,SAAS,wBACd,IAAwC;IAExC,wCAAmC;;;AAMrC"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/pipes/lib/pipeline-validation.ts"],"sourcesContent":["import type { Opportunity, PipelineStage } from \"@/types\";\nimport { PIPELINE_STAGE_ORDER } from \"@/lib/business-rules\";\nimport { stageRequiredFields } from \"./pipeline-config\";\n\n// ===================================================================\n// Helpers\n// ===================================================================\n\nexport function getInitials(name: string): string {\n  return name\n    .split(\" \")\n    .filter(Boolean)\n    .map((w) => w[0])\n    .slice(0, 2)\n    .join(\"\")\n    .toUpperCase();\n}\n\n// ===================================================================\n// SLA Status\n// ===================================================================\n\nexport type SlaStatus = \"ok\" | \"near\" | \"breached\";\n\nexport function getSlaStatus(\n  slaDeadline?: string\n): { status: SlaStatus; label: string; detailLabel: string } {\n  if (!slaDeadline)\n    return { status: \"ok\", label: \"\", detailLabel: \"SLA nao definido\" };\n  const now = new Date();\n  const deadline = new Date(slaDeadline);\n  const diffMs = deadline.getTime() - now.getTime();\n\n  if (diffMs <= 0) {\n    const overMs = Math.abs(diffMs);\n    const overHours = Math.floor(overMs / (1000 * 60 * 60));\n    const overDays = Math.floor(overHours / 24);\n    const remainHours = overHours % 24;\n    const overLabel =\n      overDays > 0 ? `${overDays}d ${remainHours}h` : `${overHours}h`;\n    return {\n      status: \"breached\",\n      label: \"Estourado\",\n      detailLabel: `SLA estourado ha ${overLabel}`,\n    };\n  }\n\n  const totalHours = diffMs / (1000 * 60 * 60);\n  const days = Math.floor(totalHours / 24);\n  const hours = Math.floor(totalHours % 24);\n  const label = days > 0 ? `${days}d ${hours}h` : `${hours}h`;\n\n  if (totalHours <= 12) {\n    return {\n      status: \"near\",\n      label,\n      detailLabel: `SLA vence em ${label} — atencao!`,\n    };\n  }\n\n  return { status: \"ok\", label, detailLabel: `SLA restante: ${label}` };\n}\n\nexport function getSlaColors(status: SlaStatus) {\n  switch (status) {\n    case \"ok\":\n      return {\n        dot: \"bg-status-success\",\n        border: \"border-l-brand\",\n        text: \"text-zinc-400\",\n      };\n    case \"near\":\n      return {\n        dot: \"bg-status-warning\",\n        border: \"border-l-status-warning\",\n        text: \"text-status-warning\",\n      };\n    case \"breached\":\n      return {\n        dot: \"bg-status-danger\",\n        border: \"border-l-status-danger\",\n        text: \"text-status-danger\",\n      };\n  }\n}\n\n// ===================================================================\n// Stage Transition Validation\n// ===================================================================\n\nexport function validateStageTransition(\n  opportunity: Opportunity,\n  targetStage: PipelineStage\n): { missing: string[]; isRegression: boolean } {\n  const currentIdx = PIPELINE_STAGE_ORDER.indexOf(opportunity.stage);\n  const targetIdx = PIPELINE_STAGE_ORDER.indexOf(targetStage);\n\n  if (targetIdx < currentIdx) {\n    return { missing: [], isRegression: true };\n  }\n\n  const requiredFields = stageRequiredFields[targetStage] || [];\n  const missing: string[] = [];\n\n  for (const req of requiredFields) {\n    const val = opportunity[req.field];\n    if (val === undefined || val === null || val === \"\") {\n      missing.push(req.label);\n    } else if (typeof val === \"number\" && val <= 0) {\n      missing.push(req.label);\n    }\n  }\n\n  return { missing, isRegression: false };\n}\n"],"names":[],"mappings":";;;;;;;;;;AACA;AACA;;;AAMO,SAAS,YAAY,IAAY;IACtC,OAAO,KACJ,KAAK,CAAC,KACN,MAAM,CAAC,SACP,GAAG,CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,EACf,KAAK,CAAC,GAAG,GACT,IAAI,CAAC,IACL,WAAW;AAChB;AAQO,SAAS,aACd,WAAoB;IAEpB,IAAI,CAAC,aACH,OAAO;QAAE,QAAQ;QAAM,OAAO;QAAI,aAAa;IAAmB;IACpE,MAAM,MAAM,IAAI;IAChB,MAAM,WAAW,IAAI,KAAK;IAC1B,MAAM,SAAS,SAAS,OAAO,KAAK,IAAI,OAAO;IAE/C,IAAI,UAAU,GAAG;QACf,MAAM,SAAS,KAAK,GAAG,CAAC;QACxB,MAAM,YAAY,KAAK,KAAK,CAAC,SAAS,CAAC,OAAO,KAAK,EAAE;QACrD,MAAM,WAAW,KAAK,KAAK,CAAC,YAAY;QACxC,MAAM,cAAc,YAAY;QAChC,MAAM,YACJ,WAAW,IAAI,GAAG,SAAS,EAAE,EAAE,YAAY,CAAC,CAAC,GAAG,GAAG,UAAU,CAAC,CAAC;QACjE,OAAO;YACL,QAAQ;YACR,OAAO;YACP,aAAa,CAAC,iBAAiB,EAAE,WAAW;QAC9C;IACF;IAEA,MAAM,aAAa,SAAS,CAAC,OAAO,KAAK,EAAE;IAC3C,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa;IACrC,MAAM,QAAQ,KAAK,KAAK,CAAC,aAAa;IACtC,MAAM,QAAQ,OAAO,IAAI,GAAG,KAAK,EAAE,EAAE,MAAM,CAAC,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC;IAE3D,IAAI,cAAc,IAAI;QACpB,OAAO;YACL,QAAQ;YACR;YACA,aAAa,CAAC,aAAa,EAAE,MAAM,WAAW,CAAC;QACjD;IACF;IAEA,OAAO;QAAE,QAAQ;QAAM;QAAO,aAAa,CAAC,cAAc,EAAE,OAAO;IAAC;AACtE;AAEO,SAAS,aAAa,MAAiB;IAC5C,OAAQ;QACN,KAAK;YACH,OAAO;gBACL,KAAK;gBACL,QAAQ;gBACR,MAAM;YACR;QACF,KAAK;YACH,OAAO;gBACL,KAAK;gBACL,QAAQ;gBACR,MAAM;YACR;QACF,KAAK;YACH,OAAO;gBACL,KAAK;gBACL,QAAQ;gBACR,MAAM;YACR;IACJ;AACF;AAMO,SAAS,wBACd,WAAwB,EACxB,WAA0B;IAE1B,MAAM,aAAa,uJAAoB,CAAC,OAAO,CAAC,YAAY,KAAK;IACjE,MAAM,YAAY,uJAAoB,CAAC,OAAO,CAAC;IAE/C,IAAI,YAAY,YAAY;QAC1B,OAAO;YAAE,SAAS,EAAE;YAAE,cAAc;QAAK;IAC3C;IAEA,MAAM,iBAAiB,oLAAmB,CAAC,YAAY,IAAI,EAAE;IAC7D,MAAM,UAAoB,EAAE;IAE5B,KAAK,MAAM,OAAO,eAAgB;QAChC,MAAM,MAAM,WAAW,CAAC,IAAI,KAAK,CAAC;QAClC,IAAI,QAAQ,aAAa,QAAQ,QAAQ,QAAQ,IAAI;YACnD,QAAQ,IAAI,CAAC,IAAI,KAAK;QACxB,OAAO,IAAI,OAAO,QAAQ,YAAY,OAAO,GAAG;YAC9C,QAAQ,IAAI,CAAC,IAAI,KAAK;QACxB;IACF;IAEA,OAAO;QAAE;QAAS,cAAc;IAAM;AACxC"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/pipes/hooks/use-pipeline-board.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback, useRef, useEffect } from \"react\";\nimport type { Opportunity, PipelineStage } from \"@/types\";\nimport { calculateSlaDeadline } from \"@/lib/business-rules\";\nimport { validateStageTransition } from \"../lib/pipeline-validation\";\nimport type { FunnelDefinition } from \"../lib/pipeline-config\";\n\ninterface UsePipelineBoardOptions {\n  localOpportunities: Opportunity[];\n  setLocalOpportunities: React.Dispatch<React.SetStateAction<Opportunity[]>>;\n  activeFunnel: FunnelDefinition;\n  announce: (message: string) => void;\n  canMoveCards?: boolean;\n}\n\ninterface ColumnErrorState {\n  stage: PipelineStage;\n  message: string;\n  tone: \"warning\" | \"error\";\n  cardId?: string;\n  missingFields?: string[];\n  targetStage?: PipelineStage;\n}\n\ninterface SuccessFeedbackState {\n  stage: PipelineStage;\n  message: string;\n  cardId?: string;\n}\n\nconst AUTO_SCROLL_EDGE_PX = 96;\nconst AUTO_SCROLL_MAX_DELTA = 22;\n\nfunction clamp(value: number, min: number, max: number) {\n  return Math.min(Math.max(value, min), max);\n}\n\nfunction getAutoScrollDelta(\n  pointer: number,\n  start: number,\n  end: number\n) {\n  if (pointer < start + AUTO_SCROLL_EDGE_PX) {\n    const distance = pointer - start;\n    const intensity = 1 - clamp(distance, 0, AUTO_SCROLL_EDGE_PX) / AUTO_SCROLL_EDGE_PX;\n    return -Math.ceil(intensity * AUTO_SCROLL_MAX_DELTA);\n  }\n\n  if (pointer > end - AUTO_SCROLL_EDGE_PX) {\n    const distance = end - pointer;\n    const intensity = 1 - clamp(distance, 0, AUTO_SCROLL_EDGE_PX) / AUTO_SCROLL_EDGE_PX;\n    return Math.ceil(intensity * AUTO_SCROLL_MAX_DELTA);\n  }\n\n  return 0;\n}\n\nfunction resolveInsertIndexForEmptyStage(\n  opportunities: Opportunity[],\n  targetStage: PipelineStage,\n  stageOrder: PipelineStage[]\n) {\n  const targetStageIndex = stageOrder.indexOf(targetStage);\n  if (targetStageIndex === -1) return opportunities.length;\n\n  for (let idx = targetStageIndex - 1; idx >= 0; idx -= 1) {\n    const prevStage = stageOrder[idx];\n    for (let i = opportunities.length - 1; i >= 0; i -= 1) {\n      if (opportunities[i].stage === prevStage) {\n        return i + 1;\n      }\n    }\n  }\n\n  for (let idx = targetStageIndex + 1; idx < stageOrder.length; idx += 1) {\n    const nextStage = stageOrder[idx];\n    const nextIndex = opportunities.findIndex((op) => op.stage === nextStage);\n    if (nextIndex !== -1) return nextIndex;\n  }\n\n  return opportunities.length;\n}\n\nexport function usePipelineBoard({\n  localOpportunities,\n  setLocalOpportunities,\n  activeFunnel,\n  announce,\n  canMoveCards = true,\n}: UsePipelineBoardOptions) {\n  const [draggingCardId, setDraggingCardId] = useState<string | null>(null);\n  const [draggingCardStage, setDraggingCardStage] = useState<PipelineStage | null>(null);\n  const [draggingOpportunity, setDraggingOpportunity] = useState<Opportunity | null>(null);\n  const [dragOverStage, setDragOverStage] = useState<PipelineStage | null>(null);\n  const [dropIndicator, setDropIndicator] = useState<{\n    stage: PipelineStage;\n    index: number;\n  } | null>(null);\n  const [columnError, setColumnError] = useState<ColumnErrorState | null>(null);\n  const [successFeedback, setSuccessFeedback] = useState<SuccessFeedbackState | null>(null);\n  const [updatingCardId, setUpdatingCardId] = useState<string | null>(null);\n  const [recentlyMovedCardId, setRecentlyMovedCardId] = useState<string | null>(null);\n  const dragCardRef = useRef<Opportunity | null>(null);\n  const autoScrollFrameRef = useRef<number | null>(null);\n  const timeoutIdsRef = useRef<number[]>([]);\n  const autoScrollStateRef = useRef<{\n    clientX: number;\n    clientY: number;\n    horizontalContainer: HTMLElement | null;\n    verticalContainer: HTMLElement | null;\n  } | null>(null);\n\n  const stopAutoScroll = useCallback(() => {\n    if (autoScrollFrameRef.current !== null) {\n      window.cancelAnimationFrame(autoScrollFrameRef.current);\n      autoScrollFrameRef.current = null;\n    }\n    autoScrollStateRef.current = null;\n  }, []);\n\n  const runWithTimeout = useCallback((fn: () => void, delayMs: number) => {\n    const timeoutId = window.setTimeout(() => {\n      timeoutIdsRef.current = timeoutIdsRef.current.filter((id) => id !== timeoutId);\n      fn();\n    }, delayMs);\n    timeoutIdsRef.current.push(timeoutId);\n  }, []);\n\n  const runAutoScroll = useCallback(() => {\n    const tick = () => {\n      const state = autoScrollStateRef.current;\n      if (!state) {\n        autoScrollFrameRef.current = null;\n        return;\n      }\n\n      const { clientX, clientY, horizontalContainer, verticalContainer } = state;\n      let shouldKeepLooping = false;\n\n      if (verticalContainer) {\n        const rect = verticalContainer.getBoundingClientRect();\n        const deltaY = getAutoScrollDelta(clientY, rect.top, rect.bottom);\n        if (deltaY !== 0) {\n          verticalContainer.scrollTop += deltaY;\n          shouldKeepLooping = true;\n        }\n      }\n\n      if (horizontalContainer) {\n        const rect = horizontalContainer.getBoundingClientRect();\n        const deltaX = getAutoScrollDelta(clientX, rect.left, rect.right);\n        if (deltaX !== 0) {\n          horizontalContainer.scrollLeft += deltaX;\n          shouldKeepLooping = true;\n        }\n      }\n\n      if (shouldKeepLooping || autoScrollStateRef.current !== null) {\n        autoScrollFrameRef.current = window.requestAnimationFrame(tick);\n        return;\n      }\n\n      autoScrollFrameRef.current = null;\n    };\n\n    tick();\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      stopAutoScroll();\n      timeoutIdsRef.current.forEach((timeoutId) => window.clearTimeout(timeoutId));\n      timeoutIdsRef.current = [];\n    };\n  }, [stopAutoScroll]);\n\n  const handleDragStart = useCallback(\n    (e: React.DragEvent, opportunity: Opportunity) => {\n      if (!canMoveCards) {\n        e.preventDefault();\n        announce(\"Voce nao tem permissao para mover oportunidades.\");\n        return;\n      }\n\n      setDraggingCardId(opportunity.id);\n      setDraggingCardStage(opportunity.stage);\n      setDraggingOpportunity(opportunity);\n      dragCardRef.current = opportunity;\n      autoScrollStateRef.current = null;\n      e.dataTransfer.effectAllowed = \"move\";\n      e.dataTransfer.setData(\"text/plain\", opportunity.id);\n      document.body.style.cursor = \"grabbing\";\n      announce(\n        `Arrastando card ${opportunity.title}. Solte em uma etapa para mover.`\n      );\n    },\n    [announce, canMoveCards]\n  );\n\n  const handleDragOver = useCallback(\n    (e: React.DragEvent, stage: PipelineStage) => {\n      if (!canMoveCards) return;\n      e.preventDefault();\n      e.dataTransfer.dropEffect = \"move\";\n      setDragOverStage(stage);\n\n      const column = e.currentTarget as HTMLElement;\n      const cardElements = column.querySelectorAll(\"[data-card-index]\");\n      let insertIndex = cardElements.length;\n\n      for (let i = 0; i < cardElements.length; i++) {\n        const rect = cardElements[i].getBoundingClientRect();\n        const midY = rect.top + rect.height / 2;\n        if (e.clientY < midY) {\n          insertIndex = i;\n          break;\n        }\n      }\n\n      setDropIndicator({ stage, index: insertIndex });\n\n      const target = e.currentTarget as HTMLElement;\n      const verticalContainer = target.closest(\"[data-pipe-column-scroll]\") as HTMLElement | null;\n      const horizontalContainer = target.closest(\"[data-pipe-board-scroll]\") as HTMLElement | null;\n\n      autoScrollStateRef.current = {\n        clientX: e.clientX,\n        clientY: e.clientY,\n        horizontalContainer,\n        verticalContainer,\n      };\n\n      if (autoScrollFrameRef.current === null) {\n        autoScrollFrameRef.current = window.requestAnimationFrame(runAutoScroll);\n      }\n    },\n    [canMoveCards, runAutoScroll]\n  );\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    const related = e.relatedTarget as Node | null;\n    // relatedTarget can be null in Chrome during drag — only clear if we\n    // truly left the column (related exists and is outside currentTarget)\n    if (related && !e.currentTarget.contains(related)) {\n      setDragOverStage(null);\n      setDropIndicator(null);\n    }\n  }, []);\n\n  const handleDrop = useCallback(\n    (e: React.DragEvent, targetStage: PipelineStage) => {\n      if (!canMoveCards) {\n        e.preventDefault();\n        announce(\"Voce nao tem permissao para mover oportunidades.\");\n        return;\n      }\n\n      e.preventDefault();\n      setDragOverStage(null);\n      setDropIndicator(null);\n      setColumnError(null);\n      document.body.style.cursor = \"\";\n      stopAutoScroll();\n\n      const card = dragCardRef.current;\n      if (!card) return;\n      setUpdatingCardId(card.id);\n\n      try {\n      const stageOrder = activeFunnel.stages.map((stage) => stage.id);\n      const sourceStageCards = localOpportunities.filter(\n        (opportunity) => opportunity.stage === card.stage\n      );\n      const sourceStageIndex = sourceStageCards.findIndex(\n        (opportunity) => opportunity.id === card.id\n      );\n\n      const rawDropIndex =\n        dropIndicator?.stage === targetStage\n          ? dropIndicator.index\n          : localOpportunities.filter((opportunity) => opportunity.stage === targetStage)\n            .length;\n\n      let normalizedDropIndex = rawDropIndex;\n      if (card.stage === targetStage && sourceStageIndex > -1 && sourceStageIndex < normalizedDropIndex) {\n        normalizedDropIndex -= 1;\n      }\n\n      if (\n        card.stage === targetStage &&\n        sourceStageIndex > -1 &&\n        normalizedDropIndex === sourceStageIndex\n      ) {\n        setDraggingCardId(null);\n        setDraggingCardStage(null);\n        dragCardRef.current = null;\n        setUpdatingCardId(null);\n        return;\n      }\n\n      const { missing, isRegression } = validateStageTransition(\n        card,\n        targetStage\n      );\n      const targetStageDef = activeFunnel.stages.find(\n        (stage) => stage.id === targetStage\n      );\n      const targetStageLabel = targetStageDef?.label ?? targetStage.replace(/-/g, \" \");\n\n      if (missing.length > 0) {\n        setColumnError({\n          stage: targetStage,\n          tone: \"error\",\n          cardId: card.id,\n          missingFields: missing,\n          targetStage,\n          message: `Para mover para ${targetStageLabel}, preencha: ${missing.join(\", \")}.`,\n        });\n        announce(`Aviso: campos pendentes — ${missing.join(\", \")}`);\n        setDraggingCardId(null);\n        setDraggingCardStage(null);\n        setDraggingOpportunity(null);\n        dragCardRef.current = null;\n        setUpdatingCardId(null);\n        runWithTimeout(() => setColumnError(null), 4200);\n        return;\n      }\n\n      if (isRegression) {\n        const fromLabel = activeFunnel.stages.find(\n          (stage) => stage.id === card.stage\n        )?.label ?? card.stage;\n        const toLabel = targetStageLabel;\n        setColumnError({\n          stage: targetStage,\n          tone: \"warning\",\n          message: `Card retrocedido de ${fromLabel} para ${toLabel}`,\n        });\n        announce(`Aviso: card retrocedido de ${fromLabel} para ${toLabel}`);\n        runWithTimeout(() => setColumnError(null), 4000);\n      }\n\n      const newSlaDeadline = targetStageDef\n        ? calculateSlaDeadline(targetStageDef.slaHours)\n        : undefined;\n\n      setLocalOpportunities((prev) => {\n        const sourceIndex = prev.findIndex((opportunity) => opportunity.id === card.id);\n        if (sourceIndex === -1) return prev;\n\n        const sourceCard = prev[sourceIndex];\n        const remaining = prev.filter((opportunity) => opportunity.id !== sourceCard.id);\n        const targetStageCards = remaining.filter(\n          (opportunity) => opportunity.stage === targetStage\n        );\n        const safeTargetIndex = clamp(\n          normalizedDropIndex,\n          0,\n          targetStageCards.length\n        );\n\n        const updatedCard: Opportunity = {\n          ...sourceCard,\n          stage: targetStage,\n          updatedAt: new Date().toISOString(),\n          slaDeadline: newSlaDeadline,\n        };\n\n        let insertIndex = remaining.length;\n        if (targetStageCards.length === 0) {\n          insertIndex = resolveInsertIndexForEmptyStage(\n            remaining,\n            targetStage,\n            stageOrder\n          );\n        } else if (safeTargetIndex >= targetStageCards.length) {\n          const anchorId = targetStageCards[targetStageCards.length - 1].id;\n          const anchorIndex = remaining.findIndex((opportunity) => opportunity.id === anchorId);\n          insertIndex = anchorIndex === -1 ? remaining.length : anchorIndex + 1;\n        } else {\n          const anchorId = targetStageCards[safeTargetIndex].id;\n          const anchorIndex = remaining.findIndex((opportunity) => opportunity.id === anchorId);\n          insertIndex = anchorIndex === -1 ? remaining.length : anchorIndex;\n        }\n\n        const next = [...remaining];\n        next.splice(insertIndex, 0, updatedCard);\n        return next;\n      });\n\n      if (card.stage === targetStage) {\n        setSuccessFeedback({\n          stage: targetStage,\n          message: `${card.title} reordenado na etapa.`,\n          cardId: card.id,\n        });\n        announce(`Card ${card.title} reordenado dentro da etapa.`);\n        runWithTimeout(() => setSuccessFeedback(null), 1800);\n      } else if (!isRegression) {\n        setSuccessFeedback({\n          stage: targetStage,\n          message: `${card.title} movido para ${targetStageLabel} agora.`,\n          cardId: card.id,\n        });\n        announce(\n          `Card ${card.title} movido com sucesso para ${targetStageLabel}`\n        );\n        runWithTimeout(() => setSuccessFeedback(null), 2500);\n      } else {\n        setSuccessFeedback({\n          stage: targetStage,\n          message: `${card.title} retrocedido para ${targetStageLabel}.`,\n          cardId: card.id,\n        });\n        runWithTimeout(() => setSuccessFeedback(null), 2300);\n      }\n\n      setRecentlyMovedCardId(card.id);\n      runWithTimeout(() => setRecentlyMovedCardId((prev) => (prev === card.id ? null : prev)), 2600);\n      runWithTimeout(() => setUpdatingCardId((prev) => (prev === card.id ? null : prev)), 850);\n\n      } finally {\n        setDraggingCardId(null);\n        setDraggingCardStage(null);\n        setDraggingOpportunity(null);\n        dragCardRef.current = null;\n        document.body.style.cursor = \"\";\n      }\n    },\n    [\n      activeFunnel,\n      announce,\n      canMoveCards,\n      dropIndicator,\n      localOpportunities,\n      runWithTimeout,\n      setLocalOpportunities,\n      stopAutoScroll,\n    ]\n  );\n\n  const handleDragEnd = useCallback(() => {\n    setDraggingCardId(null);\n    setDraggingCardStage(null);\n    setDraggingOpportunity(null);\n    setDragOverStage(null);\n    setDropIndicator(null);\n    dragCardRef.current = null;\n    document.body.style.cursor = \"\";\n    stopAutoScroll();\n  }, [stopAutoScroll]);\n\n  return {\n    draggingCardId,\n    draggingCardStage,\n    draggingOpportunity,\n    dragOverStage,\n    dropIndicator,\n    columnError,\n    setColumnError,\n    successFeedback,\n    updatingCardId,\n    recentlyMovedCardId,\n    handleDragStart,\n    handleDragOver,\n    handleDragLeave,\n    handleDrop,\n    handleDragEnd,\n  };\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AALA;;;;AA+BA,MAAM,sBAAsB;AAC5B,MAAM,wBAAwB;AAE9B,SAAS,MAAM,KAAa,EAAE,GAAW,EAAE,GAAW;IACpD,OAAO,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,OAAO,MAAM;AACxC;AAEA,SAAS,mBACP,OAAe,EACf,KAAa,EACb,GAAW;IAEX,IAAI,UAAU,QAAQ,qBAAqB;QACzC,MAAM,WAAW,UAAU;QAC3B,MAAM,YAAY,IAAI,MAAM,UAAU,GAAG,uBAAuB;QAChE,OAAO,CAAC,KAAK,IAAI,CAAC,YAAY;IAChC;IAEA,IAAI,UAAU,MAAM,qBAAqB;QACvC,MAAM,WAAW,MAAM;QACvB,MAAM,YAAY,IAAI,MAAM,UAAU,GAAG,uBAAuB;QAChE,OAAO,KAAK,IAAI,CAAC,YAAY;IAC/B;IAEA,OAAO;AACT;AAEA,SAAS,gCACP,aAA4B,EAC5B,WAA0B,EAC1B,UAA2B;IAE3B,MAAM,mBAAmB,WAAW,OAAO,CAAC;IAC5C,IAAI,qBAAqB,CAAC,GAAG,OAAO,cAAc,MAAM;IAExD,IAAK,IAAI,MAAM,mBAAmB,GAAG,OAAO,GAAG,OAAO,EAAG;QACvD,MAAM,YAAY,UAAU,CAAC,IAAI;QACjC,IAAK,IAAI,IAAI,cAAc,MAAM,GAAG,GAAG,KAAK,GAAG,KAAK,EAAG;YACrD,IAAI,aAAa,CAAC,EAAE,CAAC,KAAK,KAAK,WAAW;gBACxC,OAAO,IAAI;YACb;QACF;IACF;IAEA,IAAK,IAAI,MAAM,mBAAmB,GAAG,MAAM,WAAW,MAAM,EAAE,OAAO,EAAG;QACtE,MAAM,YAAY,UAAU,CAAC,IAAI;QACjC,MAAM,YAAY,cAAc,SAAS,CAAC,CAAC,KAAO,GAAG,KAAK,KAAK;QAC/D,IAAI,cAAc,CAAC,GAAG,OAAO;IAC/B;IAEA,OAAO,cAAc,MAAM;AAC7B;AAEO,SAAS,iBAAiB,EAC/B,kBAAkB,EAClB,qBAAqB,EACrB,YAAY,EACZ,QAAQ,EACR,eAAe,IAAI,EACK;IACxB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IACpE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAuB;IACjF,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAAqB;IACnF,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAuB;IACzE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAGxC;IACV,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAA0B;IACxE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAA8B;IACpF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IACpE,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAAgB;IAC9E,MAAM,cAAc,IAAA,+MAAM,EAAqB;IAC/C,MAAM,qBAAqB,IAAA,+MAAM,EAAgB;IACjD,MAAM,gBAAgB,IAAA,+MAAM,EAAW,EAAE;IACzC,MAAM,qBAAqB,IAAA,+MAAM,EAKvB;IAEV,MAAM,iBAAiB,IAAA,oNAAW,EAAC;QACjC,IAAI,mBAAmB,OAAO,KAAK,MAAM;YACvC,OAAO,oBAAoB,CAAC,mBAAmB,OAAO;YACtD,mBAAmB,OAAO,GAAG;QAC/B;QACA,mBAAmB,OAAO,GAAG;IAC/B,GAAG,EAAE;IAEL,MAAM,iBAAiB,IAAA,oNAAW,EAAC,CAAC,IAAgB;QAClD,MAAM,YAAY,OAAO,UAAU,CAAC;YAClC,cAAc,OAAO,GAAG,cAAc,OAAO,CAAC,MAAM,CAAC,CAAC,KAAO,OAAO;YACpE;QACF,GAAG;QACH,cAAc,OAAO,CAAC,IAAI,CAAC;IAC7B,GAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,MAAM,OAAO;YACX,MAAM,QAAQ,mBAAmB,OAAO;YACxC,IAAI,CAAC,OAAO;gBACV,mBAAmB,OAAO,GAAG;gBAC7B;YACF;YAEA,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,mBAAmB,EAAE,iBAAiB,EAAE,GAAG;YACrE,IAAI,oBAAoB;YAExB,IAAI,mBAAmB;gBACrB,MAAM,OAAO,kBAAkB,qBAAqB;gBACpD,MAAM,SAAS,mBAAmB,SAAS,KAAK,GAAG,EAAE,KAAK,MAAM;gBAChE,IAAI,WAAW,GAAG;oBAChB,kBAAkB,SAAS,IAAI;oBAC/B,oBAAoB;gBACtB;YACF;YAEA,IAAI,qBAAqB;gBACvB,MAAM,OAAO,oBAAoB,qBAAqB;gBACtD,MAAM,SAAS,mBAAmB,SAAS,KAAK,IAAI,EAAE,KAAK,KAAK;gBAChE,IAAI,WAAW,GAAG;oBAChB,oBAAoB,UAAU,IAAI;oBAClC,oBAAoB;gBACtB;YACF;YAEA,IAAI,qBAAqB,mBAAmB,OAAO,KAAK,MAAM;gBAC5D,mBAAmB,OAAO,GAAG,OAAO,qBAAqB,CAAC;gBAC1D;YACF;YAEA,mBAAmB,OAAO,GAAG;QAC/B;QAEA;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,OAAO;YACL;YACA,cAAc,OAAO,CAAC,OAAO,CAAC,CAAC,YAAc,OAAO,YAAY,CAAC;YACjE,cAAc,OAAO,GAAG,EAAE;QAC5B;IACF,GAAG;QAAC;KAAe;IAEnB,MAAM,kBAAkB,IAAA,oNAAW,EACjC,CAAC,GAAoB;QACnB,IAAI,CAAC,cAAc;YACjB,EAAE,cAAc;YAChB,SAAS;YACT;QACF;QAEA,kBAAkB,YAAY,EAAE;QAChC,qBAAqB,YAAY,KAAK;QACtC,uBAAuB;QACvB,YAAY,OAAO,GAAG;QACtB,mBAAmB,OAAO,GAAG;QAC7B,EAAE,YAAY,CAAC,aAAa,GAAG;QAC/B,EAAE,YAAY,CAAC,OAAO,CAAC,cAAc,YAAY,EAAE;QACnD,SAAS,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG;QAC7B,SACE,CAAC,gBAAgB,EAAE,YAAY,KAAK,CAAC,gCAAgC,CAAC;IAE1E,GACA;QAAC;QAAU;KAAa;IAG1B,MAAM,iBAAiB,IAAA,oNAAW,EAChC,CAAC,GAAoB;QACnB,IAAI,CAAC,cAAc;QACnB,EAAE,cAAc;QAChB,EAAE,YAAY,CAAC,UAAU,GAAG;QAC5B,iBAAiB;QAEjB,MAAM,SAAS,EAAE,aAAa;QAC9B,MAAM,eAAe,OAAO,gBAAgB,CAAC;QAC7C,IAAI,cAAc,aAAa,MAAM;QAErC,IAAK,IAAI,IAAI,GAAG,IAAI,aAAa,MAAM,EAAE,IAAK;YAC5C,MAAM,OAAO,YAAY,CAAC,EAAE,CAAC,qBAAqB;YAClD,MAAM,OAAO,KAAK,GAAG,GAAG,KAAK,MAAM,GAAG;YACtC,IAAI,EAAE,OAAO,GAAG,MAAM;gBACpB,cAAc;gBACd;YACF;QACF;QAEA,iBAAiB;YAAE;YAAO,OAAO;QAAY;QAE7C,MAAM,SAAS,EAAE,aAAa;QAC9B,MAAM,oBAAoB,OAAO,OAAO,CAAC;QACzC,MAAM,sBAAsB,OAAO,OAAO,CAAC;QAE3C,mBAAmB,OAAO,GAAG;YAC3B,SAAS,EAAE,OAAO;YAClB,SAAS,EAAE,OAAO;YAClB;YACA;QACF;QAEA,IAAI,mBAAmB,OAAO,KAAK,MAAM;YACvC,mBAAmB,OAAO,GAAG,OAAO,qBAAqB,CAAC;QAC5D;IACF,GACA;QAAC;QAAc;KAAc;IAG/B,MAAM,kBAAkB,IAAA,oNAAW,EAAC,CAAC;QACnC,MAAM,UAAU,EAAE,aAAa;QAC/B,qEAAqE;QACrE,sEAAsE;QACtE,IAAI,WAAW,CAAC,EAAE,aAAa,CAAC,QAAQ,CAAC,UAAU;YACjD,iBAAiB;YACjB,iBAAiB;QACnB;IACF,GAAG,EAAE;IAEL,MAAM,aAAa,IAAA,oNAAW,EAC5B,CAAC,GAAoB;QACnB,IAAI,CAAC,cAAc;YACjB,EAAE,cAAc;YAChB,SAAS;YACT;QACF;QAEA,EAAE,cAAc;QAChB,iBAAiB;QACjB,iBAAiB;QACjB,eAAe;QACf,SAAS,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG;QAC7B;QAEA,MAAM,OAAO,YAAY,OAAO;QAChC,IAAI,CAAC,MAAM;QACX,kBAAkB,KAAK,EAAE;QAEzB,IAAI;YACJ,MAAM,aAAa,aAAa,MAAM,CAAC,GAAG,CAAC,CAAC,QAAU,MAAM,EAAE;YAC9D,MAAM,mBAAmB,mBAAmB,MAAM,CAChD,CAAC,cAAgB,YAAY,KAAK,KAAK,KAAK,KAAK;YAEnD,MAAM,mBAAmB,iBAAiB,SAAS,CACjD,CAAC,cAAgB,YAAY,EAAE,KAAK,KAAK,EAAE;YAG7C,MAAM,eACJ,eAAe,UAAU,cACrB,cAAc,KAAK,GACnB,mBAAmB,MAAM,CAAC,CAAC,cAAgB,YAAY,KAAK,KAAK,aAChE,MAAM;YAEb,IAAI,sBAAsB;YAC1B,IAAI,KAAK,KAAK,KAAK,eAAe,mBAAmB,CAAC,KAAK,mBAAmB,qBAAqB;gBACjG,uBAAuB;YACzB;YAEA,IACE,KAAK,KAAK,KAAK,eACf,mBAAmB,CAAC,KACpB,wBAAwB,kBACxB;gBACA,kBAAkB;gBAClB,qBAAqB;gBACrB,YAAY,OAAO,GAAG;gBACtB,kBAAkB;gBAClB;YACF;YAEA,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,GAAG,IAAA,2LAAuB,EACvD,MACA;YAEF,MAAM,iBAAiB,aAAa,MAAM,CAAC,IAAI,CAC7C,CAAC,QAAU,MAAM,EAAE,KAAK;YAE1B,MAAM,mBAAmB,gBAAgB,SAAS,YAAY,OAAO,CAAC,MAAM;YAE5E,IAAI,QAAQ,MAAM,GAAG,GAAG;gBACtB,eAAe;oBACb,OAAO;oBACP,MAAM;oBACN,QAAQ,KAAK,EAAE;oBACf,eAAe;oBACf;oBACA,SAAS,CAAC,gBAAgB,EAAE,iBAAiB,YAAY,EAAE,QAAQ,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClF;gBACA,SAAS,CAAC,0BAA0B,EAAE,QAAQ,IAAI,CAAC,OAAO;gBAC1D,kBAAkB;gBAClB,qBAAqB;gBACrB,uBAAuB;gBACvB,YAAY,OAAO,GAAG;gBACtB,kBAAkB;gBAClB,eAAe,IAAM,eAAe,OAAO;gBAC3C;YACF;YAEA,IAAI,cAAc;gBAChB,MAAM,YAAY,aAAa,MAAM,CAAC,IAAI,CACxC,CAAC,QAAU,MAAM,EAAE,KAAK,KAAK,KAAK,GACjC,SAAS,KAAK,KAAK;gBACtB,MAAM,UAAU;gBAChB,eAAe;oBACb,OAAO;oBACP,MAAM;oBACN,SAAS,CAAC,oBAAoB,EAAE,UAAU,MAAM,EAAE,SAAS;gBAC7D;gBACA,SAAS,CAAC,2BAA2B,EAAE,UAAU,MAAM,EAAE,SAAS;gBAClE,eAAe,IAAM,eAAe,OAAO;YAC7C;YAEA,MAAM,iBAAiB,iBACnB,IAAA,uJAAoB,EAAC,eAAe,QAAQ,IAC5C;YAEJ,sBAAsB,CAAC;gBACrB,MAAM,cAAc,KAAK,SAAS,CAAC,CAAC,cAAgB,YAAY,EAAE,KAAK,KAAK,EAAE;gBAC9E,IAAI,gBAAgB,CAAC,GAAG,OAAO;gBAE/B,MAAM,aAAa,IAAI,CAAC,YAAY;gBACpC,MAAM,YAAY,KAAK,MAAM,CAAC,CAAC,cAAgB,YAAY,EAAE,KAAK,WAAW,EAAE;gBAC/E,MAAM,mBAAmB,UAAU,MAAM,CACvC,CAAC,cAAgB,YAAY,KAAK,KAAK;gBAEzC,MAAM,kBAAkB,MACtB,qBACA,GACA,iBAAiB,MAAM;gBAGzB,MAAM,cAA2B;oBAC/B,GAAG,UAAU;oBACb,OAAO;oBACP,WAAW,IAAI,OAAO,WAAW;oBACjC,aAAa;gBACf;gBAEA,IAAI,cAAc,UAAU,MAAM;gBAClC,IAAI,iBAAiB,MAAM,KAAK,GAAG;oBACjC,cAAc,gCACZ,WACA,aACA;gBAEJ,OAAO,IAAI,mBAAmB,iBAAiB,MAAM,EAAE;oBACrD,MAAM,WAAW,gBAAgB,CAAC,iBAAiB,MAAM,GAAG,EAAE,CAAC,EAAE;oBACjE,MAAM,cAAc,UAAU,SAAS,CAAC,CAAC,cAAgB,YAAY,EAAE,KAAK;oBAC5E,cAAc,gBAAgB,CAAC,IAAI,UAAU,MAAM,GAAG,cAAc;gBACtE,OAAO;oBACL,MAAM,WAAW,gBAAgB,CAAC,gBAAgB,CAAC,EAAE;oBACrD,MAAM,cAAc,UAAU,SAAS,CAAC,CAAC,cAAgB,YAAY,EAAE,KAAK;oBAC5E,cAAc,gBAAgB,CAAC,IAAI,UAAU,MAAM,GAAG;gBACxD;gBAEA,MAAM,OAAO;uBAAI;iBAAU;gBAC3B,KAAK,MAAM,CAAC,aAAa,GAAG;gBAC5B,OAAO;YACT;YAEA,IAAI,KAAK,KAAK,KAAK,aAAa;gBAC9B,mBAAmB;oBACjB,OAAO;oBACP,SAAS,GAAG,KAAK,KAAK,CAAC,qBAAqB,CAAC;oBAC7C,QAAQ,KAAK,EAAE;gBACjB;gBACA,SAAS,CAAC,KAAK,EAAE,KAAK,KAAK,CAAC,4BAA4B,CAAC;gBACzD,eAAe,IAAM,mBAAmB,OAAO;YACjD,OAAO,IAAI,CAAC,cAAc;gBACxB,mBAAmB;oBACjB,OAAO;oBACP,SAAS,GAAG,KAAK,KAAK,CAAC,aAAa,EAAE,iBAAiB,OAAO,CAAC;oBAC/D,QAAQ,KAAK,EAAE;gBACjB;gBACA,SACE,CAAC,KAAK,EAAE,KAAK,KAAK,CAAC,yBAAyB,EAAE,kBAAkB;gBAElE,eAAe,IAAM,mBAAmB,OAAO;YACjD,OAAO;gBACL,mBAAmB;oBACjB,OAAO;oBACP,SAAS,GAAG,KAAK,KAAK,CAAC,kBAAkB,EAAE,iBAAiB,CAAC,CAAC;oBAC9D,QAAQ,KAAK,EAAE;gBACjB;gBACA,eAAe,IAAM,mBAAmB,OAAO;YACjD;YAEA,uBAAuB,KAAK,EAAE;YAC9B,eAAe,IAAM,uBAAuB,CAAC,OAAU,SAAS,KAAK,EAAE,GAAG,OAAO,OAAQ;YACzF,eAAe,IAAM,kBAAkB,CAAC,OAAU,SAAS,KAAK,EAAE,GAAG,OAAO,OAAQ;QAEpF,SAAU;YACR,kBAAkB;YAClB,qBAAqB;YACrB,uBAAuB;YACvB,YAAY,OAAO,GAAG;YACtB,SAAS,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG;QAC/B;IACF,GACA;QACE;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAGH,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,kBAAkB;QAClB,qBAAqB;QACrB,uBAAuB;QACvB,iBAAiB;QACjB,iBAAiB;QACjB,YAAY,OAAO,GAAG;QACtB,SAAS,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG;QAC7B;IACF,GAAG;QAAC;KAAe;IAEnB,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 724, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/pipes/hooks/use-stage-customization.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport type { PipelineStage } from \"@/types\";\nimport {\n  type StageCustomization,\n  stageColorPalette,\n  loadStageCustomizations,\n  saveStageCustomizations,\n} from \"../lib/pipeline-config\";\n\nconst RENAME_MIN_LENGTH = 2;\nconst RENAME_MAX_LENGTH = 30;\n\nexport function useStageCustomization() {\n  const [stageCustomizations, setStageCustomizations] = useState<\n    Record<string, StageCustomization>\n  >(() => loadStageCustomizations());\n\n  const [renamingStage, setRenamingStage] = useState<PipelineStage | null>(null);\n  const [renameValue, setRenameValue] = useState(\"\");\n  const [renameError, setRenameError] = useState<string | null>(null);\n  const renameInputRef = useRef<HTMLInputElement>(null);\n\n  // Persist stage customizations to localStorage on every change\n  useEffect(() => {\n    saveStageCustomizations(stageCustomizations);\n  }, [stageCustomizations]);\n\n  const startRename = useCallback(\n    (stageId: PipelineStage, currentLabel: string) => {\n      setRenamingStage(stageId);\n      setRenameValue(currentLabel);\n      setRenameError(null);\n      setTimeout(() => renameInputRef.current?.focus(), 50);\n    },\n    []\n  );\n\n  const confirmRename = useCallback(() => {\n    if (!renamingStage) return;\n\n    const trimmed = renameValue.trim();\n\n    if (trimmed.length < RENAME_MIN_LENGTH) {\n      setRenameError(`Mínimo ${RENAME_MIN_LENGTH} caracteres`);\n      renameInputRef.current?.focus();\n      return;\n    }\n\n    if (trimmed.length > RENAME_MAX_LENGTH) {\n      setRenameError(`Máximo ${RENAME_MAX_LENGTH} caracteres`);\n      renameInputRef.current?.focus();\n      return;\n    }\n\n    setStageCustomizations((prev) => ({\n      ...prev,\n      [renamingStage]: {\n        ...prev[renamingStage],\n        label: trimmed,\n      },\n    }));\n    setRenamingStage(null);\n    setRenameValue(\"\");\n    setRenameError(null);\n  }, [renamingStage, renameValue]);\n\n  const cancelRename = useCallback(() => {\n    setRenamingStage(null);\n    setRenameValue(\"\");\n    setRenameError(null);\n  }, []);\n\n  const setStageColor = useCallback(\n    (stageId: PipelineStage, colorId: string) => {\n      setStageCustomizations((prev) => ({\n        ...prev,\n        [stageId]: { ...prev[stageId], colorId },\n      }));\n    },\n    []\n  );\n\n  const getStageColor = useCallback(\n    (stageId: PipelineStage) => {\n      const colorId = stageCustomizations[stageId]?.colorId || \"default\";\n      return (\n        stageColorPalette.find((c) => c.id === colorId) ?? stageColorPalette[0]\n      );\n    },\n    [stageCustomizations]\n  );\n\n  return {\n    stageCustomizations,\n    renamingStage,\n    renameValue,\n    renameError,\n    setRenameValue,\n    renameInputRef,\n    startRename,\n    confirmRename,\n    cancelRename,\n    setStageColor,\n    getStageColor,\n  };\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAJA;;;AAWA,MAAM,oBAAoB;AAC1B,MAAM,oBAAoB;AAEnB,SAAS;IACd,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAE5D,IAAM,IAAA,wLAAuB;IAE/B,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAuB;IACzE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB;IAC9D,MAAM,iBAAiB,IAAA,+MAAM,EAAmB;IAEhD,+DAA+D;IAC/D,IAAA,kNAAS,EAAC;QACR,IAAA,wLAAuB,EAAC;IAC1B,GAAG;QAAC;KAAoB;IAExB,MAAM,cAAc,IAAA,oNAAW,EAC7B,CAAC,SAAwB;QACvB,iBAAiB;QACjB,eAAe;QACf,eAAe;QACf,WAAW,IAAM,eAAe,OAAO,EAAE,SAAS;IACpD,GACA,EAAE;IAGJ,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,IAAI,CAAC,eAAe;QAEpB,MAAM,UAAU,YAAY,IAAI;QAEhC,IAAI,QAAQ,MAAM,GAAG,mBAAmB;YACtC,eAAe,CAAC,OAAO,EAAE,kBAAkB,WAAW,CAAC;YACvD,eAAe,OAAO,EAAE;YACxB;QACF;QAEA,IAAI,QAAQ,MAAM,GAAG,mBAAmB;YACtC,eAAe,CAAC,OAAO,EAAE,kBAAkB,WAAW,CAAC;YACvD,eAAe,OAAO,EAAE;YACxB;QACF;QAEA,uBAAuB,CAAC,OAAS,CAAC;gBAChC,GAAG,IAAI;gBACP,CAAC,cAAc,EAAE;oBACf,GAAG,IAAI,CAAC,cAAc;oBACtB,OAAO;gBACT;YACF,CAAC;QACD,iBAAiB;QACjB,eAAe;QACf,eAAe;IACjB,GAAG;QAAC;QAAe;KAAY;IAE/B,MAAM,eAAe,IAAA,oNAAW,EAAC;QAC/B,iBAAiB;QACjB,eAAe;QACf,eAAe;IACjB,GAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,oNAAW,EAC/B,CAAC,SAAwB;QACvB,uBAAuB,CAAC,OAAS,CAAC;gBAChC,GAAG,IAAI;gBACP,CAAC,QAAQ,EAAE;oBAAE,GAAG,IAAI,CAAC,QAAQ;oBAAE;gBAAQ;YACzC,CAAC;IACH,GACA,EAAE;IAGJ,MAAM,gBAAgB,IAAA,oNAAW,EAC/B,CAAC;QACC,MAAM,UAAU,mBAAmB,CAAC,QAAQ,EAAE,WAAW;QACzD,OACE,kLAAiB,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,YAAY,kLAAiB,CAAC,EAAE;IAE3E,GACA;QAAC;KAAoB;IAGvB,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 818, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/pipes/components/deal-card-bento.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useCallback } from \"react\";\nimport {\n  MoreHorizontal,\n  Clock3,\n  AlertTriangle,\n  MapPin,\n  Tags,\n  CalendarClock,\n  CheckCircle2,\n} from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { cn } from \"@/lib/cn\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport type { Opportunity } from \"@/types\";\nimport { formatCurrencyBRL } from \"@/lib/business-rules\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { getInitials, getSlaStatus, getSlaColors } from \"../lib/pipeline-validation\";\n\n// ===================================================================\n// DealCardBento -- Card Spec padronizado\n// ===================================================================\n//\n// Slots fixos:\n//   1. Header row:  title (ellipsis) + menu \"...\"\n//   2. Sub row:     client name (ellipsis) + owner avatar chip\n//   3. Meta row:    value (currency) + SLA countdown\n//   4. Tags row:    max 2 tags + \"+N\" chip (conditional)\n//   5. Temperature: bottom-right indicator\n//\n// Estados: default, hover, focus-visible, dragging (ghost via parent)\n\ninterface DealCardBentoProps {\n  opportunity: Opportunity;\n  temp: { icon: React.ReactNode; label: string; colorClass: string };\n  isDragging?: boolean;\n  isUpdating?: boolean;\n  isHighlighted?: boolean;\n  canMove?: boolean;\n  canEdit?: boolean;\n  canCreateActivity?: boolean;\n  onOpen: () => void;\n  onDragStart: (e: React.DragEvent) => void;\n  onDragEnd: () => void;\n  inlineFeedback?: {\n    tone: \"success\" | \"warning\" | \"error\";\n    message: string;\n    actionLabel?: string;\n    onAction?: () => void;\n  } | null;\n  onTagClick?: (tag: string) => void;\n}\n\nfunction formatElapsed(isoDate: string): string {\n  const base = new Date(isoDate);\n  const now = new Date();\n  const diffMs = Math.max(0, now.getTime() - base.getTime());\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n\n  if (diffHours < 1) return \"<1h\";\n  if (diffHours < 24) return `${diffHours}h`;\n  const diffDays = Math.floor(diffHours / 24);\n  if (diffDays < 30) return `${diffDays}d`;\n  const diffMonths = Math.floor(diffDays / 30);\n  return `${Math.max(1, diffMonths)}m`;\n}\n\nfunction getTemperatureChipClassesByLabel(label: string) {\n  switch (label) {\n    case \"Quente\":\n      return \"border-red-200 bg-red-50 text-red-700\";\n    case \"Morno\":\n      return \"border-amber-200 bg-amber-50 text-amber-700\";\n    case \"Frio\":\n      return \"border-sky-200 bg-sky-50 text-sky-700\";\n    default:\n      return \"border-zinc-200 bg-zinc-50 text-zinc-600\";\n  }\n}\n\nfunction getPriorityVisual(\n  opportunity: Opportunity,\n  slaStatus: \"ok\" | \"near\" | \"breached\",\n  computedTempLabel: string,\n) {\n  if (slaStatus === \"breached\") {\n    return {\n      label: \"Critica\",\n      className: \"border-red-200 bg-red-50 text-red-700\",\n    };\n  }\n\n  if (computedTempLabel === \"Quente\" || opportunity.value >= 20000) {\n    return {\n      label: \"Alta\",\n      className: \"border-amber-200 bg-amber-50 text-amber-700\",\n    };\n  }\n\n  return {\n    label: \"Normal\",\n    className: \"border-zinc-200 bg-zinc-50 text-zinc-600\",\n  };\n}\n\nexport function DealCardBento({\n  opportunity,\n  temp,\n  isDragging,\n  isUpdating,\n  isHighlighted,\n  canMove = true,\n  canEdit = true,\n  canCreateActivity = true,\n  onOpen,\n  onDragStart,\n  onDragEnd,\n  inlineFeedback,\n  onTagClick,\n}: DealCardBentoProps) {\n  const { openDrawer, openModal } = useUIStore();\n  const wasDraggingRef = useRef(false);\n  const sla = getSlaStatus(opportunity.slaDeadline);\n  const slaColors = getSlaColors(sla.status);\n  const priority = getPriorityVisual(opportunity, sla.status, temp.label);\n  const primarySegment = opportunity.tags[0] ?? \"Sem segmento\";\n\n  const handleDragStartInternal = useCallback(\n    (e: React.DragEvent) => {\n      wasDraggingRef.current = true;\n      onDragStart(e);\n    },\n    [onDragStart]\n  );\n\n  const handleDragEndInternal = useCallback(() => {\n    // Keep wasDragging flag set for the click event that fires after dragEnd\n    setTimeout(() => {\n      wasDraggingRef.current = false;\n    }, 0);\n    onDragEnd();\n  }, [onDragEnd]);\n\n  const handleClick = useCallback(() => {\n    if (wasDraggingRef.current) return;\n    onOpen();\n  }, [onOpen]);\n\n  return (\n    <div\n      className={`group relative rounded-[22px] border border-zinc-200/90 border-l-[3px] ${slaColors.border} bg-white p-4 shadow-[var(--shadow-bento-sm)] transition-all duration-300 hover:-translate-y-[1.5px] hover:shadow-[0_8px_24px_-10px_rgba(0,0,0,0.08)] focus-within:ring-2 focus-within:ring-brand/40 active:scale-[0.98] ${isDragging\n        ? \"cursor-grabbing shadow-[0_14px_30px_-18px_rgba(15,23,42,0.38)] scale-[1.02]\"\n        : canMove\n          ? \"cursor-grab\"\n          : \"cursor-pointer\"\n        } ${isUpdating ? \"opacity-60 saturate-50 pointer-events-none\" : \"\"} ${isHighlighted\n          ? \"ring-2 ring-emerald-300/70\"\n          : \"\"\n        }`}\n      onClick={handleClick}\n      draggable={canMove}\n      onDragStart={handleDragStartInternal}\n      onDragEnd={handleDragEndInternal}\n      tabIndex={0}\n      role=\"button\"\n      aria-roledescription=\"card arrastavel\"\n      aria-label={`${opportunity.title}, ${formatCurrencyBRL(opportunity.value)}, prioridade ${priority.label}`}\n      onKeyDown={(e) => {\n        if (e.key === \"Enter\" || e.key === \" \") {\n          e.preventDefault();\n          onOpen();\n        }\n      }}\n    >\n      {/* 1. Linha principal: nome + prioridade + acoes */}\n      <div className=\"flex items-start gap-2\">\n        <span className=\"min-w-0 flex-1 truncate font-heading text-[17px] font-semibold text-zinc-950\">\n          {opportunity.title}\n        </span>\n        <span\n          className={`inline-flex h-6 shrink-0 items-center rounded-full border px-2.5 text-[11px] font-semibold ${priority.className}`}\n        >\n          {priority.label}\n        </span>\n\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <button\n              className=\"flex h-7 w-7 shrink-0 items-center justify-center rounded-lg text-zinc-400 opacity-0 transition-opacity hover:bg-zinc-100 hover:text-zinc-600 group-hover:opacity-100 focus:opacity-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand\"\n              onClick={(e) => e.stopPropagation()}\n              onPointerDown={(e) => e.stopPropagation()}\n              aria-label=\"Acoes da oportunidade\"\n            >\n              <MoreHorizontal className=\"h-3.5 w-3.5\" />\n            </button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent\n            align=\"end\"\n            className=\"rounded-[var(--radius-bento-card)]\"\n            onClick={(e) => e.stopPropagation()}\n            onCloseAutoFocus={(e) => e.preventDefault()}\n          >\n            <DropdownMenuItem\n              disabled={!canEdit}\n              onClick={(e) => {\n                e.stopPropagation();\n                onOpen();\n              }}\n            >\n              Editar\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              disabled={!canCreateActivity}\n              onClick={(e) => {\n                e.stopPropagation();\n                openDrawer(\"new-activity\", {\n                  opportunityId: opportunity.id,\n                });\n              }}\n            >\n              Nova atividade\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem\n              disabled={!canEdit}\n              className=\"text-status-success\"\n              onClick={(e) => {\n                e.stopPropagation();\n                openModal(\"win-opportunity\", { opportunityId: opportunity.id });\n              }}\n            >\n              Marcar como Ganho\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              disabled={!canEdit}\n              className=\"text-status-danger\"\n              onClick={(e) => {\n                e.stopPropagation();\n                openModal(\"lose-opportunity\", { opportunityId: opportunity.id });\n              }}\n            >\n              Marcar como Perdido\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n\n      {/* 2. Valor + temperatura */}\n      <div className=\"mt-2 flex items-center justify-between gap-2\">\n        <span className=\"font-heading text-[20px] font-bold tracking-tight text-zinc-950\">\n          {opportunity.value > 0\n            ? formatCurrencyBRL(opportunity.value)\n            : \"Sem valor\"}\n        </span>\n        <span\n          className={`inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-[11px] font-semibold ${getTemperatureChipClassesByLabel(temp.label)}`}\n        >\n          {temp.icon}\n          {temp.label}\n        </span>\n      </div>\n\n      {/* 3. Localizacao + segmento */}\n      <div className=\"mt-2 flex items-center justify-between gap-2 text-[12px] text-zinc-600\">\n        <span className=\"inline-flex min-w-0 flex-1 items-center gap-1.5 truncate\">\n          <MapPin className=\"h-3.5 w-3.5 shrink-0 text-zinc-400\" />\n          {opportunity.neighborhood || \"Sem localizacao\"}\n        </span>\n        <span\n          className={cn(\"inline-flex shrink-0 items-center gap-1 rounded-full border border-zinc-200 bg-zinc-50 px-2.5 py-1 text-[11px] font-medium text-zinc-600 transition-colors\",\n            onTagClick && primarySegment !== \"Sem segmento\" && \"cursor-pointer hover:bg-zinc-100 hover:text-zinc-900\"\n          )}\n          onClick={(e) => {\n            if (onTagClick && primarySegment !== \"Sem segmento\") {\n              e.stopPropagation();\n              onTagClick(primarySegment);\n            }\n          }}\n        >\n          <Tags className=\"h-3 w-3\" />\n          {primarySegment}\n        </span>\n      </div>\n\n      {/* 4. Ultima atividade + idade do card */}\n      <div className=\"mt-2.5 grid grid-cols-2 gap-2 text-[11px] text-zinc-500\">\n        <span className=\"inline-flex items-center gap-1.5\">\n          <Clock3 className=\"h-3.5 w-3.5 shrink-0 text-zinc-400\" />\n          Ultima atividade {formatElapsed(opportunity.updatedAt)}\n        </span>\n        <span className=\"inline-flex items-center justify-end gap-1.5 text-right\">\n          <CalendarClock className=\"h-3.5 w-3.5 shrink-0 text-zinc-400\" />\n          No pipeline ha {formatElapsed(opportunity.createdAt)}\n        </span>\n      </div>\n\n      {/* 5. SLA + owner */}\n      <div className=\"mt-2.5 flex items-center justify-between gap-2\">\n        <span\n          className={`inline-flex min-w-0 items-center gap-1.5 rounded-full border px-2.5 py-1 text-[11px] font-semibold ${sla.status === \"breached\"\n            ? \"border-red-200 bg-red-50 text-red-700\"\n            : sla.status === \"near\"\n              ? \"border-amber-200 bg-amber-50 text-amber-700\"\n              : \"border-zinc-200 bg-zinc-50 text-zinc-600\"\n            }`}\n        >\n          {sla.status === \"breached\" ? (\n            <AlertTriangle className=\"h-3.5 w-3.5\" />\n          ) : (\n            <Clock3 className=\"h-3.5 w-3.5\" />\n          )}\n          {sla.status === \"breached\" ? \"Estourado\" : `SLA ${sla.label || \"ok\"}`}\n        </span>\n\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <span className=\"flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-zinc-900 font-heading text-[10px] font-semibold text-white\">\n              {getInitials(opportunity.responsibleName)}\n            </span>\n          </TooltipTrigger>\n          <TooltipContent>{opportunity.responsibleName}</TooltipContent>\n        </Tooltip>\n      </div>\n\n      {/* Tags extras */}\n      {opportunity.tags.length > 0 && (\n        <div className=\"mt-3 flex flex-wrap items-center gap-1.5\">\n          {opportunity.tags.slice(0, 2).map((tag: string, idx: number) => (\n            <Badge\n              key={idx}\n              variant=\"secondary\"\n              className={cn(\"shrink-0 rounded-full border border-zinc-200 bg-zinc-50 px-2 py-0.5 font-body text-[10px] text-zinc-600 transition-colors\",\n                onTagClick && \"cursor-pointer hover:bg-zinc-100 hover:text-zinc-900\"\n              )}\n              onClick={(e) => {\n                if (onTagClick) {\n                  e.stopPropagation();\n                  onTagClick(tag);\n                }\n              }}\n            >\n              {tag}\n            </Badge>\n          ))}\n          {opportunity.tags.length > 2 && (\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Badge\n                  variant=\"secondary\"\n                  className=\"shrink-0 rounded-full border border-zinc-200 bg-zinc-50 px-2 py-0.5 font-body text-[10px] text-zinc-600\"\n                >\n                  +{opportunity.tags.length - 2}\n                </Badge>\n              </TooltipTrigger>\n              <TooltipContent>\n                {opportunity.tags.slice(2).join(\", \")}\n              </TooltipContent>\n            </Tooltip>\n          )}\n        </div>\n      )}\n\n      {inlineFeedback ? (\n        <div\n          className={`mt-3 rounded-xl border px-2.5 py-2 text-[11px] ${inlineFeedback.tone === \"error\"\n            ? \"border-red-200 bg-red-50 text-red-700\"\n            : inlineFeedback.tone === \"warning\"\n              ? \"border-amber-200 bg-amber-50 text-amber-700\"\n              : \"border-emerald-200 bg-emerald-50 text-emerald-700\"\n            }`}\n          role={inlineFeedback.tone === \"error\" ? \"alert\" : \"status\"}\n        >\n          <div className=\"flex items-start gap-1.5\">\n            {inlineFeedback.tone === \"success\" ? (\n              <CheckCircle2 className=\"mt-0.5 h-3.5 w-3.5 shrink-0\" />\n            ) : (\n              <AlertTriangle className=\"mt-0.5 h-3.5 w-3.5 shrink-0\" />\n            )}\n            <div className=\"min-w-0 flex-1\">\n              <p>{inlineFeedback.message}</p>\n              {inlineFeedback.actionLabel && inlineFeedback.onAction ? (\n                <button\n                  type=\"button\"\n                  onClick={(event) => {\n                    event.stopPropagation();\n                    inlineFeedback.onAction?.();\n                  }}\n                  className=\"mt-1 font-semibold underline underline-offset-2\"\n                >\n                  {inlineFeedback.actionLabel}\n                </button>\n              ) : null}\n            </div>\n          </div>\n        </div>\n      ) : null}\n\n      <span className=\"sr-only\">{sla.detailLabel}</span>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1386, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\n        \"relative overflow-hidden rounded-md bg-slate-200/75\",\n        \"before:absolute before:inset-0 before:animate-pulse\",\n        \"before:bg-linear-to-r before:from-transparent before:via-white/70 before:to-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,uDACA,uDACA,2FACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1410, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/pipes/components/pipeline-skeleton.tsx"],"sourcesContent":["\"use client\";\n\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\nexport function PipelineSkeleton({ stageCount }: { stageCount: number }) {\n  return (\n    <div className=\"flex h-[calc(100vh-64px)] flex-col overflow-hidden\">\n      {/* Header skeleton */}\n      <div className=\"shrink-0 space-y-3 pb-4\">\n        <div className=\"flex flex-wrap items-start justify-between gap-3\">\n          <div className=\"space-y-2\">\n            <Skeleton className=\"h-7 w-52\" />\n            <Skeleton className=\"h-4 w-72\" />\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Skeleton className=\"h-9 w-[180px] rounded-full\" />\n            <Skeleton className=\"h-9 w-20 rounded-full\" />\n            <Skeleton className=\"h-9 w-16 rounded-full\" />\n            <Skeleton className=\"h-9 w-28 rounded-full\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Board skeleton */}\n      <div className=\"flex flex-1 gap-3 overflow-hidden px-7 pb-2\">\n        {Array.from({ length: stageCount }).map((_, i) => (\n          <div\n            key={i}\n            className=\"flex w-[320px] shrink-0 flex-col rounded-[var(--radius-bento-card)] bg-zinc-50/80 p-3\"\n          >\n            {/* Column header skeleton */}\n            <div className=\"mb-3 flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Skeleton className=\"h-2.5 w-2.5 rounded-full\" />\n                <Skeleton className=\"h-4 w-24\" />\n                <Skeleton className=\"h-4 w-6 rounded-md\" />\n              </div>\n              <Skeleton className=\"h-4 w-16\" />\n            </div>\n\n            {/* Card skeletons */}\n            {Array.from({ length: 2 - (i % 2) }).map((_, j) => (\n              <div\n                key={j}\n                className=\"mb-2 rounded-[var(--radius-bento-card)] border border-zinc-200 bg-white p-3\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <Skeleton className=\"h-4 w-32\" />\n                  <Skeleton className=\"h-4 w-4 rounded\" />\n                </div>\n                <div className=\"mt-2 flex items-center gap-2\">\n                  <Skeleton className=\"h-3 w-28\" />\n                  <Skeleton className=\"h-6 w-6 rounded-full\" />\n                </div>\n                <div className=\"mt-2 flex items-center justify-between\">\n                  <Skeleton className=\"h-4 w-20\" />\n                  <Skeleton className=\"h-3 w-12\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS,iBAAiB,EAAE,UAAU,EAA0B;IACrE,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;;;;;;;sCAEtB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAM1B,8OAAC;gBAAI,WAAU;0BACZ,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAW,GAAG,GAAG,CAAC,CAAC,GAAG,kBAC1C,8OAAC;wBAEC,WAAU;;0CAGV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,gJAAQ;gDAAC,WAAU;;;;;;0DACpB,8OAAC,gJAAQ;gDAAC,WAAU;;;;;;0DACpB,8OAAC,gJAAQ;gDAAC,WAAU;;;;;;;;;;;;kDAEtB,8OAAC,gJAAQ;wCAAC,WAAU;;;;;;;;;;;;4BAIrB,MAAM,IAAI,CAAC;gCAAE,QAAQ,IAAK,IAAI;4BAAG,GAAG,GAAG,CAAC,CAAC,GAAG,kBAC3C,8OAAC;oCAEC,WAAU;;sDAEV,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,gJAAQ;oDAAC,WAAU;;;;;;8DACpB,8OAAC,gJAAQ;oDAAC,WAAU;;;;;;;;;;;;sDAEtB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,gJAAQ;oDAAC,WAAU;;;;;;8DACpB,8OAAC,gJAAQ;oDAAC,WAAU;;;;;;;;;;;;sDAEtB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,gJAAQ;oDAAC,WAAU;;;;;;8DACpB,8OAAC,gJAAQ;oDAAC,WAAU;;;;;;;;;;;;;mCAbjB;;;;;;uBAhBJ;;;;;;;;;;;;;;;;AAsCjB"}},
    {"offset": {"line": 1654, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/shared/module-command-header.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport type { ReactNode } from \"react\";\nimport { cn } from \"@/lib/cn\";\n\ntype ChipTone = \"neutral\" | \"info\" | \"warning\" | \"danger\" | \"success\";\n\nexport interface ModuleCommandHeaderChip {\n  id: string;\n  label: string;\n  icon?: ReactNode;\n  tone?: ChipTone;\n  onClick?: () => void;\n  href?: string;\n}\n\ninterface ModuleCommandHeaderProps {\n  title: ReactNode;\n  titleAccessory?: ReactNode;\n  description?: string;\n  actions?: ReactNode;\n  actionsClassName?: string;\n  meta?: ReactNode;\n  chips?: ModuleCommandHeaderChip[];\n  fallbackChip?: ModuleCommandHeaderChip;\n  children?: ReactNode;\n  className?: string;\n  sticky?: boolean;\n}\n\nconst chipToneStyles: Record<ChipTone, string> = {\n  neutral: \"border-zinc-200 bg-white/92 text-zinc-700\",\n  info: \"border-sky-200 bg-sky-50/88 text-sky-700\",\n  warning: \"border-amber-200 bg-amber-50/88 text-amber-700\",\n  danger: \"border-red-200 bg-red-50/88 text-red-700\",\n  success: \"border-emerald-200 bg-emerald-50/88 text-emerald-700\",\n};\n\nfunction renderChip(chip: ModuleCommandHeaderChip) {\n  const isInteractive = Boolean(chip.href || chip.onClick);\n  const classes = cn(\n    \"premium-shine inline-flex h-8 shrink-0 items-center justify-center gap-1.5 rounded-full border px-3 text-[12px] font-semibold tracking-tight whitespace-nowrap\",\n    isInteractive\n      ? \"cursor-pointer transition-all duration-150 ease-out hover:bg-white/75 hover:-translate-y-[1px] active:scale-[0.99] active:translate-y-0\"\n      : \"cursor-default select-none opacity-90\",\n    chipToneStyles[chip.tone ?? \"neutral\"]\n  );\n\n  const content = (\n    <>\n      {chip.icon ? <span className=\"shrink-0\">{chip.icon}</span> : null}\n      <span>{chip.label}</span>\n    </>\n  );\n\n  if (chip.href) {\n    return (\n      <Link key={chip.id} href={chip.href} className={classes}>\n        {content}\n      </Link>\n    );\n  }\n\n  if (chip.onClick) {\n    return (\n      <button key={chip.id} type=\"button\" onClick={chip.onClick} className={classes}>\n        {content}\n      </button>\n    );\n  }\n\n  return (\n    <span key={chip.id} className={classes}>\n      {content}\n    </span>\n  );\n}\n\nexport function ModuleCommandHeader({\n  title,\n  titleAccessory,\n  description,\n  actions,\n  actionsClassName,\n  meta,\n  chips = [],\n  fallbackChip,\n  children,\n  className,\n  sticky = false,\n}: ModuleCommandHeaderProps) {\n  const hasChildrenRow = Boolean(children);\n  const hasMeta = Boolean(meta);\n  const hasChips = Boolean(chips.length > 0 || fallbackChip);\n  const hasLowerSection = hasChildrenRow || hasMeta || hasChips;\n  const hasLeftBlock = hasChildrenRow || hasMeta;\n\n  return (\n    <section\n      className={cn(\n        \"relative overflow-hidden rounded-[20px] border border-zinc-200/85 bg-zinc-50/88 px-5 pb-4 pt-3\",\n        \"shadow-[0_10px_24px_-20px_rgba(15,23,42,0.34)] backdrop-blur-sm\",\n        sticky && \"sticky top-4 z-30\",\n        className\n      )}\n    >\n      <div className=\"pointer-events-none absolute inset-0\">\n        <div className=\"absolute inset-x-0 top-0 h-14 bg-linear-to-b from-white/72 to-transparent\" />\n      </div>\n\n      <div className=\"relative z-10 space-y-3\">\n        <div className=\"flex flex-col gap-4 xl:flex-row xl:items-start xl:justify-between\">\n          <div className=\"min-w-0 flex-1 max-w-[600px]\">\n            <div className=\"flex min-w-0 items-center gap-2\">\n              <h1 className=\"min-w-0 font-heading text-2xl font-bold tracking-tight text-zinc-950 sm:text-3xl\">\n                {title}\n              </h1>\n              {titleAccessory ? <div className=\"shrink-0\">{titleAccessory}</div> : null}\n            </div>\n            {description ? (\n              <p className=\"mt-1 font-body text-[13.5px] text-zinc-600/90 leading-relaxed\">{description}</p>\n            ) : null}\n          </div>\n          {actions ? (\n            <div\n              className={cn(\n                \"flex w-full min-w-0 shrink-0 flex-wrap items-center gap-2 rounded-[20px] border border-zinc-200/85 bg-white/95 px-2 py-1.5 shadow-[0_8px_16px_-16px_rgba(15,23,42,0.36)]\",\n                \"xl:w-auto xl:max-w-full xl:justify-end\",\n                actionsClassName\n              )}\n            >\n              {actions}\n            </div>\n          ) : null}\n        </div>\n\n        {hasLowerSection ? (\n          <div className=\"border-t border-zinc-200/75 pt-3\">\n            <div className=\"flex flex-col gap-3 xl:flex-row xl:items-start xl:justify-between\">\n              {hasLeftBlock ? (\n                <div className=\"min-w-0 flex-1 space-y-2\">\n                  {meta ? <div className=\"text-xs text-zinc-500/80\">{meta}</div> : null}\n                  {hasChildrenRow ? <div>{children}</div> : null}\n                </div>\n              ) : null}\n\n              {hasChips ? (\n                <div\n                  className={cn(\n                    \"flex flex-wrap items-center gap-2 shrink-0 max-w-full\",\n                    hasLeftBlock ? \"xl:justify-end\" : \"justify-end\"\n                  )}\n                >\n                  {chips.length > 0 ? chips.map((chip) => renderChip(chip)) : null}\n                  {chips.length === 0 && fallbackChip ? renderChip(fallbackChip) : null}\n                </div>\n              ) : null}\n            </div>\n          </div>\n        ) : null}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AA+BA,MAAM,iBAA2C;IAC/C,SAAS;IACT,MAAM;IACN,SAAS;IACT,QAAQ;IACR,SAAS;AACX;AAEA,SAAS,WAAW,IAA6B;IAC/C,MAAM,gBAAgB,QAAQ,KAAK,IAAI,IAAI,KAAK,OAAO;IACvD,MAAM,UAAU,IAAA,sHAAE,EAChB,kKACA,gBACI,4IACA,yCACJ,cAAc,CAAC,KAAK,IAAI,IAAI,UAAU;IAGxC,MAAM,wBACJ;;YACG,KAAK,IAAI,iBAAG,8OAAC;gBAAK,WAAU;0BAAY,KAAK,IAAI;;;;;uBAAW;0BAC7D,8OAAC;0BAAM,KAAK,KAAK;;;;;;;;IAIrB,IAAI,KAAK,IAAI,EAAE;QACb,qBACE,8OAAC,uKAAI;YAAe,MAAM,KAAK,IAAI;YAAE,WAAW;sBAC7C;WADQ,KAAK,EAAE;;;;;IAItB;IAEA,IAAI,KAAK,OAAO,EAAE;QAChB,qBACE,8OAAC;YAAqB,MAAK;YAAS,SAAS,KAAK,OAAO;YAAE,WAAW;sBACnE;WADU,KAAK,EAAE;;;;;IAIxB;IAEA,qBACE,8OAAC;QAAmB,WAAW;kBAC5B;OADQ,KAAK,EAAE;;;;;AAItB;AAEO,SAAS,oBAAoB,EAClC,KAAK,EACL,cAAc,EACd,WAAW,EACX,OAAO,EACP,gBAAgB,EAChB,IAAI,EACJ,QAAQ,EAAE,EACV,YAAY,EACZ,QAAQ,EACR,SAAS,EACT,SAAS,KAAK,EACW;IACzB,MAAM,iBAAiB,QAAQ;IAC/B,MAAM,UAAU,QAAQ;IACxB,MAAM,WAAW,QAAQ,MAAM,MAAM,GAAG,KAAK;IAC7C,MAAM,kBAAkB,kBAAkB,WAAW;IACrD,MAAM,eAAe,kBAAkB;IAEvC,qBACE,8OAAC;QACC,WAAW,IAAA,sHAAE,EACX,kGACA,mEACA,UAAU,qBACV;;0BAGF,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;;;;;;;;;;0BAGjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAG,WAAU;0DACX;;;;;;4CAEF,+BAAiB,8OAAC;gDAAI,WAAU;0DAAY;;;;;uDAAwB;;;;;;;oCAEtE,4BACC,8OAAC;wCAAE,WAAU;kDAAiE;;;;;+CAC5E;;;;;;;4BAEL,wBACC,8OAAC;gCACC,WAAW,IAAA,sHAAE,EACX,4KACA,0CACA;0CAGD;;;;;uCAED;;;;;;;oBAGL,gCACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;gCACZ,6BACC,8OAAC;oCAAI,WAAU;;wCACZ,qBAAO,8OAAC;4CAAI,WAAU;sDAA4B;;;;;mDAAc;wCAChE,+BAAiB,8OAAC;sDAAK;;;;;mDAAkB;;;;;;2CAE1C;gCAEH,yBACC,8OAAC;oCACC,WAAW,IAAA,sHAAE,EACX,yDACA,eAAe,mBAAmB;;wCAGnC,MAAM,MAAM,GAAG,IAAI,MAAM,GAAG,CAAC,CAAC,OAAS,WAAW,SAAS;wCAC3D,MAAM,MAAM,KAAK,KAAK,eAAe,WAAW,gBAAgB;;;;;;2CAEjE;;;;;;;;;;;+BAGN;;;;;;;;;;;;;AAIZ"}},
    {"offset": {"line": 1879, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/app/%28auth%29/pipes/page.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  useState,\n  useCallback,\n  useRef,\n  useMemo,\n  useEffect,\n  Suspense,\n} from \"react\";\nimport {\n  Search,\n  Filter,\n  X,\n  Palette,\n  Check,\n  CheckCircle2,\n  AlertTriangle,\n  CircleDollarSign,\n  Columns3,\n  ChevronDown,\n  Settings2,\n  Plus,\n  Sparkles,\n  Flame,\n  TimerReset,\n} from \"lucide-react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport {\n  calculateTemperature,\n  formatCurrencyBRL,\n} from \"@/lib/business-rules\";\nimport { screenContainer, sectionEnter, listItemReveal } from \"@/lib/motion\";\nimport { cn } from \"@/lib/cn\";\nimport {\n  funnels,\n  stageColorPalette,\n  temperatureConfig,\n} from \"./lib/pipeline-config\";\nimport type { PipelineStage, Opportunity } from \"@/types\";\nimport { getSlaStatus, validateStageTransition } from \"./lib/pipeline-validation\";\nimport { usePipelineBoard } from \"./hooks/use-pipeline-board\";\nimport { useStageCustomization } from \"./hooks/use-stage-customization\";\nimport { DealCardBento } from \"./components/deal-card-bento\";\nimport { PipelineSkeleton } from \"./components/pipeline-skeleton\";\nimport { ModuleCommandHeader } from \"@/components/shared/module-command-header\";\n\nconst FILTERS_APPLIED_EVENT = \"flow:filters-applied\";\nconst STALE_ACTIVITY_DAYS = 5;\nconst SLA_RISK_WINDOW_HOURS = 24;\ntype GlobalPipesFilters = {\n  responsible: string[];\n  stage: string[];\n  temperature: string[];\n  tags: string[];\n  dateStart: string;\n  dateEnd: string;\n  valueMin: string;\n  valueMax: string;\n  overdue: boolean;\n  stale: boolean;\n  risk?: boolean;\n};\n\nconst WIP_LIMIT_BY_STAGE: Record<PipelineStage, number> = {\n  \"lead-in\": 9,\n  \"contato-feito\": 8,\n  \"reuniao-agendada\": 7,\n  \"proposta-enviada\": 7,\n  negociacao: 6,\n  fechamento: 5,\n};\n\nfunction isStaleOpportunity(opportunity: Opportunity): boolean {\n  const updatedAt = new Date(opportunity.updatedAt).getTime();\n  const staleThreshold = Date.now() - STALE_ACTIVITY_DAYS * 24 * 60 * 60 * 1000;\n  return updatedAt < staleThreshold;\n}\n\nfunction isSlaRiskOpportunity(opportunity: Opportunity): boolean {\n  if (!opportunity.slaDeadline) return false;\n  const deadline = new Date(opportunity.slaDeadline).getTime();\n  const hoursLeft = (deadline - Date.now()) / (1000 * 60 * 60);\n  return hoursLeft > 0 && hoursLeft <= SLA_RISK_WINDOW_HOURS;\n}\n\nfunction createEmptyPipesFilters(): GlobalPipesFilters {\n  return {\n    responsible: [],\n    stage: [],\n    temperature: [],\n    tags: [],\n    dateStart: \"\",\n    dateEnd: \"\",\n    valueMin: \"\",\n    valueMax: \"\",\n    overdue: false,\n    stale: false,\n    risk: false,\n  };\n}\n\nfunction getStageParamLabel(stage: PipelineStage) {\n  return stage\n    .replace(/-/g, \" \")\n    .replace(/\\b\\w/g, (char) => char.toUpperCase());\n}\n\nfunction PipesPageContent() {\n  const { openDrawer, openModal } = useUIStore();\n  const { user, permissions } = useAuthStore();\n  const storeOpportunities = useOpportunityStore((state) => state.opportunities);\n  const replaceOpportunities = useOpportunityStore((state) => state.replaceOpportunities);\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const userId = user?.id ?? null;\n\n  const canCreateOpportunity = permissions?.canCreateOpportunity ?? false;\n  const canMoveCards = permissions?.canEditOpportunity ?? false;\n  const canCreateActivity = permissions?.canCreateActivity ?? false;\n  const canConfigureStages = permissions?.canManageSettings ?? false;\n  const canViewAllUnits = permissions?.canViewAllUnits ?? false;\n\n  const [selectedFunnel, setSelectedFunnel] = useState(\"comercial\");\n  const [colorPopoverStage, setColorPopoverStage] = useState<PipelineStage | null>(null);\n  const [filtersInlineFeedback, setFiltersInlineFeedback] = useState<{\n    tone: \"success\" | \"error\" | \"info\";\n    message: string;\n  } | null>(null);\n  const opportunities = useMemo(() => {\n    const openOpportunities = storeOpportunities.filter((opportunity) => opportunity.status === \"open\");\n    if (canViewAllUnits || !userId) {\n      return openOpportunities;\n    }\n    return openOpportunities.filter((opportunity) => opportunity.responsibleId === userId);\n  }, [canViewAllUnits, storeOpportunities, userId]);\n\n  useEffect(() => {\n    const opportunityId = searchParams.get(\"opportunityId\");\n    if (!opportunityId) return;\n\n    const opportunity = opportunities.find((candidate) => candidate.id === opportunityId);\n    let feedbackTimeoutId: number | null = null;\n    if (!opportunity) {\n      feedbackTimeoutId = window.setTimeout(() => {\n        setFiltersInlineFeedback({\n          tone: \"error\",\n          message: \"Não foi possível abrir o card. Oportunidade não encontrada no escopo atual.\",\n        });\n      }, 0);\n    } else {\n      openModal(\"lead-card\", {\n        id: opportunityId,\n        opportunitySnapshot: opportunity,\n      });\n    }\n\n    const nextParams = new URLSearchParams(searchParams.toString());\n    nextParams.delete(\"opportunityId\");\n    const serialized = nextParams.toString();\n    router.replace(serialized ? `/pipes?${serialized}` : \"/pipes\", {\n      scroll: false,\n    });\n    return () => {\n      if (feedbackTimeoutId) {\n        window.clearTimeout(feedbackTimeoutId);\n      }\n    };\n  }, [openModal, opportunities, router, searchParams]);\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [searchInputValue, setSearchInputValue] = useState(\"\");\n  const [isMobileSearchOpen, setIsMobileSearchOpen] = useState(false);\n  const [globalPipesFilters, setGlobalPipesFilters] = useState<GlobalPipesFilters | null>(null);\n\n  useEffect(() => {\n    const rawFilterParam = searchParams.get(\"filter\") ?? searchParams.get(\"filters\");\n    if (!rawFilterParam) return;\n    const filterTokens = rawFilterParam\n      .split(\",\")\n      .map((token) => token.trim())\n      .filter(Boolean);\n\n    const frameId = window.requestAnimationFrame(() => {\n      setGlobalPipesFilters((prev) => {\n        const base = prev ?? createEmptyPipesFilters();\n        const next: GlobalPipesFilters = {\n          ...base,\n          overdue: false,\n          stale: false,\n          risk: false,\n        };\n\n        for (const token of filterTokens) {\n          if (token === \"sla_overdue\") next.overdue = true;\n          if (token === \"sla_risk\" || token === \"risk\") next.risk = true;\n          if (\n            token === \"stale\" ||\n            token === \"stalled\" ||\n            token === \"no_activity\"\n          ) {\n            next.stale = true;\n          }\n        }\n\n        if (\n          base.overdue === next.overdue &&\n          base.stale === next.stale &&\n          Boolean(base.risk) === Boolean(next.risk)\n        ) {\n          return prev ?? next;\n        }\n\n        return next;\n      });\n    });\n    return () => window.cancelAnimationFrame(frameId);\n  }, [searchParams]);\n\n  const searchInputRef = useRef<HTMLInputElement>(null);\n  const mobileSearchInputRef = useRef<HTMLInputElement>(null);\n  const liveRegionRef = useRef<HTMLDivElement>(null);\n\n  const activeFunnel = funnels.find((funnel) => funnel.id === selectedFunnel) ?? funnels[0];\n\n  const activeStageIds = useMemo(\n    () => activeFunnel.stages.map((stage) => stage.id),\n    [activeFunnel]\n  );\n\n  const stageFilter = useMemo(() => {\n    const raw = searchParams.get(\"stage\") ?? searchParams.get(\"stageId\");\n    if (!raw) return null;\n    const candidate = raw as PipelineStage;\n    return activeStageIds.includes(candidate) ? candidate : null;\n  }, [searchParams, activeStageIds]);\n\n  const visibleStages = useMemo(\n    () =>\n      stageFilter\n        ? activeFunnel.stages.filter((stage) => stage.id === stageFilter)\n        : activeFunnel.stages,\n    [activeFunnel, stageFilter]\n  );\n\n  const effectiveStageIds = useMemo(\n    () => (stageFilter ? [stageFilter] : activeStageIds),\n    [stageFilter, activeStageIds]\n  );\n\n  const setScopedOpportunities = useCallback(\n    (\n      next:\n        | Opportunity[]\n        | ((previous: Opportunity[]) => Opportunity[])\n    ) => {\n      const previousScoped = opportunities;\n      const nextScoped =\n        typeof next === \"function\" ? next(previousScoped) : next;\n      const scopedIds = new Set(previousScoped.map((opportunity) => opportunity.id));\n      const nextScopedById = new Map(\n        nextScoped.map((opportunity) => [opportunity.id, opportunity])\n      );\n      const nextGlobal = storeOpportunities.map((opportunity) => {\n        if (!scopedIds.has(opportunity.id)) return opportunity;\n        return nextScopedById.get(opportunity.id) ?? opportunity;\n      });\n\n      for (const opportunity of nextScoped) {\n        if (!storeOpportunities.some((current) => current.id === opportunity.id)) {\n          nextGlobal.push(opportunity);\n        }\n      }\n\n      replaceOpportunities(nextGlobal);\n    },\n    [opportunities, replaceOpportunities, storeOpportunities]\n  );\n\n  const announce = useCallback((message: string) => {\n    if (liveRegionRef.current) {\n      liveRegionRef.current.textContent = message;\n    }\n  }, []);\n\n  useEffect(() => {\n    const timer = window.setTimeout(() => setIsLoading(false), 600);\n    return () => window.clearTimeout(timer);\n  }, []);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n\n    const handleFiltersApplied = (event: Event) => {\n      const customEvent = event as CustomEvent<{\n        context?: string;\n        count?: number;\n        filters?: GlobalPipesFilters;\n      }>;\n      if (customEvent.detail?.context !== \"pipes\") return;\n\n      if (customEvent.detail?.filters) {\n        setGlobalPipesFilters(customEvent.detail.filters);\n      }\n      const count = Number(customEvent.detail?.count ?? 0);\n      if (Number.isFinite(count) && count >= 0) {\n        setFiltersInlineFeedback({\n          tone: \"success\",\n          message:\n            count > 0\n              ? `${count} filtro(s) aplicado(s) no pipeline.`\n              : \"Filtros aplicados. Nenhum critério ativo.\",\n        });\n      }\n    };\n\n    window.addEventListener(FILTERS_APPLIED_EVENT, handleFiltersApplied as EventListener);\n    return () =>\n      window.removeEventListener(\n        FILTERS_APPLIED_EVENT,\n        handleFiltersApplied as EventListener\n      );\n  }, []);\n\n  useEffect(() => {\n    if (!filtersInlineFeedback) return;\n    const timer = window.setTimeout(() => setFiltersInlineFeedback(null), 2200);\n    return () => window.clearTimeout(timer);\n  }, [filtersInlineFeedback]);\n\n  useEffect(() => {\n    const timer = window.setTimeout(() => {\n      setSearchQuery(searchInputValue);\n    }, 250);\n    return () => window.clearTimeout(timer);\n  }, [searchInputValue]);\n\n  const normalizedSearch = useMemo(\n    () => searchQuery.toLowerCase().trim(),\n    [searchQuery]\n  );\n\n  const activeCards = useMemo(\n    () => opportunities.filter((opportunity) => effectiveStageIds.includes(opportunity.stage)),\n    [effectiveStageIds, opportunities]\n  );\n\n  const averageDealValue = useMemo(() => {\n    if (activeCards.length === 0) return 10000;\n    return activeCards.reduce((acc, opportunity) => acc + opportunity.value, 0) / activeCards.length;\n  }, [activeCards]);\n\n  const resolveTemperature = useCallback(\n    (opportunity: Opportunity) => calculateTemperature(opportunity, averageDealValue),\n    [averageDealValue]\n  );\n\n  const getTemp = useCallback(\n    (opportunity: Opportunity) => temperatureConfig[resolveTemperature(opportunity)],\n    [resolveTemperature]\n  );\n\n  const opportunitiesByStage = useMemo(() => {\n    const grouped: Record<PipelineStage, Opportunity[]> = {\n      \"lead-in\": [],\n      \"contato-feito\": [],\n      \"reuniao-agendada\": [],\n      \"proposta-enviada\": [],\n      negociacao: [],\n      fechamento: [],\n    };\n\n    for (const opportunity of opportunities) {\n      if (!effectiveStageIds.includes(opportunity.stage)) continue;\n\n      if (normalizedSearch) {\n        const textMatch =\n          opportunity.title.toLowerCase().includes(normalizedSearch) ||\n          opportunity.clientName.toLowerCase().includes(normalizedSearch) ||\n          opportunity.tags.some((tag) => tag.toLowerCase().includes(normalizedSearch));\n\n        const numericSearch = normalizedSearch.replace(/\\D/g, \"\");\n        const valueMatch = numericSearch.length > 0 && String(opportunity.value).includes(numericSearch);\n\n        if (!textMatch && !valueMatch) {\n          continue;\n        }\n      }\n\n      const computedTemperature = resolveTemperature(opportunity);\n\n      if (globalPipesFilters) {\n        if (globalPipesFilters.temperature?.length > 0 && !globalPipesFilters.temperature.includes(computedTemperature)) continue;\n        if (globalPipesFilters.responsible?.length > 0 && !globalPipesFilters.responsible.includes(opportunity.responsibleId)) continue;\n        if (globalPipesFilters.tags?.length > 0 && !globalPipesFilters.tags.some(t => opportunity.tags.includes(t))) continue;\n        if (globalPipesFilters.overdue && getSlaStatus(opportunity.slaDeadline).status !== \"breached\") continue;\n        if (globalPipesFilters.risk && !isSlaRiskOpportunity(opportunity)) continue;\n        if (globalPipesFilters.stale && !isStaleOpportunity(opportunity)) continue;\n        if (globalPipesFilters.stage?.length > 0 && !globalPipesFilters.stage.includes(opportunity.stage)) continue;\n\n        const referenceDate = (opportunity.expectedCloseDate ?? opportunity.updatedAt).slice(0, 10);\n        if (globalPipesFilters.dateStart && referenceDate < globalPipesFilters.dateStart) continue;\n        if (globalPipesFilters.dateEnd && referenceDate > globalPipesFilters.dateEnd) continue;\n\n        const valueMin = Number(globalPipesFilters.valueMin || 0);\n        if (Number.isFinite(valueMin) && valueMin > 0 && opportunity.value < valueMin) continue;\n        const valueMax = Number(globalPipesFilters.valueMax || 0);\n        if (Number.isFinite(valueMax) && valueMax > 0 && opportunity.value > valueMax) continue;\n      }\n\n      grouped[opportunity.stage].push(opportunity);\n    }\n\n    return grouped;\n  }, [\n    opportunities,\n    effectiveStageIds,\n    normalizedSearch,\n    resolveTemperature,\n    globalPipesFilters,\n  ]);\n\n  const boardMetrics = useMemo(() => {\n    const allVisibleCards = Object.values(opportunitiesByStage).flat();\n\n    return {\n      totalCards: allVisibleCards.length,\n      boardTotal: allVisibleCards.reduce((acc, opportunity) => acc + opportunity.value, 0),\n      overdueCards: allVisibleCards.filter(\n        (opportunity) => getSlaStatus(opportunity.slaDeadline).status === \"breached\"\n      ).length,\n      staleCards: allVisibleCards.filter((opportunity) => isStaleOpportunity(opportunity)).length,\n    };\n  }, [opportunitiesByStage]);\n\n  const activeFilterCount = useMemo(() => {\n    if (!globalPipesFilters) return stageFilter ? 1 : 0;\n    return (\n      globalPipesFilters.responsible.length +\n      globalPipesFilters.stage.length +\n      globalPipesFilters.temperature.length +\n      globalPipesFilters.tags.length +\n      (globalPipesFilters.dateStart ? 1 : 0) +\n      (globalPipesFilters.dateEnd ? 1 : 0) +\n      (globalPipesFilters.valueMin ? 1 : 0) +\n      (globalPipesFilters.valueMax ? 1 : 0) +\n      (globalPipesFilters.overdue ? 1 : 0) +\n      (globalPipesFilters.stale ? 1 : 0) +\n      (globalPipesFilters.risk ? 1 : 0) +\n      (stageFilter ? 1 : 0)\n    );\n  }, [globalPipesFilters, stageFilter]);\n\n  const clearSearch = useCallback(() => {\n    setSearchInputValue(\"\");\n    setSearchQuery(\"\");\n    setIsMobileSearchOpen(false);\n  }, []);\n\n  const updateStageFilter = useCallback(\n    (next: PipelineStage | \"all\") => {\n      const params = new URLSearchParams(searchParams.toString());\n      if (next === \"all\") {\n        params.delete(\"stage\");\n        params.delete(\"stageId\");\n      } else {\n        params.set(\"stage\", next);\n        params.delete(\"stageId\");\n      }\n      const serialized = params.toString();\n      router.replace(serialized ? `/pipes?${serialized}` : \"/pipes\", {\n        scroll: false,\n      });\n    },\n    [router, searchParams]\n  );\n\n  const clearLocalFilters = useCallback(() => {\n    setGlobalPipesFilters(null);\n    setFiltersInlineFeedback({\n      tone: \"info\",\n      message: \"Filtros do pipeline limpos.\",\n    });\n    if (typeof window !== \"undefined\") {\n      window.dispatchEvent(\n        new CustomEvent(\"flow:filters-clear\", { detail: { context: \"pipes\" } })\n      );\n    }\n    setSearchInputValue(\"\");\n    setSearchQuery(\"\");\n    setIsMobileSearchOpen(false);\n    const params = new URLSearchParams(searchParams.toString());\n    params.delete(\"filter\");\n    params.delete(\"filters\");\n    params.delete(\"stage\");\n    params.delete(\"stageId\");\n    const serialized = params.toString();\n    router.replace(serialized ? `/pipes?${serialized}` : \"/pipes\", { scroll: false });\n  }, [router, searchParams]);\n\n  const toggleQuickFilter = useCallback(\n    (key: keyof Pick<GlobalPipesFilters, \"overdue\" | \"stale\">) => {\n      setGlobalPipesFilters((prev) => {\n        const base = prev ?? createEmptyPipesFilters();\n        const next = { ...base, [key]: !base[key] };\n        if (typeof window !== \"undefined\") {\n          window.dispatchEvent(\n            new CustomEvent(\"flow:filters-update\", { detail: { context: \"pipes\", filters: next } })\n          );\n        }\n        return next;\n      });\n    },\n    []\n  );\n\n  const handleFunnelChange = useCallback(\n    (pipelineId: string) => {\n      setSelectedFunnel(pipelineId);\n      if (searchInputValue) {\n        clearSearch();\n      }\n      updateStageFilter(\"all\");\n    },\n    [clearSearch, searchInputValue, updateStageFilter]\n  );\n\n  const metricChips = useMemo(() => {\n    const chips: Array<{\n      id: string;\n      label: string;\n      icon: React.ReactNode;\n      tone: \"neutral\" | \"info\" | \"warning\" | \"danger\" | \"success\";\n      onClick?: () => void;\n    }> = [\n        {\n          id: \"pipeline-total\",\n          label: `Pipeline: ${formatCurrencyBRL(boardMetrics.boardTotal)}`,\n          icon: <CircleDollarSign className=\"h-3.5 w-3.5\" />,\n          tone: \"info\",\n        },\n        {\n          id: \"stages-visible\",\n          label: `Etapas: ${visibleStages.length}`,\n          icon: <Columns3 className=\"h-3.5 w-3.5\" />,\n          tone: \"neutral\",\n        },\n        {\n          id: \"cards-total\",\n          label: `Cards: ${boardMetrics.totalCards}`,\n          icon: <Filter className=\"h-3.5 w-3.5\" />,\n          tone: \"neutral\",\n        },\n        {\n          id: \"cards-overdue\",\n          label: `Estourados: ${boardMetrics.overdueCards}`,\n          icon: <Flame className=\"h-3.5 w-3.5\" />,\n          tone: globalPipesFilters?.overdue ? \"danger\" : \"neutral\",\n          onClick: () => toggleQuickFilter(\"overdue\"),\n        },\n        {\n          id: \"cards-stale\",\n          label: `Sem atividade: ${boardMetrics.staleCards}`,\n          icon: <TimerReset className=\"h-3.5 w-3.5\" />,\n          tone: globalPipesFilters?.stale ? \"warning\" : \"neutral\",\n          onClick: () => toggleQuickFilter(\"stale\"),\n        },\n      ];\n\n    return chips;\n  }, [\n    boardMetrics.boardTotal,\n    boardMetrics.overdueCards,\n    boardMetrics.staleCards,\n    boardMetrics.totalCards,\n    visibleStages.length,\n    globalPipesFilters,\n    toggleQuickFilter,\n  ]);\n\n  const activeFilters = useMemo(() => {\n    const filters: { id: string; label: string; onRemove: () => void }[] = [];\n    if (globalPipesFilters) {\n      const dispatchUpdate = (newFilters: NonNullable<typeof globalPipesFilters>) => {\n        setGlobalPipesFilters(newFilters);\n        if (typeof window !== \"undefined\") {\n          window.dispatchEvent(\n            new CustomEvent(\"flow:filters-update\", { detail: { context: \"pipes\", filters: newFilters } })\n          );\n        }\n      };\n\n      if (globalPipesFilters.temperature?.length > 0) {\n        filters.push({\n          id: \"temp\",\n          label: `Temperatura: ${globalPipesFilters.temperature.map((t) => (t === \"hot\" ? \"Quente\" : t === \"warm\" ? \"Morna\" : \"Fria\")).join(\", \")}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, temperature: [] }),\n        });\n      }\n      if (globalPipesFilters.responsible?.length > 0) {\n        filters.push({\n          id: \"owner\",\n          label: `Donos: ${globalPipesFilters.responsible.length}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, responsible: [] }),\n        });\n      }\n      if (globalPipesFilters.tags?.length > 0) {\n        filters.push({\n          id: \"segment\",\n          label: `Tags: ${globalPipesFilters.tags.join(\", \")}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, tags: [] }),\n        });\n      }\n      if (globalPipesFilters.stage?.length > 0) {\n        filters.push({\n          id: \"stage-filters\",\n          label: `Etapas: ${globalPipesFilters.stage.length}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, stage: [] }),\n        });\n      }\n      if (globalPipesFilters.dateStart || globalPipesFilters.dateEnd) {\n        filters.push({\n          id: \"period\",\n          label: `Periodo: ${globalPipesFilters.dateStart || \"...\"} ate ${globalPipesFilters.dateEnd || \"...\"}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, dateStart: \"\", dateEnd: \"\" }),\n        });\n      }\n      if (globalPipesFilters.valueMin || globalPipesFilters.valueMax) {\n        const minLabel = globalPipesFilters.valueMin\n          ? formatCurrencyBRL(Number(globalPipesFilters.valueMin))\n          : \"...\";\n        const maxLabel = globalPipesFilters.valueMax\n          ? formatCurrencyBRL(Number(globalPipesFilters.valueMax))\n          : \"...\";\n        filters.push({\n          id: \"value-range\",\n          label: `Valor: ${minLabel} ate ${maxLabel}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, valueMin: \"\", valueMax: \"\" }),\n        });\n      }\n      if (globalPipesFilters.overdue) {\n        filters.push({\n          id: \"overdue\",\n          label: \"Somente estourados\",\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, overdue: false }),\n        });\n      }\n      if (globalPipesFilters.risk) {\n        filters.push({\n          id: \"risk\",\n          label: \"Somente em risco\",\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, risk: false }),\n        });\n      }\n      if (globalPipesFilters.stale) {\n        filters.push({\n          id: \"stale\",\n          label: \"Somente sem atividade\",\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, stale: false }),\n        });\n      }\n    }\n\n    if (stageFilter) {\n      filters.push({\n        id: \"stage\",\n        label: `Etapa: ${activeFunnel.stages.find((stage) => stage.id === stageFilter)?.label ?? getStageParamLabel(stageFilter)}`,\n        onRemove: () => updateStageFilter(\"all\"),\n      });\n    }\n\n    return filters;\n  }, [globalPipesFilters, stageFilter, activeFunnel.stages, updateStageFilter]);\n\n  useEffect(() => {\n    if (!normalizedSearch) return;\n    const total = Object.values(opportunitiesByStage).reduce(\n      (acc, cards) => acc + cards.length,\n      0\n    );\n    announce(`${total} cards encontrados para \"${searchQuery}\"`);\n  }, [announce, normalizedSearch, opportunitiesByStage, searchQuery]);\n\n  const {\n    draggingCardId,\n    draggingOpportunity,\n    dragOverStage,\n    dropIndicator,\n    columnError,\n    setColumnError,\n    successFeedback,\n    updatingCardId,\n    recentlyMovedCardId,\n    handleDragStart,\n    handleDragOver,\n    handleDragLeave,\n    handleDrop,\n    handleDragEnd,\n  } = usePipelineBoard({\n    localOpportunities: opportunities,\n    setLocalOpportunities: setScopedOpportunities,\n    activeFunnel,\n    announce,\n    canMoveCards,\n  });\n\n  const {\n    stageCustomizations,\n    renamingStage,\n    renameValue,\n    renameError,\n    setRenameValue,\n    renameInputRef,\n    startRename,\n    confirmRename,\n    cancelRename,\n    setStageColor,\n    getStageColor,\n  } = useStageCustomization();\n\n  const getDropPreview = useCallback(\n    (targetStage: PipelineStage) => {\n      if (!draggingOpportunity || dragOverStage !== targetStage) return null;\n\n      const targetLabel =\n        activeFunnel.stages.find((stage) => stage.id === targetStage)?.label ??\n        getStageParamLabel(targetStage);\n      const validation = validateStageTransition(draggingOpportunity, targetStage);\n\n      if (validation.missing.length > 0) {\n        return {\n          tone: \"error\" as const,\n          message: `Bloqueado: faltam ${validation.missing.join(\", \")} para mover para ${targetLabel}.`,\n        };\n      }\n\n      if (validation.isRegression) {\n        return {\n          tone: \"warning\" as const,\n          message: `Retrocesso detectado. Solte para mover para ${targetLabel}.`,\n        };\n      }\n\n      // WIP limit warning\n      const currentCards = opportunitiesByStage[targetStage] || [];\n      const wipLimit = WIP_LIMIT_BY_STAGE[targetStage] ?? 7;\n      const isDifferentStage = draggingOpportunity.stage !== targetStage;\n      const projectedCount = isDifferentStage ? currentCards.length + 1 : currentCards.length;\n\n      if (projectedCount > wipLimit) {\n        return {\n          tone: \"warning\" as const,\n          message: `WIP excedido (${projectedCount}/${wipLimit}). Solte para mover para ${targetLabel}.`,\n        };\n      }\n\n      return {\n        tone: \"success\" as const,\n        message: `Solte para mover para ${targetLabel}.`,\n      };\n    },\n    [activeFunnel.stages, dragOverStage, draggingOpportunity, opportunitiesByStage]\n  );\n\n  const handleOpenBlockedMove = useCallback(() => {\n    if (!columnError?.cardId) return;\n    const blockedOpportunity = opportunities.find((opportunity) => opportunity.id === columnError.cardId);\n    openModal(\"lead-card\", {\n      id: columnError.cardId,\n      focusFields: columnError.missingFields,\n      pendingStage: columnError.targetStage,\n      initialTab: \"empresa\",\n      opportunitySnapshot: blockedOpportunity,\n    });\n  }, [columnError, openModal, opportunities]);\n\n  useEffect(() => {\n    function handleKeyDown(event: KeyboardEvent) {\n      if ((event.metaKey || event.ctrlKey) && event.key.toLowerCase() === \"k\") {\n        event.preventDefault();\n        window.setTimeout(() => searchInputRef.current?.focus(), 50);\n        return;\n      }\n\n      if (event.key === \"Escape\") {\n        setIsMobileSearchOpen(false);\n        searchInputRef.current?.blur();\n        mobileSearchInputRef.current?.blur();\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n\n  useEffect(() => {\n    if (!isMobileSearchOpen) return;\n    const timer = window.setTimeout(() => {\n      mobileSearchInputRef.current?.focus();\n    }, 50);\n    return () => window.clearTimeout(timer);\n  }, [isMobileSearchOpen]);\n\n  if (isLoading) {\n    return <PipelineSkeleton stageCount={visibleStages.length} />;\n  }\n\n  return (\n    <>\n      <div\n        ref={liveRegionRef}\n        role=\"status\"\n        aria-live=\"polite\"\n        aria-atomic=\"true\"\n        className=\"sr-only\"\n      />\n\n      <motion.div\n        initial=\"hidden\"\n        animate=\"show\"\n        variants={screenContainer}\n        className=\"flex h-[calc(100dvh-2rem)] min-h-0 w-full max-w-full flex-col gap-4\"\n      >\n        <motion.div variants={sectionEnter} className=\"shrink-0\">\n          <ModuleCommandHeader\n            title={activeFunnel.label}\n            titleAccessory={\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <button\n                    type=\"button\"\n                    aria-label=\"Trocar funil\"\n                    className=\"premium-shine inline-flex h-8 w-8 items-center justify-center rounded-full border border-zinc-200 bg-white/90 text-zinc-500 transition-all duration-120 hover:-translate-y-px hover:bg-zinc-100 hover:text-zinc-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-300\"\n                  >\n                    <ChevronDown className=\"h-4 w-4\" />\n                  </button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent\n                  align=\"start\"\n                  className=\"w-[270px] rounded-[16px] border-zinc-200 bg-white/95 p-1.5 shadow-[0_18px_30px_-24px_rgba(15,23,42,0.45)]\"\n                >\n                  <div className=\"px-2.5 pb-2 pt-1.5\">\n                    <p className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-zinc-500\">\n                      Selecionar funil\n                    </p>\n                    <p className=\"mt-0.5 text-xs text-zinc-500\">\n                      Troque o contexto do board e mantenha o foco operacional.\n                    </p>\n                  </div>\n\n                  {funnels.map((funnel) => (\n                    <DropdownMenuItem\n                      key={funnel.id}\n                      onClick={() => handleFunnelChange(funnel.id)}\n                      className=\"h-9 rounded-xl px-2.5 font-medium text-zinc-700\"\n                    >\n                      <span className=\"truncate\">{funnel.label}</span>\n                      {funnel.id === selectedFunnel ? (\n                        <Check className=\"h-3.5 w-3.5 text-brand\" />\n                      ) : null}\n                    </DropdownMenuItem>\n                  ))}\n                </DropdownMenuContent>\n              </DropdownMenu>\n            }\n            description=\"Mesa de controle do pipeline comercial com prioridade operacional clara.\"\n            chips={metricChips}\n            actionsClassName=\"gap-2.5 p-2\"\n            actions={[\n              <div key=\"search\" className=\"relative hidden w-[min(38vw,360px)] md:block\">\n                <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400\" />\n                <Input\n                  ref={searchInputRef}\n                  value={searchInputValue}\n                  onChange={(event) => setSearchInputValue(event.target.value)}\n                  placeholder=\"Buscar atividade, cliente, valor ou segmento\"\n                  className=\"h-10 rounded-full border-zinc-200 pl-9 pr-16 font-body text-sm\"\n                />\n                <span className=\"pointer-events-none absolute right-8 top-1/2 hidden -translate-y-1/2 rounded-md border border-zinc-200 bg-zinc-50 px-1.5 py-0.5 text-[10px] font-medium text-zinc-500 lg:inline-flex\">\n                  Ctrl K\n                </span>\n                {searchInputValue ? (\n                  <button\n                    type=\"button\"\n                    onClick={clearSearch}\n                    className=\"absolute right-2.5 top-1/2 -translate-y-1/2 rounded-full p-1 text-zinc-400 transition-colors hover:bg-zinc-100 hover:text-zinc-600\"\n                    aria-label=\"Limpar busca\"\n                  >\n                    <X className=\"h-3.5 w-3.5\" />\n                  </button>\n                ) : null}\n              </div>,\n              <Popover\n                key=\"mobile-search\"\n                open={isMobileSearchOpen}\n                onOpenChange={setIsMobileSearchOpen}\n              >\n                <PopoverTrigger asChild>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"h-10 rounded-full px-3 md:hidden\"\n                  >\n                    <Search className=\"h-3.5 w-3.5\" />\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent\n                  align=\"end\"\n                  side=\"bottom\"\n                  sideOffset={8}\n                  className=\"w-[min(92vw,360px)] rounded-[16px] border-zinc-200 bg-white p-2\"\n                >\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-2.5 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400\" />\n                    <Input\n                      ref={mobileSearchInputRef}\n                      value={searchInputValue}\n                      onChange={(event) => setSearchInputValue(event.target.value)}\n                      placeholder=\"Buscar cards...\"\n                      className=\"h-10 w-full rounded-full pl-8 pr-8 font-body text-sm\"\n                    />\n                    {searchInputValue ? (\n                      <button\n                        type=\"button\"\n                        onClick={clearSearch}\n                        className=\"absolute right-2.5 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600\"\n                        aria-label=\"Limpar busca\"\n                      >\n                        <X className=\"h-3.5 w-3.5\" />\n                      </button>\n                    ) : null}\n                  </div>\n                </PopoverContent>\n              </Popover>,\n              <Button\n                key=\"filters\"\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"h-10 rounded-full px-4\"\n                onClick={() => openDrawer(\"filters\")}\n              >\n                <Filter className=\"h-4 w-4\" />\n                Filtros\n                {activeFilterCount > 0 ? (\n                  <span className=\"ml-1.5 flex h-5 w-5 items-center justify-center rounded-[7px] bg-zinc-100 text-[10px] font-bold text-zinc-900 border border-zinc-200\">\n                    {activeFilterCount}\n                  </span>\n                ) : null}\n              </Button>,\n              <DropdownMenu key=\"new-card\">\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    size=\"sm\"\n                    className=\"h-10 rounded-full px-5\"\n                    disabled={!canCreateOpportunity}\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                    Novo\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-[220px] rounded-[16px]\">\n                  <DropdownMenuItem\n                    onClick={() => openDrawer(\"new-opportunity\")}\n                    disabled={!canCreateOpportunity}\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                    Novo card\n                  </DropdownMenuItem>\n                  <DropdownMenuItem\n                    onClick={() =>\n                      openDrawer(\"new-opportunity\", {\n                        source: \"captura-rapida\",\n                      })\n                    }\n                    disabled={!canCreateOpportunity}\n                  >\n                    <Sparkles className=\"h-4 w-4\" />\n                    Capturar lead\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>,\n            ]}\n          >\n            {activeFilters.length > 0 ? (\n              <div className=\"flex flex-wrap items-center gap-2\" role=\"group\" aria-label=\"Filtros ativos\">\n                {activeFilters.map((f) => (\n                  <span\n                    key={f.id}\n                    className=\"inline-flex h-[28px] items-center gap-1 rounded-full border border-zinc-200/80 bg-white/70 pl-2.5 pr-1 text-[11.5px] font-medium text-zinc-700 shadow-(--shadow-premium-soft)\"\n                  >\n                    <span className=\"truncate max-w-[140px] sm:max-w-[200px]\">{f.label}</span>\n                    <button\n                      type=\"button\"\n                      onClick={f.onRemove}\n                      className=\"ml-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full text-zinc-400 transition-colors hover:bg-zinc-200 hover:text-zinc-900 focus:outline-none\"\n                      aria-label={`Remover filtro ${f.label}`}\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </span>\n                ))}\n                <button\n                  type=\"button\"\n                  onClick={clearLocalFilters}\n                  className=\"ml-2 flex h-[26px] items-center justify-center text-[11.5px] font-semibold text-zinc-500 underline decoration-zinc-300 underline-offset-2 transition-colors hover:text-zinc-900\"\n                >\n                  Limpar tudo\n                </button>\n              </div>\n            ) : null}\n          </ModuleCommandHeader>\n        </motion.div>\n\n        {filtersInlineFeedback ? (\n          <div\n            className={cn(\n              \"shrink-0 rounded-[14px] border px-3.5 py-2 text-xs font-medium\",\n              filtersInlineFeedback.tone === \"error\"\n                ? \"border-red-200 bg-red-50 text-red-700\"\n                : filtersInlineFeedback.tone === \"info\"\n                  ? \"border-sky-200 bg-sky-50 text-sky-700\"\n                  : \"border-emerald-200 bg-emerald-50 text-emerald-700\"\n            )}\n            role=\"status\"\n          >\n            {filtersInlineFeedback.message}\n          </div>\n        ) : null}\n\n        <div\n          className=\"premium-ambient premium-grain relative flex min-h-0 min-w-0 flex-1 flex-col overflow-hidden rounded-[22px] border border-zinc-200/70 bg-white/72 p-3 shadow-(--shadow-premium-soft) backdrop-blur-sm md:p-4\"\n          role=\"region\"\n          aria-label=\"Pipeline de vendas arrastavel\"\n        >\n          <div className=\"mb-2 flex items-center justify-between px-1 text-[11px] text-zinc-500 md:hidden\">\n            <span>Deslize para ver as etapas</span>\n            <span>{visibleStages.length} colunas</span>\n          </div>\n\n          <div\n            data-pipe-board-scroll\n            className=\"flex min-w-0 flex-1 gap-4 overflow-x-auto scroll-smooth px-1 pb-1 md:gap-5 md:px-2\"\n            style={{ scrollSnapType: \"x proximity\" }}\n          >\n            {visibleStages.map((stageDef, index) => {\n              const isFiltered = Boolean(normalizedSearch) || activeFilterCount > 0;\n              const cards = opportunitiesByStage[stageDef.id] || [];\n              const stageLabel = stageCustomizations[stageDef.id]?.label || stageDef.label;\n              const stageColor = getStageColor(stageDef.id);\n              const totalValue = cards.reduce((acc, opportunity) => acc + opportunity.value, 0);\n              const isDropTarget = dragOverStage === stageDef.id;\n              const stageError = columnError?.stage === stageDef.id ? columnError : null;\n              const stageSuccess = successFeedback?.stage === stageDef.id ? successFeedback : null;\n              const dropPreview = getDropPreview(stageDef.id);\n              const stageBreachedCount = cards.filter(\n                (opportunity) => getSlaStatus(opportunity.slaDeadline).status === \"breached\"\n              ).length;\n              const wipLimit = WIP_LIMIT_BY_STAGE[stageDef.id] ?? 7;\n              const isWipExceeded = cards.length > wipLimit;\n\n              return (\n                <motion.div\n                  key={stageDef.id}\n                  custom={index}\n                  variants={listItemReveal}\n                  className={cn(\n                    \"group/col flex w-[min(88vw,372px)] shrink-0 flex-col rounded-[22px] border transition-all duration-200 sm:w-[352px]\",\n                    isDropTarget\n                      ? \"border-brand/70 bg-brand/5 ring-2 ring-brand/26 shadow-[0_18px_30px_-22px_rgba(37,99,235,0.52)]\"\n                      : \"border-zinc-200/80 bg-white/88\"\n                  )}\n                  style={{ scrollSnapAlign: \"start\" }}\n                  onDragOver={(event) => handleDragOver(event, stageDef.id)}\n                  onDragLeave={handleDragLeave}\n                  onDrop={(event) => handleDrop(event, stageDef.id)}\n                  role=\"list\"\n                  aria-label={`Etapa ${stageLabel}, ${cards.length} cards, total ${formatCurrencyBRL(totalValue)}`}\n                >\n                  <div className=\"sticky top-0 z-10 rounded-t-[22px] bg-inherit px-3.5 pb-3 pt-3 backdrop-blur-sm\">\n                    <div className=\"mb-2 h-1 w-full rounded-full bg-zinc-200/70\">\n                      <div className={cn(\"h-1 rounded-full\", stageColor.bg)} />\n                    </div>\n\n                    <div className=\"flex items-start justify-between gap-2\">\n                      <div className=\"flex min-w-0 items-center gap-2\">\n                        {canConfigureStages ? (\n                          <Popover\n                            open={colorPopoverStage === stageDef.id}\n                            onOpenChange={(open) => setColorPopoverStage(open ? stageDef.id : null)}\n                          >\n                            <PopoverTrigger asChild>\n                              <button\n                                className=\"flex h-7 w-7 shrink-0 items-center justify-center rounded-lg border border-zinc-200 bg-white text-zinc-400 shadow-sm transition-all hover:bg-zinc-50 hover:text-zinc-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand\"\n                                aria-label={`Personalizar etapa ${stageLabel}`}\n                              >\n                                <Settings2 className=\"h-3.5 w-3.5\" />\n                              </button>\n                            </PopoverTrigger>\n                            <PopoverContent align=\"start\" className=\"w-auto rounded-[16px] p-3\">\n                              <div className=\"mb-2 flex items-center gap-1.5 text-[11px] font-medium text-zinc-600\">\n                                <Palette className=\"h-3 w-3\" />\n                                Cor da etapa\n                              </div>\n                              <div className=\"grid grid-cols-5 gap-1.5\">\n                                {stageColorPalette.map((color) => {\n                                  const isActive =\n                                    (stageCustomizations[stageDef.id]?.colorId || \"default\") ===\n                                    color.id;\n                                  return (\n                                    <button\n                                      key={color.id}\n                                      onClick={() => {\n                                        setStageColor(stageDef.id, color.id);\n                                        setColorPopoverStage(null);\n                                      }}\n                                      className={cn(\n                                        \"flex h-6 w-6 items-center justify-center rounded-full transition-all\",\n                                        color.bg,\n                                        isActive\n                                          ? \"ring-2 ring-zinc-900 ring-offset-2\"\n                                          : \"hover:ring-2 hover:ring-zinc-300 hover:ring-offset-1\"\n                                      )}\n                                      title={color.label}\n                                      aria-label={color.label}\n                                    >\n                                      {isActive ? <Check className=\"h-3 w-3 text-white\" /> : null}\n                                    </button>\n                                  );\n                                })}\n                              </div>\n                            </PopoverContent>\n                          </Popover>\n                        ) : null}\n\n                        {renamingStage === stageDef.id && canConfigureStages ? (\n                          <div className=\"flex min-w-0 flex-1 flex-col\">\n                            <input\n                              ref={renameInputRef}\n                              value={renameValue}\n                              maxLength={30}\n                              onChange={(event) => setRenameValue(event.target.value)}\n                              onBlur={confirmRename}\n                              onKeyDown={(event) => {\n                                if (event.key === \"Enter\") confirmRename();\n                                if (event.key === \"Escape\") cancelRename();\n                              }}\n                              className={cn(\n                                \"min-w-0 w-full truncate rounded-md border bg-white px-1.5 py-0.5 font-heading text-[14px] font-semibold text-zinc-900 outline-none focus:ring-1\",\n                                renameError\n                                  ? \"border-red-400 focus:border-red-400 focus:ring-red-300\"\n                                  : \"border-zinc-300 focus:border-brand focus:ring-brand\"\n                              )}\n                              aria-label=\"Renomear etapa\"\n                              aria-invalid={Boolean(renameError)}\n                            />\n                            {renameError ? (\n                              <span className=\"mt-0.5 text-[10px] font-medium text-red-600\" role=\"alert\">\n                                {renameError}\n                              </span>\n                            ) : null}\n                          </div>\n                        ) : canConfigureStages ? (\n                          <button\n                            onClick={() => startRename(stageDef.id, stageLabel)}\n                            className=\"truncate font-heading text-[15px] font-semibold text-zinc-900 transition-colors hover:text-brand\"\n                            title=\"Clique para renomear\"\n                          >\n                            {stageLabel}\n                          </button>\n                        ) : (\n                          <span className=\"truncate font-heading text-[15px] font-semibold text-zinc-900\">\n                            {stageLabel}\n                          </span>\n                        )}\n\n                        <span className=\"shrink-0 rounded-md bg-zinc-200/80 px-1.5 py-0.5 font-body text-[11px] font-semibold text-zinc-700\">\n                          {cards.length}\n                        </span>\n                      </div>\n\n                      <span className=\"shrink-0 text-[11px] font-semibold text-zinc-500\">\n                        {formatCurrencyBRL(totalValue)}\n                      </span>\n                    </div>\n\n                    <div className=\"mt-2 flex flex-wrap items-center gap-1.5\">\n                      <span className=\"rounded-full border border-zinc-200 bg-zinc-50 px-2 py-1 text-[10px] font-semibold text-zinc-600\">\n                        SLA {stageDef.slaHours}h\n                      </span>\n                      <span\n                        className={cn(\n                          \"rounded-full border px-2 py-1 text-[10px] font-semibold\",\n                          isWipExceeded\n                            ? \"border-amber-200 bg-amber-50 text-amber-700\"\n                            : \"border-emerald-200 bg-emerald-50 text-emerald-700\"\n                        )}\n                      >\n                        WIP {cards.length}/{wipLimit}\n                      </span>\n                      <span\n                        className={cn(\n                          \"rounded-full border px-2 py-1 text-[10px] font-semibold\",\n                          stageBreachedCount > 0\n                            ? \"border-red-200 bg-red-50 text-red-700\"\n                            : \"border-zinc-200 bg-zinc-50 text-zinc-600\"\n                        )}\n                      >\n                        Estourados {stageBreachedCount}\n                      </span>\n                    </div>\n\n                    {dropPreview ? (\n                      <div\n                        className={cn(\n                          \"mt-2 rounded-[14px] border px-2.5 py-2 text-[11px] font-medium\",\n                          dropPreview.tone === \"error\"\n                            ? \"border-red-200 bg-red-50 text-red-700\"\n                            : dropPreview.tone === \"warning\"\n                              ? \"border-amber-200 bg-amber-50 text-amber-700\"\n                              : \"border-emerald-200 bg-emerald-50 text-emerald-700\"\n                        )}\n                        role=\"status\"\n                      >\n                        {dropPreview.message}\n                      </div>\n                    ) : null}\n\n                    {stageError ? (\n                      <div\n                        className={cn(\n                          \"mt-2 rounded-[14px] border px-2.5 py-2\",\n                          stageError.tone === \"warning\"\n                            ? \"border-amber-200 bg-amber-50 text-amber-700\"\n                            : \"border-red-200 bg-red-50 text-red-700\"\n                        )}\n                        role=\"alert\"\n                      >\n                        <div className=\"flex items-start gap-2\">\n                          <AlertTriangle className=\"mt-0.5 h-3.5 w-3.5 shrink-0\" />\n                          <div className=\"min-w-0 flex-1\">\n                            <p className=\"text-[11px] font-medium leading-relaxed\">{stageError.message}</p>\n                            {stageError.missingFields?.length ? (\n                              <button\n                                type=\"button\"\n                                onClick={handleOpenBlockedMove}\n                                className=\"mt-1 text-[11px] font-semibold underline underline-offset-2\"\n                              >\n                                Preencher agora\n                              </button>\n                            ) : null}\n                          </div>\n                          <button\n                            onClick={() => setColumnError(null)}\n                            className=\"rounded-md p-1 transition hover:bg-black/5 focus:outline-none focus-visible:ring-2\"\n                            aria-label=\"Fechar aviso\"\n                          >\n                            <X className=\"h-3.5 w-3.5\" />\n                          </button>\n                        </div>\n                      </div>\n                    ) : null}\n\n                    {stageSuccess ? (\n                      <div\n                        className=\"mt-2 rounded-[14px] border border-emerald-200 bg-emerald-50 px-2.5 py-2 text-emerald-700\"\n                        role=\"status\"\n                      >\n                        <div className=\"flex items-start gap-1.5\">\n                          <CheckCircle2 className=\"mt-0.5 h-3.5 w-3.5 shrink-0\" />\n                          <span className=\"text-[11px] font-medium leading-relaxed\">\n                            {stageSuccess.message}\n                          </span>\n                        </div>\n                      </div>\n                    ) : null}\n                  </div>\n\n                  <div\n                    data-pipe-column-scroll\n                    className=\"flex-1 overflow-y-auto px-3.5 pb-3.5\"\n                    onDragOver={(event) => handleDragOver(event, stageDef.id)}\n                    onDrop={(event) => handleDrop(event, stageDef.id)}\n                  >\n                    {cards.length > 0 || isDropTarget ? (\n                      <div className=\"space-y-3\">\n                        {(() => {\n                          const showPlaceholder = Boolean(\n                            draggingCardId && dropIndicator?.stage === stageDef.id\n                          );\n                          const placeholderIndex = showPlaceholder\n                            ? Math.min(dropIndicator?.index ?? 0, cards.length)\n                            : -1;\n\n                          return (\n                            <AnimatePresence initial={false}>\n                              {cards.flatMap((opportunity, idx) => {\n                                const nodes: React.ReactNode[] = [];\n                                const isDraggingCurrentCard = draggingCardId === opportunity.id;\n                                const cardInlineFeedback =\n                                  stageError?.cardId === opportunity.id\n                                    ? ({\n                                      tone: stageError.tone === \"error\" ? \"error\" : \"warning\",\n                                      message: stageError.message,\n                                      actionLabel: stageError.missingFields?.length\n                                        ? \"Preencher agora\"\n                                        : undefined,\n                                      onAction: stageError.missingFields?.length\n                                        ? handleOpenBlockedMove\n                                        : undefined,\n                                    } as const)\n                                    : stageSuccess?.cardId === opportunity.id\n                                      ? ({\n                                        tone: \"success\",\n                                        message: stageSuccess.message,\n                                      } as const)\n                                      : null;\n\n                                if (showPlaceholder && placeholderIndex === idx) {\n                                  nodes.push(\n                                    <motion.div\n                                      key={`drop-placeholder-${stageDef.id}-${idx}`}\n                                      layout\n                                      initial={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                      animate={{ opacity: 1, scaleY: 1, height: 190 }}\n                                      exit={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                      transition={{ duration: 0.18, ease: [0.22, 1, 0.36, 1] }}\n                                      className=\"rounded-[22px] border border-dashed border-brand/45 bg-brand/5 shadow-[inset_0_0_0_1px_rgba(37,99,235,0.16)]\"\n                                    />\n                                  );\n                                }\n\n                                nodes.push(\n                                  <motion.div\n                                    key={opportunity.id}\n                                    layout\n                                    data-card-index={idx}\n                                    animate={{\n                                      x: stageError?.cardId === opportunity.id ? [-5, 5, -4, 4, -2, 2, 0] : 0,\n                                    }}\n                                    transition={{\n                                      x: { duration: 0.4, ease: \"easeInOut\" },\n                                      layout: { duration: 0.22, ease: [0.22, 1, 0.36, 1] },\n                                    }}\n                                    className={cn(\n                                      \"transition-[transform,opacity,filter] duration-180 ease-out\",\n                                      isDraggingCurrentCard ? \"scale-[0.985] opacity-30 saturate-50\" : \"\"\n                                    )}\n                                  >\n                                    <DealCardBento\n                                      opportunity={opportunity}\n                                      temp={getTemp(opportunity)}\n                                      isDragging={isDraggingCurrentCard}\n                                      isUpdating={updatingCardId === opportunity.id}\n                                      isHighlighted={recentlyMovedCardId === opportunity.id}\n                                      canMove={canMoveCards}\n                                      canEdit={canMoveCards}\n                                      canCreateActivity={canCreateActivity}\n                                      inlineFeedback={cardInlineFeedback}\n                                      onTagClick={(tag) => {\n                                        setSearchInputValue(tag);\n                                        setSearchQuery(tag);\n                                        window.scrollTo({ top: 0, behavior: \"smooth\" });\n                                        searchInputRef.current?.focus();\n                                      }}\n                                      onOpen={() =>\n                                        openModal(\"lead-card\", {\n                                          id: opportunity.id,\n                                          opportunitySnapshot: opportunity,\n                                        })\n                                      }\n                                      onDragStart={(event) =>\n                                        handleDragStart(event, opportunity)\n                                      }\n                                      onDragEnd={handleDragEnd}\n                                    />\n                                  </motion.div>\n                                );\n\n                                if (\n                                  idx === cards.length - 1 &&\n                                  showPlaceholder &&\n                                  placeholderIndex >= cards.length\n                                ) {\n                                  nodes.push(\n                                    <motion.div\n                                      key={`drop-placeholder-${stageDef.id}-end`}\n                                      layout\n                                      initial={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                      animate={{ opacity: 1, scaleY: 1, height: 190 }}\n                                      exit={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                      transition={{ duration: 0.18, ease: [0.22, 1, 0.36, 1] }}\n                                      className=\"rounded-[22px] border border-dashed border-brand/45 bg-brand/5 shadow-[inset_0_0_0_1px_rgba(37,99,235,0.16)]\"\n                                    />\n                                  );\n                                }\n\n                                return nodes;\n                              })}\n\n                              {cards.length === 0 && isDropTarget ? (\n                                <motion.div\n                                  key={`drop-placeholder-empty-${stageDef.id}`}\n                                  layout\n                                  initial={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                  animate={{ opacity: 1, scaleY: 1, height: 190 }}\n                                  exit={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                  transition={{ duration: 0.18, ease: [0.22, 1, 0.36, 1] }}\n                                  className=\"rounded-[22px] border border-dashed border-brand/45 bg-brand/5 shadow-[inset_0_0_0_1px_rgba(37,99,235,0.16)]\"\n                                />\n                              ) : null}\n                            </AnimatePresence>\n                          );\n                        })()}\n                      </div>\n                    ) : (\n                      <div className=\"mt-1 flex min-h-[180px] flex-col items-center justify-center rounded-[16px] border-2 border-dashed border-zinc-200 bg-zinc-50/40 px-4 text-center\">\n                        <p className=\"text-sm font-semibold text-zinc-700\">\n                          {isFiltered ? \"Zero resultados no filtro\" : \"Sem cards nesta etapa\"}\n                        </p>\n                        <p className=\"mt-1 text-[11px] leading-relaxed text-zinc-500\">\n                          {isFiltered ? \"Tente limpar a busca ou os filtros ativos acima.\" : \"Crie um novo card aqui ou mova um card de outra coluna.\"}\n                        </p>\n                        <div className=\"mt-3 flex flex-wrap items-center justify-center gap-2\">\n                          <Button\n                            size=\"sm\"\n                            className=\"h-8 rounded-full px-3 text-xs\"\n                            onClick={() =>\n                              openDrawer(\"new-opportunity\", {\n                                initialStage: stageDef.id,\n                              })\n                            }\n                            disabled={!canCreateOpportunity}\n                          >\n                            <Plus className=\"h-3.5 w-3.5\" />\n                            Criar card nesta etapa\n                          </Button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </motion.div>\n              );\n            })}\n          </div>\n        </div>\n      </motion.div>\n    </>\n  );\n}\n\nfunction PipesPageFallback() {\n  return (\n    <div className=\"premium-ambient min-h-[calc(100vh-72px)] p-6\">\n      <PipelineSkeleton stageCount={funnels[0].stages.length} />\n    </div>\n  );\n}\n\nexport default function PipesPage() {\n  return (\n    <Suspense fallback={<PipesPageFallback />}>\n      <PipesPageContent />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}
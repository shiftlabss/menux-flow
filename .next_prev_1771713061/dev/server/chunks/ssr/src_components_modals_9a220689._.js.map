{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/modals/new-visit-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport {\n  X,\n  MapPin,\n  Video,\n  HelpCircle,\n  Calendar,\n  Clock,\n  Users,\n  Target,\n  CheckCircle,\n  Link as LinkIcon,\n  Copy,\n  Sparkles,\n  ChevronDown,\n  Loader2,\n  Check,\n  Plus,\n  User,\n  TriangleAlert,\n} from \"lucide-react\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n  CommandSeparator,\n} from \"@/components/ui/command\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn } from \"@/lib/utils\";\nimport { visitSchema, type VisitFormData } from \"@/lib/validations/visit\";\nimport { format } from \"date-fns\";\nimport type { Contact } from \"@/types\";\n\ninterface NewVisitModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (data: VisitFormData) => void | Promise<void>;\n  dealId: string;\n  contacts: Contact[];\n  onAddContact?: (contact: Partial<Contact>) => void;\n}\n\nconst TYPE_OPTIONS = [\n  { id: \"presencial\" as const, label: \"Presencial\", icon: MapPin },\n  { id: \"remoto\" as const, label: \"Remoto\", icon: Video },\n  { id: \"outro\" as const, label: \"Outro\", icon: HelpCircle },\n];\n\nconst STATUS_OPTIONS = [\n  { id: \"agendada\" as const, label: \"Agendada\" },\n  { id: \"realizada\" as const, label: \"Realizada\" },\n  { id: \"cancelada\" as const, label: \"Cancelada\" },\n];\n\nconst DURATION_OPTIONS = [\"15\", \"30\", \"45\", \"60\", \"90\", \"120\"];\n\nconst REMOTE_PROVIDERS = [\n  { id: \"google-meet\", label: \"Google Meet\" },\n  { id: \"zoom\", label: \"Zoom\" },\n  { id: \"whatsapp\", label: \"WhatsApp\" },\n  { id: \"outro\", label: \"Outro\" },\n];\n\nconst OUTCOME_OPTIONS = [\n  { id: \"realizada\", label: \"Realizada\" },\n  { id: \"no-show\", label: \"No-show\" },\n  { id: \"remarcada\", label: \"Remarcada\" },\n];\n\nconst RESPONSIBLE_OPTIONS = [\n  { id: \"u1\", label: \"Eu (Logado)\", role: \"Sales Executive\" },\n  { id: \"u2\", label: \"Ana Costa\", role: \"Closer\" },\n  { id: \"u3\", label: \"Carlos Mendes\", role: \"SDR\" },\n];\n\nconst canDelegateResponsible = false;\n\nexport function NewVisitModal({\n  isOpen,\n  onClose,\n  onSave,\n  dealId,\n  contacts = [],\n  onAddContact,\n}: NewVisitModalProps) {\n  void dealId;\n  const [isSaving, setIsSaving] = React.useState(false);\n  const [saveSuccess, setSaveSuccess] = React.useState(false);\n  const [submitError, setSubmitError] = React.useState<string | null>(null);\n  const [showCancellationConfirm, setShowCancellationConfirm] = React.useState(false);\n  const [showRealizadaConfirm, setShowRealizadaConfirm] = React.useState(false);\n  const [pendingSubmitData, setPendingSubmitData] = React.useState<VisitFormData | null>(null);\n  const [lastSubmittedData, setLastSubmittedData] = React.useState<VisitFormData | null>(null);\n\n  const [openParticipantCombobox, setOpenParticipantCombobox] = React.useState(false);\n  const [isAddingContact, setIsAddingContact] = React.useState(false);\n  const [isOptionalOpen, setIsOptionalOpen] = React.useState(false);\n  const [isContactsLoading, setIsContactsLoading] = React.useState(false);\n  const [isTeamLoading, setIsTeamLoading] = React.useState(false);\n\n  const [newContactData, setNewContactData] = React.useState({\n    nome: \"\",\n    cargo: \"\",\n    telefone: \"\",\n    email: \"\",\n  });\n\n  const form = useForm<VisitFormData>({\n    resolver: zodResolver(visitSchema),\n    mode: \"onChange\",\n    reValidateMode: \"onChange\",\n    defaultValues: {\n      type: \"presencial\",\n      status: \"agendada\",\n      duration: \"60\",\n      platform: \"google-meet\",\n      responsibleId: \"u1\",\n      participants: [],\n      objective: \"\",\n      result: \"\",\n      outcome: undefined,\n      location: \"\",\n      accessSearch: \"\",\n      link: \"\",\n      typeDescription: \"\",\n      details: \"\",\n      cancellationReason: \"\",\n      date: \"\",\n      time: \"\",\n    },\n  });\n\n  const {\n    control,\n    handleSubmit,\n    watch,\n    setValue,\n    trigger,\n    formState: { errors, isDirty, isValid, submitCount },\n  } = form;\n\n  const visitType = watch(\"type\");\n  const visitStatus = watch(\"status\");\n  const selectedDate = watch(\"date\");\n  const selectedTime = watch(\"time\");\n  const selectedDuration = watch(\"duration\");\n  const selectedParticipants = watch(\"participants\") || [];\n  const selectedResponsibleId = watch(\"responsibleId\");\n  const selectedProvider = watch(\"platform\");\n  const selectedLocation = watch(\"location\");\n  const selectedMeetingLink = watch(\"link\");\n  const selectedTypeDescription = watch(\"typeDescription\");\n\n  const getContactInitials = React.useCallback((name?: string) => {\n    if (!name) return \"??\";\n    const parts = name\n      .trim()\n      .split(/\\s+/)\n      .filter(Boolean);\n    if (parts.length === 0) return \"??\";\n    if (parts.length === 1) return parts[0].slice(0, 2).toUpperCase();\n    return `${parts[0][0]}${parts[parts.length - 1][0]}`.toUpperCase();\n  }, []);\n\n  const formatContactRole = React.useCallback((role?: string) => {\n    if (!role) return \"Sem cargo definido\";\n    return role\n      .replace(/-/g, \" \")\n      .replace(/\\s+/g, \" \")\n      .trim()\n      .replace(/\\b\\w/g, (char) => char.toUpperCase());\n  }, []);\n\n  React.useEffect(() => {\n    if (isOpen) {\n      setSaveSuccess(false);\n      setIsSaving(false);\n      setSubmitError(null);\n      setShowCancellationConfirm(false);\n      setShowRealizadaConfirm(false);\n      setPendingSubmitData(null);\n      setLastSubmittedData(null);\n      setIsOptionalOpen(false);\n      setIsAddingContact(false);\n      setOpenParticipantCombobox(false);\n      form.reset();\n\n      setIsTeamLoading(true);\n      setIsContactsLoading(true);\n      const timeout = setTimeout(() => {\n        setIsTeamLoading(false);\n        setIsContactsLoading(false);\n      }, 250);\n      return () => clearTimeout(timeout);\n    }\n  }, [isOpen, form]);\n\n  // --- Auto-select newly created contact logic ---\n  const prevContactsLengthRef = React.useRef(contacts.length);\n\n  React.useEffect(() => {\n    // If contacts list grew, it means a new contact was added\n    if (contacts.length > prevContactsLengthRef.current) {\n      // Find the new contact (assuming it's at the end or we can diff)\n      // Since we don't know the ID structure for sure, let's take the last one or diff\n      const newContact = contacts[contacts.length - 1];\n\n      if (newContact) {\n        // Auto-select it\n        const currentParticipants = form.getValues(\"participants\") || [];\n        if (!currentParticipants.includes(newContact.id)) {\n          form.setValue(\"participants\", [...currentParticipants, newContact.id], {\n            shouldValidate: true,\n            shouldDirty: true,\n          });\n        }\n        // Switch back to list view if we were adding\n        setIsAddingContact(false);\n      }\n    }\n    // Update ref\n    prevContactsLengthRef.current = contacts.length;\n  }, [contacts, form]);\n  // -----------------------------------------------\n\n  React.useEffect(() => {\n    if (visitType === \"presencial\") {\n      setValue(\"platform\", \"google-meet\", { shouldValidate: false });\n      setValue(\"link\", \"\", { shouldValidate: false });\n      setValue(\"typeDescription\", \"\", { shouldValidate: false });\n      setValue(\"details\", \"\", { shouldValidate: false });\n    }\n    if (visitType === \"remoto\") {\n      setValue(\"location\", \"\", { shouldValidate: false });\n      setValue(\"accessSearch\", \"\", { shouldValidate: false });\n      setValue(\"typeDescription\", \"\", { shouldValidate: false });\n      setValue(\"details\", \"\", { shouldValidate: false });\n      if (!watch(\"platform\")) {\n        setValue(\"platform\", \"google-meet\", { shouldValidate: false });\n      }\n    }\n    if (visitType === \"outro\") {\n      setValue(\"location\", \"\", { shouldValidate: false });\n      setValue(\"accessSearch\", \"\", { shouldValidate: false });\n      setValue(\"platform\", \"google-meet\", { shouldValidate: false });\n      setValue(\"link\", \"\", { shouldValidate: false });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visitType, setValue]);\n\n  React.useEffect(() => {\n    if (visitStatus !== \"realizada\") {\n      setValue(\"outcome\", undefined, { shouldValidate: false });\n      setValue(\"result\", \"\", { shouldValidate: false });\n    }\n    if (visitStatus !== \"cancelada\") {\n      setValue(\"cancellationReason\", \"\", { shouldValidate: false });\n    }\n  }, [visitStatus, setValue]);\n\n  const suggestTime = React.useCallback(\n    (time: string) => {\n      const tomorrow = new Date();\n      tomorrow.setDate(tomorrow.getDate() + 1);\n      const year = tomorrow.getFullYear();\n      const month = String(tomorrow.getMonth() + 1).padStart(2, \"0\");\n      const day = String(tomorrow.getDate()).padStart(2, \"0\");\n      setValue(\"date\", `${year}-${month}-${day}`);\n      setValue(\"time\", time);\n      void trigger([\"date\", \"time\"]);\n    },\n    [setValue, trigger]\n  );\n\n  const copyConfirmationMessage = React.useCallback(() => {\n    const text = `Olá! Confirmando nossa ${visitType === \"presencial\" ? \"visita\" : \"reunião\"} para ${selectedDate ? format(new Date(selectedDate), \"dd/MM\") : \"dia a confirmar\"} às ${selectedTime || \"horário a confirmar\"}.`;\n    void navigator.clipboard.writeText(text);\n  }, [visitType, selectedDate, selectedTime]);\n\n  const missingRequiredItems = React.useMemo(() => {\n    const missing: string[] = [];\n\n    if (!selectedResponsibleId) missing.push(\"Responsável\");\n\n    if (visitStatus === \"agendada\") {\n      if (!selectedDate) missing.push(\"Data\");\n      if (!selectedTime) missing.push(\"Hora\");\n      if (!selectedDuration) missing.push(\"Duração\");\n    }\n\n    if (visitType === \"presencial\" && (!selectedLocation || selectedLocation.trim().length < 3)) {\n      missing.push(\"Local\");\n    }\n\n    if (visitType === \"remoto\") {\n      if (!selectedProvider) missing.push(\"Plataforma\");\n      if (!selectedMeetingLink?.trim()) {\n        missing.push(\"Link da reunião\");\n      }\n    }\n\n    if (visitType === \"outro\" && (!selectedTypeDescription || selectedTypeDescription.trim().length < 3)) {\n      missing.push(\"Detalhe do tipo\");\n    }\n\n    if (visitStatus === \"realizada\") {\n      if (!watch(\"outcome\")) missing.push(\"Resultado da visita\");\n      if (!watch(\"result\") || (watch(\"result\")?.trim().length || 0) < 10) {\n        missing.push(\"Nota do resultado\");\n      }\n    }\n\n    if (visitStatus === \"cancelada\" && !watch(\"cancellationReason\")?.trim()) {\n      missing.push(\"Motivo do cancelamento\");\n    }\n\n    return missing;\n  }, [\n    selectedResponsibleId,\n    visitStatus,\n    selectedDate,\n    selectedTime,\n    selectedDuration,\n    visitType,\n    selectedLocation,\n    selectedProvider,\n    selectedMeetingLink,\n    selectedTypeDescription,\n    watch,\n  ]);\n\n  const hasBlockingMissing = missingRequiredItems.length > 0;\n  const hasValidationBanner = submitCount > 0 && Object.keys(errors).length > 1 && !submitError;\n\n  const executeSave = React.useCallback(\n    async (data: VisitFormData) => {\n      setIsSaving(true);\n      setSubmitError(null);\n      setLastSubmittedData(data);\n\n      try {\n        await new Promise((resolve) => setTimeout(resolve, 700));\n        await Promise.resolve(onSave(data));\n        setSaveSuccess(true);\n\n        setTimeout(() => {\n          onClose();\n        }, 450);\n      } catch {\n        setSubmitError(\"Não consegui salvar agora. Verifique sua conexão e tente novamente.\");\n      } finally {\n        setIsSaving(false);\n      }\n    },\n    [onClose, onSave]\n  );\n\n  const onValidSubmit = React.useCallback(\n    async (data: VisitFormData) => {\n      if (data.status === \"realizada\") {\n        setPendingSubmitData(data);\n        setShowRealizadaConfirm(true);\n        return;\n      }\n      await executeSave(data);\n    },\n    [executeSave]\n  );\n\n  const onInvalidSubmit = React.useCallback(() => {\n    const firstErrorField = Object.keys(form.formState.errors)[0];\n    if (!firstErrorField) return;\n\n    const element = document.querySelector(`[name=\"${firstErrorField}\"]`) as HTMLElement | null;\n    if (element) {\n      element.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n      element.focus();\n    }\n  }, [form.formState.errors]);\n\n  const handlePrimarySubmit = handleSubmit(onValidSubmit, onInvalidSubmit);\n\n  const handleRetry = React.useCallback(async () => {\n    if (!lastSubmittedData) return;\n    await executeSave(lastSubmittedData);\n  }, [executeSave, lastSubmittedData]);\n\n  const handleCreateContact = React.useCallback(() => {\n    if (!newContactData.nome.trim()) return;\n\n    const newContact: Partial<Contact> = {\n      ...newContactData,\n      isDecisionMaker: false,\n    };\n\n    onAddContact?.(newContact);\n    setNewContactData({ nome: \"\", cargo: \"\", telefone: \"\", email: \"\" });\n    // Note: setIsAddingContact(false) is handled by the useEffect monitoring contacts length\n  }, [newContactData, onAddContact]);\n\n  const handleClose = React.useCallback(() => {\n    if (isDirty && !showCancellationConfirm && !saveSuccess) {\n      setShowCancellationConfirm(true);\n      return;\n    }\n\n    setShowCancellationConfirm(false);\n    setShowRealizadaConfirm(false);\n    setPendingSubmitData(null);\n    onClose();\n  }, [isDirty, onClose, saveSuccess, showCancellationConfirm]);\n\n  const handleDiscard = React.useCallback(() => {\n    setShowCancellationConfirm(false);\n    setShowRealizadaConfirm(false);\n    setPendingSubmitData(null);\n    onClose();\n  }, [onClose]);\n\n  const summaryRows = React.useMemo(\n    () => [\n      {\n        label: \"Tipo\",\n        value:\n          TYPE_OPTIONS.find((option) => option.id === visitType)?.label ?? \"Não definido\",\n      },\n      {\n        label: \"Status\",\n        value:\n          STATUS_OPTIONS.find((option) => option.id === visitStatus)?.label ??\n          \"Não definido\",\n      },\n      {\n        label: \"Quando\",\n        value:\n          selectedDate && selectedTime\n            ? `${format(new Date(`${selectedDate}T${selectedTime}`), \"dd/MM/yyyy HH:mm\")}`\n            : \"A definir\",\n      },\n      {\n        label: \"Duração\",\n        value: selectedDuration ? `${selectedDuration} min` : \"A definir\",\n      },\n      {\n        label: visitType === \"remoto\" ? \"Link\" : \"Local\",\n        value:\n          visitType === \"remoto\"\n            ? selectedMeetingLink || \"Não informado\"\n            : visitType === \"presencial\"\n              ? selectedLocation || \"Não informado\"\n              : selectedTypeDescription || \"Não informado\",\n      },\n      {\n        label: \"Responsável\",\n        value:\n          RESPONSIBLE_OPTIONS.find((user) => user.id === selectedResponsibleId)?.label ??\n          \"Não definido\",\n      },\n      {\n        label: \"Participantes\",\n        value:\n          selectedParticipants.length > 0\n            ? `${selectedParticipants.length} selecionado${selectedParticipants.length > 1 ? \"s\" : \"\"}`\n            : \"Nenhum selecionado\",\n      },\n    ],\n    [\n      selectedDate,\n      selectedDuration,\n      selectedLocation,\n      selectedMeetingLink,\n      selectedParticipants.length,\n      selectedResponsibleId,\n      selectedTime,\n      selectedTypeDescription,\n      visitStatus,\n      visitType,\n    ]\n  );\n\n  const content = (\n    <div className=\"flex h-full flex-col bg-white\">\n      <div className=\"sticky top-0 z-20 flex-none border-b border-zinc-100 bg-white px-8 py-6\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div>\n            <h2 className=\"flex items-center gap-2 text-lg font-semibold text-zinc-900\">\n              {saveSuccess ? (\n                <span className=\"flex items-center gap-2 text-emerald-600 animate-in fade-in slide-in-from-bottom-2\">\n                  <CheckCircle className=\"h-5 w-5\" /> Visita registrada\n                </span>\n              ) : (\n                <>\n                  <Calendar className=\"h-5 w-5 text-brand\" /> Nova Visita\n                </>\n              )}\n            </h2>\n            {!saveSuccess && (\n              <p className=\"text-sm text-zinc-500\">\n                Registre uma visita ou reunião para este cliente\n              </p>\n            )}\n          </div>\n          <Button variant=\"ghost\" size=\"icon\" onClick={handleClose} title=\"Fechar\">\n            <X className=\"h-5 w-5\" />\n          </Button>\n        </div>\n\n        {(hasValidationBanner || submitError) && (\n          <div\n            className={cn(\n              \"mt-3 rounded-xl border px-3 py-2 text-xs\",\n              submitError\n                ? \"border-red-200 bg-red-50 text-red-700\"\n                : \"border-amber-200 bg-amber-50 text-amber-700\"\n            )}\n          >\n            {submitError || \"Revise os campos destacados para continuar.\"}\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex-1 space-y-8 overflow-y-auto px-8 py-8\">\n        <section className=\"rounded-2xl border border-zinc-200/80 bg-white p-6 shadow-sm\">\n          <div className=\"flex flex-col gap-4 md:flex-row md:items-end md:justify-between\">\n            <div className=\"space-y-2\">\n              <Label className=\"text-[11px] uppercase tracking-[0.08em] text-zinc-500\">Tipo da visita</Label>\n              <Controller\n                name=\"type\"\n                control={control}\n                render={({ field }) => (\n                  <div className=\"inline-flex rounded-xl border border-zinc-200 bg-zinc-50 p-1\">\n                    {TYPE_OPTIONS.map((type) => (\n                      <button\n                        key={type.id}\n                        type=\"button\"\n                        onClick={() => field.onChange(type.id)}\n                        className={cn(\n                          \"flex h-9 items-center gap-2 rounded-lg px-3 text-sm font-medium transition-all duration-[120ms]\",\n                          field.value === type.id\n                            ? \"bg-white text-brand shadow-sm ring-1 ring-black/5\"\n                            : \"text-zinc-500 hover:bg-zinc-100 hover:text-zinc-800\"\n                        )}\n                      >\n                        <type.icon className=\"h-4 w-4\" />\n                        {type.label}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              />\n            </div>\n\n            <div className=\"w-full max-w-[240px] space-y-1.5\">\n              <Label>\n                Status <span className=\"text-red-500\">*</span>\n              </Label>\n              <Controller\n                name=\"status\"\n                control={control}\n                render={({ field }) => (\n                  <Select value={field.value} onValueChange={field.onChange}>\n                    <SelectTrigger className={cn(errors.status && \"border-red-300 ring-red-100\")}>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {STATUS_OPTIONS.map((status) => (\n                        <SelectItem key={status.id} value={status.id}>\n                          {status.label}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                )}\n              />\n              {errors.status && <p className=\"text-xs text-red-500\">{errors.status.message}</p>}\n            </div>\n          </div>\n\n          {visitStatus === \"cancelada\" && (\n            <div className=\"mt-4 animate-in fade-in slide-in-from-top-2 space-y-1.5\">\n              <Label>\n                Motivo do cancelamento <span className=\"text-red-500\">*</span>\n              </Label>\n              <Input\n                {...form.register(\"cancellationReason\")}\n                placeholder=\"Ex: Cliente pediu para remarcar\"\n                className={cn(errors.cancellationReason && \"border-red-300\")}\n              />\n              {errors.cancellationReason && (\n                <p className=\"text-xs text-red-500\">{errors.cancellationReason.message}</p>\n              )}\n            </div>\n          )}\n        </section>\n\n        <section className=\"rounded-2xl border border-zinc-200/80 bg-white p-6 shadow-sm\">\n          <div className=\"mb-3 flex items-center gap-2 border-b border-zinc-100 pb-2\">\n            <Clock className=\"h-4 w-4 text-zinc-400\" />\n            <h4 className=\"text-sm font-semibold text-zinc-700\">Quando</h4>\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-4 md:grid-cols-3\">\n            <div className=\"space-y-1.5\">\n              <Label>\n                Data {visitStatus === \"agendada\" && <span className=\"text-red-500\">*</span>}\n              </Label>\n              <Input type=\"date\" {...form.register(\"date\")} className={cn(errors.date && \"border-red-300\")} />\n              {errors.date && <p className=\"text-xs text-red-500\">{errors.date.message}</p>}\n            </div>\n\n            <div className=\"space-y-1.5\">\n              <Label>\n                Hora {visitStatus === \"agendada\" && <span className=\"text-red-500\">*</span>}\n              </Label>\n              <Input type=\"time\" {...form.register(\"time\")} className={cn(errors.time && \"border-red-300\")} />\n              {errors.time && <p className=\"text-xs text-red-500\">{errors.time.message}</p>}\n            </div>\n\n            <div className=\"space-y-1.5\">\n              <Label>\n                Duração {visitStatus === \"agendada\" && <span className=\"text-red-500\">*</span>}\n              </Label>\n              <Controller\n                name=\"duration\"\n                control={control}\n                render={({ field }) => (\n                  <Select value={field.value} onValueChange={field.onChange}>\n                    <SelectTrigger className={cn(errors.duration && \"border-red-300\")}>\n                      <SelectValue placeholder=\"Selecione...\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {DURATION_OPTIONS.map((duration) => (\n                        <SelectItem key={duration} value={duration}>\n                          {duration} min\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                )}\n              />\n              {errors.duration && <p className=\"text-xs text-red-500\">{errors.duration.message}</p>}\n            </div>\n          </div>\n        </section>\n\n        <section className=\"rounded-2xl border border-zinc-200/80 bg-white p-6 shadow-sm\">\n          <div className=\"mb-3 flex items-center gap-2 border-b border-zinc-100 pb-2\">\n            <Users className=\"h-4 w-4 text-zinc-400\" />\n            <h4 className=\"text-sm font-semibold text-zinc-700\">Quem</h4>\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n            <div className=\"space-y-1.5\">\n              <Label>\n                Responsável <span className=\"text-red-500\">*</span>\n              </Label>\n              {isTeamLoading ? (\n                <div className=\"h-10 w-full animate-pulse rounded-md border border-zinc-200 bg-zinc-100\" />\n              ) : (\n                <Controller\n                  name=\"responsibleId\"\n                  control={control}\n                  render={({ field }) => (\n                    <Select\n                      value={field.value}\n                      onValueChange={field.onChange}\n                      disabled={!canDelegateResponsible}\n                    >\n                      <SelectTrigger className={cn(errors.responsibleId && \"border-red-300\")}>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {RESPONSIBLE_OPTIONS.map((member) => (\n                          <SelectItem key={member.id} value={member.id}>\n                            <div className=\"flex items-center gap-2\">\n                              <span>{member.label}</span>\n                              <span className=\"text-[10px] text-zinc-500\">{member.role}</span>\n                            </div>\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  )}\n                />\n              )}\n              {!canDelegateResponsible && (\n                <p className=\"text-[11px] text-zinc-500\">Delegação desabilitada para seu perfil.</p>\n              )}\n              {errors.responsibleId && <p className=\"text-xs text-red-500\">{errors.responsibleId.message}</p>}\n            </div>\n\n            <div className=\"space-y-1.5\">\n              <Label>Participantes (Clientes)</Label>\n              {isContactsLoading ? (\n                <div className=\"h-10 w-full animate-pulse rounded-md border border-zinc-200 bg-zinc-100\" />\n              ) : (\n                <Controller\n                  name=\"participants\"\n                  control={control}\n                  render={({ field }) => (\n                    <Popover open={openParticipantCombobox} onOpenChange={setOpenParticipantCombobox}>\n                      <PopoverTrigger asChild>\n                        <Button\n                          variant=\"outline\"\n                          role=\"combobox\"\n                          aria-expanded={openParticipantCombobox}\n                          className=\"h-10 w-full justify-between px-3 font-normal text-zinc-600\"\n                        >\n                          {field.value?.length\n                            ? `${field.value.length} participante${field.value.length > 1 ? \"s\" : \"\"} selecionado${field.value.length > 1 ? \"s\" : \"\"}`\n                            : \"Selecionar participantes...\"}\n                          <ChevronDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n                        </Button>\n                      </PopoverTrigger>\n                      <PopoverContent\n                        className=\"w-[calc(100vw-4rem)] sm:w-[340px] md:w-[var(--radix-popover-trigger-width)] min-w-[300px] overflow-hidden rounded-2xl border border-zinc-200/90 p-0 shadow-[0_18px_40px_rgba(15,23,42,0.14)]\"\n                        align=\"start\"\n                      >\n                        {isAddingContact ? (\n                          <div className=\"space-y-3 p-3 animate-in slide-in-from-right-2 duration-200\">\n                            <div className=\"flex items-center justify-between border-b border-zinc-100 pb-2\">\n                              <h4 className=\"text-sm font-semibold text-zinc-900\">Novo contato</h4>\n                              <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className=\"h-6 w-6 p-0 text-zinc-500 hover:text-zinc-900\"\n                                onClick={() => setIsAddingContact(false)}\n                              >\n                                <X className=\"h-3 w-3\" />\n                              </Button>\n                            </div>\n                            <div className=\"space-y-2\">\n                              <Input\n                                placeholder=\"Nome *\"\n                                value={newContactData.nome}\n                                onChange={(e) =>\n                                  setNewContactData((prev) => ({ ...prev, nome: e.target.value }))\n                                }\n                                className=\"h-8 text-sm\"\n                              />\n                              <Input\n                                placeholder=\"Cargo\"\n                                value={newContactData.cargo}\n                                onChange={(e) =>\n                                  setNewContactData((prev) => ({ ...prev, cargo: e.target.value }))\n                                }\n                                className=\"h-8 text-sm\"\n                              />\n                              <div className=\"grid grid-cols-2 gap-2\">\n                                <Input\n                                  placeholder=\"Telefone\"\n                                  value={newContactData.telefone}\n                                  onChange={(e) =>\n                                    setNewContactData((prev) => ({ ...prev, telefone: e.target.value }))\n                                  }\n                                  className=\"h-8 text-sm\"\n                                />\n                                <Input\n                                  placeholder=\"Email\"\n                                  value={newContactData.email}\n                                  onChange={(e) =>\n                                    setNewContactData((prev) => ({ ...prev, email: e.target.value }))\n                                  }\n                                  className=\"h-8 text-sm\"\n                                />\n                              </div>\n                              <Button\n                                size=\"sm\"\n                                className=\"mt-2 w-full\"\n                                disabled={!newContactData.nome.trim()}\n                                onClick={handleCreateContact}\n                              >\n                                Cadastrar\n                              </Button>\n                            </div>\n                          </div>\n                        ) : (\n                          <Command className=\"bg-white\">\n                            <div className=\"border-b border-zinc-100 px-3 py-2\">\n                              <p className=\"font-body text-[10px] font-semibold uppercase tracking-[0.08em] text-zinc-500\">\n                                Participantes\n                              </p>\n                              <p className=\"font-body text-xs text-zinc-500\">\n                                {(field.value || []).length} selecionado\n                                {(field.value || []).length === 1 ? \"\" : \"s\"}\n                              </p>\n                            </div>\n\n                            <div className=\"px-3 pb-2 pt-2\">\n                              <CommandInput\n                                placeholder=\"Buscar contato...\"\n                                className=\"h-9 rounded-xl border border-zinc-200 bg-zinc-50/60 px-2 text-sm\"\n                              />\n                            </div>\n\n                            <CommandList className=\"max-h-[260px] px-2 pb-2\">\n                              <CommandEmpty className=\"py-8 text-center font-body text-xs text-zinc-500\">\n                                Nenhum contato encontrado.\n                              </CommandEmpty>\n\n                              <CommandGroup className=\"space-y-1\">\n                                {contacts.map((contact) => {\n                                  const selected = (field.value || []).includes(contact.id);\n                                  return (\n                                    <CommandItem\n                                      key={contact.id}\n                                      value={`${contact.nome} ${contact.cargo || \"\"}`}\n                                      className={cn(\n                                        \"group flex cursor-pointer items-center gap-3 rounded-xl border px-2.5 py-2.5 transition-all duration-[140ms]\",\n                                        selected\n                                          ? \"border-brand/30 bg-brand/10 shadow-[0_6px_14px_rgba(37,99,235,0.14)]\"\n                                          : \"border-transparent hover:border-zinc-200 hover:bg-zinc-50\"\n                                      )}\n                                      onSelect={() => {\n                                        const current = field.value || [];\n                                        const isSelected = current.includes(contact.id);\n                                        if (isSelected) {\n                                          field.onChange(current.filter((id) => id !== contact.id));\n                                        } else {\n                                          field.onChange([...current, contact.id]);\n                                        }\n                                      }}\n                                    >\n                                      <div\n                                        className={cn(\n                                          \"flex h-8 w-8 shrink-0 items-center justify-center rounded-full border font-body text-[11px] font-semibold transition-colors\",\n                                          selected\n                                            ? \"border-brand/35 bg-brand text-white\"\n                                            : \"border-zinc-200 bg-white text-zinc-600\"\n                                        )}\n                                      >\n                                        {getContactInitials(contact.nome)}\n                                      </div>\n\n                                      <div className=\"min-w-0 flex-1\">\n                                        <p\n                                          className={cn(\n                                            \"truncate font-body text-sm font-medium\",\n                                            selected ? \"text-zinc-900\" : \"text-zinc-800\"\n                                          )}\n                                        >\n                                          {contact.nome}\n                                        </p>\n                                        <p className=\"truncate font-body text-[11px] text-zinc-500\">\n                                          {formatContactRole(contact.cargo)}\n                                        </p>\n                                      </div>\n\n                                      <div\n                                        className={cn(\n                                          \"flex h-5 w-5 shrink-0 items-center justify-center rounded-full border transition-all\",\n                                          selected\n                                            ? \"border-brand bg-brand text-white\"\n                                            : \"border-zinc-300 bg-white text-zinc-400 opacity-0 group-hover:opacity-100\"\n                                        )}\n                                      >\n                                        <Check className=\"h-3 w-3\" />\n                                      </div>\n                                    </CommandItem>\n                                  );\n                                })}\n                              </CommandGroup>\n\n                              <CommandSeparator className=\"mx-1 my-2\" />\n                              <CommandGroup>\n                                <CommandItem\n                                  onSelect={() => setIsAddingContact(true)}\n                                  className=\"group flex cursor-pointer items-center gap-2.5 rounded-xl border border-dashed border-zinc-300 bg-zinc-50/50 px-2.5 py-2.5 text-zinc-600 transition-colors duration-[120ms] hover:border-brand/40 hover:bg-brand/5 hover:text-brand\"\n                                >\n                                  <span className=\"flex h-7 w-7 items-center justify-center rounded-full bg-white border border-zinc-200 text-zinc-400 group-hover:border-brand/30 group-hover:text-brand\">\n                                    <Plus className=\"h-4 w-4\" />\n                                  </span>\n                                  <div className=\"flex min-w-0 flex-col\">\n                                    <span className=\"font-body text-sm font-semibold\">\n                                      Cadastrar novo contato\n                                    </span>\n                                    <span className=\"font-body text-[11px] text-zinc-400 group-hover:text-brand/80\">\n                                      Adicione e selecione sem sair da visita\n                                    </span>\n                                  </div>\n                                </CommandItem>\n                              </CommandGroup>\n                            </CommandList>\n                          </Command>\n                        )}\n                      </PopoverContent>\n                    </Popover>\n                  )}\n                />\n              )}\n\n              {selectedParticipants.length === 0 ? (\n                <p className=\"text-[11px] text-amber-600\">\n                  Nenhum participante cliente selecionado. Recomendado incluir ao menos 1 contato.\n                </p>\n              ) : (\n                <div className=\"flex flex-wrap gap-1.5 pt-1\">\n                  {selectedParticipants.map((participantId) => {\n                    const contact = contacts.find((item) => item.id === participantId);\n                    if (!contact) return null;\n                    return (\n                      <Badge key={participantId} variant=\"outline\" className=\"h-6 rounded-full border-zinc-200 text-[11px]\">\n                        {contact.nome}\n                      </Badge>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </div>\n        </section>\n\n        <section className=\"rounded-2xl border border-zinc-200/80 bg-white p-6 shadow-sm\">\n          <div className=\"mb-3 flex items-center gap-2 border-b border-zinc-100 pb-2\">\n            {visitType === \"presencial\" ? (\n              <MapPin className=\"h-4 w-4 text-zinc-400\" />\n            ) : visitType === \"remoto\" ? (\n              <LinkIcon className=\"h-4 w-4 text-zinc-400\" />\n            ) : (\n              <HelpCircle className=\"h-4 w-4 text-zinc-400\" />\n            )}\n            <h4 className=\"text-sm font-semibold text-zinc-700\">Onde</h4>\n          </div>\n\n          {visitType === \"presencial\" && (\n            <div className=\"space-y-3 animate-in fade-in slide-in-from-top-2\">\n              <div className=\"space-y-1.5\">\n                <Label>\n                  Local <span className=\"text-red-500\">*</span>\n                </Label>\n                <Input\n                  {...form.register(\"location\")}\n                  placeholder=\"Endereço, unidade ou ponto de referência\"\n                  className={cn(errors.location && \"border-red-300\")}\n                />\n                {errors.location && <p className=\"text-xs text-red-500\">{errors.location.message}</p>}\n              </div>\n              <div className=\"space-y-1.5\">\n                <Label className=\"text-zinc-500\">Observação de acesso (Opcional)</Label>\n                <Textarea\n                  {...form.register(\"accessSearch\")}\n                  placeholder=\"Instruções para portaria, estacionamento...\"\n                  className=\"h-20 resize-none\"\n                />\n              </div>\n            </div>\n          )}\n\n          {visitType === \"remoto\" && (\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2 animate-in fade-in slide-in-from-top-2\">\n              <div className=\"space-y-1.5\">\n                <Label>\n                  Plataforma <span className=\"text-red-500\">*</span>\n                </Label>\n                <Controller\n                  name=\"platform\"\n                  control={control}\n                  render={({ field }) => (\n                    <Select value={field.value} onValueChange={field.onChange}>\n                      <SelectTrigger className={cn(errors.platform && \"border-red-300\")}>\n                        <SelectValue placeholder=\"Selecione...\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {REMOTE_PROVIDERS.map((provider) => (\n                          <SelectItem key={provider.id} value={provider.id}>\n                            {provider.label}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  )}\n                />\n                {errors.platform && <p className=\"text-xs text-red-500\">{errors.platform.message}</p>}\n              </div>\n\n              <div className=\"space-y-1.5\">\n                <Label>\n                  Link da reunião <span className=\"text-red-500\">*</span>\n                </Label>\n                <Input\n                  {...form.register(\"link\")}\n                  placeholder=\"https://meet.google.com/...\"\n                  className={cn(errors.link && \"border-red-300\")}\n                />\n                {errors.link && <p className=\"text-xs text-red-500\">{errors.link.message}</p>}\n              </div>\n            </div>\n          )}\n\n          {visitType === \"outro\" && (\n            <div className=\"space-y-3 animate-in fade-in slide-in-from-top-2\">\n              <div className=\"space-y-1.5\">\n                <Label>\n                  Tipo <span className=\"text-red-500\">*</span>\n                </Label>\n                <Input\n                  {...form.register(\"typeDescription\")}\n                  placeholder=\"Ex: Ligação, WhatsApp, Evento\"\n                  className={cn(errors.typeDescription && \"border-red-300\")}\n                />\n                {errors.typeDescription && (\n                  <p className=\"text-xs text-red-500\">{errors.typeDescription.message}</p>\n                )}\n              </div>\n\n              <div className=\"space-y-1.5\">\n                <Label>Detalhe (Opcional)</Label>\n                <Textarea\n                  {...form.register(\"details\")}\n                  className=\"h-20 resize-none\"\n                  placeholder=\"Contexto adicional desta interação\"\n                />\n              </div>\n            </div>\n          )}\n        </section>\n\n\n\n        {visitStatus === \"realizada\" && (\n          <section className=\"rounded-2xl border border-zinc-200/80 bg-white p-4 animate-in fade-in slide-in-from-top-2\">\n            <div className=\"mb-3 flex items-center gap-2 border-b border-zinc-100 pb-2\">\n              <Target className=\"h-4 w-4 text-zinc-400\" />\n              <h4 className=\"text-sm font-semibold text-zinc-700\">Resultado</h4>\n            </div>\n\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n              <div className=\"space-y-1.5\">\n                <Label>\n                  Resultado da visita <span className=\"text-red-500\">*</span>\n                </Label>\n                <Controller\n                  name=\"outcome\"\n                  control={control}\n                  render={({ field }) => (\n                    <Select value={field.value} onValueChange={field.onChange}>\n                      <SelectTrigger className={cn(errors.outcome && \"border-red-300\")}>\n                        <SelectValue placeholder=\"Selecione...\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {OUTCOME_OPTIONS.map((outcome) => (\n                          <SelectItem key={outcome.id} value={outcome.id}>\n                            {outcome.label}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  )}\n                />\n                {errors.outcome && <p className=\"text-xs text-red-500\">{errors.outcome.message}</p>}\n              </div>\n\n              <div className=\"space-y-1.5 md:col-span-1\">\n                <Label>\n                  Nota do resultado <span className=\"text-red-500\">*</span>\n                </Label>\n                <Textarea\n                  {...form.register(\"result\")}\n                  placeholder=\"Resuma o que aconteceu e próximos passos (mín. 10 caracteres)\"\n                  className={cn(\"h-24 resize-none\", errors.result && \"border-red-300\")}\n                />\n                {errors.result && <p className=\"text-xs text-red-500\">{errors.result.message}</p>}\n              </div>\n            </div>\n          </section>\n        )}\n\n        <section className=\"rounded-2xl border border-zinc-200/80 bg-white p-4\">\n          <button\n            type=\"button\"\n            className=\"flex w-full items-center justify-between\"\n            onClick={() => setIsOptionalOpen((prev) => !prev)}\n          >\n            <span className=\"text-sm font-semibold text-zinc-700\">Observações</span>\n            <span className=\"text-xs text-zinc-500\">{isOptionalOpen ? \"Ocultar\" : \"Mostrar\"}</span>\n          </button>\n\n          {isOptionalOpen && (\n            <div className=\"mt-3 space-y-1.5 animate-in fade-in slide-in-from-top-2\">\n              <Label>Notas (Opcional)</Label>\n              <Textarea\n                {...form.register(\"objective\")}\n                placeholder=\"Contexto para o time, objeções, detalhes importantes...\"\n                className=\"h-24 resize-none\"\n              />\n            </div>\n          )}\n        </section>\n\n        <section className=\"rounded-2xl border border-brand/10 bg-brand/5 p-4 space-y-3\">\n          <div className=\"flex items-center gap-2 text-brand\">\n            <Sparkles className=\"h-4 w-4 fill-brand/20\" />\n            <h4 className=\"text-xs font-semibold uppercase tracking-wider\">Menux Intelligence</h4>\n          </div>\n\n          {!selectedDate && (\n            <div className=\"space-y-2\">\n              <p className=\"text-xs text-zinc-600\">Sugestão de horários para esta oportunidade:</p>\n              <div className=\"flex flex-wrap gap-2\">\n                {[\n                  \"09:00\",\n                  \"14:30\",\n                  \"16:00\",\n                ].map((time) => (\n                  <Badge\n                    key={time}\n                    variant=\"outline\"\n                    className=\"cursor-pointer border-brand/20 text-zinc-600 transition-colors hover:bg-brand/10 hover:text-brand\"\n                    onClick={() => suggestTime(time)}\n                  >\n                    Amanhã, {time}\n                  </Badge>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {selectedDate && selectedTime && (\n            <div className=\"space-y-2\">\n              <p className=\"text-xs text-zinc-600\">Mensagem de confirmação sugerida:</p>\n              <div className=\"flex items-center gap-2 rounded border border-brand/10 bg-white p-2 text-xs text-zinc-500 italic\">\n                <span className=\"flex-1 truncate\">\n                  Olá! Confirmando nossa {visitType === \"presencial\" ? \"visita\" : \"reunião\"} para {format(new Date(selectedDate), \"dd/MM\")} às {selectedTime}...\n                </span>\n                <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\" onClick={copyConfirmationMessage} title=\"Copiar\">\n                  <Copy className=\"h-3 w-3\" />\n                </Button>\n              </div>\n            </div>\n          )}\n        </section>\n\n        <section className=\"rounded-2xl border border-zinc-200/80 bg-zinc-50/70 p-4\">\n          <div className=\"mb-3 flex items-center gap-2\">\n            <User className=\"h-4 w-4 text-zinc-500\" />\n            <h4 className=\"text-sm font-semibold text-zinc-700\">Resumo antes de salvar</h4>\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-2 md:grid-cols-2\">\n            {summaryRows.map((row) => (\n              <div key={row.label} className=\"flex items-center justify-between gap-3 rounded-lg border border-zinc-200/80 bg-white px-3 py-2\">\n                <span className=\"text-xs text-zinc-500\">{row.label}</span>\n                <span className=\"max-w-[60%] truncate text-xs font-medium text-zinc-800\">{row.value}</span>\n              </div>\n            ))}\n          </div>\n\n          {missingRequiredItems.length > 0 && (\n            <div className=\"mt-3 rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700\">\n              <div className=\"flex items-center gap-1.5 font-medium\">\n                <TriangleAlert className=\"h-3.5 w-3.5\" />\n                Faltando para salvar\n              </div>\n              <p className=\"mt-1\">\n                {missingRequiredItems.join(\" • \")}\n              </p>\n            </div>\n          )}\n        </section>\n      </div>\n\n      <div className=\"flex-none border-t border-zinc-100 bg-white px-8 py-6 z-10\">\n        {showCancellationConfirm ? (\n          <div className=\"flex w-full items-center justify-end gap-2 animate-in fade-in slide-in-from-right-2\">\n            <span className=\"mr-2 text-xs text-zinc-500\">Alterações não salvas. Descartar?</span>\n            <Button variant=\"outline\" size=\"sm\" onClick={() => setShowCancellationConfirm(false)}>\n              Voltar\n            </Button>\n            <Button variant=\"destructive\" size=\"sm\" onClick={handleDiscard}>\n              Descartar\n            </Button>\n          </div>\n        ) : showRealizadaConfirm && pendingSubmitData ? (\n          <div className=\"flex flex-col gap-3 rounded-xl border border-amber-200 bg-amber-50 px-3 py-2 animate-in fade-in slide-in-from-bottom-2 md:flex-row md:items-center md:justify-between\">\n            <p className=\"text-xs text-amber-700\">\n              Você selecionou status <strong>Realizada</strong>. Confirmar criação agora com este status?\n            </p>\n            <div className=\"flex items-center justify-end gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => {\n                  setShowRealizadaConfirm(false);\n                  setPendingSubmitData(null);\n                }}\n              >\n                Revisar\n              </Button>\n              <Button\n                size=\"sm\"\n                onClick={async () => {\n                  setShowRealizadaConfirm(false);\n                  await executeSave(pendingSubmitData);\n                  setPendingSubmitData(null);\n                }}\n              >\n                Confirmar realizada\n              </Button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {submitError && (\n              <div className=\"flex flex-wrap items-center justify-between gap-2 rounded-lg border border-red-200 bg-red-50 px-3 py-2\">\n                <p className=\"text-xs text-red-700\">{submitError}</p>\n                <Button variant=\"outline\" size=\"sm\" className=\"h-7\" onClick={handleRetry} disabled={!lastSubmittedData || isSaving}>\n                  Tentar novamente\n                </Button>\n              </div>\n            )}\n\n            {!isValid && (\n              <p className=\"text-xs text-zinc-500\">\n                Complete os campos obrigatórios para liberar o salvamento.\n              </p>\n            )}\n\n            <div className=\"flex items-center justify-end gap-2\">\n              <Button variant=\"ghost\" onClick={handleClose}>\n                Cancelar\n              </Button>\n              <Button\n                onClick={handlePrimarySubmit}\n                disabled={isSaving || saveSuccess || hasBlockingMissing}\n                className=\"min-w-[140px]\"\n              >\n                {isSaving ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> Salvando...\n                  </>\n                ) : saveSuccess ? (\n                  <>\n                    <CheckCircle className=\"mr-2 h-4 w-4\" /> Salvo\n                  </>\n                ) : (\n                  \"Salvar Visita\"\n                )}\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && handleClose()}>\n      <DialogContent showCloseButton={false} className=\"flex max-h-[90vh] w-full sm:max-w-2xl md:max-w-3xl flex-col gap-0 p-0 overflow-hidden bg-white border-zinc-200/50 shadow-2xl sm:rounded-2xl\">\n        {content}\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2666, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/modals/new-activity-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { useForm, useWatch } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { format } from \"date-fns\";\nimport {\n  X,\n  Calendar,\n  Clock,\n  Sparkles,\n  Phone,\n  Mail,\n  MessageCircle,\n  Users,\n  CheckSquare,\n  Loader2,\n  CheckCircle,\n  Link2,\n} from \"lucide-react\";\n\nimport { useMediaQuery } from \"@/hooks/use-media-query\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Combobox, type ComboboxOption } from \"@/components/ui/combobox\";\nimport {\n  MultiCombobox,\n  type MultiComboboxOption,\n} from \"@/components/ui/multi-combobox\";\nimport {\n  activitySchema,\n  activitySchemaWithRequiredClient,\n  type ActivityFormData,\n} from \"@/lib/validations/activity\";\nimport { useClientStore } from \"@/stores/client-store\";\nimport { useContactStore } from \"@/stores/contact-store\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport { RESTAURANT_POSITIONS } from \"@/lib/business-rules\";\n\nexport interface NewActivityModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (data: ActivityFormData) => Promise<void> | void;\n  dealId?: string;\n  initialType?: ActivityFormData[\"type\"];\n  initialClientId?: string;\n  initialClientName?: string;\n  initialContactIds?: string[];\n  initialContactNames?: string[];\n  initialOpportunityId?: string;\n  initialOpportunityTitle?: string;\n  lockClient?: boolean;\n  requireClient?: boolean;\n}\n\nconst activityTypes = [\n  { id: \"call\", label: \"Ligação\", icon: Phone },\n  { id: \"whatsapp\", label: \"WhatsApp\", icon: MessageCircle },\n  { id: \"email\", label: \"E-mail\", icon: Mail },\n  { id: \"meeting\", label: \"Reunião\", icon: Users },\n  { id: \"task\", label: \"Tarefa\", icon: CheckSquare },\n] as const;\n\nfunction getCargoLabel(value: string): string {\n  return (\n    RESTAURANT_POSITIONS.find((p) => p.value === value)?.label ?? value\n  );\n}\n\nconst TIME_REQUIRED_TYPES = new Set([\"call\", \"meeting\", \"whatsapp\", \"email\"]);\n\nexport function NewActivityModal({\n  isOpen,\n  onClose,\n  onSave,\n  dealId,\n  initialType = \"task\",\n  initialClientId,\n  initialClientName,\n  initialContactIds,\n  initialContactNames,\n  initialOpportunityId,\n  initialOpportunityTitle,\n  lockClient = false,\n  requireClient = false,\n}: NewActivityModalProps) {\n  const isDesktop = useMediaQuery(\"(min-width: 768px)\");\n  const [isSaving, setIsSaving] = React.useState(false);\n  const [saveSuccess, setSaveSuccess] = React.useState(false);\n  const [submitError, setSubmitError] = React.useState<string | null>(null);\n\n  // Stores\n  const clients = useClientStore((s) => s.clients);\n  const getContactsByClient = useContactStore((s) => s.getByClient);\n  const opportunities = useOpportunityStore((s) => s.opportunities);\n\n  const schema = requireClient\n    ? activitySchemaWithRequiredClient\n    : activitySchema;\n\n  const form = useForm<ActivityFormData>({\n    resolver: zodResolver(schema),\n    mode: \"onChange\",\n    defaultValues: {\n      type: initialType,\n      title: \"\",\n      date: format(new Date(), \"yyyy-MM-dd\"),\n      time: format(new Date(), \"HH:mm\"),\n      description: \"\",\n      clientId: initialClientId ?? \"\",\n      clientName: initialClientName ?? \"\",\n      contactIds: initialContactIds ?? [],\n      contactNames: initialContactNames ?? [],\n      opportunityId: initialOpportunityId ?? \"\",\n      opportunityTitle: initialOpportunityTitle ?? \"\",\n    },\n  });\n\n  const {\n    register,\n    handleSubmit,\n    control,\n    setValue,\n    formState: { errors, isValid },\n    reset,\n  } = form;\n\n  const type = useWatch({ control, name: \"type\" });\n  const selectedClientId = useWatch({ control, name: \"clientId\" });\n  const watchedDescription = useWatch({ control, name: \"description\" });\n  const watchedContactIds = useWatch({ control, name: \"contactIds\" });\n  const watchedOpportunityId = useWatch({ control, name: \"opportunityId\" });\n\n  // Client options\n  const clientOptions: ComboboxOption[] = React.useMemo(\n    () =>\n      clients.map((c) => ({\n        value: c.id,\n        label: c.companyName,\n        subtitle: c.city ?? undefined,\n      })),\n    [clients]\n  );\n\n  // Contact options (filtered by selected client)\n  const contactOptions: ComboboxOption[] = React.useMemo(() => {\n    if (!selectedClientId) return [];\n    return getContactsByClient(selectedClientId).map((c) => ({\n      value: c.id,\n      label: c.nome,\n      subtitle: getCargoLabel(c.cargo),\n    }));\n  }, [selectedClientId, getContactsByClient]);\n\n  // Opportunity options (filtered by selected client, open only)\n  const opportunityOptions: ComboboxOption[] = React.useMemo(() => {\n    if (!selectedClientId) return [];\n    return opportunities\n      .filter((o) => o.clientId === selectedClientId && o.status === \"open\")\n      .map((o) => ({\n        value: o.id,\n        label: o.title,\n      }));\n  }, [selectedClientId, opportunities]);\n\n  // Cascade: when client changes, clear contact and opportunity\n  const handleClientChange = React.useCallback(\n    (value: string | null, option: ComboboxOption | null) => {\n      setValue(\"clientId\", value ?? \"\", { shouldValidate: true });\n      setValue(\"clientName\", option?.label ?? \"\");\n      setValue(\"contactIds\", []);\n      setValue(\"contactNames\", []);\n      setValue(\"opportunityId\", \"\");\n      setValue(\"opportunityTitle\", \"\");\n    },\n    [setValue]\n  );\n\n  const handleContactsChange = React.useCallback(\n    (nextValues: string[], nextOptions: MultiComboboxOption[]) => {\n      setValue(\"contactIds\", nextValues);\n      setValue(\n        \"contactNames\",\n        nextOptions.map((o) => o.label)\n      );\n    },\n    [setValue]\n  );\n\n  const handleOpportunityChange = React.useCallback(\n    (value: string | null, option: ComboboxOption | null) => {\n      setValue(\"opportunityId\", value ?? \"\");\n      setValue(\"opportunityTitle\", option?.label ?? \"\");\n    },\n    [setValue]\n  );\n\n  // Auto-select most recent open opportunity when client changes\n  const prevClientRef = React.useRef(selectedClientId);\n  React.useEffect(() => {\n    if (selectedClientId && selectedClientId !== prevClientRef.current && !lockClient) {\n      const openOpps = opportunities\n        .filter((o) => o.clientId === selectedClientId && o.status === \"open\")\n        .sort((a, b) => b.updatedAt.localeCompare(a.updatedAt));\n      if (openOpps.length > 0) {\n        setValue(\"opportunityId\", openOpps[0].id);\n        setValue(\"opportunityTitle\", openOpps[0].title);\n      }\n    }\n    prevClientRef.current = selectedClientId;\n  }, [selectedClientId, lockClient, opportunities, setValue]);\n\n  // Reset form when modal opens\n  React.useEffect(() => {\n    if (isOpen) {\n      setTimeout(() => {\n        reset({\n          type: initialType,\n          title: \"\",\n          date: format(new Date(), \"yyyy-MM-dd\"),\n          time: format(new Date(), \"HH:mm\"),\n          description: \"\",\n          clientId: initialClientId ?? \"\",\n          clientName: initialClientName ?? \"\",\n          contactIds: initialContactIds ?? [],\n          contactNames: initialContactNames ?? [],\n          opportunityId: initialOpportunityId ?? \"\",\n          opportunityTitle: initialOpportunityTitle ?? \"\",\n        });\n        prevClientRef.current = initialClientId ?? \"\";\n        setSaveSuccess(false);\n        setSubmitError(null);\n      }, 50);\n    }\n  }, [\n    isOpen,\n    reset,\n    initialType,\n    initialClientId,\n    initialClientName,\n    initialContactIds,\n    initialContactNames,\n    initialOpportunityId,\n    initialOpportunityTitle,\n  ]);\n\n  const onSubmit = async (data: ActivityFormData) => {\n    setIsSaving(true);\n    setSubmitError(null);\n\n    try {\n      await Promise.resolve(onSave(data));\n      setSaveSuccess(true);\n      setTimeout(() => {\n        setIsSaving(false);\n        onClose();\n      }, 320);\n    } catch {\n      setIsSaving(false);\n      setSaveSuccess(false);\n      setSubmitError(\"Não foi possível criar a atividade. Tente novamente.\");\n    }\n  };\n\n  const handleSmartSuggestion = () => {\n    const clientName =\n      form.getValues(\"clientName\") || \"\";\n    const typeLabel =\n      activityTypes.find((t) => t.id === type)?.label ?? \"Follow-up\";\n    const suggestion = clientName\n      ? `${typeLabel} com ${clientName}`\n      : `Follow-up da proposta enviada`;\n    setValue(\"title\", suggestion, { shouldValidate: true });\n    const reference = dealId ? ` para a negociação` : \"\";\n    setValue(\n      \"description\",\n      `Verificar se o cliente teve alguma dúvida sobre os valores apresentados${reference}.`\n    );\n  };\n\n  const isTimeRequired = TIME_REQUIRED_TYPES.has(type);\n\n  const Content = (\n    <div className=\"flex h-full flex-col bg-white\">\n      <div className=\"flex-1 overflow-y-auto p-4 md:p-6\">\n        <form\n          id=\"activity-form\"\n          onSubmit={handleSubmit(onSubmit)}\n          className=\"space-y-5\"\n        >\n          {/* SECTION 1: Activity Type */}\n          <div className=\"space-y-3\">\n            <Label className=\"text-xs font-semibold uppercase tracking-wider text-zinc-500\">\n              Tipo de Atividade\n            </Label>\n            <div className=\"grid grid-cols-3 gap-2 sm:grid-cols-5\">\n              {activityTypes.map((t) => {\n                const Icon = t.icon;\n                const isSelected = type === t.id;\n                return (\n                  <button\n                    key={t.id}\n                    type=\"button\"\n                    onClick={() =>\n                      setValue(\"type\", t.id as ActivityFormData[\"type\"], {\n                        shouldValidate: true,\n                      })\n                    }\n                    className={cn(\n                      \"flex h-[72px] flex-col items-center justify-center gap-2 rounded-xl border p-2 transition-all hover:bg-zinc-50\",\n                      isSelected\n                        ? \"border-brand bg-brand/5 text-brand ring-1 ring-brand\"\n                        : \"border-zinc-200 bg-white text-zinc-600\"\n                    )}\n                  >\n                    <Icon\n                      className={cn(\n                        \"h-5 w-5\",\n                        isSelected ? \"text-brand\" : \"text-zinc-400\"\n                      )}\n                    />\n                    <span className=\"text-[10px] font-medium\">{t.label}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* SECTION 2: Vincular a */}\n          <div className=\"space-y-3\">\n            <Label className=\"flex items-center gap-1.5 text-xs font-semibold uppercase tracking-wider text-zinc-500\">\n              <Link2 className=\"h-3.5 w-3.5\" />\n              Vincular a\n            </Label>\n\n            {/* Client */}\n            <div>\n              <Label className=\"mb-1.5 block text-xs text-zinc-500\">\n                Cliente (restaurante)\n                {requireClient && (\n                  <span className=\"ml-0.5 text-red-500\">*</span>\n                )}\n              </Label>\n              <Combobox\n                options={clientOptions}\n                value={selectedClientId || null}\n                onValueChange={handleClientChange}\n                placeholder=\"Buscar cliente...\"\n                searchPlaceholder=\"Digite o nome do cliente...\"\n                emptyMessage=\"Nenhum cliente encontrado.\"\n                locked={lockClient}\n                aria-label=\"Cliente\"\n              />\n              {errors.clientId && (\n                <p className=\"mt-1 text-xs text-red-500\">\n                  {errors.clientId.message}\n                </p>\n              )}\n              {!requireClient && !selectedClientId && (\n                <p className=\"mt-1 text-[11px] text-amber-600\">\n                  Vincular a um cliente melhora a rastreabilidade da atividade\n                </p>\n              )}\n            </div>\n\n            {/* Contacts (multi-select) */}\n            <div>\n              <Label className=\"mb-1.5 block text-xs text-zinc-500\">\n                Contatos (pessoas)\n              </Label>\n              <MultiCombobox\n                options={contactOptions}\n                values={watchedContactIds ?? []}\n                onValuesChange={handleContactsChange}\n                placeholder={\n                  selectedClientId\n                    ? \"Selecionar contatos...\"\n                    : \"Selecione um restaurante primeiro\"\n                }\n                searchPlaceholder=\"Buscar contato...\"\n                emptyMessage=\"Nenhum contato encontrado.\"\n                disabled={!selectedClientId}\n                aria-label=\"Contatos\"\n              />\n            </div>\n\n            {/* Opportunity (only when client selected and there are open opportunities) */}\n            {selectedClientId && opportunityOptions.length > 0 && (\n              <div>\n                <Label className=\"mb-1.5 block text-xs text-zinc-500\">\n                  Oportunidade (opcional)\n                </Label>\n                <Combobox\n                  options={opportunityOptions}\n                  value={watchedOpportunityId || null}\n                  onValueChange={handleOpportunityChange}\n                  placeholder=\"Selecionar oportunidade...\"\n                  searchPlaceholder=\"Buscar oportunidade...\"\n                  emptyMessage=\"Nenhuma oportunidade aberta.\"\n                  aria-label=\"Oportunidade\"\n                />\n              </div>\n            )}\n          </div>\n\n          {/* SECTION 3: Title */}\n          <div>\n            <Label className=\"mb-1.5 block text-xs font-semibold uppercase tracking-wider text-zinc-500\">\n              Título\n            </Label>\n            <div className=\"relative\">\n              <Input\n                {...register(\"title\")}\n                placeholder=\"Ex: Ligar para confirmar recebimento...\"\n                className={cn(\n                  \"pr-10 font-medium\",\n                  errors.title && \"border-red-300 ring-red-100\"\n                )}\n              />\n              <button\n                type=\"button\"\n                onClick={handleSmartSuggestion}\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 rounded-full p-1 text-brand transition-colors hover:bg-brand/10\"\n                title=\"Sugestão Menux AI\"\n              >\n                <Sparkles className=\"h-4 w-4\" />\n              </button>\n            </div>\n            {errors.title && (\n              <p className=\"mt-1 text-xs text-red-500\">\n                {errors.title.message}\n              </p>\n            )}\n          </div>\n\n          {/* SECTION 4: Date & Time */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label className=\"mb-1.5 block text-xs font-semibold uppercase tracking-wider text-zinc-500\">\n                Data\n              </Label>\n              <div className=\"relative\">\n                <Calendar className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400\" />\n                <Input\n                  type=\"date\"\n                  {...register(\"date\")}\n                  className={cn(\n                    \"pl-9\",\n                    errors.date && \"border-red-300 ring-red-100\"\n                  )}\n                />\n              </div>\n              {errors.date && (\n                <p className=\"mt-1 text-xs text-red-500\">\n                  {errors.date.message}\n                </p>\n              )}\n            </div>\n            <div>\n              <Label className=\"mb-1.5 block text-xs font-semibold uppercase tracking-wider text-zinc-500\">\n                Hora{\" \"}\n                {isTimeRequired ? (\n                  <span className=\"text-red-500\">*</span>\n                ) : (\n                  <span className=\"font-normal normal-case text-zinc-400\">\n                    (opcional)\n                  </span>\n                )}\n              </Label>\n              <div className=\"relative\">\n                <Clock className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400\" />\n                <Input\n                  type=\"time\"\n                  {...register(\"time\")}\n                  className={cn(\n                    \"pl-9\",\n                    errors.time && \"border-red-300 ring-red-100\"\n                  )}\n                />\n              </div>\n              {errors.time && (\n                <p className=\"mt-1 text-xs text-red-500\">\n                  {errors.time.message}\n                </p>\n              )}\n            </div>\n          </div>\n\n          {/* SECTION 5: Description */}\n          <div>\n            <Label className=\"mb-1.5 block text-xs font-semibold uppercase tracking-wider text-zinc-500\">\n              Descrição (Opcional)\n            </Label>\n            <Textarea\n              {...register(\"description\")}\n              placeholder=\"Detalhes adicionais sobre a atividade...\"\n              className=\"min-h-[100px] resize-none\"\n              maxLength={2000}\n            />\n            <div className=\"mt-1 flex items-center justify-between\">\n              {errors.description ? (\n                <p className=\"text-xs text-red-500\">\n                  {errors.description.message}\n                </p>\n              ) : (\n                <span />\n              )}\n              <span className=\"text-[11px] text-zinc-400\">\n                {watchedDescription?.length ?? 0}/2000\n              </span>\n            </div>\n          </div>\n\n          {/* SECTION 6: Menux Intelligence Banner (conditional) */}\n          {selectedClientId && type && (\n            <div className=\"rounded-lg border border-indigo-100 bg-indigo-50/50 p-3\">\n              <div className=\"flex items-start gap-2\">\n                <Sparkles className=\"mt-0.5 h-4 w-4 text-indigo-500\" />\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs font-medium text-indigo-900\">\n                    Sugestão Menux\n                  </p>\n                  <p className=\"text-[11px] leading-relaxed text-indigo-700\">\n                    Baseado no histórico, o melhor horário para ligar para este\n                    cliente é entre <strong>14:00 e 16:00</strong>.\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Submit error */}\n          {submitError && (\n            <div className=\"rounded-lg border border-red-200 bg-red-50 px-3 py-2\">\n              <p className=\"text-xs text-red-700\">{submitError}</p>\n            </div>\n          )}\n        </form>\n      </div>\n\n      {/* Footer */}\n      <div className=\"mt-auto border-t border-zinc-100 bg-zinc-50/50 p-4 md:px-6 md:py-4\">\n        <div className=\"flex items-center justify-end gap-3\">\n          <Button variant=\"ghost\" onClick={onClose} disabled={isSaving}>\n            Cancelar\n          </Button>\n          <Button\n            type=\"submit\"\n            form=\"activity-form\"\n            className=\"min-w-[160px] bg-brand text-white hover:bg-brand/90\"\n            disabled={isSaving || saveSuccess || !isValid}\n          >\n            {isSaving ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Criando...\n              </>\n            ) : saveSuccess ? (\n              <>\n                <CheckCircle className=\"mr-2 h-4 w-4\" />\n                Criado!\n              </>\n            ) : (\n              \"Criar Atividade\"\n            )}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n\n  if (isDesktop) {\n    return (\n      <Dialog open={isOpen} onOpenChange={onClose}>\n        <DialogContent className=\"max-w-md gap-0 overflow-hidden border-0 p-0 shadow-2xl sm:max-w-xl\">\n          <DialogHeader className=\"border-b border-zinc-100 bg-white px-6 py-4\">\n            <DialogTitle className=\"flex items-center gap-2 font-heading text-lg font-semibold text-zinc-900\">\n              Nova Atividade\n            </DialogTitle>\n          </DialogHeader>\n          {Content}\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent\n        side=\"bottom\"\n        className=\"h-[90vh] gap-0 overflow-hidden rounded-t-[20px] p-0\"\n      >\n        <SheetHeader className=\"border-b border-zinc-100 bg-white px-4 py-3 text-left\">\n          <div className=\"flex items-center justify-between\">\n            <SheetTitle className=\"font-heading text-lg font-semibold text-zinc-900\">\n              Nova Atividade\n            </SheetTitle>\n            <button\n              onClick={onClose}\n              className=\"rounded-full p-2 hover:bg-zinc-100\"\n            >\n              <X className=\"h-5 w-5 text-zinc-500\" />\n            </button>\n          </div>\n        </SheetHeader>\n        {Content}\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3637, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/modals/new-opportunity-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Loader2 } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { InlineFeedback } from \"@/components/ui/inline-feedback\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { CurrencyInput } from \"@/components/ui/masked-inputs\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport { useNotificationStore } from \"@/stores/notification-store\";\nimport { mockUsers } from \"@/lib/mock-data\";\nimport type { PipelineStage } from \"@/types\";\nimport {\n  newOpportunitySchema,\n  type NewOpportunityFormData,\n} from \"@/lib/schemas\";\nimport { formatCurrencyBRL } from \"@/lib/business-rules\";\n\nconst ALLOWED_STAGES: PipelineStage[] = [\n  \"lead-in\",\n  \"contato-feito\",\n  \"reuniao-agendada\",\n  \"proposta-enviada\",\n  \"negociacao\",\n  \"fechamento\",\n];\n\nexport function NewOpportunityModal() {\n  const { drawerType, drawerData, closeDrawer } = useUIStore();\n  const { addOpportunity } = useOpportunityStore();\n  const { addNotification } = useNotificationStore();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [feedback, setFeedback] = useState<{type: \"success\" | \"error\", message: string} | null>(null);\n  const isOpen = drawerType === \"new-opportunity\";\n  const initialStage = ALLOWED_STAGES.includes(drawerData?.initialStage as PipelineStage)\n    ? (drawerData?.initialStage as PipelineStage)\n    : \"lead-in\";\n  const initialSource = typeof drawerData?.source === \"string\" ? drawerData.source : \"\";\n  const responsibleOptions = mockUsers.filter(\n    (mockUser) => mockUser.isActive && mockUser.role !== \"leitura\"\n  );\n  const responsibleNames = responsibleOptions.reduce<Record<string, string>>((acc, mockUser) => {\n    acc[mockUser.id] = mockUser.name;\n    return acc;\n  }, {});\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    watch,\n    reset,\n    formState: { errors },\n  } = useForm<NewOpportunityFormData>({\n    resolver: zodResolver(newOpportunitySchema),\n    defaultValues: {\n      temperature: \"warm\",\n      tags: [],\n      source: initialSource,\n    },\n  });\n  const sourceValue = watch(\"source\");\n\n  useEffect(() => {\n    if (!isOpen) return;\n    reset({\n      temperature: \"warm\",\n      tags: [],\n      source: initialSource,\n    });\n  }, [initialSource, isOpen, reset]);\n\n  async function onSubmit(data: NewOpportunityFormData) {\n    setIsSubmitting(true);\n    try {\n      addOpportunity({\n        title: data.title,\n        clientName: data.clientName,\n        value: data.value,\n        monthlyValue: data.monthlyValue || 0,\n        stage: initialStage,\n        temperature: data.temperature || \"warm\",\n        responsibleId: data.responsibleId,\n        responsibleName: responsibleNames[data.responsibleId] || \"Não atribuído\",\n        tags: data.tags || [],\n        source: data.source,\n        notes: data.notes,\n      });\n\n      addNotification({\n        type: \"system\",\n        title: \"Nova oportunidade criada\",\n        message: `\"${data.title}\" (${formatCurrencyBRL(data.value)}) foi adicionada ao pipeline.`,\n        link: \"/pipes\",\n      });\n\n      // Show inline feedback then auto-close\n      setFeedback({ type: \"success\", message: \"Oportunidade criada com sucesso!\" });\n      setTimeout(() => {\n        setFeedback(null);\n        reset({\n          temperature: \"warm\",\n          tags: [],\n          source: initialSource,\n        });\n        closeDrawer();\n      }, 1500);\n    } catch {\n      setFeedback({ type: \"error\", message: \"Erro ao criar oportunidade. Tente novamente.\" });\n    } finally {\n      setIsSubmitting(false);\n    }\n  }\n\n  return (\n    <Dialog\n      open={isOpen}\n      onOpenChange={() => {\n        setFeedback(null);\n        reset({\n          temperature: \"warm\",\n          tags: [],\n          source: initialSource,\n        });\n        closeDrawer();\n      }}\n    >\n      <DialogContent className=\"max-w-[480px] rounded-[20px] p-8\">\n        <DialogHeader>\n          <DialogTitle className=\"font-heading text-xl font-semibold text-black\">\n            Nova Oportunidade\n          </DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit(onSubmit)} className=\"mt-4 space-y-4\">\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">Título</Label>\n            <Input\n              placeholder=\"Nome da oportunidade\"\n              className=\"h-10 rounded-[15px] font-body text-sm\"\n              {...register(\"title\")}\n            />\n            {errors.title && (\n              <p className=\"text-xs text-status-danger\">\n                {errors.title.message}\n              </p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">Cliente</Label>\n            <Input\n              placeholder=\"Nome do cliente\"\n              className=\"h-10 rounded-[15px] font-body text-sm\"\n              {...register(\"clientName\")}\n            />\n            {errors.clientName && (\n              <p className=\"text-xs text-status-danger\">\n                {errors.clientName.message}\n              </p>\n            )}\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label className=\"font-body text-sm text-zinc-600\">\n                Valor Total (R$)\n              </Label>\n              <CurrencyInput\n                className=\"h-10 rounded-[15px] font-body text-sm\"\n                onValueChange={(v) => setValue(\"value\", v)}\n              />\n              {errors.value && (\n                <p className=\"text-xs text-status-danger\">\n                  {errors.value.message}\n                </p>\n              )}\n            </div>\n            <div className=\"space-y-2\">\n              <Label className=\"font-body text-sm text-zinc-600\">\n                Valor Mensal (R$)\n              </Label>\n              <CurrencyInput\n                className=\"h-10 rounded-[15px] font-body text-sm\"\n                onValueChange={(v) => setValue(\"monthlyValue\", v)}\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label className=\"font-body text-sm text-zinc-600\">\n                Temperatura\n              </Label>\n              <Select\n                defaultValue=\"warm\"\n                onValueChange={(v) =>\n                  setValue(\"temperature\", v as \"hot\" | \"warm\" | \"cold\")\n                }\n              >\n                <SelectTrigger className=\"h-10 rounded-[15px] font-body text-sm\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent className=\"rounded-[15px]\">\n                  <SelectItem value=\"hot\">Quente</SelectItem>\n                  <SelectItem value=\"warm\">Morna</SelectItem>\n                  <SelectItem value=\"cold\">Fria</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"space-y-2\">\n              <Label className=\"font-body text-sm text-zinc-600\">Origem</Label>\n              <Select\n                value={sourceValue || undefined}\n                onValueChange={(v) => setValue(\"source\", v)}\n              >\n                <SelectTrigger className=\"h-10 rounded-[15px] font-body text-sm\">\n                  <SelectValue placeholder={initialSource || \"Selecione\"} />\n                </SelectTrigger>\n                <SelectContent className=\"rounded-[15px]\">\n                  <SelectItem value=\"indicacao\">Indicação</SelectItem>\n                  <SelectItem value=\"site\">Site</SelectItem>\n                  <SelectItem value=\"rede-social\">Rede Social</SelectItem>\n                  <SelectItem value=\"cold-call\">Cold Call</SelectItem>\n                  <SelectItem value=\"evento\">Evento</SelectItem>\n                  <SelectItem value=\"outro\">Outro</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">\n              Responsável\n            </Label>\n            <Select onValueChange={(v) => setValue(\"responsibleId\", v)}>\n              <SelectTrigger className=\"h-10 rounded-[15px] font-body text-sm\">\n                <SelectValue placeholder=\"Selecione um responsável\" />\n              </SelectTrigger>\n              <SelectContent className=\"rounded-[15px]\">\n                {responsibleOptions.map((mockUser) => (\n                  <SelectItem key={mockUser.id} value={mockUser.id}>\n                    {mockUser.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            {errors.responsibleId && (\n              <p className=\"text-xs text-status-danger\">\n                {errors.responsibleId.message}\n              </p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">\n              Observações\n            </Label>\n            <Textarea\n              placeholder=\"Notas sobre a oportunidade...\"\n              className=\"rounded-[15px] font-body text-sm\"\n              rows={3}\n              {...register(\"notes\")}\n            />\n          </div>\n\n          {feedback && (\n            <InlineFeedback\n              type={feedback.type}\n              message={feedback.message}\n              onClose={() => setFeedback(null)}\n            />\n          )}\n\n          {/* Actions */}\n          <div className=\"flex justify-end gap-3 pt-2\">\n            <Button\n              type=\"button\"\n              variant=\"secondary\"\n              onClick={() => {\n                reset();\n                closeDrawer();\n              }}\n              className=\"rounded-full font-heading text-sm\"\n            >\n              Cancelar\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"rounded-full bg-black font-heading text-sm text-white hover:bg-zinc-800\"\n            >\n              {isSubmitting ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : null}\n              Criar oportunidade\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4278, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/modals/win-opportunity-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Loader2, Trophy } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { InlineFeedback } from \"@/components/ui/inline-feedback\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { CurrencyInput, IntegerInput } from \"@/components/ui/masked-inputs\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport { useClientStore } from \"@/stores/client-store\";\nimport { useNotificationStore } from \"@/stores/notification-store\";\nimport {\n  winOpportunitySchema,\n  type WinOpportunityFormData,\n} from \"@/lib/schemas\";\nimport {\n  calculateProjectedCommission,\n  formatCurrencyBRL,\n} from \"@/lib/business-rules\";\n\nexport function WinOpportunityModal() {\n  const { modalType, modalData, closeModal } = useUIStore();\n  const { winOpportunity, getById } = useOpportunityStore();\n  const { addClient } = useClientStore();\n  const { addNotification } = useNotificationStore();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [feedback, setFeedback] = useState<{type: \"success\" | \"error\", message: string} | null>(null);\n  const isOpen = modalType === \"win-opportunity\";\n  const opportunityId = modalData?.opportunityId as string | undefined;\n\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setValue,\n    formState: { errors },\n  } = useForm<WinOpportunityFormData>({\n    resolver: zodResolver(winOpportunitySchema),\n  });\n\n  async function onSubmit(data: WinOpportunityFormData) {\n    setIsSubmitting(true);\n    try {\n      calculateProjectedCommission(data.contractValue);\n      const opp = opportunityId ? getById(opportunityId) : null;\n\n      // 1. Mark opportunity as won\n      if (opportunityId) {\n        winOpportunity(opportunityId);\n      }\n\n      // 2. Create client in CS pipeline (Win → Client transition)\n      if (opp) {\n        addClient({\n          companyName: opp.clientName,\n          cnpj: \"\",\n          contactName: opp.clientName,\n          contactEmail: \"\",\n          contactPhone: \"\",\n          stage: \"onboarding\",\n          healthScore: \"good\",\n          monthlyRevenue: data.monthlyValue,\n          contractStart: data.contractStart,\n          contractEnd: undefined,\n          responsibleId: opp.responsibleId,\n          responsibleName: opp.responsibleName,\n          tags: opp.tags || [],\n          lastInteraction: new Date().toISOString().split(\"T\")[0],\n        });\n      }\n\n      // 3. Add notification\n      addNotification({\n        type: \"opportunity-won\",\n        title: \"Oportunidade ganha!\",\n        message: `\"${opp?.title || \"Oportunidade\"}\" foi marcada como ganha! Contrato: ${formatCurrencyBRL(data.contractValue)}. Cliente criado no pipeline de CS.`,\n        link: \"/clients\",\n      });\n\n      // 4. Show inline feedback then auto-close\n      setFeedback({ type: \"success\", message: \"Oportunidade marcada como Ganha!\" });\n      setTimeout(() => {\n        setFeedback(null);\n        reset();\n        closeModal();\n      }, 1500);\n    } catch {\n      setFeedback({ type: \"error\", message: \"Erro ao registrar ganho. Tente novamente.\" });\n    } finally {\n      setIsSubmitting(false);\n    }\n  }\n\n  return (\n    <Dialog\n      open={isOpen}\n      onOpenChange={() => {\n        setFeedback(null);\n        reset();\n        closeModal();\n      }}\n    >\n      <DialogContent className=\"max-w-[480px] rounded-[20px] p-8\">\n        <DialogHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-status-success-light\">\n              <Trophy className=\"h-5 w-5 text-status-success\" />\n            </div>\n            <DialogTitle className=\"font-heading text-xl font-semibold text-black\">\n              Marcar como Ganho\n            </DialogTitle>\n          </div>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit(onSubmit)} className=\"mt-4 space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label className=\"font-body text-sm text-zinc-600\">\n                Valor do Contrato (R$)\n              </Label>\n              <CurrencyInput\n                className=\"h-10 rounded-[15px] font-body text-sm\"\n                onValueChange={(v) => setValue(\"contractValue\", v)}\n              />\n              {errors.contractValue && (\n                <p className=\"text-xs text-status-danger\">\n                  {errors.contractValue.message}\n                </p>\n              )}\n            </div>\n            <div className=\"space-y-2\">\n              <Label className=\"font-body text-sm text-zinc-600\">\n                Valor Mensal (R$)\n              </Label>\n              <CurrencyInput\n                className=\"h-10 rounded-[15px] font-body text-sm\"\n                onValueChange={(v) => setValue(\"monthlyValue\", v)}\n              />\n              {errors.monthlyValue && (\n                <p className=\"text-xs text-status-danger\">\n                  {errors.monthlyValue.message}\n                </p>\n              )}\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label className=\"font-body text-sm text-zinc-600\">\n                Início do Contrato\n              </Label>\n              <Input\n                type=\"date\"\n                className=\"h-10 rounded-[15px] font-body text-sm\"\n                {...register(\"contractStart\")}\n              />\n              {errors.contractStart && (\n                <p className=\"text-xs text-status-danger\">\n                  {errors.contractStart.message}\n                </p>\n              )}\n            </div>\n            <div className=\"space-y-2\">\n              <Label className=\"font-body text-sm text-zinc-600\">\n                Prazo (meses)\n              </Label>\n              <IntegerInput\n                className=\"h-10 rounded-[15px] font-body text-sm\"\n                placeholder=\"12\"\n                onValueChange={(v) => setValue(\"contractMonths\", v)}\n              />\n              {errors.contractMonths && (\n                <p className=\"text-xs text-status-danger\">\n                  {errors.contractMonths.message}\n                </p>\n              )}\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">\n              Observações <span className=\"text-zinc-400\">(opcional)</span>\n            </Label>\n            <Textarea\n              placeholder=\"Detalhes do fechamento...\"\n              className=\"rounded-[15px] font-body text-sm\"\n              rows={3}\n              {...register(\"notes\")}\n            />\n          </div>\n\n          {feedback && (\n            <InlineFeedback\n              type={feedback.type}\n              message={feedback.message}\n              onClose={() => setFeedback(null)}\n            />\n          )}\n\n          <div className=\"flex justify-end gap-3 pt-2\">\n            <Button\n              type=\"button\"\n              variant=\"secondary\"\n              onClick={() => {\n                reset();\n                closeModal();\n              }}\n              className=\"rounded-full font-heading text-sm\"\n            >\n              Cancelar\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"rounded-full bg-status-success font-heading text-sm text-white hover:bg-status-success/90\"\n            >\n              {isSubmitting ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : null}\n              Confirmar Ganho\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4699, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/modals/lose-opportunity-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Loader2, XCircle } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { InlineFeedback } from \"@/components/ui/inline-feedback\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport { useNotificationStore } from \"@/stores/notification-store\";\nimport {\n  loseOpportunitySchema,\n  type LoseOpportunityFormData,\n} from \"@/lib/schemas\";\n\nconst reasonLabels: Record<string, string> = {\n  preco: \"Preço\",\n  concorrente: \"Concorrente\",\n  timing: \"Timing\",\n  \"sem-budget\": \"Sem budget\",\n  \"sem-necessidade\": \"Sem necessidade\",\n  \"sem-resposta\": \"Sem resposta\",\n  outro: \"Outro\",\n};\n\nexport function LoseOpportunityModal() {\n  const { modalType, modalData, closeModal } = useUIStore();\n  const { loseOpportunity, getById } = useOpportunityStore();\n  const { addNotification } = useNotificationStore();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [feedback, setFeedback] = useState<{type: \"success\" | \"error\", message: string} | null>(null);\n  const isOpen = modalType === \"lose-opportunity\";\n  const opportunityId = modalData?.opportunityId as string | undefined;\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    reset,\n    formState: { errors },\n  } = useForm<LoseOpportunityFormData>({\n    resolver: zodResolver(loseOpportunitySchema),\n  });\n\n  async function onSubmit(data: LoseOpportunityFormData) {\n    setIsSubmitting(true);\n    try {\n      if (opportunityId) {\n        const opp = getById(opportunityId);\n        loseOpportunity(opportunityId, data.reason, data.competitor, data.notes);\n\n        addNotification({\n          type: \"opportunity-lost\",\n          title: \"Oportunidade perdida\",\n          message: `A oportunidade \"${opp?.title || \"Sem título\"}\" foi marcada como perdida. Motivo: ${reasonLabels[data.reason] || data.reason}.`,\n          link: \"/pipes\",\n        });\n\n      }\n\n      // Show inline feedback then auto-close\n      setFeedback({ type: \"success\", message: \"Oportunidade marcada como Perdida.\" });\n      setTimeout(() => {\n        setFeedback(null);\n        reset();\n        closeModal();\n      }, 1500);\n    } catch {\n      setFeedback({ type: \"error\", message: \"Erro ao registrar perda. Tente novamente.\" });\n    } finally {\n      setIsSubmitting(false);\n    }\n  }\n\n  return (\n    <Dialog\n      open={isOpen}\n      onOpenChange={() => {\n        setFeedback(null);\n        reset();\n        closeModal();\n      }}\n    >\n      <DialogContent className=\"max-w-[440px] rounded-[20px] p-8\">\n        <DialogHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-status-danger-light\">\n              <XCircle className=\"h-5 w-5 text-status-danger\" />\n            </div>\n            <DialogTitle className=\"font-heading text-xl font-semibold text-black\">\n              Marcar como Perdido\n            </DialogTitle>\n          </div>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit(onSubmit)} className=\"mt-4 space-y-4\">\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">\n              Motivo da perda\n            </Label>\n            <Select onValueChange={(v) => setValue(\"reason\", v)}>\n              <SelectTrigger className=\"h-10 rounded-[15px] font-body text-sm\">\n                <SelectValue placeholder=\"Selecione o motivo\" />\n              </SelectTrigger>\n              <SelectContent className=\"rounded-[15px]\">\n                <SelectItem value=\"preco\">Preço</SelectItem>\n                <SelectItem value=\"concorrente\">Concorrente</SelectItem>\n                <SelectItem value=\"timing\">Timing</SelectItem>\n                <SelectItem value=\"sem-budget\">Sem budget</SelectItem>\n                <SelectItem value=\"sem-necessidade\">Sem necessidade</SelectItem>\n                <SelectItem value=\"sem-resposta\">Sem resposta</SelectItem>\n                <SelectItem value=\"outro\">Outro</SelectItem>\n              </SelectContent>\n            </Select>\n            {errors.reason && (\n              <p className=\"text-xs text-status-danger\">\n                {errors.reason.message}\n              </p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">\n              Concorrente <span className=\"text-zinc-400\">(opcional)</span>\n            </Label>\n            <Input\n              placeholder=\"Nome do concorrente\"\n              className=\"h-10 rounded-[15px] font-body text-sm\"\n              {...register(\"competitor\")}\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">\n              Observações <span className=\"text-zinc-400\">(opcional)</span>\n            </Label>\n            <Textarea\n              placeholder=\"Detalhes sobre a perda...\"\n              className=\"rounded-[15px] font-body text-sm\"\n              rows={3}\n              {...register(\"notes\")}\n            />\n          </div>\n\n          {feedback && (\n            <InlineFeedback\n              type={feedback.type}\n              message={feedback.message}\n              onClose={() => setFeedback(null)}\n            />\n          )}\n\n          <div className=\"flex justify-end gap-3 pt-2\">\n            <Button\n              type=\"button\"\n              variant=\"secondary\"\n              onClick={() => {\n                reset();\n                closeModal();\n              }}\n              className=\"rounded-full font-heading text-sm\"\n            >\n              Cancelar\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={isSubmitting}\n              variant=\"destructive\"\n              className=\"rounded-full font-heading text-sm\"\n            >\n              {isSubmitting ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : null}\n              Confirmar Perda\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5100, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/modals/invite-user-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Loader2, UserPlus } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { InlineFeedback } from \"@/components/ui/inline-feedback\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { useUserStore } from \"@/stores/user-store\";\nimport { inviteUserSchema, type InviteUserFormData } from \"@/lib/schemas\";\n\nconst unitLabels: Record<string, string> = {\n  \"1\": \"Matriz\",\n  \"2\": \"Filial SP\",\n};\n\nexport function InviteUserModal() {\n  const { modalType, closeModal } = useUIStore();\n  const { addUser } = useUserStore();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [feedback, setFeedback] = useState<{type: \"success\" | \"error\", message: string} | null>(null);\n  const isOpen = modalType === \"invite-user\";\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    reset,\n    formState: { errors },\n  } = useForm<InviteUserFormData>({\n    resolver: zodResolver(inviteUserSchema),\n  });\n\n  async function onSubmit(data: InviteUserFormData) {\n    setIsSubmitting(true);\n    try {\n      // Add user to the store\n      addUser({\n        name: data.email.split(\"@\")[0],\n        email: data.email,\n        role: data.role as \"admin\" | \"comercial\" | \"cs\" | \"leitura\",\n        isActive: true,\n        unitId: `unit-${data.unitId}`,\n        unitName: unitLabels[data.unitId] || \"Matriz\",\n      });\n\n      // Show inline feedback then auto-close\n      setFeedback({ type: \"success\", message: \"Convite enviado com sucesso!\" });\n      setTimeout(() => {\n        setFeedback(null);\n        reset();\n        closeModal();\n      }, 1500);\n    } catch {\n      setFeedback({ type: \"error\", message: \"Erro ao enviar convite. Tente novamente.\" });\n    } finally {\n      setIsSubmitting(false);\n    }\n  }\n\n  return (\n    <Dialog\n      open={isOpen}\n      onOpenChange={() => {\n        setFeedback(null);\n        reset();\n        closeModal();\n      }}\n    >\n      <DialogContent className=\"max-w-[440px] rounded-[20px] p-8\">\n        <DialogHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-brand-light\">\n              <UserPlus className=\"h-5 w-5 text-brand\" />\n            </div>\n            <DialogTitle className=\"font-heading text-xl font-semibold text-black\">\n              Convidar Usuário\n            </DialogTitle>\n          </div>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit(onSubmit)} className=\"mt-4 space-y-4\">\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">E-mail</Label>\n            <Input\n              type=\"email\"\n              placeholder=\"email@empresa.com\"\n              className=\"h-10 rounded-[15px] font-body text-sm\"\n              {...register(\"email\")}\n            />\n            {errors.email && (\n              <p className=\"text-xs text-status-danger\">\n                {errors.email.message}\n              </p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">Papel</Label>\n            <Select onValueChange={(v) => setValue(\"role\", v as InviteUserFormData[\"role\"])}>\n              <SelectTrigger className=\"h-10 rounded-[15px] font-body text-sm\">\n                <SelectValue placeholder=\"Selecione o papel\" />\n              </SelectTrigger>\n              <SelectContent className=\"rounded-[15px]\">\n                <SelectItem value=\"admin\">Admin</SelectItem>\n                <SelectItem value=\"comercial\">Comercial</SelectItem>\n                <SelectItem value=\"cs\">CS (Customer Success)</SelectItem>\n                <SelectItem value=\"leitura\">Somente Leitura</SelectItem>\n              </SelectContent>\n            </Select>\n            {errors.role && (\n              <p className=\"text-xs text-status-danger\">\n                {errors.role.message}\n              </p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"font-body text-sm text-zinc-600\">Unidade</Label>\n            <Select onValueChange={(v) => setValue(\"unitId\", v)}>\n              <SelectTrigger className=\"h-10 rounded-[15px] font-body text-sm\">\n                <SelectValue placeholder=\"Selecione a unidade\" />\n              </SelectTrigger>\n              <SelectContent className=\"rounded-[15px]\">\n                <SelectItem value=\"1\">Matriz</SelectItem>\n                <SelectItem value=\"2\">Filial SP</SelectItem>\n              </SelectContent>\n            </Select>\n            {errors.unitId && (\n              <p className=\"text-xs text-status-danger\">\n                {errors.unitId.message}\n              </p>\n            )}\n          </div>\n\n          {feedback && (\n            <InlineFeedback\n              type={feedback.type}\n              message={feedback.message}\n              onClose={() => setFeedback(null)}\n            />\n          )}\n\n          <div className=\"flex justify-end gap-3 pt-2\">\n            <Button\n              type=\"button\"\n              variant=\"secondary\"\n              onClick={() => {\n                reset();\n                closeModal();\n              }}\n              className=\"rounded-full font-heading text-sm\"\n            >\n              Cancelar\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"rounded-full bg-black font-heading text-sm text-white hover:bg-zinc-800\"\n            >\n              {isSubmitting ? (\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              ) : null}\n              Enviar convite\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5499, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/modals/confirm-delete-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { AlertTriangle, Loader2 } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { InlineFeedback } from \"@/components/ui/inline-feedback\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { useUIStore } from \"@/stores/ui-store\";\n\nexport function ConfirmDeleteModal() {\n  const { modalType, modalData, closeModal } = useUIStore();\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [feedback, setFeedback] = useState<{type: \"error\", message: string} | null>(null);\n  const isOpen = modalType === \"confirm-delete\";\n\n  const description =\n    (modalData?.description as string) ||\n    \"Esta ação não pode ser desfeita. O item será removido permanentemente.\";\n\n  return (\n    <Dialog open={isOpen} onOpenChange={() => { setFeedback(null); closeModal(); }}>\n      <DialogContent className=\"max-w-[400px] rounded-[20px] p-8\">\n        <DialogHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-red-50\">\n              <AlertTriangle className=\"h-5 w-5 text-status-danger\" />\n            </div>\n            <DialogTitle className=\"font-heading text-xl font-semibold text-black\">\n              Tem certeza?\n            </DialogTitle>\n          </div>\n          <DialogDescription className=\"mt-3 font-body text-sm text-zinc-500\">\n            {description}\n          </DialogDescription>\n        </DialogHeader>\n\n        {feedback && (\n          <InlineFeedback\n            type={feedback.type}\n            message={feedback.message}\n            onClose={() => setFeedback(null)}\n          />\n        )}\n\n        <DialogFooter className=\"mt-4\">\n          <Button\n            type=\"button\"\n            variant=\"secondary\"\n            onClick={() => closeModal()}\n            disabled={isDeleting}\n            className=\"rounded-full font-heading text-sm\"\n          >\n            Cancelar\n          </Button>\n          <Button\n            type=\"button\"\n            onClick={async () => {\n              setIsDeleting(true);\n              try {\n                // Execute delete callback if provided\n                if (modalData?.onConfirm && typeof modalData.onConfirm === \"function\") {\n                  await Promise.resolve((modalData.onConfirm as () => void | Promise<void>)());\n                }\n                closeModal();\n              } catch {\n                setFeedback({ type: \"error\", message: \"Erro ao excluir. Tente novamente.\" });\n              } finally {\n                setIsDeleting(false);\n              }\n            }}\n            disabled={isDeleting}\n            className=\"rounded-full bg-status-danger font-heading text-sm text-white hover:bg-red-700\"\n          >\n            {isDeleting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n            {isDeleting ? \"Excluindo...\" : \"Excluir\"}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AAQA;AAdA;;;;;;;;AAgBO,SAAS;IACd,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,IAAA,0IAAU;IACvD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAA0C;IAClF,MAAM,SAAS,cAAc;IAE7B,MAAM,cACJ,AAAC,WAAW,eACZ;IAEF,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAQ,cAAc;YAAQ,YAAY;YAAO;QAAc;kBAC3E,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACvB,8OAAC,kJAAY;;sCACX,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,yOAAa;wCAAC,WAAU;;;;;;;;;;;8CAE3B,8OAAC,iJAAW;oCAAC,WAAU;8CAAgD;;;;;;;;;;;;sCAIzE,8OAAC,uJAAiB;4BAAC,WAAU;sCAC1B;;;;;;;;;;;;gBAIJ,0BACC,8OAAC,gKAAc;oBACb,MAAM,SAAS,IAAI;oBACnB,SAAS,SAAS,OAAO;oBACzB,SAAS,IAAM,YAAY;;;;;;8BAI/B,8OAAC,kJAAY;oBAAC,WAAU;;sCACtB,8OAAC,4IAAM;4BACL,MAAK;4BACL,SAAQ;4BACR,SAAS,IAAM;4BACf,UAAU;4BACV,WAAU;sCACX;;;;;;sCAGD,8OAAC,4IAAM;4BACL,MAAK;4BACL,SAAS;gCACP,cAAc;gCACd,IAAI;oCACF,sCAAsC;oCACtC,IAAI,WAAW,aAAa,OAAO,UAAU,SAAS,KAAK,YAAY;wCACrE,MAAM,QAAQ,OAAO,CAAC,AAAC,UAAU,SAAS;oCAC5C;oCACA;gCACF,EAAE,OAAM;oCACN,YAAY;wCAAE,MAAM;wCAAS,SAAS;oCAAoC;gCAC5E,SAAU;oCACR,cAAc;gCAChB;4BACF;4BACA,UAAU;4BACV,WAAU;;gCAET,4BAAc,8OAAC,4NAAO;oCAAC,WAAU;;;;;;gCACjC,aAAa,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;AAM3C"}},
    {"offset": {"line": 5663, "column": 0}, "map": {"version":3,"sources":["file:///Users/fernandocalado/Desktop/menux-flow/src/components/modals/confirm-deactivate-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { AlertTriangle, Loader2 } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { InlineFeedback } from \"@/components/ui/inline-feedback\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { useUIStore } from \"@/stores/ui-store\";\n\nexport function ConfirmDeactivateModal() {\n  const { modalType, modalData, closeModal } = useUIStore();\n  const [isDeactivating, setIsDeactivating] = useState(false);\n  const [feedback, setFeedback] = useState<{type: \"error\", message: string} | null>(null);\n  const isOpen = modalType === \"confirm-deactivate\";\n\n  const description =\n    (modalData?.description as string) ||\n    \"O usuário perderá acesso ao sistema. Você poderá reativá-lo posteriormente.\";\n\n  return (\n    <Dialog open={isOpen} onOpenChange={() => { setFeedback(null); closeModal(); }}>\n      <DialogContent className=\"max-w-[400px] rounded-[20px] p-8\">\n        <DialogHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-amber-50\">\n              <AlertTriangle className=\"h-5 w-5 text-status-warning\" />\n            </div>\n            <DialogTitle className=\"font-heading text-xl font-semibold text-black\">\n              Desativar usuário?\n            </DialogTitle>\n          </div>\n          <DialogDescription className=\"mt-3 font-body text-sm text-zinc-500\">\n            {description}\n          </DialogDescription>\n        </DialogHeader>\n\n        {feedback && (\n          <InlineFeedback\n            type={feedback.type}\n            message={feedback.message}\n            onClose={() => setFeedback(null)}\n          />\n        )}\n\n        <DialogFooter className=\"mt-4\">\n          <Button\n            type=\"button\"\n            variant=\"secondary\"\n            onClick={() => closeModal()}\n            disabled={isDeactivating}\n            className=\"rounded-full font-heading text-sm\"\n          >\n            Cancelar\n          </Button>\n          <Button\n            type=\"button\"\n            onClick={async () => {\n              setIsDeactivating(true);\n              try {\n                if (modalData?.onConfirm && typeof modalData.onConfirm === \"function\") {\n                  await Promise.resolve((modalData.onConfirm as () => void | Promise<void>)());\n                }\n                closeModal();\n              } catch {\n                setFeedback({ type: \"error\", message: \"Erro ao desativar. Tente novamente.\" });\n              } finally {\n                setIsDeactivating(false);\n              }\n            }}\n            disabled={isDeactivating}\n            className=\"rounded-full bg-status-warning font-heading text-sm text-white hover:bg-amber-600\"\n          >\n            {isDeactivating && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n            {isDeactivating ? \"Desativando...\" : \"Desativar\"}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AAQA;AAdA;;;;;;;;AAgBO,SAAS;IACd,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,IAAA,0IAAU;IACvD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAA0C;IAClF,MAAM,SAAS,cAAc;IAE7B,MAAM,cACJ,AAAC,WAAW,eACZ;IAEF,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAQ,cAAc;YAAQ,YAAY;YAAO;QAAc;kBAC3E,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACvB,8OAAC,kJAAY;;sCACX,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,yOAAa;wCAAC,WAAU;;;;;;;;;;;8CAE3B,8OAAC,iJAAW;oCAAC,WAAU;8CAAgD;;;;;;;;;;;;sCAIzE,8OAAC,uJAAiB;4BAAC,WAAU;sCAC1B;;;;;;;;;;;;gBAIJ,0BACC,8OAAC,gKAAc;oBACb,MAAM,SAAS,IAAI;oBACnB,SAAS,SAAS,OAAO;oBACzB,SAAS,IAAM,YAAY;;;;;;8BAI/B,8OAAC,kJAAY;oBAAC,WAAU;;sCACtB,8OAAC,4IAAM;4BACL,MAAK;4BACL,SAAQ;4BACR,SAAS,IAAM;4BACf,UAAU;4BACV,WAAU;sCACX;;;;;;sCAGD,8OAAC,4IAAM;4BACL,MAAK;4BACL,SAAS;gCACP,kBAAkB;gCAClB,IAAI;oCACF,IAAI,WAAW,aAAa,OAAO,UAAU,SAAS,KAAK,YAAY;wCACrE,MAAM,QAAQ,OAAO,CAAC,AAAC,UAAU,SAAS;oCAC5C;oCACA;gCACF,EAAE,OAAM;oCACN,YAAY;wCAAE,MAAM;wCAAS,SAAS;oCAAsC;gCAC9E,SAAU;oCACR,kBAAkB;gCACpB;4BACF;4BACA,UAAU;4BACV,WAAU;;gCAET,gCAAkB,8OAAC,4NAAO;oCAAC,WAAU;;;;;;gCACrC,iBAAiB,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;;AAMjD"}}]
}
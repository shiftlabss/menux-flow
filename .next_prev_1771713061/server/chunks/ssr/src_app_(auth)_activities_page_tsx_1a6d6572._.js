module.exports=[82952,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(12412),e=a.i(73570),f=a.i(32860),g=a.i(82434),h=a.i(49363),i=a.i(60702),j=a.i(33441),k=a.i(67453),l=a.i(13749),m=a.i(50522),n=a.i(5784),o=a.i(67552),p=a.i(95174),p=p,q=a.i(70106);let r=(0,q.default)("circle-dashed",[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]]);var s=a.i(5151),t=a.i(69012),u=a.i(67329),v=a.i(96221),w=a.i(15618),x=a.i(87532),y=a.i(8406);let z=(0,q.default)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var A=a.i(62722),B=a.i(38246),C=a.i(50944),D=a.i(62036),E=a.i(46271),F=a.i(35112);function G(a,b,c){let d,e=c.initialDeps??[],f=!0;function g(){var g,h,i;let j,k;c.key&&(null==(g=c.debug)?void 0:g.call(c))&&(j=Date.now());let l=a();if(!(l.length!==e.length||l.some((a,b)=>e[b]!==a)))return d;if(e=l,c.key&&(null==(h=c.debug)?void 0:h.call(c))&&(k=Date.now()),d=b(...l),c.key&&(null==(i=c.debug)?void 0:i.call(c))){let a=Math.round((Date.now()-j)*100)/100,b=Math.round((Date.now()-k)*100)/100,d=b/16,e=(a,b)=>{for(a=String(a);a.length<b;)a=" "+a;return a};console.info(`%c⏱ ${e(b,5)} /${e(a,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,null==c?void 0:c.key)}return(null==c?void 0:c.onChange)&&!(f&&c.skipInitialOnChange)&&c.onChange(d),f=!1,d}return g.updateDeps=a=>{e=a},g}function H(a,b){if(void 0!==a)return a;throw Error(`Unexpected undefined${b?`: ${b}`:""}`)}let I=a=>{let{offsetWidth:b,offsetHeight:c}=a;return{width:b,height:c}},J=a=>a,K=a=>{let b=Math.max(a.startIndex-a.overscan,0),c=Math.min(a.endIndex+a.overscan,a.count-1),d=[];for(let a=b;a<=c;a++)d.push(a);return d},L=(a,b)=>{let c=a.scrollElement;if(!c)return;let d=a.targetWindow;if(!d)return;let e=a=>{let{width:c,height:d}=a;b({width:Math.round(c),height:Math.round(d)})};if(e(I(c)),!d.ResizeObserver)return()=>{};let f=new d.ResizeObserver(b=>{let d=()=>{let a=b[0];if(null==a?void 0:a.borderBoxSize){let b=a.borderBoxSize[0];if(b)return void e({width:b.inlineSize,height:b.blockSize})}e(I(c))};a.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()});return f.observe(c,{box:"border-box"}),()=>{f.unobserve(c)}},M={passive:!0},N=(a,b)=>{var c,d;let e,f=a.scrollElement;if(!f)return;let g=a.targetWindow;if(!g)return;let h=0,i=a.options.useScrollendEvent&&1?()=>void 0:(c=()=>{b(h,!1)},d=a.options.isScrollingResetDelay,function(...a){g.clearTimeout(e),e=g.setTimeout(()=>c.apply(this,a),d)}),j=c=>()=>{let{horizontal:d,isRtl:e}=a.options;h=d?f.scrollLeft*(e&&-1||1):f.scrollTop,i(),b(h,c)},k=j(!0),l=j(!1);f.addEventListener("scroll",k,M);let m=a.options.useScrollendEvent&&!0;return m&&f.addEventListener("scrollend",l,M),()=>{f.removeEventListener("scroll",k),m&&f.removeEventListener("scrollend",l)}},O=(a,b,c)=>{if(null==b?void 0:b.borderBoxSize){let a=b.borderBoxSize[0];if(a)return Math.round(a[c.options.horizontal?"inlineSize":"blockSize"])}return a[c.options.horizontal?"offsetWidth":"offsetHeight"]},P=(a,{adjustments:b=0,behavior:c},d)=>{var e,f;null==(f=null==(e=d.scrollElement)?void 0:e.scrollTo)||f.call(e,{[d.options.horizontal?"left":"top"]:a+b,behavior:c})};class Q{constructor(a){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let a=null,b=()=>a||(this.targetWindow&&this.targetWindow.ResizeObserver?a=new this.targetWindow.ResizeObserver(a=>{a.forEach(a=>{let b=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(b):b()})}):null);return{disconnect:()=>{var c;null==(c=b())||c.disconnect(),a=null},observe:a=>{var c;return null==(c=b())?void 0:c.observe(a,{box:"border-box"})},unobserve:a=>{var c;return null==(c=b())?void 0:c.unobserve(a)}}})(),this.range=null,this.setOptions=a=>{Object.entries(a).forEach(([b,c])=>{void 0===c&&delete a[b]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:J,rangeExtractor:K,onChange:()=>{},measureElement:O,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...a}},this.notify=a=>{var b,c;null==(c=(b=this.options).onChange)||c.call(b,this,a)},this.maybeNotify=G(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),a=>{this.notify(a)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(a=>a()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var a;let b=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==b){if(this.cleanup(),!b)return void this.maybeNotify();this.scrollElement=b,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(a=this.scrollElement)?void 0:a.window)??null,this.elementsCache.forEach(a=>{this.observer.observe(a)}),this.unsubs.push(this.options.observeElementRect(this,a=>{this.scrollRect=a,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(a,b)=>{this.scrollAdjustments=0,this.scrollDirection=b?this.getScrollOffset()<a?"forward":"backward":null,this.scrollOffset=a,this.isScrolling=b,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(a,b)=>{let c=new Map,d=new Map;for(let e=b-1;e>=0;e--){let b=a[e];if(c.has(b.lane))continue;let f=d.get(b.lane);if(null==f||b.end>f.end?d.set(b.lane,b):b.end<f.end&&c.set(b.lane,!0),c.size===this.options.lanes)break}return d.size===this.options.lanes?Array.from(d.values()).sort((a,b)=>a.end===b.end?a.index-b.index:a.end-b.end)[0]:void 0},this.getMeasurementOptions=G(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(a,b,c,d,e,f)=>(void 0!==this.prevLanes&&this.prevLanes!==f&&(this.lanesChangedFlag=!0),this.prevLanes=f,this.pendingMeasuredCacheIndexes=[],{count:a,paddingStart:b,scrollMargin:c,getItemKey:d,enabled:e,lanes:f}),{key:!1}),this.getMeasurements=G(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:a,paddingStart:b,scrollMargin:c,getItemKey:d,enabled:e,lanes:f},g)=>{if(!e)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>a)for(let b of this.laneAssignments.keys())b>=a&&this.laneAssignments.delete(b);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),0!==this.measurementsCache.length||this.lanesSettling||(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(a=>{this.itemSizeCache.set(a.key,a.size)}));let h=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===a&&(this.lanesSettling=!1);let i=this.measurementsCache.slice(0,h),j=Array(f).fill(void 0);for(let a=0;a<h;a++){let b=i[a];b&&(j[b.lane]=a)}for(let e=h;e<a;e++){let a,f,h=d(e),k=this.laneAssignments.get(e);if(void 0!==k&&this.options.lanes>1){let d=j[a=k],e=void 0!==d?i[d]:void 0;f=e?e.end+this.options.gap:b+c}else{let d=1===this.options.lanes?i[e-1]:this.getFurthestMeasurement(i,e);f=d?d.end+this.options.gap:b+c,a=d?d.lane:e%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(e,a)}let l=g.get(h),m="number"==typeof l?l:this.options.estimateSize(e),n=f+m;i[e]={index:e,start:f,size:m,end:n,key:h,lane:a},j[a]=e}return this.measurementsCache=i,i},{key:!1,debug:()=>this.options.debug}),this.calculateRange=G(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(a,b,c,d)=>this.range=a.length>0&&b>0?function({measurements:a,outerSize:b,scrollOffset:c,lanes:d}){let e=a.length-1;if(a.length<=d)return{startIndex:0,endIndex:e};let f=R(0,e,b=>a[b].start,c),g=f;if(1===d)for(;g<e&&a[g].end<c+b;)g++;else if(d>1){let h=Array(d).fill(0);for(;g<e&&h.some(a=>a<c+b);){let b=a[g];h[b.lane]=b.end,g++}let i=Array(d).fill(c+b);for(;f>=0&&i.some(a=>a>=c);){let b=a[f];i[b.lane]=b.start,f--}f=Math.max(0,f-f%d),g=Math.min(e,g+(d-1-g%d))}return{startIndex:f,endIndex:g}}({measurements:a,outerSize:b,scrollOffset:c,lanes:d}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=G(()=>{let a=null,b=null,c=this.calculateRange();return c&&(a=c.startIndex,b=c.endIndex),this.maybeNotify.updateDeps([this.isScrolling,a,b]),[this.options.rangeExtractor,this.options.overscan,this.options.count,a,b]},(a,b,c,d,e)=>null===d||null===e?[]:a({startIndex:d,endIndex:e,overscan:b,count:c}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=a=>{let b=this.options.indexAttribute,c=a.getAttribute(b);return c?parseInt(c,10):(console.warn(`Missing attribute name '${b}={index}' on measured element.`),-1)},this._measureElement=(a,b)=>{let c=this.indexFromElement(a),d=this.measurementsCache[c];if(!d)return;let e=d.key,f=this.elementsCache.get(e);f!==a&&(f&&this.observer.unobserve(f),this.observer.observe(a),this.elementsCache.set(e,a)),a.isConnected&&this.resizeItem(c,this.options.measureElement(a,b,this))},this.resizeItem=(a,b)=>{let c=this.measurementsCache[a];if(!c)return;let d=b-(this.itemSizeCache.get(c.key)??c.size);0!==d&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(c,d,this):c.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=d,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(c.index),this.itemSizeCache=new Map(this.itemSizeCache.set(c.key,b)),this.notify(!1))},this.measureElement=a=>{a?this._measureElement(a,void 0):this.elementsCache.forEach((a,b)=>{a.isConnected||(this.observer.unobserve(a),this.elementsCache.delete(b))})},this.getVirtualItems=G(()=>[this.getVirtualIndexes(),this.getMeasurements()],(a,b)=>{let c=[];for(let d=0,e=a.length;d<e;d++){let e=b[a[d]];c.push(e)}return c},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=a=>{let b=this.getMeasurements();if(0!==b.length)return H(b[R(0,b.length-1,a=>H(b[a]).start,a)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{let a=this.scrollElement.document.documentElement;return this.options.horizontal?a.scrollWidth-this.scrollElement.innerWidth:a.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(a,b,c=0)=>{if(!this.scrollElement)return 0;let d=this.getSize(),e=this.getScrollOffset();return"auto"===b&&(b=a>=e+d?"end":"start"),"center"===b?a+=(c-d)/2:"end"===b&&(a-=d),Math.max(Math.min(this.getMaxScrollOffset(),a),0)},this.getOffsetForIndex=(a,b="auto")=>{a=Math.max(0,Math.min(a,this.options.count-1));let c=this.measurementsCache[a];if(!c)return;let d=this.getSize(),e=this.getScrollOffset();if("auto"===b)if(c.end>=e+d-this.options.scrollPaddingEnd)b="end";else{if(!(c.start<=e+this.options.scrollPaddingStart))return[e,b];b="start"}if("end"===b&&a===this.options.count-1)return[this.getMaxScrollOffset(),b];let f="end"===b?c.end+this.options.scrollPaddingEnd:c.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(f,b,c.size),b]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(a,{align:b="start",behavior:c}={})=>{"smooth"===c&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(a,b),{adjustments:void 0,behavior:c})},this.scrollToIndex=(a,{align:b="auto",behavior:c}={})=>{"smooth"===c&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),a=Math.max(0,Math.min(a,this.options.count-1)),this.currentScrollToIndex=a;let d=0,e=b=>{if(!this.targetWindow)return;let d=this.getOffsetForIndex(a,b);if(!d)return void console.warn("Failed to get offset for index:",a);let[e,g]=d;this._scrollToOffset(e,{adjustments:void 0,behavior:c}),this.targetWindow.requestAnimationFrame(()=>{let b=()=>{if(this.currentScrollToIndex!==a)return;let b=this.getScrollOffset(),c=this.getOffsetForIndex(a,g);c?1.01>Math.abs(c[0]-b)||f(g):console.warn("Failed to get offset for index:",a)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(b):b()})},f=b=>{this.targetWindow&&this.currentScrollToIndex===a&&(++d<10?this.targetWindow.requestAnimationFrame(()=>e(b)):console.warn(`Failed to scroll to index ${a} after 10 attempts.`))};e(b)},this.scrollBy=(a,{behavior:b}={})=>{"smooth"===b&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+a,{adjustments:void 0,behavior:b})},this.getTotalSize=()=>{var a;let b,c=this.getMeasurements();if(0===c.length)b=this.options.paddingStart;else if(1===this.options.lanes)b=(null==(a=c[c.length-1])?void 0:a.end)??0;else{let a=Array(this.options.lanes).fill(null),d=c.length-1;for(;d>=0&&a.some(a=>null===a);){let b=c[d];null===a[b.lane]&&(a[b.lane]=b.end),d--}b=Math.max(...a.filter(a=>null!==a))}return Math.max(b-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(a,{adjustments:b,behavior:c})=>{this.options.scrollToFn(a,{behavior:c,adjustments:b},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(a)}}let R=(a,b,c,d)=>{for(;a<=b;){let e=(a+b)/2|0,f=c(e);if(f<d)a=e+1;else{if(!(f>d))return e;b=e-1}}return a>0?a-1:0},S="u">typeof document?c.useLayoutEffect:c.useEffect;var T=a.i(30455),U=a.i(81584),V=a.i(66206),W=a.i(63519),X=a.i(92258),Y=a.i(41675),Z=a.i(87534),$=a.i(87654),_=a.i(45222),aa=a.i(24987),ab=a.i(41710),ac=a.i(92e3);let ad={call:W.Phone,email:X.Mail,meeting:Y.Calendar,visit:aa.MapPin,task:Z.CheckSquare,"follow-up":$.RotateCcw,whatsapp:_.MessageCircle},ae={call:"Ligação",email:"E-mail",meeting:"Reunião",visit:"Visita",task:"Tarefa","follow-up":"Follow-up",whatsapp:"WhatsApp"},af={call:{bg:"bg-blue-100",text:"text-blue-600"},email:{bg:"bg-amber-100",text:"text-amber-600"},meeting:{bg:"bg-purple-100",text:"text-purple-600"},visit:{bg:"bg-indigo-100",text:"text-indigo-600"},task:{bg:"bg-emerald-100",text:"text-emerald-600"},"follow-up":{bg:"bg-orange-100",text:"text-orange-600"},whatsapp:{bg:"bg-green-100",text:"text-green-600"}},ag=["call","email","meeting","visit","task","follow-up","whatsapp"];ab.Clock,k.CheckCircle2,ac.AlertCircle,A.XCircle;var ah=a.i(99570),ai=a.i(14574);function aj({open:a,onOpenChange:d,title:e,description:f,content:g}){let[h,i]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),m=async()=>{try{await navigator.clipboard.writeText(g),i(!0),l(null),setTimeout(()=>i(!1),2e3)}catch{l("Não foi possível copiar agora. Tente novamente.")}};return(0,b.jsx)(ai.Dialog,{open:a,onOpenChange:a=>{a&&(i(!1),l(null)),d(a)},children:(0,b.jsxs)(ai.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(ai.DialogHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-violet-100 text-violet-600",children:(0,b.jsx)(y.Sparkles,{className:"h-4 w-4"})}),(0,b.jsx)(ai.DialogTitle,{children:e})]}),f&&(0,b.jsx)(ai.DialogDescription,{children:f})]}),(0,b.jsxs)("div",{className:"relative mt-2 rounded-md border border-zinc-200 bg-zinc-50 p-4",children:[(0,b.jsx)("pre",{className:"whitespace-pre-wrap font-sans text-sm text-zinc-700",children:g}),(0,b.jsx)(ah.Button,{size:"icon",variant:"ghost",className:"absolute right-2 top-2 h-8 w-8 text-zinc-500 hover:text-zinc-900",onClick:m,children:h?(0,b.jsx)(j.Check,{className:"h-4 w-4 text-emerald-500"}):(0,b.jsx)(s.Copy,{className:"h-4 w-4"})})]}),k?(0,b.jsx)("p",{className:"mt-2 text-xs text-red-600",children:k}):null,(0,b.jsxs)(ai.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,b.jsx)(ai.DialogClose,{asChild:!0,children:(0,b.jsx)(ah.Button,{variant:"outline",children:"Fechar"})}),(0,b.jsxs)(ah.Button,{onClick:m,className:"gap-2",children:[h?(0,b.jsx)(j.Check,{className:"h-4 w-4"}):(0,b.jsx)(s.Copy,{className:"h-4 w-4"}),h?"Copiado":"Copiar conteúdo"]})]})]})})}var ak=a.i(31791);function al(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())}function am(a){let[b,c,d]=a.split("-").map(Number);return new Date(b,c-1,d)}function an(a){let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}-${c}-${d}`}function ao(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+b)}function ap(a){return new Date(a.getFullYear(),a.getMonth(),1)}function aq(a){return am(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}function ar(a){return am(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})}function as(a,b){return(0,ak.isActivityOverdueAt)(a,b)}function at(a,b){return(0,ak.isActivitySlaRiskAt)(a,b)}function au(a,b){let c=al(am(a.dueDate)),d=al(b),e=Math.floor((c.getTime()-d.getTime())/864e5);if(as(a,b)){if(0===e)return a.dueTime?`Atrasada desde ${a.dueTime}`:"Atrasada hoje";var f=Math.max(1,Math.abs(e));if(f<=0)return"";if(1===f)return"1 dia de atraso";if(f<7)return`${f} dias de atraso`;if(f<30){let a=Math.floor(f/7);return 1===a?"1 semana de atraso":`${a} semanas de atraso`}let b=Math.floor(f/30);return 1===b?"1 mês de atraso":`${b} meses de atraso`}return 0===e?a.dueTime?`Hoje \xb7 ${a.dueTime}`:"Hoje":1===e?"Amanhã":e<=7?`Em ${e} dias`:ar(a.dueDate)}function av(a,b){if("completed"===a.status)return{label:"Concluída",className:"bg-status-success-light text-status-success border-status-success/20"};if("cancelled"===a.status)return{label:"Cancelada",className:"bg-zinc-100 text-zinc-500 border-zinc-200"};if(as(a,b))return{label:"Atrasada",className:"bg-status-danger-light text-status-danger border-status-danger/20"};let c=al(am(a.dueDate)),d=al(b);return c.getTime()===d.getTime()?{label:"Hoje",className:"bg-status-warning-light text-status-warning border-status-warning/25"}:{label:"Pendente",className:"bg-status-info-light text-status-info border-status-info/20"}}function aw(a,b){let c=a.clientName||a.opportunityTitle||"o cliente",d=as(a,b);return{message:"email"===a.type?`Ol\xe1! Revendo nossa agenda, gostaria de avan\xe7ar o pr\xf3ximo passo com ${c}. Podemos alinhar ainda hoje?`:"meeting"===a.type?`Perfeito, vamos alinhar os pontos cr\xedticos de ${c} e sair com decis\xe3o clara no final da reuni\xe3o.`:`Oi! Passando para mantermos ${c} em ritmo ${d?"urgente":"prioritária"}. Voc\xea consegue me confirmar o melhor hor\xe1rio para avan\xe7armos?`,nextStep:"task"===a.type?"Feche esta tarefa e transforme em contato ativo com data definida.":"Registrar compromisso com data/horário e responsável antes de encerrar.",risk:d?`Se ignorar, ${c} pode perder prioridade e aumentar risco de churn.`:`Se ignorar, ${c} perde cad\xeancia e pode esfriar o ciclo de decis\xe3o.`}}var ax=a.i(72233),ay=a.i(86304),az=a.i(15055),aA=a.i(66718),aB=a.i(70430),aC=a.i(99209),aD=a.i(86192),aE=a.i(5084),aF=a.i(33140),aG=a.i(55376),aH=a.i(68114);let aI=[{value:"pending",label:"Pendente"},{value:"overdue",label:"Atrasada"},{value:"completed",label:"Concluída"},{value:"cancelled",label:"Cancelada"}],aJ=new Set(["pending","overdue"]),aK=[{value:"all",label:"Todos"},{value:"breached",label:"Estourado"},{value:"risk",label:"Em risco"}],aL=aI.map(a=>a.value),aM=new Set(ag),aN=/^\d{4}-\d{2}-\d{2}$/;function aO(a,b){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}function aP(a,b){return"completed"===a.status||"cancelled"===a.status?a.status:as(a,b)?"overdue":"pending"}function aQ(a,b,c){if(!a)return new Set(c);let d=new Set(b),e=a.split(",").map(a=>a.trim()).filter(a=>d.has(a));return new Set(0===e.length?c:e)}let aR=[{id:"bulk-messages",label:"Gerar mensagens para atrasadas"},{id:"sla-priority",label:"Priorizar SLAs estourados"},{id:"week-summary",label:"Resumir a semana"},{id:"risk-client",label:"Identificar cliente em risco"},{id:"call-script",label:"Gerar scripts de ligação"}];function aS(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsxs)("div",{className:"flex h-[calc(100dvh-2rem)] w-full flex-col gap-4",children:[(0,b.jsxs)("div",{className:"shrink-0 rounded-[20px] border border-zinc-200/80 bg-zinc-50/85 px-5 py-4",children:[(0,b.jsx)(aF.Skeleton,{className:"h-8 w-40"}),(0,b.jsx)(aF.Skeleton,{className:"mt-2 h-4 w-56"})]}),(0,b.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,b.jsx)(aF.Skeleton,{className:"h-[200px] rounded-[18px]"}),(0,b.jsx)(aF.Skeleton,{className:"h-[400px] rounded-[18px]"})]})]}),children:(0,b.jsx)(aT,{})})}function aT(){let{openDrawer:a}=(0,T.useUIStore)(),{user:l,permissions:m}=(0,V.useAuthStore)(),n=(0,C.useRouter)(),o=(0,C.usePathname)(),q=(0,C.useSearchParams)(),{activities:r,completeActivity:s,cancelActivity:B,postponeActivity:F}=(0,U.useActivityStore)(),[G,H]=(0,c.useState)("list"),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(()=>new Set(ag)),[O,P]=(0,c.useState)(()=>new Set(aJ)),[Q,R]=(0,c.useState)(""),[S,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)("all"),[Z,$]=(0,c.useState)(""),[_,aa]=(0,c.useState)({intelligence:!1,overdue:!1,today:!1,next7:!1,future:!0}),[ab,ac]=(0,c.useState)({intelligence:null,overdue:null,today:null,next7:null,future:null}),[af,ai]=(0,c.useState)(0),[ak,au]=(0,c.useState)(!1),[av,ax]=(0,c.useState)({}),[aF,aS]=(0,c.useState)(null),[aT,a2]=(0,c.useState)(null),[a3,a4]=(0,c.useState)(()=>new Set),[a5,a6]=(0,c.useState)(!1),[a7,a8]=(0,c.useState)(!1),[a9,ba]=(0,c.useState)(!1),[bb,bc]=(0,c.useState)(""),[bd,be]=(0,c.useState)({}),[bf,bg]=(0,c.useState)(null),[bh,bi]=(0,c.useState)(null),[bj,bk]=(0,c.useState)(null),[bl,bm]=(0,c.useState)(null),[bn,bo]=(0,c.useState)(null),[bp,bq]=(0,c.useState)(null),[br,bs]=(0,c.useState)(!1),[bt,bu]=(0,c.useState)(!1),[bv,bw]=(0,c.useState)(!1),[bx,by]=(0,c.useState)({title:"",content:""}),[bz,bA]=(0,c.useState)(null),bB=(0,c.useRef)([]),bC=(0,c.useRef)(null),bD=(0,c.useRef)(null),bE=(0,d.useNow)(6e4),bF=(0,c.useDeferredValue)(Z),[bG,bH]=(0,c.useState)(()=>ap(bE)),[bI,bJ]=(0,c.useState)(()=>an(al(bE))),bK=!!(m?.canViewAllUnits||l?.role==="master"),bL=!!m?.canCreateActivity,bM=!!m?.canEditActivity,bN=!!m?.canCancelActivity,bO=!!m?.canExportData,{scopedOwnerId:bP,scopeMode:bQ}=(0,c.useMemo)(()=>{let a=l?.id??null;return bK?K&&r.some(a=>a.responsibleId===K)?{scopedOwnerId:K,scopeMode:"override"}:a?{scopedOwnerId:a,scopeMode:"self"}:{scopedOwnerId:null,scopeMode:"team"}:{scopedOwnerId:a,scopeMode:"self"}},[bK,K,r,l?.id]),bR=bK&&"team"===bQ,bS=(0,c.useMemo)(()=>bK&&null===bP?r:bP?r.filter(a=>a.responsibleId===bP):[],[bK,bP,r]),bT=0===bS.length,bU=(0,c.useCallback)((a,b)=>{let c=window.setTimeout(()=>{a(),bB.current=bB.current.filter(a=>a!==c)},b);bB.current.push(c)},[]),bV=(0,c.useCallback)(a=>{bg(a),bU(()=>bg(null),2600)},[bU]),bW=(0,c.useCallback)(a=>{bi(a),bU(()=>bi(null),2600)},[bU]),bX=(0,c.useCallback)(a=>{bk(a),bU(()=>bk(null),2600)},[bU]);(0,c.useEffect)(()=>{if(!bp)return;let a=window.setTimeout(()=>bq(null),6e3);return()=>window.clearTimeout(a)},[bp]),(0,c.useEffect)(()=>()=>{bB.current.forEach(a=>window.clearTimeout(a))},[]),(0,c.useEffect)(()=>{let a=()=>bu(window.scrollY>8);return a(),window.addEventListener("scroll",a,{passive:!0}),()=>window.removeEventListener("scroll",a)},[]);let bY=(0,c.useCallback)(a=>{let b=a.trim().toLowerCase();if(H("list"),N(new Set(ag)),R(""),W(""),"overdue"===b){P(new Set(["pending","overdue"])),Y("breached");return}if("risk"===b){P(new Set(["pending"])),Y("risk");return}if("pace"===b){P(new Set(["pending","overdue"])),Y("all");return}if("achieved"===b){P(new Set(["completed"])),Y("all");return}if("pending"===b||"completed"===b||"cancelled"===b){P(new Set([b])),Y("all");return}P(new Set(aJ)),Y("all")},[]),bZ=(0,c.useCallback)(a=>{H(a.viewMode),$(a.query),N(a.types),P(a.statuses),Y(a.sla),R(a.start),W(a.end)},[]),b$=(0,c.useCallback)(()=>{H("list"),$(""),N(new Set(ag)),P(new Set(aJ)),R(""),W(""),Y("all")},[]);(0,c.useEffect)(()=>{let a=q.toString();if(bC.current===a)return;bC.current=a;let b=q.get("source"),c=q.get("status"),d=q.get("focus"),e=q.get("goal"),f=q.get("activityId")??q.get("id"),g=q.get("execute"),h=q.get("view"),i=q.get("q"),j=q.get("types"),k=q.get("statuses"),m=q.get("sla"),n=q.get("start"),o=q.get("end");if(null!==h||null!==i||null!==j||null!==k||null!==m||null!==n||null!==o?bZ({viewMode:"agenda"===h?"agenda":"list",query:i??"",types:aQ(j,ag,new Set(ag)),statuses:aQ(k,aL,new Set(aJ)),sla:"breached"===m||"risk"===m?m:"all",start:n&&aN.test(n)?n:"",end:o&&aN.test(o)?o:""}):c?(bY(c),$("")):b$(),"goals"===b&&e?bq({status:"success",text:`Filtro aplicado para acompanhar a meta "${e}".`}):"goals"===b&&"metas"===d&&bq({status:"success",text:"Painel ajustado para apoiar execução de metas."}),f){let a=r.find(a=>a.id===f);if(!a){L(null),bq({status:"error",text:"Atividade do link não encontrada na sua carteira atual."});return}if(!(bK||a.responsibleId===l?.id)){L(null),bq({status:"error",text:"Essa atividade não pertence à sua carteira."});return}L(bK?a.responsibleId:null),aS(a.id),a2(a.id),bU(()=>{let b=document.getElementById(`activity-card-${a.id}`);b&&b.scrollIntoView({behavior:"smooth",block:"center"})},80),g&&bV({tone:"info",message:`Canal de ${!g?"atividade":"call"===g?"ligação":"email"===g?"e-mail":"meeting"===g?"reunião":"whatsapp"===g?"WhatsApp":"atividade"} pronto para execu\xe7\xe3o desta atividade.`})}else L(null)},[bZ,bK,bY,bV,b$,bU,q,r,l?.id]),(0,c.useEffect)(()=>{if(null===bC.current)return;let a=new URLSearchParams(q.toString()),b=Z.trim(),c=ag.filter(a=>M.has(a)),d=aL.filter(a=>O.has(a));"list"!==G?a.set("view",G):a.delete("view"),b?a.set("q",b):a.delete("q"),c.length===ag.length?a.delete("types"):a.set("types",c.join(",")),d.length===aL.length?a.delete("statuses"):a.set("statuses",d.join(",")),"all"===X?a.delete("sla"):a.set("sla",X),Q?a.set("start",Q):a.delete("start"),S?a.set("end",S):a.delete("end"),a.delete("status"),a.delete("id"),a.delete("activityId"),a.delete("execute"),a.delete("source"),a.delete("focus"),a.delete("goal");let e=a.toString();e!==q.toString()&&(bC.current=e,n.replace(e?`${o}?${e}`:o,{scroll:!1}))},[S,Q,X,O,M,o,n,q,Z,G]);let b_=(0,c.useMemo)(()=>{let a=bF.trim().toLowerCase();return bS.filter(b=>{let c=aP(b,bE);return!!M.has(b.type)&&!!O.has(c)&&(!Q||!(b.dueDate<Q))&&(!S||!(b.dueDate>S))&&(!a||!![b.title,b.description||"",b.clientName||"",b.opportunityTitle||"",b.responsibleName,ae[b.type]].join(" ").toLowerCase().includes(a))&&("breached"!==X||!!as(b,bE))&&("risk"!==X||!!at(b,bE))})},[bS,M,O,Q,S,X,bF,bE]),b0=(0,c.useMemo)(()=>b_.filter(a=>"completed"!==a.status&&"cancelled"!==a.status),[b_]),b1=(0,c.useMemo)(()=>new Set(b0.map(a=>a.id)),[b0]),b2=(0,c.useMemo)(()=>Array.from(a3).filter(a=>b1.has(a)),[a3,b1]),b3=b0.length>0&&b2.length===b0.length,b4=(0,c.useCallback)(a=>{a4(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]),b5=(0,c.useCallback)(a=>{a?a4(new Set(b0.map(a=>a.id))):a4(new Set)},[b0]),b6=(0,c.useCallback)(()=>{a4(new Set)},[]),b7=(0,c.useMemo)(()=>{let a=new Map;for(let b of b0){let c=b.dueDate,d=a.get(c)||[];d.push(b),a.set(c,d)}for(let[b,c]of a.entries())c.sort((a,b)=>(a.dueTime||"99:99").localeCompare(b.dueTime||"99:99")),a.set(b,c);return a},[b0]),b8=(0,c.useMemo)(()=>{let a,b,c,d,e=ap(bG),f=new Date(bG.getFullYear(),bG.getMonth()+1,0),g=(b=(a=new Date(e.getFullYear(),e.getMonth(),e.getDate())).getDay(),ao(a,-b)),h=(d=(c=new Date(f.getFullYear(),f.getMonth(),f.getDate())).getDay(),ao(c,6-d)),i=[],j=g;for(;j.getTime()<=h.getTime();)i.push(j),j=ao(j,1);return i},[bG]),b9=(0,c.useMemo)(()=>b7.get(bI)||[],[b7,bI]),ca=(0,c.useMemo)(()=>b0.filter(a=>as(a,bE)).sort((a,b)=>am(a.dueDate).getTime()-am(b.dueDate).getTime()),[b0,bE]),cb=(0,c.useMemo)(()=>{let a=al(bE).getTime();return b0.filter(b=>!as(b,bE)&&al(am(b.dueDate)).getTime()===a).sort((a,b)=>(a.dueTime||"99:99").localeCompare(b.dueTime||"99:99"))},[b0,bE]),cc=(0,c.useMemo)(()=>{let a=al(bE),b=ao(a,7);return b0.filter(c=>{if(as(c,bE))return!1;let d=al(am(c.dueDate));return d>a&&d<=b}).sort((a,b)=>{let c=am(a.dueDate).getTime()-am(b.dueDate).getTime();return 0!==c?c:(a.dueTime||"99:99").localeCompare(b.dueTime||"99:99")})},[b0,bE]),cd=(0,c.useMemo)(()=>{let a=ao(al(bE),7);return b0.filter(b=>!as(b,bE)&&al(am(b.dueDate))>a).sort((a,b)=>{let c=am(a.dueDate).getTime()-am(b.dueDate).getTime();return 0!==c?c:(a.dueTime||"99:99").localeCompare(b.dueTime||"99:99")})},[b0,bE]),ce=(0,c.useMemo)(()=>b_.filter(a=>"completed"===a.status).sort((a,b)=>{let c=a.completedAt||a.dueDate;return(b.completedAt||b.dueDate).localeCompare(c)}),[b_]),cf=ca.length,cg=b0.filter(a=>at(a,bE)).length,ch=(0,c.useMemo)(()=>{let a,b,c,d;return`${a=new Intl.DateTimeFormat("pt-BR",{weekday:"short",day:"2-digit",month:"short"}).formatToParts(bE),b=(a.find(a=>"weekday"===a.type)?.value??"").replaceAll(".","").trim(),c=a.find(a=>"day"===a.type)?.value??"",d=(a.find(a=>"month"===a.type)?.value??"").replaceAll(".","").trim(),`${b.charAt(0).toUpperCase()+b.slice(1)}, ${c} ${d}`} \xb7 Ol\xe1, ${l?.name?.trim().split(" ")[0]??"Vendedor"}`},[bE,l?.name]),ci=(0,c.useMemo)(()=>{let a={call:0,email:0,meeting:0,visit:0,task:0,"follow-up":0,whatsapp:0};for(let b of b_)a[b.type]+=1;return a},[b_]),cj=(0,c.useMemo)(()=>Object.entries(ci).sort((a,b)=>b[1]-a[1])[0],[ci]),ck=(0,c.useMemo)(()=>{let a=al(bE),b=ao(a,-7),c=b_.filter(c=>{let d=al(am(c.dueDate));return d>=b&&d<=a});return 0===c.length?0:Math.round(c.filter(a=>"completed"===a.status).length/c.length*100)},[b_,bE]),cl=(0,c.useMemo)(()=>{let a,b;return a=[...b0].sort((a,b)=>{let c=am(a.dueDate).getTime(),d=am(b.dueDate).getTime(),e=1e3*!!as(a,bE)+120*("follow-up"===a.type)+90*("call"===a.type)+40*("pending"===a.status),f=1e3*!!as(b,bE)+120*("follow-up"===b.type)+90*("call"===b.type)+40*("pending"===b.status);return e!==f?f-e:c!==d?c-d:a.title.localeCompare(b.title)}),b=af%2,a.slice(b,b+3).map((a,b)=>{let c=`${a.clientName||a.opportunityTitle||"Sem contexto"} \xb7 ${ae[a.type]}`,d=as(a,bE);return{id:`intelligence-rec-${a.id}`,activityId:a.id,title:0===b?"Faça isso agora":"Ação recomendada",context:c,why:d?"Prazo estourado com alto impacto no ritmo do pipeline.":"Atividade com potencial de destravar avanço ainda hoje.",primaryActionLabel:"Ir para atividade",actionKind:"call"===a.type||"whatsapp"===a.type?"call":"meeting"===a.type?"prepare":"message"}})},[b0,bE,af]),cm=(0,c.useMemo)(()=>bS.find(a=>a.id===aF)||null,[bS,aF]),cn=(0,c.useMemo)(()=>bS.find(a=>a.id===bz)||null,[bS,bz]),co=!aO(M,aM)||!aO(O,aJ)||""!==Q||""!==S||"all"!==X||""!==Z.trim(),cp=(0,c.useMemo)(()=>{let a=[];return M.size<ag.length&&ag.forEach(b=>{M.has(b)&&a.push({id:`type-${b}`,label:`Tipo: ${ae[b]}`,onRemove:()=>{N(a=>{let c=new Set(a);return(c.delete(b),0===c.size)?new Set(ag):c})}})}),aO(O,aJ)||aI.forEach(b=>{O.has(b.value)&&a.push({id:`status-${b.value}`,label:`Status: ${b.label}`,onRemove:()=>{P(a=>{let c=new Set(a);return(c.delete(b.value),0===c.size)?new Set(aJ):c})}})}),Q&&a.push({id:"date-start",label:`De: ${aq(Q)}`,onRemove:()=>R("")}),S&&a.push({id:"date-end",label:`At\xe9: ${aq(S)}`,onRemove:()=>W("")}),"all"!==X&&a.push({id:"sla",label:`SLA: ${"breached"===X?"Estourado":"Em risco"}`,onRemove:()=>Y("all")}),Z.trim()&&a.push({id:"search",label:`Busca: "${Z.trim()}"`,onRemove:()=>$("")}),a},[M,O,Q,S,X,Z]),cq=(0,c.useCallback)(()=>{N(new Set(ag)),P(new Set(aJ)),R(""),W(""),Y("all"),$(""),a4(new Set)},[]),cr=(0,c.useCallback)(a=>{aa(b=>({...b,[a]:!b[a]}))},[]),cs=(0,c.useCallback)(()=>{au(!0),ac(a=>({...a,intelligence:null})),bU(()=>{if(0===b0.length){au(!1),ac(a=>({...a,intelligence:"Não há atividades ativas para montar um plano agora."})),bV({tone:"error",message:"Não há atividades ativas para montar um plano agora."});return}ai(a=>a+1),bq({status:"success",text:"Plano do dia gerado com foco em impacto e risco."}),bV({tone:"success",message:"Plano do dia gerado com foco em impacto e risco."}),au(!1)},260)},[b0.length,bV,bU]),ct=(0,c.useCallback)(()=>{H("list"),P(new Set(["pending","overdue"])),Y("breached"),R(""),W("")},[]),cu=(0,c.useCallback)(()=>{let a=an(al(bE));H("list"),P(new Set(["pending","overdue"])),R(a),W(a),Y("all")},[bE]),cv=(0,c.useCallback)(()=>{H("list"),P(new Set(["pending"])),Y("risk"),R(""),W("")},[]),cw=(0,c.useCallback)(a=>{bM?(ax(b=>({...b,[a.id]:"loading"})),bU(()=>{let b=bS.find(b=>b.id===a.activityId);if(!b){ax(b=>({...b,[a.id]:"error"})),bU(()=>{ax(b=>({...b,[a.id]:"idle"}))},1200);return}aS(b.id),a2(b.id),ax(b=>({...b,[a.id]:"success"})),bq({status:"success",text:"message"===a.actionKind?`Mensagem preparada para ${b.clientName||b.opportunityTitle||"atividade"}.`:"call"===a.actionKind?`Roteiro de contato acionado para ${b.clientName||b.opportunityTitle||"atividade"}.`:`Checklist de prepara\xe7\xe3o gerado para ${b.clientName||b.opportunityTitle||"atividade"}.`}),bU(()=>{ax(b=>({...b,[a.id]:"idle"}))},1200)},220)):bq({status:"error",text:"Você não tem permissão para executar ações nesta carteira."})},[bS,bM,bU]),cx=(0,c.useCallback)(a=>{aS(a),a2(a);let b=document.getElementById(`activity-card-${a}`);b&&b.scrollIntoView({behavior:"smooth",block:"center"})},[]),cy=(0,c.useCallback)(a=>{be(b=>{let c={...b};return delete c[a],c})},[]),cz=(0,c.useCallback)((a,b)=>{be(c=>({...c,[a]:{state:"error",message:b}})),bU(()=>{cy(a)},2200)},[cy,bU]),cA=(0,c.useCallback)(a=>bS.some(b=>b.id===a),[bS]),cB=(0,c.useCallback)((a,b)=>{bM?cA(a)?(be(b=>({...b,[a]:{state:"loading-complete"}})),bU(()=>{try{s(a,b),be(b=>({...b,[a]:{state:"complete-success",message:"Concluída"}}))}catch{be(b=>({...b,[a]:{state:"error",message:"Falha ao concluir atividade."}}))}},180),bU(()=>{cy(a)},1500)):cz(a,"A atividade não pertence à sua carteira."):cz(a,"Você não tem permissão para concluir atividades.")},[bM,cA,cy,s,cz,bU]),cC=(0,c.useCallback)(a=>{bN?cA(a)?(be(b=>({...b,[a]:{state:"loading-cancel"}})),bU(()=>{try{B(a),be(b=>({...b,[a]:{state:"complete-success",message:"Cancelada"}}))}catch{be(b=>({...b,[a]:{state:"error",message:"Falha ao cancelar atividade."}}))}},180),bU(()=>{cy(a)},1500)):cz(a,"A atividade não pertence à sua carteira."):cz(a,"Você não tem permissão para cancelar atividades.")},[bN,cA,B,cy,cz,bU]),cD=(0,c.useCallback)((a,b)=>{bM?cA(a)?aN.test(b)?b<an(al(bE))?cz(a,"Escolha uma data a partir de hoje."):(be(b=>({...b,[a]:{state:"loading-postpone"}})),bU(()=>{try{F(a,b),bm(a),be(c=>({...c,[a]:{state:"postpone-success",message:`Reagendada para ${aq(b)}`}}))}catch{be(b=>({...b,[a]:{state:"error",message:"Falha ao reagendar atividade."}}))}},180),bU(()=>{bm(b=>b===a?null:b),cy(a)},1500)):cz(a,"Data de reagendamento inválida."):cz(a,"A atividade não pertence à sua carteira."):cz(a,"Você não tem permissão para reagendar atividades.")},[bM,cA,cy,cz,bE,F,bU]),cE=(0,c.useCallback)(()=>{if(0!==b2.length){if(!bM){bq({status:"error",text:"Você não tem permissão para concluir atividades em lote."}),bW({tone:"error",message:"Você não tem permissão para concluir atividades em lote."});return}a8(!0)}},[bM,bW,b2.length]),cF=(0,c.useCallback)(()=>{if(0===b2.length)return void a8(!1);let a=0,b=0;b2.forEach(c=>{if(!cA(c)){b+=1;return}cB(c),a+=1}),b6(),a8(!1);let c=b>0?`${a} conclu\xedda(s), ${b} sem permiss\xe3o/escopo.`:`${a} atividade(s) conclu\xedda(s) em lote.`;bq({status:b>0?"error":"success",text:c}),bW({tone:b>0?"error":"success",message:c})},[cA,b6,cB,bW,b2]),cG=(0,c.useCallback)(()=>{if(0!==b2.length){if(!bN){bq({status:"error",text:"Você não tem permissão para cancelar atividades em lote."}),bW({tone:"error",message:"Você não tem permissão para cancelar atividades em lote."});return}a6(!0)}},[bN,bW,b2.length]),cH=(0,c.useCallback)(()=>{if(0===b2.length)return void a6(!1);let a=0,b=0;b2.forEach(c=>{if(!cA(c)){b+=1;return}cC(c),a+=1}),b6(),a6(!1);let c=b>0?`${a} cancelada(s), ${b} sem permiss\xe3o/escopo.`:`${a} atividade(s) cancelada(s) em lote.`;bq({status:b>0?"error":"success",text:c}),bW({tone:b>0?"error":"success",message:c})},[cA,b6,cC,bW,b2]),cI=(0,c.useCallback)(a=>{if(0===b2.length)return;if(!bM){bq({status:"error",text:"Você não tem permissão para reagendar atividades em lote."}),bW({tone:"error",message:"Você não tem permissão para reagendar atividades em lote."});return}if(!aN.test(a))return void bW({tone:"error",message:"Data de reagendamento inválida para lote."});if(a<an(al(bE)))return void bW({tone:"error",message:"Escolha uma data de lote a partir de hoje."});let b=0,c=0;b2.forEach(d=>{if(!cA(d)){c+=1;return}cD(d,a),b+=1}),b6(),ba(!1),bc("");let d=c>0?`${b} reagendada(s), ${c} sem permiss\xe3o/escopo.`:`${b} atividade(s) reagendada(s) para ${aq(a)}.`;bq({status:c>0?"error":"success",text:d}),bW({tone:c>0?"error":"success",message:d})},[bM,cA,b6,cD,bE,bW,b2]),cJ=(0,c.useCallback)(a=>{let b=aw(a,bE),c=a.clientName||a.opportunityTitle||"atividade selecionada";aS(a.id),by({title:`Menux Intelligence \xb7 ${c}`,content:`Mensagem pronta:
${b.message}

Pr\xf3ximo passo:
${b.nextStep}

Risco se ignorar:
${b.risk}`}),bw(!0),bq({status:"success",text:`Sugest\xf5es da Menux Intelligence abertas para ${c}.`}),be(b=>({...b,[a.id]:{state:"info",message:"Insights gerados para esta atividade."}})),bU(()=>cy(a.id),1800)},[cy,bE,bU]),cK=(0,c.useCallback)(a=>{let b=aw(a,bE),c=a.clientName||a.opportunityTitle||"atividade selecionada";aS(a.id),by({title:`Follow-up \xb7 ${c}`,content:b.message}),bw(!0),bq({status:"success",text:`Follow-up pronto para ${c}.`}),be(b=>({...b,[a.id]:{state:"info",message:"Follow-up gerado e pronto para envio."}})),bU(()=>cy(a.id),1800)},[cy,bE,bU]),cL=(0,c.useCallback)(a=>{bo(a),bU(()=>{if("sla-priority"===a)Y("breached"),H("list"),bq({status:"success",text:"Filtro de SLA 'Estourado' aplicado."});else if("risk-client"===a){bo(null),n.push("/clients?filter=risk");return}else if("week-summary"===a)by({title:"Resumo da Semana",content:`### Minha semana em atividades
- Total ativas: ${b0.length}
- Atrasadas: ${cf}
- SLAs em risco: ${cg}

**Pr\xf3ximo passo recomendado:** focar primeiro nas atividades atrasadas de maior impacto comercial.`}),bw(!0),bq({status:"success",text:"Resumo semanal gerado com foco na sua carteira."});else if("bulk-messages"===a){if(0===cf){bq({status:"error",text:"Sem atividades atrasadas para gerar mensagens no momento."}),bo(null);return}by({title:"Mensagens para Atrasadas",content:`Ol\xe1 [Nome], vi que n\xe3o conseguimos nos falar na data combinada. Como est\xe1 sua agenda para retomarmos amanh\xe3?

Oi [Nome], tudo bem? Gostaria de reagendar nosso papo sobre [Assunto]. Teria disponibilidade esta tarde?`}),bw(!0),bq({status:"success",text:"Sugestões de mensagem geradas."})}else"call-script"===a?(by({title:"Script de Ligação",content:`**Abertura:** "Ol\xe1 [Nome], aqui \xe9 ${l?.name||"Consultor"} da [Empresa]. Tudo bem?"

**Gancho:** "Estou ligando pois vi que ficou pendente nosso alinhamento sobre [Assunto] e n\xe3o gostaria de deixar passar..."

**Fechamento:** "Conseguimos 5 minutinhos agora ou prefere agendar?"`}),bw(!0),bq({status:"success",text:"Script de ligação gerado."})):bq(function(a,b){switch(a){case"bulk-messages":if(0===b.overdueCount)return{status:"error",text:"Sem atividades atrasadas para gerar mensagens no momento."};return{status:"success",text:`Geradas sugest\xf5es para ${b.overdueCount} atividades atrasadas.`};case"sla-priority":if(0===b.overdueCount)return{status:"error",text:"Não há SLAs estourados agora. Tudo sob controle."};return{status:"success",text:`${b.overdueCount} SLAs cr\xedticos priorizados para execu\xe7\xe3o imediata.`};case"week-summary":return{status:"success",text:`Resumo gerado com base em ${b.totalActive} atividades ativas da semana.`};case"risk-client":if(0===b.overdueCount&&0===b.riskCount)return{status:"error",text:"Nenhum cliente em risco crítico detectado neste momento."};return{status:"success",text:"Cliente com maior risco identificado e destacado para ação imediata."};case"call-script":return{status:"success",text:b.selectedActivity?`Script de liga\xe7\xe3o gerado para ${b.selectedActivity.clientName||b.selectedActivity.opportunityTitle||"atividade selecionada"}.`:"Script de ligação gerado para o bloco de maior urgência."};default:return{status:"error",text:"Não foi possível executar este comando agora."}}}(a,{overdueCount:cf,riskCount:cg,totalActive:b0.length,selectedActivity:cm||void 0}));bo(null)},500)},[b0.length,cf,cg,cm,bU,n,l?.name]),cM=(0,c.useCallback)(()=>{if(!bO){bq({status:"error",text:"Você não tem permissão para exportar dados desta tela."}),bX({tone:"error",message:"Você não tem permissão para exportar dados desta tela."});return}bs(!0),bX({tone:"info",message:"Exportando lista de atividades..."});try{let a=b_.map(a=>{let b=aP(a,bE);return[a.title,ae[a.type],"pending"===b?"Pendente":"completed"===b?"Concluída":"overdue"===b?"Atrasada":"Cancelada",a.clientName||"",a.opportunityTitle||"",aq(a.dueDate),a.dueTime||"",a.responsibleName]}),b=["Título;Tipo;Status;Cliente;Oportunidade;Data;Horário;Responsável",...a.map(a=>a.map(a=>`"${a.replace(/"/g,'""')}"`).join(";"))].join("\n"),c=new Blob(["\uFEFF"+b],{type:"text/csv;charset=utf-8"}),d=document.createElement("a");d.href=URL.createObjectURL(c),d.download=`atividades-${an(bE)}.csv`,d.click(),URL.revokeObjectURL(d.href),bq({status:"success",text:`${b_.length} atividades exportadas em CSV.`}),bX({tone:"success",message:`${b_.length} atividade(s) exportada(s) em CSV.`})}catch{bq({status:"error",text:"Não foi possível exportar a lista agora."}),bX({tone:"error",message:"Não foi possível exportar a lista agora."})}finally{bs(!1)}},[bO,b_,bE,bX]),cN=(0,c.useCallback)((c,d)=>{if(ab[d])return(0,b.jsx)(aY,{message:ab[d]||"Erro ao carregar seção.",onRetry:()=>ac(a=>({...a,[d]:null}))});if(0===c.length)return"overdue"===d?(0,b.jsx)("div",{className:"rounded-[16px] border border-emerald-200 bg-emerald-50/70 px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.CheckCircle2,{className:"h-4 w-4 text-emerald-600"}),(0,b.jsx)("p",{className:"font-body text-sm font-medium text-emerald-700",children:"Tudo em dia. Nenhuma atividade atrasada."})]})}):"today"===d?(0,b.jsxs)("div",{className:"rounded-[16px] border border-zinc-200 bg-zinc-50 px-4 py-4",children:[(0,b.jsx)("p",{className:"font-body text-sm text-zinc-600",children:"Nenhuma atividade para hoje."}),(0,b.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,b.jsxs)(ah.Button,{size:"sm",className:"rounded-full bg-zinc-900 text-white hover:bg-zinc-800",onClick:()=>a("new-activity"),disabled:!bL,children:[(0,b.jsx)(w.Plus,{className:"h-3.5 w-3.5"}),"Criar atividade"]}),(0,b.jsxs)(ah.Button,{size:"sm",variant:"outline",className:"rounded-full",onClick:cs,children:[(0,b.jsx)(z,{className:"h-3.5 w-3.5"}),"Pedir recomendação"]})]})]}):(0,b.jsx)("div",{className:"rounded-[16px] border border-zinc-200 bg-zinc-50 px-4 py-4",children:(0,b.jsx)("p",{className:"font-body text-sm text-zinc-600",children:"Nenhuma atividade nesse bloco por enquanto."})});if("agenda"===G){let a=c.reduce((a,b)=>(a[b.dueDate]||(a[b.dueDate]=[]),a[b.dueDate].push(b),a),{}),d=Object.keys(a).sort((a,b)=>am(a).getTime()-am(b).getTime());return(0,b.jsx)("div",{className:"space-y-3",children:d.map(c=>(0,b.jsxs)("div",{className:"rounded-[16px] border border-zinc-200 bg-white/80 p-3",children:[(0,b.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,b.jsx)("p",{className:"font-heading text-sm font-semibold text-zinc-900",children:ar(c)}),(0,b.jsx)(ay.Badge,{className:"rounded-full bg-zinc-100 text-zinc-600",children:a[c].length})]}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsx)(D.AnimatePresence,{initial:!1,children:a[c].map(a=>(0,b.jsx)(E.motion.div,{layout:!0,initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.16,ease:"easeOut"},children:(0,b.jsx)(a$,{activity:a,now:bE,isExpanded:aT===a.id,isHighlighted:bl===a.id,selected:a3.has(a.id),canExecuteActions:bM,canCancelActions:bN,feedback:bd[a.id],onToggleExpand:()=>{a2(b=>b===a.id?null:a.id),aS(a.id)},onToggleSelect:()=>b4(a.id),onComplete:b=>cB(a.id,b),onCancel:()=>cC(a.id),onPostpone:b=>cD(a.id,b),onSelectIntelligence:()=>aS(a.id),onGenerateFollowup:()=>cK(a)})},a.id))})})]},c))})}return(0,b.jsx)(aU,{items:c,estimateSize:214,renderItem:a=>(0,b.jsx)(a$,{activity:a,now:bE,isExpanded:aT===a.id,isHighlighted:bl===a.id,selected:a3.has(a.id),canExecuteActions:bM,canCancelActions:bN,feedback:bd[a.id],onToggleExpand:()=>{a2(b=>b===a.id?null:a.id),aS(a.id)},onToggleSelect:()=>b4(a.id),onComplete:b=>cB(a.id,b),onCancel:()=>cC(a.id),onPostpone:b=>cD(a.id,b),onSelectIntelligence:()=>aS(a.id),onGenerateFollowup:()=>cK(a)})})},[ab,!1,G,bE,aT,bl,a3,bd,bL,bM,bN,a,cs,b4,cB,cC,cD,cK]);return(0,b.jsxs)(E.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18,ease:[.22,.61,.36,1]},className:"space-y-7 lg:space-y-8",children:[(0,b.jsx)(aG.ModuleCommandHeader,{title:"Atividades",description:"Execução do dia, com prioridades e próximos passos.",className:(0,aH.cn)("border-zinc-200/80 bg-zinc-50/88",bt&&"shadow-[0_14px_24px_-18px_rgba(15,23,42,0.32)]"),meta:ch,chips:[{id:"overdue",label:`${cf} atrasadas`,icon:(0,b.jsx)(e.AlertTriangle,{className:"h-3.5 w-3.5"}),tone:cf>0?"danger":"neutral",onClick:ct},{id:"today",label:`${cb.length} para hoje`,icon:(0,b.jsx)(h.CalendarClock,{className:"h-3.5 w-3.5"}),tone:cb.length>0?"info":"neutral",onClick:cu},co?{id:"active-filters",label:`${cp.length} filtros ativos`,icon:(0,b.jsx)(t.Filter,{className:"h-3.5 w-3.5"}),tone:"warning",onClick:()=>J(!0)}:{id:"sla-risk",label:`${cg} SLAs em risco`,icon:(0,b.jsx)(p.default,{className:"h-3.5 w-3.5"}),tone:cg>0?"warning":"success",onClick:cv}],actions:(0,b.jsx)("div",{className:"flex w-full flex-col gap-3",children:(0,b.jsxs)("div",{className:"flex w-full flex-col gap-2.5 min-[1180px]:flex-row min-[1180px]:items-center min-[1180px]:justify-between",children:[(0,b.jsxs)("div",{className:"flex w-full flex-col gap-2.5 sm:flex-row sm:items-center min-[1180px]:w-auto min-[1180px]:flex-1",children:[(0,b.jsxs)("div",{className:"relative w-full sm:flex-1 min-[1180px]:max-w-[380px]",children:[(0,b.jsx)(x.Search,{className:"pointer-events-none absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-zinc-400"}),(0,b.jsx)(aA.Input,{value:Z,onChange:a=>$(a.target.value),placeholder:"Buscar atividade, cliente ou oportunidade...",className:"h-10 rounded-full border-zinc-200 bg-white/90 pl-8 text-sm"})]}),(0,b.jsx)("div",{className:"flex w-full items-center gap-1 rounded-full border border-zinc-200/90 bg-white/90 p-1 shadow-sm sm:w-auto",children:[{key:"list",label:"Lista",icon:u.List},{key:"agenda",label:"Agenda",icon:i.CalendarDays}].map(a=>{let c=G===a.key;return(0,b.jsxs)("button",{onClick:()=>H(a.key),className:(0,aH.cn)("inline-flex h-8 flex-1 items-center justify-center gap-1.5 rounded-full px-3 text-xs font-medium transition-all duration-120 ease-out active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-300 focus-visible:ring-offset-2 focus-visible:ring-offset-zinc-50 sm:flex-none",c?"bg-brand text-white shadow-[0_6px_14px_-8px_rgba(29,78,216,0.7)]":"text-zinc-600 hover:bg-zinc-100/90"),children:[(0,b.jsx)(a.icon,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:a.label})]},a.key)})})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end min-[1180px]:shrink-0",children:[(0,b.jsxs)(aC.Popover,{open:I,onOpenChange:J,children:[(0,b.jsx)(aC.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(ah.Button,{variant:"outline",className:"rounded-full border-zinc-200 bg-white/90 transition-all duration-120 ease-out hover:bg-zinc-100/90 active:scale-[0.98] focus-visible:ring-zinc-300",children:[(0,b.jsx)(t.Filter,{className:"h-4 w-4"}),"Filtros"]})}),(0,b.jsx)(aC.PopoverContent,{align:"end",side:"bottom",sideOffset:8,className:"w-[min(96vw,430px)] rounded-[18px] border-zinc-200 bg-white p-4 shadow-xl",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"mb-2 font-heading text-sm font-semibold text-zinc-900",children:"Tipo"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:ag.map(a=>{let c=ad[a],d=M.has(a);return(0,b.jsxs)("label",{className:(0,aH.cn)("flex cursor-pointer items-center gap-2 rounded-[12px] border px-2.5 py-2 text-xs",d?"border-brand/35 bg-brand/8 text-brand":"border-zinc-200 bg-white text-zinc-600"),children:[(0,b.jsx)(az.Checkbox,{checked:d,onCheckedChange:b=>{N(c=>{let d=new Set(c);return!0===b?d.add(a):d.delete(a),0===d.size?new Set(ag):d})}}),(0,b.jsx)(c,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:ae[a]})]},a)})})]}),(0,b.jsx)(aE.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"mb-2 font-heading text-sm font-semibold text-zinc-900",children:"Status"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:aI.map(a=>(0,b.jsxs)("label",{className:"flex cursor-pointer items-center gap-2 rounded-[12px] border border-zinc-200 px-2.5 py-2 text-xs text-zinc-700",children:[(0,b.jsx)(az.Checkbox,{checked:O.has(a.value),onCheckedChange:b=>{P(c=>{let d=new Set(c);return!0===b?d.add(a.value):d.delete(a.value),0===d.size?new Set(aJ):d})}}),(0,b.jsx)("span",{children:a.label})]},a.value))})]}),(0,b.jsx)(aE.Separator,{}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-3",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(aB.Label,{className:"mb-1 block text-xs text-zinc-500",children:"SLA"}),(0,b.jsx)("div",{className:"flex rounded-[12px] border border-zinc-200 p-1",children:aK.map(a=>(0,b.jsx)("button",{onClick:()=>Y(a.value),className:(0,aH.cn)("flex-1 rounded-[9px] px-2 py-1.5 text-xs transition-colors",X===a.value?"bg-zinc-900 text-white":"text-zinc-500 hover:bg-zinc-100"),children:a.label},a.value))})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(aB.Label,{className:"mb-1 block text-xs text-zinc-500",children:"Período de"}),(0,b.jsx)(aA.Input,{type:"date",value:Q,onChange:a=>R(a.target.value),className:"h-9 rounded-[12px]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(aB.Label,{className:"mb-1 block text-xs text-zinc-500",children:"até"}),(0,b.jsx)(aA.Input,{type:"date",value:S,onChange:a=>W(a.target.value),className:"h-9 rounded-[12px]"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(ah.Button,{variant:"outline",className:"flex-1 rounded-full",onClick:cq,children:"Limpar tudo"}),(0,b.jsx)(ah.Button,{className:"flex-1 rounded-full bg-zinc-900 text-white hover:bg-zinc-800",onClick:()=>J(!1),children:"Fechar"})]})]})})]}),co&&(0,b.jsx)(ah.Button,{variant:"ghost",className:"rounded-full px-3 text-xs text-zinc-500 transition-all duration-120 ease-out hover:bg-zinc-100/90 active:scale-[0.98] focus-visible:ring-zinc-300",onClick:cq,children:"Limpar tudo"}),(0,b.jsxs)(ah.Button,{variant:"outline",className:"h-9 rounded-full border-zinc-200 bg-white/90 px-4 transition-all duration-120 ease-out hover:bg-zinc-100/90 active:scale-[0.98] focus-visible:ring-zinc-300",onClick:cs,disabled:ak,children:[ak?(0,b.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(z,{className:"h-4 w-4"}),"Pedir plano do dia"]}),(0,b.jsxs)(ah.Button,{className:"h-9 rounded-full bg-zinc-900 px-4 text-white transition-all duration-120 ease-out hover:bg-zinc-800 active:scale-[0.98] focus-visible:ring-zinc-300",onClick:()=>a("new-activity"),disabled:!bL,children:[(0,b.jsx)(w.Plus,{className:"h-4 w-4"}),"Nova atividade"]})]})]})})}),bf?(0,b.jsx)(aZ,{tone:bf.tone,message:bf.message}):null,co&&cp.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:cp.map(a=>(0,b.jsxs)("button",{type:"button",onClick:a.onRemove,className:"inline-flex items-center gap-1 rounded-full border border-zinc-200 bg-white px-3 py-1.5 text-xs text-zinc-600 transition-colors hover:bg-zinc-50",children:[(0,b.jsx)("span",{children:a.label}),(0,b.jsx)("span",{className:"text-zinc-400",children:"×"})]},a.id))}),bR&&bS.length>0&&(0,b.jsx)("div",{className:"rounded-[14px] border border-blue-200 bg-blue-50/80 px-4 py-3",children:(0,b.jsxs)("p",{className:"font-body text-sm text-blue-800",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Visão de equipe:"})," você está navegando atividades agregadas da equipe."]})}),bT&&!bR&&(0,b.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-white px-4 py-4",children:[(0,b.jsx)("p",{className:"font-body text-sm text-zinc-700",children:"Você não possui atividades atribuídas na sua carteira no momento."}),(0,b.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,b.jsxs)(ah.Button,{size:"sm",className:"h-8 rounded-full bg-zinc-900 px-3 text-xs text-white hover:bg-zinc-800",onClick:()=>a("new-activity"),disabled:!bL,children:[(0,b.jsx)(w.Plus,{className:"h-3.5 w-3.5"}),"Criar atividade"]}),(0,b.jsxs)(ah.Button,{size:"sm",variant:"outline",className:"h-8 rounded-full px-3 text-xs",onClick:cs,disabled:ak,children:[(0,b.jsx)(z,{className:"h-3.5 w-3.5"}),"Pedir plano"]})]})]}),"list"===G&&b0.length>0&&(0,b.jsxs)("div",{className:"space-y-3 rounded-[18px] border border-zinc-200 bg-white px-4 py-3.5 md:px-5",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-600",children:[(0,b.jsx)(az.Checkbox,{checked:b3,onCheckedChange:a=>b5(!!a)}),(0,b.jsxs)("span",{children:["Selecionar todas visíveis (",b0.length,")"]})]}),b2.length>0?(0,b.jsxs)("span",{className:"text-xs font-medium text-zinc-600",children:[b2.length," selecionada(s)"]}):(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:"Selecione atividades para usar ações em lote."})]}),b2.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(ah.Button,{size:"sm",className:"h-8 rounded-full bg-zinc-900 px-3 text-xs text-white hover:bg-zinc-800",onClick:cE,disabled:!bM,children:[(0,b.jsx)(k.CheckCircle2,{className:"h-3.5 w-3.5"}),"Concluir em lote"]}),(0,b.jsxs)(aC.Popover,{open:a9,onOpenChange:ba,children:[(0,b.jsx)(aC.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(ah.Button,{size:"sm",variant:"outline",className:"h-8 rounded-full px-3 text-xs",disabled:!bM,children:[(0,b.jsx)(h.CalendarClock,{className:"h-3.5 w-3.5"}),"Adiar"]})}),(0,b.jsxs)(aC.PopoverContent,{align:"start",sideOffset:8,className:"w-[250px] rounded-[16px] border-zinc-200 p-3",children:[(0,b.jsx)("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Reagendar em lote"}),(0,b.jsx)("div",{className:"space-y-2",children:[1,3,7].map(a=>(0,b.jsxs)("button",{onClick:()=>cI(an(ao(al(bE),a))),className:"flex w-full items-center justify-between rounded-[10px] border border-zinc-200 px-3 py-2 text-sm text-zinc-700 transition-colors hover:bg-zinc-50",children:[(0,b.jsxs)("span",{children:["+",a," ",1===a?"dia":"dias"]}),(0,b.jsx)(f.ArrowRight,{className:"h-3.5 w-3.5 text-zinc-400"})]},a))}),(0,b.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,b.jsx)(aB.Label,{className:"text-xs text-zinc-500",children:"Escolher data"}),(0,b.jsx)(aA.Input,{type:"date",value:bb,min:an(al(bE)),onChange:a=>bc(a.target.value),className:"h-9 rounded-[10px]"}),(0,b.jsx)(ah.Button,{size:"sm",className:"h-8 w-full rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800",disabled:!bb,onClick:()=>cI(bb),children:"Confirmar data"})]})]})]}),(0,b.jsxs)(ah.Button,{size:"sm",variant:"ghost",className:"h-8 rounded-full px-3 text-xs text-red-600 hover:bg-red-50",onClick:cG,disabled:!bN,children:[(0,b.jsx)(A.XCircle,{className:"h-3.5 w-3.5"}),"Cancelar em lote"]}),(0,b.jsx)(ah.Button,{size:"sm",variant:"ghost",className:"h-8 rounded-full px-3 text-xs text-zinc-500",onClick:b6,children:"Limpar seleção"})]}),bh?(0,b.jsx)(aZ,{tone:bh.tone,message:bh.message,className:"mt-2"}):null]}),(0,b.jsxs)("div",{className:"grid gap-6 2xl:grid-cols-[minmax(0,7fr)_minmax(340px,3fr)]",children:[(0,b.jsx)("div",{className:"space-y-5",children:"agenda"===G?(0,b.jsx)(aV,{now:bE,monthDate:bG,days:b8,selectedDate:bI,activitiesByDate:b7,selectedDayActivities:b9,expandedActivityId:aT,highlightedPostponedId:bl,selectedActivityIds:a3,canExecuteActions:bM,canCancelActions:bN,activityFeedback:bd,onPreviousMonth:()=>bH(a=>new Date(a.getFullYear(),a.getMonth()-1,1)),onNextMonth:()=>bH(a=>new Date(a.getFullYear(),a.getMonth()+1,1)),onGoToToday:()=>{let a=al(bE);bH(ap(a)),bJ(an(a))},onSelectDate:a=>{let b=ap(a);bJ(an(a)),bH(b)},onToggleExpand:a=>{a2(b=>b===a?null:a),aS(a)},onComplete:cB,onCancel:cC,onPostpone:cD,onToggleSelectActivity:b4,onSelectIntelligence:aS,onGenerateFollowup:cK,onOpenActivityDetails:a=>{aS(a.id),bA(a.id)}}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aX,{title:"O que a Menux Intelligence recomenda agora",count:cl.length,collapsed:_.intelligence,onToggle:()=>cr("intelligence"),tone:"violet",children:ab.intelligence?(0,b.jsx)(aY,{message:ab.intelligence,onRetry:()=>{ac(a=>({...a,intelligence:null})),cs()}}):0===cl.length?(0,b.jsxs)("div",{className:"rounded-[18px] border border-cyan-200/20 bg-slate-900/45 px-5 py-5",children:[(0,b.jsx)("p",{className:"font-body text-sm text-slate-200",children:"Sem recomendações no momento."}),(0,b.jsxs)(ah.Button,{size:"sm",className:"mt-3 rounded-full border border-cyan-300/25 bg-cyan-500/18 text-cyan-50 hover:bg-cyan-500/28",onClick:cs,children:[(0,b.jsx)(y.Sparkles,{className:"h-3.5 w-3.5"}),"Gerar plano do dia"]})]}):(0,b.jsx)("div",{className:"grid gap-4 lg:grid-cols-2 2xl:grid-cols-3",children:cl.map(a=>{let c=av[a.id]||"idle";return(0,b.jsxs)("article",{className:"rounded-[20px] border border-cyan-200/20 bg-slate-900/52 p-5 shadow-[0_12px_24px_-20px_rgba(2,6,23,0.75)] transition-all duration-140 hover:-translate-y-[1px] hover:border-cyan-200/35",children:[(0,b.jsx)("div",{className:"mb-3 flex items-start justify-between gap-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-[12px] border border-cyan-300/25 bg-cyan-500/16 text-cyan-100",children:(0,b.jsx)(g.Bot,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"font-heading text-sm font-semibold text-slate-100",children:a.title}),(0,b.jsx)("p",{className:"font-body text-sm leading-snug text-slate-400",children:a.context})]})]})}),(0,b.jsxs)("p",{className:"min-h-[62px] font-body text-sm leading-relaxed text-slate-300",children:[(0,b.jsx)("span",{className:"font-medium text-slate-100",children:"Por que:"})," ",a.why]}),(0,b.jsxs)("div",{className:"mt-4 grid gap-2 sm:grid-cols-2",children:[(0,b.jsx)(ah.Button,{size:"sm",className:"h-9 rounded-full border border-cyan-300/24 bg-cyan-500/18 text-xs text-cyan-50 hover:bg-cyan-500/28",disabled:"loading"===c,onClick:()=>cw(a),children:"loading"===c?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Loader2,{className:"h-3.5 w-3.5 animate-spin"}),"Executando"]}):"success"===c?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Check,{className:"h-3.5 w-3.5"}),"Executado"]}):a.primaryActionLabel}),(0,b.jsx)(ah.Button,{size:"sm",variant:"outline",className:"h-9 rounded-full border-white/16 bg-white/6 text-xs text-slate-200 hover:bg-white/10",onClick:()=>cx(a.activityId),children:"Ver atividade"})]}),"error"===c&&(0,b.jsx)("p",{className:"mt-2 text-xs text-status-danger",children:"Falha ao executar. Tentar novamente."})]},a.id)})})}),(0,b.jsx)(aX,{title:"Atrasadas",count:ca.length,collapsed:_.overdue,onToggle:()=>cr("overdue"),tone:"danger",children:cN(ca,"overdue")}),(0,b.jsx)(aX,{title:"Hoje",count:cb.length,collapsed:_.today,onToggle:()=>cr("today"),tone:"warning",children:cN(cb,"today")}),(0,b.jsx)(aX,{title:"Próximos 7 dias",count:cc.length,collapsed:_.next7,onToggle:()=>cr("next7"),tone:"neutral",children:cN(cc,"next7")}),(0,b.jsx)(aX,{title:"Futuras",count:cd.length,collapsed:_.future,onToggle:()=>cr("future"),tone:"neutral",children:cN(cd,"future")}),(0,b.jsxs)("div",{className:"rounded-[20px] border border-zinc-200 bg-white p-4 shadow-sm md:p-5",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-heading text-lg font-semibold text-zinc-900",children:"Resumo do dia"}),(0,b.jsx)("p",{className:"font-body text-xs text-zinc-500",children:"Panorama rápido de execução e produtividade."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ah.Button,{size:"sm",variant:"outline",className:"rounded-full text-xs",onClick:()=>{by({title:"Resumo do dia",content:`### Execu\xe7\xe3o do dia
- Total de atividades: ${b_.length}
- Conclus\xe3o semanal: ${ck}%
- Atrasadas: ${cf}

**Pr\xf3ximo passo:** atacar primeiro as atividades atrasadas com maior risco de SLA.`}),bw(!0)},children:"Ver resumo"}),bO?(0,b.jsx)(ah.Button,{size:"sm",variant:"outline",className:"rounded-full text-xs",disabled:br,onClick:cM,children:br?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Loader2,{className:"h-3.5 w-3.5 animate-spin"}),"Exportando..."]}):"Exportar lista"}):null]})]}),bj?(0,b.jsx)(aZ,{tone:bj.tone,message:bj.message,className:"mt-3"}):null,(0,b.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(a1,{label:"Total de atividades",value:String(b_.length)}),(0,b.jsx)(a1,{label:"Conclusão semanal",value:`${ck}%`}),(0,b.jsx)(a1,{label:"Tipo dominante",value:cj?ae[cj[0]]:"-"}),(0,b.jsx)(a1,{label:"SLA estourado",value:String(cf),accent:cf>0?"danger":"success"})]}),(0,b.jsx)("div",{className:"mt-4 grid gap-3 lg:grid-cols-1",children:(0,b.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-zinc-50/70 p-3",children:[(0,b.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Por tipo"}),(0,b.jsx)("div",{className:"space-y-1.5",children:Object.entries(ci).sort((a,b)=>b[1]-a[1]).slice(0,4).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-zinc-600",children:ae[a]}),(0,b.jsx)("span",{className:"font-medium text-zinc-900",children:c})]},a))})]})}),ce.length>0&&(0,b.jsxs)("div",{className:"mt-4 rounded-[14px] border border-zinc-200 bg-white p-3",children:[(0,b.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Concluídas recentes"}),(0,b.jsx)("div",{className:"space-y-1.5",children:ce.slice(0,4).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-[10px] bg-zinc-50 px-2.5 py-2",children:[(0,b.jsx)("p",{className:"truncate text-sm text-zinc-700",children:a.title}),(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:aq(a.completedAt||a.dueDate)})]},a.id))})]})]})]})}),(0,b.jsx)("aside",{ref:bD,className:(0,aH.cn)("self-start 2xl:sticky 2xl:top-6","transition-shadow duration-120 ease-out",bt&&"2xl:drop-shadow-[0_8px_20px_rgba(15,23,42,0.08)]"),children:(0,b.jsxs)("div",{className:"menux-intelligence-theme space-y-5 rounded-[20px] border border-cyan-300/16 p-5 shadow-[0_14px_26px_-22px_rgba(2,6,23,0.8)] md:p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-heading text-lg font-semibold text-slate-100",children:"Menux Intelligence"}),(0,b.jsxs)("p",{className:"mt-1 flex items-center gap-2 text-xs text-slate-300",children:[(0,b.jsx)("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Online"]})]}),(0,b.jsxs)(ah.Button,{size:"sm",variant:"outline",className:"rounded-full border-white/16 bg-white/8 text-slate-100 hover:bg-white/12",onClick:cs,disabled:ak,children:[ak?(0,b.jsx)(v.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,b.jsx)(y.Sparkles,{className:"h-3.5 w-3.5"}),"Gerar plano do dia"]})]}),(0,b.jsxs)("div",{className:"rounded-[16px] border border-white/14 bg-white/7 p-4",children:[(0,b.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-slate-300",children:"Diagnóstico do dia"}),(0,b.jsxs)("div",{className:"space-y-1.5 text-sm",children:[(0,b.jsx)(a0,{label:"Atrasadas",value:String(cf),tone:cf>0?"danger":"success"}),(0,b.jsx)(a0,{label:"SLAs críticos",value:String(ca.filter(a=>Math.floor((al(bE).getTime()-am(a.dueDate).getTime())/864e5)>=3).length),tone:ca.some(a=>Math.floor((al(bE).getTime()-am(a.dueDate).getTime())/864e5)>=3)?"danger":"success"}),(0,b.jsx)(a0,{label:"SLAs em risco",value:String(cg),tone:cg>0?"warning":"success"}),(0,b.jsx)(a0,{label:"Tipo mais afetado",value:cj?ae[cj[0]]:"Sem dados",tone:"neutral"})]})]}),(0,b.jsxs)("div",{className:"rounded-[16px] border border-white/14 bg-white/7 p-4",children:[(0,b.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-slate-300",children:"Sugestões rápidas"}),(0,b.jsx)("div",{className:"grid gap-2 sm:grid-cols-2 xl:grid-cols-1",children:aR.map(a=>{let c=bn===a.id;return(0,b.jsxs)("button",{onClick:()=>cL(a.id),disabled:c,className:"flex items-center justify-between rounded-[12px] border border-white/14 bg-white/8 px-3 py-2 text-left text-xs text-slate-200 transition-colors duration-120 hover:bg-white/12 disabled:opacity-70",children:[(0,b.jsx)("span",{children:a.label}),c?(0,b.jsx)(v.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,b.jsx)(f.ArrowRight,{className:"h-3.5 w-3.5 text-slate-400"})]},a.id)})}),(0,b.jsx)(D.AnimatePresence,{children:bp&&(0,b.jsx)(E.motion.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},transition:{duration:.14},className:(0,aH.cn)("mt-3 rounded-[12px] border px-3 py-2 text-xs","success"===bp.status?"border-emerald-300/28 bg-emerald-500/14 text-emerald-100":"border-red-300/30 bg-red-500/14 text-red-100"),children:bp.text})})]}),(0,b.jsxs)("div",{className:"rounded-[16px] border border-white/14 bg-white/7 p-4",children:[(0,b.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wide text-slate-300",children:"Mensagens prontas"}),cm?(0,b.jsx)(a_,{activity:cm,now:bE}):(0,b.jsx)("div",{className:"rounded-[12px] border border-dashed border-white/20 bg-white/6 px-3 py-3 text-xs text-slate-300",children:"Selecione uma atividade para ver mensagens sugeridas aqui."})]})]})})]}),(0,b.jsx)(aD.AlertDialog,{open:a7,onOpenChange:a8,children:(0,b.jsxs)(aD.AlertDialogContent,{className:"rounded-[20px]",children:[(0,b.jsxs)(aD.AlertDialogHeader,{children:[(0,b.jsx)(aD.AlertDialogTitle,{className:"font-heading text-xl",children:"Concluir atividades em lote?"}),(0,b.jsxs)(aD.AlertDialogDescription,{className:"font-body text-sm text-zinc-600",children:["Essa ação conclui ",b2.length," atividade(s) selecionada(s) e registra o status imediatamente."]})]}),(0,b.jsxs)(aD.AlertDialogFooter,{children:[(0,b.jsx)(aD.AlertDialogCancel,{className:"rounded-full",children:"Voltar"}),(0,b.jsx)(aD.AlertDialogAction,{className:"rounded-full bg-zinc-900 text-white hover:bg-zinc-800",onClick:cF,children:"Confirmar conclusão"})]})]})}),(0,b.jsx)(aD.AlertDialog,{open:a5,onOpenChange:a6,children:(0,b.jsxs)(aD.AlertDialogContent,{className:"rounded-[20px]",children:[(0,b.jsxs)(aD.AlertDialogHeader,{children:[(0,b.jsx)(aD.AlertDialogTitle,{className:"font-heading text-xl",children:"Cancelar atividades em lote?"}),(0,b.jsxs)(aD.AlertDialogDescription,{className:"font-body text-sm text-zinc-600",children:["Essa ação cancela ",b2.length," atividade(s) selecionada(s) e registra o status imediatamente."]})]}),(0,b.jsxs)(aD.AlertDialogFooter,{children:[(0,b.jsx)(aD.AlertDialogCancel,{className:"rounded-full",children:"Voltar"}),(0,b.jsx)(aD.AlertDialogAction,{className:"rounded-full bg-red-600 text-white hover:bg-red-700",onClick:cH,children:"Confirmar cancelamento"})]})]})}),(0,b.jsx)(aj,{open:bv,onOpenChange:bw,title:bx.title,content:bx.content}),(0,b.jsx)(aW,{open:!!cn,activity:cn,now:bE,onOpenChange:a=>{a||bA(null)},onSelectIntelligence:a=>{bA(null),cJ(a)},onGenerateFollowup:a=>{bA(null),cK(a)}})]})}function aU({items:a,renderItem:d,estimateSize:e=176}){let f=(0,c.useRef)(null),g=a.length>14,h=function({useFlushSync:a=!0,...b}){let d=c.useReducer(()=>({}),{})[1],e={...b,onChange:(c,e)=>{var f;a&&e?(0,F.flushSync)(d):d(),null==(f=b.onChange)||f.call(b,c,e)}},[f]=c.useState(()=>new Q(e));return f.setOptions(e),S(()=>f._didMount(),[]),S(()=>f._willUpdate()),f}({observeElementRect:L,observeElementOffset:N,scrollToFn:P,...{count:a.length,getScrollElement:()=>f.current,estimateSize:()=>e,overscan:6}});if(!g)return(0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsx)(D.AnimatePresence,{initial:!1,children:a.map(a=>(0,b.jsx)(E.motion.div,{layout:!0,initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-4,scale:.995},transition:{duration:.16,ease:"easeOut"},children:d(a)},a.id))})});let i=Math.min(720,Math.max(320,Math.round(a.length*e)));return(0,b.jsx)("div",{ref:f,className:"overflow-auto pr-1",style:{height:i},children:(0,b.jsx)("div",{style:{height:`${h.getTotalSize()}px`,width:"100%",position:"relative"},children:h.getVirtualItems().map(c=>{let e=a[c.index];return(0,b.jsx)("div",{"data-index":c.index,ref:h.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${c.start}px)`},children:(0,b.jsx)("div",{className:"pb-3",children:d(e)})},e.id)})})})}function aV({now:a,monthDate:c,days:d,selectedDate:e,activitiesByDate:f,selectedDayActivities:g,expandedActivityId:h,highlightedPostponedId:i,selectedActivityIds:j,canExecuteActions:k,canCancelActions:n,activityFeedback:o,onPreviousMonth:p,onNextMonth:q,onGoToToday:r,onSelectDate:s,onToggleExpand:t,onComplete:u,onCancel:v,onPostpone:w,onToggleSelectActivity:x,onSelectIntelligence:y,onGenerateFollowup:z,onOpenActivityDetails:A}){let B=ap(c),C=ar(e),F=an(al(a));return(0,b.jsxs)("section",{className:"rounded-[20px] border border-zinc-200 bg-white p-4 shadow-sm md:p-5",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-heading text-lg font-semibold text-zinc-900",children:"Agenda em calendário"}),(0,b.jsx)("p",{className:"font-body text-xs text-zinc-500",children:"Visualização mensal para planejar a execução por dia."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ah.Button,{size:"sm",variant:"outline",className:"rounded-full border-zinc-200 text-xs",onClick:r,children:"Hoje"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-zinc-200 bg-zinc-50/90 p-1",children:[(0,b.jsx)(ah.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full text-zinc-600",onClick:p,"aria-label":"Mês anterior",children:(0,b.jsx)(l.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsx)("span",{className:"min-w-[164px] text-center font-heading text-sm font-semibold text-zinc-900 capitalize",children:new Intl.DateTimeFormat("pt-BR",{month:"long",year:"numeric"}).format(c)}),(0,b.jsx)(ah.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full text-zinc-600",onClick:q,"aria-label":"Próximo mês",children:(0,b.jsx)(m.ChevronRight,{className:"h-4 w-4"})})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 overflow-hidden rounded-[16px] border border-zinc-200 bg-white",children:[(0,b.jsx)("div",{className:"grid grid-cols-7 border-b border-zinc-200 bg-zinc-50/80",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map(a=>(0,b.jsx)("div",{className:"px-2 py-2 text-center text-[11px] font-semibold uppercase tracking-[0.06em] text-zinc-500",children:a},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-px bg-zinc-200/80",children:d.map(a=>{let c=an(a),d=f.get(c)||[],g=a.getMonth()===B.getMonth(),h=c===e,i=c===F;return(0,b.jsxs)("div",{role:"button",tabIndex:0,onClick:()=>s(a),onKeyDown:b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),s(a))},className:(0,aH.cn)("min-h-[116px] bg-white px-2 py-2 text-left transition-colors duration-120 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-brand/35","hover:bg-zinc-50",!g&&"bg-zinc-50/70 text-zinc-400",h&&"bg-brand/6 ring-2 ring-inset ring-brand/35",i&&!h&&"ring-1 ring-inset ring-zinc-300"),"aria-label":`Dia ${a.getDate()} com ${d.length} atividade${1===d.length?"":"s"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:(0,aH.cn)("inline-flex h-6 min-w-6 items-center justify-center rounded-full px-1.5 text-xs font-semibold",h?"bg-brand text-white":i?"bg-zinc-900 text-white":"text-zinc-700"),children:a.getDate()}),d.length>0?(0,b.jsx)("span",{className:"rounded-full bg-zinc-100 px-1.5 py-0.5 text-[10px] font-semibold text-zinc-600",children:d.length}):null]}),(0,b.jsxs)("div",{className:"mt-2 space-y-1",children:[d.slice(0,2).map(c=>(0,b.jsxs)("button",{type:"button",onClick:b=>{b.stopPropagation(),s(a),A(c)},className:"block w-full truncate rounded-[8px] bg-zinc-100/85 px-1.5 py-1 text-left text-[10px] text-zinc-700 transition-colors duration-120 hover:bg-zinc-200/70",children:[c.dueTime?`${c.dueTime} `:"",c.title]},c.id)),d.length>2?(0,b.jsxs)("button",{type:"button",onClick:b=>{b.stopPropagation(),s(a)},className:"text-[10px] font-medium text-brand hover:underline",children:["+",d.length-2," atividades"]}):null]})]},c)})})]}),(0,b.jsxs)("div",{className:"mt-4 rounded-[16px] border border-zinc-200 bg-zinc-50/70 p-3 md:p-4",children:[(0,b.jsx)("div",{className:"mb-3 flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-heading text-sm font-semibold text-zinc-900",children:C}),(0,b.jsxs)("p",{className:"text-xs text-zinc-500",children:[g.length," ",1===g.length?"atividade":"atividades"," no dia"]})]})}),0===g.length?(0,b.jsx)("div",{className:"rounded-[12px] border border-dashed border-zinc-200 bg-white px-3 py-4 text-sm text-zinc-500",children:"Sem atividades para este dia."}):(0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsx)(D.AnimatePresence,{initial:!1,children:g.map(c=>(0,b.jsx)(E.motion.div,{layout:!0,initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-4,scale:.995},transition:{duration:.16,ease:"easeOut"},children:(0,b.jsx)(a$,{activity:c,now:a,isExpanded:h===c.id,isHighlighted:i===c.id,selected:j.has(c.id),canExecuteActions:k,canCancelActions:n,feedback:o[c.id],onToggleExpand:()=>t(c.id),onToggleSelect:()=>x(c.id),onComplete:a=>u(c.id,a),onCancel:()=>v(c.id),onPostpone:a=>w(c.id,a),onSelectIntelligence:()=>y(c.id),onGenerateFollowup:()=>z(c)})},c.id))})})]})]})}function aW({open:a,activity:c,now:d,onOpenChange:e,onSelectIntelligence:f,onGenerateFollowup:g}){if(!c)return null;let h=av(c,d),i=aw(c,d);return(0,b.jsx)(ai.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(ai.DialogContent,{className:"max-w-[680px] rounded-[20px] border-zinc-200 p-5 sm:p-6",children:[(0,b.jsxs)(ai.DialogHeader,{children:[(0,b.jsx)(ai.DialogTitle,{className:"font-heading text-xl font-semibold text-zinc-900",children:c.title}),(0,b.jsx)(ai.DialogDescription,{className:"text-sm text-zinc-500",children:c.clientName||c.opportunityTitle||"Atividade comercial"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("span",{className:(0,aH.cn)("rounded-full border px-2.5 py-1 text-xs font-semibold",h.className),children:h.label}),(0,b.jsx)("span",{className:"rounded-full border border-zinc-200 bg-zinc-50 px-2.5 py-1 text-xs font-medium text-zinc-600",children:ae[c.type]}),(0,b.jsx)("span",{className:"rounded-full border border-zinc-200 bg-zinc-50 px-2.5 py-1 text-xs font-medium text-zinc-600",children:au(c,d)})]}),(0,b.jsxs)("div",{className:"grid gap-2 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"rounded-[12px] border border-zinc-200 bg-zinc-50/80 px-3 py-2.5",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-zinc-500",children:"Responsável"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-700",children:c.responsibleName})]}),(0,b.jsxs)("div",{className:"rounded-[12px] border border-zinc-200 bg-zinc-50/80 px-3 py-2.5",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-zinc-500",children:"Prazo"}),(0,b.jsxs)("p",{className:"mt-1 text-sm text-zinc-700",children:[aq(c.dueDate),c.dueTime?` \xb7 ${c.dueTime}`:""]})]})]}),(0,b.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-white p-3.5",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Descrição"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-700",children:c.description||"Sem descrição detalhada para esta atividade."})]}),(0,b.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-zinc-50/80 p-3.5",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Recomendação da Menux Intelligence"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-700",children:i.nextStep}),(0,b.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:i.risk})]})]}),(0,b.jsxs)("div",{className:"mt-1 flex flex-wrap items-center justify-end gap-2",children:[(0,b.jsxs)(ah.Button,{size:"sm",variant:"outline",className:"h-9 rounded-full",onClick:()=>f(c),children:[(0,b.jsx)(y.Sparkles,{className:"h-3.5 w-3.5"}),"Menux Intelligence"]}),(0,b.jsx)(ah.Button,{size:"sm",className:"h-9 rounded-full bg-zinc-900 text-white hover:bg-zinc-800",onClick:()=>g(c),children:"Gerar follow-up"})]})]})})}function aX({title:a,count:c,collapsed:d,onToggle:f,tone:g,children:h}){let i={violet:{badge:"border border-cyan-300/25 bg-cyan-500/18 text-cyan-100",icon:"text-cyan-200",border:"border-cyan-300/20"},danger:{badge:"bg-red-100 text-red-700",icon:"text-red-600",border:"border-red-200/70"},warning:{badge:"bg-amber-100 text-amber-700",icon:"text-amber-600",border:"border-amber-200/70"},neutral:{badge:"bg-zinc-100 text-zinc-700",icon:"text-zinc-500",border:"border-zinc-200"}}[g],j="violet"===g;return(0,b.jsxs)("section",{className:(0,aH.cn)("rounded-[20px] border p-5 shadow-sm md:p-6",i.border,j?"bg-slate-900/62 shadow-[0_12px_24px_-20px_rgba(2,6,23,0.82)]":"bg-white"),children:[(0,b.jsxs)("button",{onClick:f,className:"flex w-full items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["violet"===g?(0,b.jsx)(y.Sparkles,{className:(0,aH.cn)("h-4 w-4",i.icon)}):"danger"===g?(0,b.jsx)(e.AlertTriangle,{className:(0,aH.cn)("h-4 w-4",i.icon)}):"warning"===g?(0,b.jsx)(p.default,{className:(0,aH.cn)("h-4 w-4",i.icon)}):(0,b.jsx)(r,{className:(0,aH.cn)("h-4 w-4",i.icon)}),(0,b.jsx)("h3",{className:(0,aH.cn)("font-heading text-[15px] font-semibold",j?"text-slate-100":"text-zinc-900"),children:a}),(0,b.jsx)("span",{className:(0,aH.cn)("rounded-full px-2 py-0.5 text-xs font-semibold",i.badge),children:c})]}),d?(0,b.jsx)(n.ChevronDown,{className:(0,aH.cn)("h-4 w-4",j?"text-slate-300":"text-zinc-500")}):(0,b.jsx)(o.ChevronUp,{className:(0,aH.cn)("h-4 w-4",j?"text-slate-300":"text-zinc-500")})]}),(0,b.jsx)(D.AnimatePresence,{initial:!1,children:!d&&(0,b.jsx)(E.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.18,ease:"easeOut"},className:"overflow-hidden",children:(0,b.jsx)("div",{className:"pt-4",children:h})})})]})}function aY({message:a,onRetry:c}){return(0,b.jsx)("div",{className:"rounded-[14px] border border-red-200 bg-red-50 px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("p",{className:"text-sm text-red-700",children:a}),(0,b.jsx)(ah.Button,{size:"sm",variant:"outline",className:"h-7 rounded-full border-red-300 text-red-700",onClick:c,children:"Tentar novamente"})]})})}function aZ({tone:a,message:c,className:d}){return(0,b.jsx)("div",{className:(0,aH.cn)("rounded-[12px] border px-3 py-2 text-xs","success"===a&&"border-emerald-200 bg-emerald-50 text-emerald-700","error"===a&&"border-red-200 bg-red-50 text-red-700","info"===a&&"border-blue-200 bg-blue-50 text-blue-700",d),children:c})}let a$=(0,c.memo)(function({activity:a,now:d,feedback:e,isExpanded:g,isHighlighted:i,selected:j,canExecuteActions:l,canCancelActions:m,onToggleExpand:n,onToggleSelect:o,onComplete:p,onCancel:q,onPostpone:r,onSelectIntelligence:t,onGenerateFollowup:u}){let[w,x]=(0,c.useState)(!1),[z,C]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(null),R=ad[a.type],S=av(a,d),T=aw(a,d),U=e?.state==="loading-complete"||e?.state==="loading-cancel"||e?.state==="loading-postpone",V=async()=>{try{await navigator.clipboard.writeText(T.message),O(!0),Q(null),setTimeout(()=>O(!1),1200)}catch{O(!1),Q("Não foi possível copiar agora.")}};return(0,b.jsxs)("article",{id:`activity-card-${a.id}`,className:(0,aH.cn)("rounded-[20px] border border-zinc-200 bg-white p-5 transition-all duration-140 md:p-6","hover:-translate-y-[2px] hover:shadow-[0_14px_28px_-18px_rgba(15,23,42,0.48)]",i&&"ring-2 ring-brand/35",e?.state==="complete-success"&&"border-emerald-300 bg-emerald-50/40"),onClick:n,children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[(0,b.jsxs)("div",{className:"min-w-0 flex items-start gap-3.5",children:[(0,b.jsx)("div",{className:(0,aH.cn)("mt-0.5 flex h-11 w-11 shrink-0 items-center justify-center rounded-[13px]",af[a.type].bg,af[a.type].text),children:(0,b.jsx)(R,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("h4",{className:"truncate font-heading text-[17px] font-semibold text-zinc-900",children:a.title}),(0,b.jsx)("span",{className:(0,aH.cn)("rounded-full border px-2 py-0.5 text-[11px] font-medium",S.className),children:S.label})]}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-sm text-zinc-500",children:[(0,b.jsx)("span",{className:"truncate max-w-[420px]",children:a.clientId?(0,b.jsx)(B.default,{href:`/clients?clientId=${a.clientId}`,className:"hover:text-brand hover:underline",children:a.clientName||"Sem nome"}):a.opportunityId?(0,b.jsx)(B.default,{href:`/pipes?opportunityId=${a.opportunityId}`,className:"hover:text-brand hover:underline",children:a.opportunityTitle||"Sem título"}):a.clientName||a.opportunityTitle||"Sem contexto"}),(0,b.jsx)("span",{className:"text-zinc-300",children:"•"}),(0,b.jsx)("span",{children:ae[a.type]})]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,b.jsx)(ax.Avatar,{size:"sm",children:(0,b.jsx)(ax.AvatarFallback,{className:"bg-brand/10 text-[10px] font-semibold text-brand",children:a.responsibleName.split(" ").map(a=>a[0]).join("").slice(0,2).toUpperCase()})}),(0,b.jsx)("span",{className:"text-xs text-zinc-600",children:a.responsibleName}),(0,b.jsx)("span",{className:"text-zinc-300",children:"•"}),(0,b.jsxs)("span",{className:"text-xs text-zinc-500",children:[aq(a.dueDate),a.dueTime?` ${a.dueTime}`:""]})]})]})]}),(0,b.jsx)("div",{className:"text-left lg:text-right",children:(0,b.jsx)("p",{className:"text-xs font-medium text-zinc-500",children:au(a,d)})})]}),(0,b.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-2.5",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("label",{className:"inline-flex items-center gap-2 rounded-full border border-zinc-200 bg-zinc-50 px-3 py-2 text-xs font-medium text-zinc-600",children:[(0,b.jsx)(az.Checkbox,{checked:j,onCheckedChange:()=>o(),disabled:!l}),"Selecionar"]}),(0,b.jsxs)(aC.Popover,{open:F,onOpenChange:G,children:[(0,b.jsx)(aC.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(ah.Button,{size:"sm",className:"h-9 rounded-full bg-zinc-900 px-4 text-xs text-white hover:bg-zinc-800",disabled:U||!l,children:[e?.state==="loading-complete"?(0,b.jsx)(v.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,b.jsx)(k.CheckCircle2,{className:"h-3.5 w-3.5"}),"Concluir"]})}),(0,b.jsxs)(aC.PopoverContent,{align:"start",sideOffset:8,className:"w-[280px] rounded-[16px] border-zinc-200 p-3",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Concluir atividade"}),(0,b.jsx)("textarea",{placeholder:"Observações da conclusão (opcional)",value:J,onChange:a=>K(a.target.value),className:"w-full resize-none rounded-[10px] border border-zinc-200 bg-zinc-50 px-3 py-2 text-sm text-zinc-700 placeholder:text-zinc-400 focus:border-brand/40 focus:outline-none focus:ring-2 focus:ring-brand/20",rows:3}),(0,b.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,b.jsxs)(ah.Button,{size:"sm",className:"h-8 flex-1 rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800",onClick:()=>{p(J.trim()||void 0),G(!1),K("")},disabled:!l,children:[(0,b.jsx)(k.CheckCircle2,{className:"h-3.5 w-3.5"}),"Confirmar"]}),(0,b.jsx)(ah.Button,{size:"sm",variant:"outline",className:"h-8 rounded-full text-xs",onClick:()=>{G(!1),K("")},children:"Cancelar"})]})]})]}),(0,b.jsxs)(aC.Popover,{open:w,onOpenChange:x,children:[(0,b.jsx)(aC.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(ah.Button,{size:"sm",variant:"outline",className:"h-9 rounded-full px-4 text-xs",disabled:U||!l,children:[e?.state==="loading-postpone"?(0,b.jsx)(v.Loader2,{className:"h-3.5 w-3.5 animate-spin"}):(0,b.jsx)(h.CalendarClock,{className:"h-3.5 w-3.5"}),"Adiar"]})}),(0,b.jsxs)(aC.PopoverContent,{align:"start",sideOffset:8,className:"w-[250px] rounded-[16px] border-zinc-200 p-3",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Reagendar"}),(0,b.jsx)("div",{className:"space-y-2",children:[1,3,7].map(a=>(0,b.jsxs)("button",{onClick:()=>{r(an(ao(al(d),a))),x(!1)},className:"flex w-full items-center justify-between rounded-[10px] border border-zinc-200 px-3 py-2 text-sm text-zinc-700 transition-colors hover:bg-zinc-50",children:[(0,b.jsxs)("span",{children:["+",a," ",1===a?"dia":"dias"]}),(0,b.jsx)(f.ArrowRight,{className:"h-3.5 w-3.5 text-zinc-400"})]},a))}),(0,b.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,b.jsx)(aB.Label,{className:"text-xs text-zinc-500",children:"Escolher data"}),(0,b.jsx)(aA.Input,{type:"date",value:L,min:an(al(d)),onChange:a=>M(a.target.value),className:"h-9 rounded-[10px]"}),(0,b.jsx)(ah.Button,{size:"sm",className:"h-8 w-full rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800",disabled:!L||!l,onClick:()=>{r(L),x(!1),M("")},children:"Confirmar data"})]})]})]}),(0,b.jsxs)(aC.Popover,{open:z,onOpenChange:C,children:[(0,b.jsx)(aC.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(ah.Button,{size:"sm",variant:"outline",className:"menux-intelligence-btn-soft h-9 rounded-full px-4 text-xs text-slate-100",onClick:t,children:[(0,b.jsx)(y.Sparkles,{className:"h-3.5 w-3.5 text-cyan-100"}),"Menux Intelligence"]})}),(0,b.jsxs)(aC.PopoverContent,{align:"start",sideOffset:8,className:"w-[min(92vw,340px)] rounded-[16px] border-white/14 bg-slate-950/94 p-3 text-slate-100 shadow-2xl shadow-black/40 backdrop-blur-xl",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-slate-300",children:"Sugestões da Menux Intelligence"}),(0,b.jsxs)("div",{className:"space-y-2 rounded-[12px] border border-white/14 bg-white/8 p-2.5",children:[(0,b.jsx)("p",{className:"text-[11px] font-medium text-slate-200",children:"Mensagem pronta"}),(0,b.jsx)("p",{className:"text-xs leading-relaxed text-slate-300",children:T.message}),(0,b.jsxs)(ah.Button,{size:"sm",variant:"outline",className:"h-7 rounded-full border-white/14 bg-white/7 px-2.5 text-[11px] text-slate-100 hover:bg-white/11",onClick:V,children:[(0,b.jsx)(s.Copy,{className:"h-3 w-3"}),N?"Copiado":"Copiar"]})]}),(0,b.jsxs)("div",{className:"mt-2 rounded-[12px] border border-white/14 bg-white/8 p-2.5",children:[(0,b.jsx)("p",{className:"text-[11px] font-medium text-slate-200",children:"Próximo passo"}),(0,b.jsx)("p",{className:"text-xs text-slate-300",children:T.nextStep})]}),(0,b.jsxs)("div",{className:"mt-2 rounded-[12px] border border-white/14 bg-white/8 p-2.5",children:[(0,b.jsx)("p",{className:"text-[11px] font-medium text-slate-200",children:"Risco se ignorar"}),(0,b.jsx)("p",{className:"text-xs text-slate-300",children:T.risk})]}),P?(0,b.jsx)("p",{className:"mt-2 text-[11px] text-red-300",children:P}):null]})]}),(0,b.jsx)("div",{className:"basis-full"}),(0,b.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[e?.state==="complete-success"&&(0,b.jsx)("span",{className:"rounded-full bg-emerald-100 px-2.5 py-1 text-[11px] font-medium text-emerald-700",children:e.message||"Concluída"}),e?.state==="postpone-success"&&(0,b.jsx)("span",{className:"rounded-full bg-blue-100 px-2.5 py-1 text-[11px] font-medium text-blue-700",children:e.message||"Reagendada"}),e?.state==="error"&&(0,b.jsx)("span",{className:"rounded-full bg-red-100 px-2.5 py-1 text-[11px] font-medium text-red-700",children:e.message||"Falha ao executar"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5",children:[(0,b.jsx)(ah.Button,{size:"sm",variant:"ghost",className:"h-8 rounded-full px-3 text-xs text-zinc-600 hover:bg-zinc-100",onClick:n,children:g?"Ocultar detalhes":"Ver detalhes"}),"completed"!==a.status&&"cancelled"!==a.status&&(0,b.jsxs)(ah.Button,{size:"sm",variant:"ghost",className:"h-8 rounded-full px-3 text-xs text-red-500 hover:bg-red-50 hover:text-red-600",disabled:U||!m,onClick:()=>I(!0),children:[(0,b.jsx)(A.XCircle,{className:"h-3.5 w-3.5"}),"Cancelar"]})]})]})]}),(0,b.jsx)(aD.AlertDialog,{open:H,onOpenChange:I,children:(0,b.jsxs)(aD.AlertDialogContent,{className:"rounded-[20px]",children:[(0,b.jsxs)(aD.AlertDialogHeader,{children:[(0,b.jsx)(aD.AlertDialogTitle,{className:"font-heading text-xl",children:"Cancelar atividade?"}),(0,b.jsx)(aD.AlertDialogDescription,{className:"font-body text-sm text-zinc-600",children:"Esta ação define a atividade como cancelada e interrompe o ciclo de execução."})]}),(0,b.jsxs)(aD.AlertDialogFooter,{children:[(0,b.jsx)(aD.AlertDialogCancel,{className:"rounded-full",children:"Voltar"}),(0,b.jsx)(aD.AlertDialogAction,{className:"rounded-full bg-red-600 text-white hover:bg-red-700",onClick:q,children:"Confirmar cancelamento"})]})]})}),(0,b.jsx)(D.AnimatePresence,{initial:!1,children:g&&(0,b.jsx)(E.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.18,ease:"easeOut"},className:"overflow-hidden",children:(0,b.jsx)("div",{className:"mt-3 rounded-[14px] border border-zinc-200 bg-zinc-50/80 p-3.5",children:(0,b.jsxs)("div",{className:"grid gap-3 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"lg:col-span-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Descrição"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-700",children:a.description||"Sem descrição detalhada para esta atividade."}),a.completionNotes&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"mt-3 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Notas de conclusão"}),(0,b.jsx)("p",{className:"mt-1 rounded-[8px] border border-emerald-200 bg-emerald-50/60 px-2.5 py-2 text-sm text-emerald-800",children:a.completionNotes})]}),(0,b.jsx)("p",{className:"mt-3 text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Checklist de preparação"}),(0,b.jsx)("ul",{className:"mt-1.5 space-y-1.5",children:("meeting"===a.type?["Participantes confirmados","Pauta compartilhada","Follow-up preparado"]:"call"===a.type||"whatsapp"===a.type?["Script revisado","Objeções mapeadas","Próximo passo combinado"]:["Contexto do cliente validado","Objetivo da interação definido","Próxima ação registrada"]).map(a=>(0,b.jsxs)("li",{className:"flex items-center gap-2 text-sm text-zinc-700",children:[(0,b.jsx)("span",{className:"inline-block h-1.5 w-1.5 shrink-0 rounded-full bg-zinc-400"}),(0,b.jsx)("span",{children:a})]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Histórico curto"}),(0,b.jsxs)("div",{className:"mt-1.5 space-y-2 text-sm text-zinc-700",children:[(0,b.jsxs)("div",{className:"rounded-[10px] border border-zinc-200 bg-white px-2.5 py-2",children:[(0,b.jsx)("p",{className:"text-xs text-zinc-500",children:"Criada em"}),(0,b.jsx)("p",{children:aq(a.createdAt.slice(0,10))})]}),(0,b.jsxs)("div",{className:"rounded-[10px] border border-zinc-200 bg-white px-2.5 py-2",children:[(0,b.jsx)("p",{className:"text-xs text-zinc-500",children:"Prazo atual"}),(0,b.jsxs)("p",{children:[aq(a.dueDate),a.dueTime?` \xb7 ${a.dueTime}`:""]})]})]}),(0,b.jsxs)(ah.Button,{size:"sm",className:"mt-3 h-8 w-full rounded-full border border-cyan-300/22 bg-cyan-500/18 text-xs text-cyan-50 hover:bg-cyan-500/28",onClick:u,children:[(0,b.jsx)(y.Sparkles,{className:"h-3.5 w-3.5"}),"Gerar mensagem de follow-up"]})]})]})})})})]})}),a_=(0,c.memo)(function({activity:a,now:d}){let[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(null),i=aw(a,d),j=[{id:"msg-1",title:"Mensagem principal",body:i.message},{id:"msg-2",title:"Próximo passo",body:i.nextStep},{id:"msg-3",title:"Risco se ignorar",body:i.risk}],k=async(a,b)=>{try{await navigator.clipboard.writeText(b),f(a),h(null),setTimeout(()=>f(null),1200)}catch{f(null),h("Não foi possível copiar o conteúdo.")}};return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"rounded-[12px] border border-white/14 bg-white/8 px-3 py-2.5",children:[(0,b.jsx)("p",{className:"truncate text-xs font-medium text-slate-100",children:a.title}),(0,b.jsx)("p",{className:"mt-0.5 text-[11px] text-slate-400",children:a.clientName||a.opportunityTitle||"Sem contexto"})]}),j.map(a=>(0,b.jsxs)("div",{className:"rounded-[12px] border border-white/14 bg-white/8 px-3 py-2.5",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-300",children:a.title}),(0,b.jsx)("p",{className:"mt-1 text-xs leading-relaxed text-slate-200",children:a.body}),(0,b.jsxs)(ah.Button,{size:"sm",variant:"outline",className:"mt-2 h-7 rounded-full border-white/14 bg-white/7 px-2.5 text-[11px] text-slate-100 hover:bg-white/11",onClick:()=>k(a.id,a.body),children:[(0,b.jsx)(s.Copy,{className:"h-3 w-3"}),e===a.id?"Copiado":"Copiar"]})]},a.id)),g?(0,b.jsx)("p",{className:"text-[11px] text-red-300",children:g}):null]})});function a0({label:a,value:c,tone:d}){return(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-[10px] border border-white/10 bg-white/7 px-2.5 py-2",children:[(0,b.jsx)("span",{className:"text-slate-300",children:a}),(0,b.jsx)("span",{className:(0,aH.cn)("font-semibold",{success:"text-emerald-100",warning:"text-amber-100",danger:"text-red-100",neutral:"text-slate-100"}[d]),children:c})]})}function a1({label:a,value:c,accent:d="neutral"}){return(0,b.jsxs)("div",{className:"rounded-[14px] border border-zinc-200 bg-zinc-50/70 p-3",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-zinc-500",children:a}),(0,b.jsx)("p",{className:(0,aH.cn)("mt-1 font-heading text-2xl font-semibold","danger"===d?"text-red-700":"success"===d?"text-emerald-700":"text-zinc-900"),children:c})]})}a.s(["default",()=>aS],82952)}];

//# sourceMappingURL=src_app_%28auth%29_activities_page_tsx_1a6d6572._.js.map
{"version":3,"sources":["../../../../src/components/dashboard/header.tsx","../../../../src/stores/dashboard-store.ts","../../../../src/app/%28auth%29/dashboard/page.tsx","../../../../src/hooks/use-dashboard-filters.ts","../../../../src/components/dashboard/kpi-section.tsx","../../../../src/components/dashboard/funnel-x-ray/flow-step-card.tsx","../../../../src/components/dashboard/funnel-x-ray/flow-connector.tsx","../../../../src/components/dashboard/funnel-x-ray/flow-steps-connected.tsx","../../../../src/components/dashboard/funnel-x-ray/funnel-x-ray.tsx","../../../../src/components/dashboard/execution-section.tsx","../../../../src/components/dashboard/performance-section.tsx","../../../../node_modules/motion-utils/src/wrap.ts","../../../../node_modules/framer-motion/src/animation/sequence/utils/sort.ts","../../../../node_modules/motion-dom/src/animation/GroupAnimation.ts","../../../../node_modules/framer-motion/src/animation/sequence/utils/calc-repeat-duration.ts","../../../../node_modules/framer-motion/src/animation/utils/is-dom-keyframes.ts","../../../../node_modules/motion-dom/src/animation/GroupAnimationWithThen.ts","../../../../src/components/dashboard/funnel-x-ray/funnel-utils.ts","../../../../node_modules/framer-motion/src/animation/utils/create-visual-element.ts","../../../../node_modules/motion-utils/src/easing/utils/get-easing-for-segment.ts","../../../../node_modules/framer-motion/src/animation/animate/resolve-subjects.ts","../../../../node_modules/motion-dom/src/render/object/ObjectVisualElement.ts","../../../../node_modules/framer-motion/src/animation/sequence/utils/edit.ts","../../../../node_modules/framer-motion/src/animation/sequence/utils/calc-time.ts","../../../../node_modules/framer-motion/src/animation/animate/sequence.ts","../../../../node_modules/framer-motion/src/animation/animate/index.ts","../../../../node_modules/framer-motion/src/animation/sequence/utils/normalize-times.ts","../../../../node_modules/framer-motion/src/animation/animate/subject.ts","../../../../node_modules/lucide-react/src/icons/thermometer-sun.ts","../../../../node_modules/lucide-react/src/icons/wallet.ts","../../../../node_modules/lucide-react/src/icons/gauge.ts","../../../../node_modules/lucide-react/src/icons/trending-down.ts","../../../../node_modules/lucide-react/src/icons/arrow-down.ts","../../../../node_modules/framer-motion/src/animation/sequence/create.ts","../../../../src/components/ui/bento-card.tsx","../../../../src/components/dashboard/funnel-x-ray/funnel-config.ts"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport type { LucideIcon } from \"lucide-react\";\nimport {\n  AlertTriangle,\n  Calendar,\n  ChevronDown,\n  LayoutGrid,\n  ShieldAlert,\n  Wallet,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n  ModuleCommandHeader,\n  type ModuleCommandHeaderChip,\n} from \"@/components/shared/module-command-header\";\nimport { cn } from \"@/lib/cn\";\nimport { useDashboardStore, type Period } from \"@/stores/dashboard-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { useDashboardFilters } from \"@/hooks/use-dashboard-filters\";\nimport { formatCurrencyBRL } from \"@/lib/business-rules\";\nimport { usePathname, useRouter } from \"next/navigation\";\n\nconst periodLabels: Record<Period, string> = {\n  today: \"Hoje\",\n  \"7d\": \"7 dias\",\n  \"30d\": \"30 dias\",\n  quarter: \"Trimestre\",\n};\n\ntype IndicatorTone = \"danger\" | \"warning\" | \"info\";\ntype IndicatorId = \"overdue\" | \"sla\" | \"risk\";\n\ninterface IndicatorChip {\n  id: IndicatorId;\n  value: string;\n  label: string;\n  icon: LucideIcon;\n  tone: IndicatorTone;\n}\n\nfunction toPtBrCompactDate(date: Date): string {\n  const formatter = new Intl.DateTimeFormat(\"pt-BR\", {\n    weekday: \"short\",\n    day: \"2-digit\",\n    month: \"short\",\n    timeZone: \"America/Sao_Paulo\",\n  });\n  const parts = formatter.formatToParts(date);\n  const weekdayRaw = parts.find((part) => part.type === \"weekday\")?.value ?? \"\";\n  const day = parts.find((part) => part.type === \"day\")?.value ?? \"\";\n  const monthRaw = parts.find((part) => part.type === \"month\")?.value ?? \"\";\n  const weekday = weekdayRaw.replaceAll(\".\", \"\").trim();\n  const month = monthRaw.replaceAll(\".\", \"\").trim();\n  const weekdayCapitalized = weekday.charAt(0).toUpperCase() + weekday.slice(1);\n  return `${weekdayCapitalized}, ${day} ${month}`;\n}\n\nexport function DashboardHeader() {\n  const router = useRouter();\n  const pathname = usePathname();\n  const { period, setPeriod } = useDashboardStore();\n  const { user, isLoading } = useAuthStore();\n  const [retryingIndicators, setRetryingIndicators] = useState(false);\n\n  const {\n    filteredActivities,\n    openOpportunities,\n    now,\n  } = useDashboardFilters();\n\n  const firstName = user?.name?.trim().split(\" \")[0] ?? \"Admin\";\n\n  // ── Compute indicators from real store data ─────────────────────\n  const overdueCount = filteredActivities.filter(\n    (a) => a.effectiveStatus === \"overdue\"\n  ).length;\n\n  const slaBreachedOpps = openOpportunities.filter(\n    (o) => o.slaDeadline && new Date(o.slaDeadline) < now\n  );\n  const slaBreaches = slaBreachedOpps.length;\n  const riskValue = slaBreachedOpps.reduce((sum, o) => sum + (o.value || 0), 0);\n\n  const hasIndicatorsError =\n    !Number.isFinite(overdueCount) ||\n    !Number.isFinite(slaBreaches) ||\n    !Number.isFinite(riskValue);\n\n  const indicators: IndicatorChip[] = [\n    overdueCount > 0\n      ? {\n          id: \"overdue\",\n          value: `${overdueCount}`,\n          label: \"atrasadas\",\n          icon: AlertTriangle,\n          tone: \"danger\",\n        }\n      : null,\n    slaBreaches > 0\n      ? {\n          id: \"sla\",\n          value: `${slaBreaches}`,\n          label: \"SLAs estourados\",\n          icon: ShieldAlert,\n          tone: \"warning\",\n        }\n      : null,\n    riskValue > 0\n      ? {\n          id: \"risk\",\n          value: formatCurrencyBRL(riskValue),\n          label: \"valor em risco\",\n          icon: Wallet,\n          tone: \"info\",\n        }\n      : null,\n  ].filter((chip): chip is IndicatorChip => Boolean(chip)).slice(0, 3);\n\n  const compactDateText = `${toPtBrCompactDate(now)} · Olá, ${firstName}`;\n\n  const handleIndicatorClick = (id: IndicatorId) => {\n    if (id === \"overdue\") {\n      router.push(\"/activities?status=overdue\");\n      return;\n    }\n\n    const targetId = id === \"sla\" ? \"dashboard-execution\" : \"dashboard-funnel\";\n    const target = document.getElementById(targetId);\n    if (target) {\n      target.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n      return;\n    }\n    if (pathname !== \"/dashboard\") {\n      router.push(`/dashboard#${targetId}`);\n    }\n  };\n\n  const handleRetryIndicators = () => {\n    setRetryingIndicators(true);\n    router.refresh();\n    window.setTimeout(() => setRetryingIndicators(false), 220);\n  };\n\n  const indicatorChips: ModuleCommandHeaderChip[] = hasIndicatorsError\n    ? []\n    : indicators.map((chip) => {\n        const Icon = chip.icon;\n        return {\n          id: chip.id,\n          label: `${chip.value} ${chip.label}`,\n          icon: <Icon className=\"h-3.5 w-3.5\" />,\n          tone:\n            chip.tone === \"danger\"\n              ? \"danger\"\n              : chip.tone === \"warning\"\n                ? \"warning\"\n                : \"info\",\n          onClick: () => handleIndicatorClick(chip.id),\n        };\n      });\n\n  const fallbackChip: ModuleCommandHeaderChip = {\n    id: \"dashboard-empty\",\n    label: \"Sem dados do dia · Ver pipeline\",\n    icon: <LayoutGrid className=\"h-3.5 w-3.5 text-zinc-500\" />,\n    onClick: () => router.push(\"/pipes\"),\n    tone: \"neutral\",\n  };\n\n  const actions = (\n    <div\n      className={cn(\n        \"flex w-full flex-wrap items-center justify-end gap-2\",\n        isLoading && \"pointer-events-none opacity-60\"\n      )}\n    >\n      {/* Period selector */}\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button\n            variant=\"outline\"\n            className=\"premium-shine h-8 gap-1.5 rounded-full border-zinc-200 bg-white/90 px-3 text-sm font-medium hover:bg-zinc-100/80 active:scale-[0.99]\"\n          >\n            <LayoutGrid className=\"h-3.5 w-3.5 text-zinc-500\" />\n            {periodLabels[period]}\n            <ChevronDown className=\"h-3.5 w-3.5 text-zinc-400\" />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align=\"end\" className=\"w-40 rounded-xl\">\n          {(Object.keys(periodLabels) as Period[]).map((value) => (\n            <DropdownMenuItem\n              key={value}\n              onClick={() => setPeriod(value)}\n              className=\"gap-2\"\n            >\n              {period === value ? (\n                <div className=\"h-1.5 w-1.5 rounded-full bg-brand\" />\n              ) : null}\n              <span className={period === value ? \"font-medium\" : \"\"}>\n                {periodLabels[value]}\n              </span>\n            </DropdownMenuItem>\n          ))}\n        </DropdownMenuContent>\n      </DropdownMenu>\n\n    </div>\n  );\n\n  return (\n    <ModuleCommandHeader\n      title=\"Dashboard\"\n      description=\"Raio X do comercial\"\n      sticky\n      actions={actions}\n      meta={\n        <span className=\"inline-flex items-center gap-1.5\">\n          <Calendar className=\"h-3.5 w-3.5\" />\n          {compactDateText}\n        </span>\n      }\n      chips={indicatorChips}\n      fallbackChip={fallbackChip}\n      className=\"premium-panel\"\n    >\n      {isLoading ? (\n        <div className=\"flex flex-wrap items-center gap-2\">\n          <Skeleton className=\"h-8 w-[110px] rounded-full\" />\n          <Skeleton className=\"h-8 w-[128px] rounded-full\" />\n          <Skeleton className=\"h-8 w-[142px] rounded-full\" />\n        </div>\n      ) : null}\n\n      {hasIndicatorsError ? (\n        <div className=\"inline-flex items-center gap-2 rounded-full border border-red-200 bg-red-50/90 px-3 py-1.5 text-xs text-red-700\">\n          <AlertTriangle className=\"h-3.5 w-3.5\" />\n          Falha ao carregar indicadores.\n          <button\n            type=\"button\"\n            onClick={handleRetryIndicators}\n            className=\"font-semibold underline underline-offset-4\"\n          >\n            {retryingIndicators ? \"Tentando...\" : \"Tentar novamente\"}\n          </button>\n        </div>\n      ) : null}\n    </ModuleCommandHeader>\n  );\n}\n","import { create } from 'zustand'\n\nexport type Period = 'today' | '7d' | '30d' | 'quarter'\nexport type Context = 'me' | 'team'\n\ninterface DashboardState {\n  period: Period\n  context: Context\n  setPeriod: (period: Period) => void\n  setContext: (context: Context) => void\n}\n\nexport const useDashboardStore = create<DashboardState>((set) => ({\n  period: 'today',\n  context: 'me',\n  setPeriod: (period) => set({ period }),\n  setContext: (context) => set({ context }),\n}))\n\n// ─── Pure utility: convert Period into a date range ────────────────────────\n\nexport function getPeriodDateRange(\n  period: Period,\n  now: Date\n): { start: Date; end: Date } {\n  const end = new Date(\n    now.getFullYear(),\n    now.getMonth(),\n    now.getDate(),\n    23, 59, 59, 999,\n  );\n\n  let start: Date;\n\n  switch (period) {\n    case \"today\":\n      start = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n      break;\n    case \"7d\":\n      start = new Date(now.getFullYear(), now.getMonth(), now.getDate() - 7);\n      break;\n    case \"30d\":\n      start = new Date(now.getFullYear(), now.getMonth(), now.getDate() - 30);\n      break;\n    case \"quarter\": {\n      const quarterMonth = Math.floor(now.getMonth() / 3) * 3;\n      start = new Date(now.getFullYear(), quarterMonth, 1);\n      break;\n    }\n  }\n\n  return { start, end };\n}\n","\"use client\";\n\nimport { Suspense, useEffect, useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { useSearchParams } from \"next/navigation\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { DashboardHeader } from \"@/components/dashboard/header\";\nimport { KpiSection } from \"@/components/dashboard/kpi-section\";\nimport { FunnelXRay } from \"@/components/dashboard/funnel-x-ray\";\nimport { CriticalAlerts, TodayActivities } from \"@/components/dashboard/execution-section\";\nimport { PipelineHealth, TeamPerformance } from \"@/components/dashboard/performance-section\";\nimport { useProactiveEngine } from \"@/hooks/use-proactive-engine\";\nimport { screenContainer, sectionEnter } from \"@/lib/motion\";\n\nfunction DashboardLoadingSkeleton() {\n  return (\n    <div className=\"space-y-6 p-6 md:p-8\">\n      <div className=\"flex items-center justify-between\">\n        <Skeleton className=\"h-8 w-56\" />\n        <Skeleton className=\"h-9 w-36 rounded-full\" />\n      </div>\n      <div className=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\n        {Array.from({ length: 4 }).map((_, i) => (\n          <Skeleton key={i} className=\"h-24 rounded-xl\" />\n        ))}\n      </div>\n      <Skeleton className=\"h-64 rounded-xl\" />\n      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-12\">\n        <div className=\"lg:col-span-8 flex flex-col gap-6\">\n          <Skeleton className=\"h-48 rounded-xl\" />\n          <Skeleton className=\"h-48 rounded-xl\" />\n        </div>\n        <div className=\"lg:col-span-4 flex flex-col gap-6\">\n          <Skeleton className=\"h-48 rounded-xl\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction DashboardContent() {\n  // Activate proactive engine in background — feeds alerts & suggestions\n  useProactiveEngine();\n  const searchParams = useSearchParams();\n  const viewParam = searchParams.get(\"view\");\n\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => { const t = setTimeout(() => setIsLoading(false), 800); return () => clearTimeout(t); }, []);\n\n  useEffect(() => {\n    if (viewParam !== \"conversion\") return;\n    const target = document.getElementById(\"dashboard-funnel\");\n    if (!target) return;\n    target.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n  }, [viewParam]);\n\n  if (isLoading) {\n    return <DashboardLoadingSkeleton />;\n  }\n\n  return (\n    <motion.div\n      variants={screenContainer}\n      initial=\"hidden\"\n      animate=\"show\"\n      className=\"w-full max-w-full space-y-6\"\n    >\n      {/* Header */}\n      <motion.div variants={sectionEnter}>\n        <DashboardHeader />\n      </motion.div>\n\n      {/* Faixa B: KPIs */}\n      <motion.section id=\"dashboard-kpis\" variants={sectionEnter} className=\"scroll-mt-44\">\n        <KpiSection />\n      </motion.section>\n\n      {/* Faixa C: Funnel X-Ray */}\n      <motion.section id=\"dashboard-funnel\" variants={sectionEnter} className=\"scroll-mt-44\">\n        <FunnelXRay />\n      </motion.section>\n\n      {/* Faixa D: Execução */}\n      <motion.section\n        id=\"dashboard-execution\"\n        variants={sectionEnter}\n        className=\"grid grid-cols-1 gap-6 scroll-mt-44 lg:grid-cols-12\"\n      >\n         {/* Left Column: Alerts & Activities (8 cols) */}\n         <div className=\"lg:col-span-8 flex flex-col gap-6\">\n            <CriticalAlerts />\n            <TodayActivities />\n         </div>\n         \n         {/* Right Column: Health + Performance (4 cols) */}\n         <div className=\"lg:col-span-4 flex flex-col gap-6\">\n            <PipelineHealth />\n            <TeamPerformance />\n         </div>\n      </motion.section>\n    </motion.div>\n  );\n}\n\nexport default function Dashboard() {\n  return (\n    <Suspense fallback={<DashboardLoadingSkeleton />}>\n      <DashboardContent />\n    </Suspense>\n  );\n}\n","\"use client\";\n\n// ============================================================================\n// Hook centralizado de filtros do Dashboard\n// Todas as sections usam este hook para receber dados filtrados por\n// período (today/7d/30d/quarter) e contexto (me/team).\n// ============================================================================\n\nimport { useMemo } from \"react\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport { useActivityStore } from \"@/stores/activity-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport {\n  useDashboardStore,\n  getPeriodDateRange,\n  type Period,\n  type Context,\n} from \"@/stores/dashboard-store\";\nimport { useNow } from \"@/hooks/use-now\";\nimport { getEffectiveActivityStatus } from \"@/lib/business-rules\";\nimport { filterByUser } from \"@/lib/proactive-engine/helpers\";\nimport type { Opportunity, Activity } from \"@/types\";\n\nexport interface DashboardFilters {\n  /** Opportunities filtered by period + context */\n  filteredOpportunities: Opportunity[];\n  /** Activities with effective status, filtered by period + context */\n  filteredActivities: (Activity & { effectiveStatus: Activity[\"status\"] })[];\n  /** All open opportunities (ignores period, respects context) */\n  openOpportunities: Opportunity[];\n  /** Reactive date that ticks every 60s */\n  now: Date;\n  period: Period;\n  context: Context;\n  userId: string;\n  userRole: string;\n}\n\nexport function useDashboardFilters(): DashboardFilters {\n  const opportunities = useOpportunityStore((s) => s.opportunities);\n  const activities = useActivityStore((s) => s.activities);\n  const user = useAuthStore((s) => s.user);\n  const period = useDashboardStore((s) => s.period);\n  const context = useDashboardStore((s) => s.context);\n  const now = useNow();\n\n  const userId = user?.id ?? \"\";\n  const userRole = user?.role ?? \"comercial\";\n\n  return useMemo(() => {\n    const { start, end } = getPeriodDateRange(period, now);\n\n    // ── Context filter ──────────────────────────────────────────────\n    const ctxOpps =\n      context === \"me\"\n        ? filterByUser(opportunities, userId, userRole)\n        : opportunities;\n\n    const ctxActs =\n      context === \"me\"\n        ? filterByUser(activities, userId, userRole)\n        : activities;\n\n    // ── Open opportunities (cumulative, no period filter) ───────────\n    const openOpportunities = ctxOpps.filter((o) => o.status === \"open\");\n\n    // ── Period filter for opportunities ─────────────────────────────\n    // Pipeline Total & SLA are cumulative; won/lost are period-scoped\n    const filteredOpportunities = ctxOpps.filter((o) => {\n      // Open opportunities always included (they are live)\n      if (o.status === \"open\") return true;\n      // Won/lost filtered by updatedAt within period\n      const ts = new Date(o.updatedAt);\n      return ts >= start && ts <= end;\n    });\n\n    // ── Period filter for activities + effective status ──────────────\n    const filteredActivities = ctxActs\n      .map((a) => ({\n        ...a,\n        effectiveStatus: getEffectiveActivityStatus(a, now),\n      }))\n      .filter((a) => {\n        // Pending/overdue always included\n        if (a.effectiveStatus === \"pending\" || a.effectiveStatus === \"overdue\")\n          return true;\n        // Completed/cancelled filtered by dueDate within period\n        const ts = new Date(a.dueDate);\n        return ts >= start && ts <= end;\n      });\n\n    return {\n      filteredOpportunities,\n      filteredActivities,\n      openOpportunities,\n      now,\n      period,\n      context,\n      userId,\n      userRole,\n    };\n  }, [opportunities, activities, period, context, now, userId, userRole]);\n}\n","\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { motion, animate, useMotionValue } from \"framer-motion\";\nimport {\n  ChevronRight,\n  Clock3,\n  Gauge,\n  ShieldAlert,\n  TrendingUp\n} from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useDashboardFilters } from \"@/hooks/use-dashboard-filters\";\nimport { getPeriodDateRange } from \"@/stores/dashboard-store\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport { filterByUser } from \"@/lib/proactive-engine/helpers\";\nimport type { Opportunity } from \"@/types\";\nimport { cardStaggerContainer, listItemReveal } from \"@/lib/motion\";\n\ntype KPIState = \"default\" | \"loading\" | \"error\";\ntype ChipTone = \"neutral\" | \"info\" | \"warning\" | \"danger\" | \"success\";\n\nconst STALE_ACTIVITY_DAYS = 5;\nconst SLA_RISK_WINDOW_HOURS = 24;\nconst DAY_MS = 24 * 60 * 60 * 1000;\n\ninterface KPIChip {\n  id: string;\n  label: string;\n  tone: ChipTone;\n}\n\ninterface KPIAction {\n  label: string;\n  targetPath: string;\n}\n\ninterface KPIData {\n  label: string;\n  value: number;\n  valueFormat: \"currency\" | \"percent\" | \"integer\";\n  valueSuffix?: string;\n  subtext: string;\n  chips: KPIChip[];\n  line4Text?: string;\n  detailAction?: KPIAction;\n  microText?: string;\n  targetPath: string;\n  disabled?: boolean;\n  state?: KPIState;\n}\n\nfunction isSlaBreached(slaDeadline: string | undefined, now: Date): boolean {\n  return Boolean(slaDeadline) && new Date(slaDeadline as string) < now;\n}\n\nfunction isSlaAtRisk(slaDeadline: string | undefined, now: Date): boolean {\n  if (!slaDeadline) return false;\n  const deadline = new Date(slaDeadline);\n  const hoursLeft = (deadline.getTime() - now.getTime()) / (1000 * 60 * 60);\n  return hoursLeft > 0 && hoursLeft <= SLA_RISK_WINDOW_HOURS;\n}\n\nfunction calculateConversionInRange(\n  opportunities: Opportunity[],\n  start: Date,\n  end: Date\n): { won: number; total: number; rate: number } {\n  const closed = opportunities.filter((opportunity) => {\n    if (opportunity.status !== \"won\" && opportunity.status !== \"lost\") return false;\n    const updatedAt = new Date(opportunity.updatedAt);\n    return updatedAt >= start && updatedAt <= end;\n  });\n\n  const won = closed.filter((opportunity) => opportunity.status === \"won\").length;\n  const total = closed.length;\n  const rate = total > 0 ? (won / total) * 100 : 0;\n\n  return { won, total, rate };\n}\n\nfunction useKpiData(): Record<\"pipeline\" | \"conversion\" | \"activities\" | \"sla\", KPIData> {\n  const {\n    filteredActivities,\n    openOpportunities,\n    now,\n    period,\n    context,\n    userId,\n    userRole,\n  } = useDashboardFilters();\n  const opportunities = useOpportunityStore((state) => state.opportunities);\n\n  return useMemo(() => {\n    const openOpps = openOpportunities;\n    const scopedOpportunities =\n      context === \"me\"\n        ? filterByUser(opportunities, userId, userRole)\n        : opportunities;\n\n    const { start, end } = getPeriodDateRange(period, now);\n    const rangeSizeMs = end.getTime() - start.getTime() + 1;\n    const previousEnd = new Date(start.getTime() - 1);\n    const previousStart = new Date(previousEnd.getTime() - rangeSizeMs + 1);\n\n    const currentConversion = calculateConversionInRange(scopedOpportunities, start, end);\n    const previousConversion = calculateConversionInRange(\n      scopedOpportunities,\n      previousStart,\n      previousEnd\n    );\n    const hasCurrentConversionData = currentConversion.total > 0;\n    const hasPreviousBase = previousConversion.total > 0;\n    const conversionDelta = hasPreviousBase\n      ? currentConversion.rate - previousConversion.rate\n      : null;\n\n    const pipelineTotal = openOpps.reduce((sum, o) => sum + (o.value || 0), 0);\n\n    const pendingActivities = filteredActivities.filter(\n      (a) => a.effectiveStatus === \"pending\" || a.effectiveStatus === \"overdue\"\n    );\n    const overdueActivityCount = filteredActivities.filter(\n      (a) => a.effectiveStatus === \"overdue\"\n    ).length;\n\n    const todayIso = now.toISOString().slice(0, 10);\n    const todayPendingCount = filteredActivities.filter(\n      (a) => a.effectiveStatus === \"pending\" && a.dueDate === todayIso\n    ).length;\n\n    const staleThreshold = now.getTime() - STALE_ACTIVITY_DAYS * DAY_MS;\n    const staleCount = openOpps.filter(\n      (opportunity) => new Date(opportunity.updatedAt).getTime() < staleThreshold\n    ).length;\n\n    const slaBreachedCount = openOpps.filter((o) => isSlaBreached(o.slaDeadline, now)).length;\n    const slaRiskCount = openOpps.filter((o) => isSlaAtRisk(o.slaDeadline, now)).length;\n    const riskPct =\n      openOpps.length > 0\n        ? Math.round(((slaBreachedCount + slaRiskCount) / openOpps.length) * 100)\n        : 0;\n\n    const conversionChips: KPIChip[] = [];\n    if (hasCurrentConversionData && conversionDelta !== null) {\n      if (conversionDelta > 0) {\n        conversionChips.push({\n          id: \"conversion-up\",\n          label: `Alta +${conversionDelta.toFixed(1)} p.p.`,\n          tone: \"success\",\n        });\n      } else if (conversionDelta < 0) {\n        conversionChips.push({\n          id: \"conversion-down\",\n          label: `Queda ${Math.abs(conversionDelta).toFixed(1)} p.p.`,\n          tone: \"danger\",\n        });\n      } else {\n        conversionChips.push({\n          id: \"conversion-flat\",\n          label: \"Estavel 0.0 p.p.\",\n          tone: \"neutral\",\n        });\n      }\n    }\n\n    const activityChips: KPIChip[] = [];\n    if (overdueActivityCount > 0) {\n      activityChips.push({\n        id: \"activities-overdue\",\n        label: `Atrasadas: ${overdueActivityCount}`,\n        tone: \"danger\",\n      });\n    }\n    if (todayPendingCount > 0) {\n      activityChips.push({\n        id: \"activities-today\",\n        label: `Hoje: ${todayPendingCount}`,\n        tone: \"warning\",\n      });\n    }\n    if (activityChips.length === 0) {\n      activityChips.push({\n        id: \"activities-ok\",\n        label: \"OK\",\n        tone: \"success\",\n      });\n    }\n\n    const slaChips: KPIChip[] = [];\n    if (slaBreachedCount > 0) {\n      slaChips.push({\n        id: \"sla-overdue\",\n        label: `Estourados: ${slaBreachedCount}`,\n        tone: \"danger\",\n      });\n    }\n    if (slaRiskCount > 0) {\n      slaChips.push({\n        id: \"sla-risk\",\n        label: `Em risco: ${slaRiskCount}`,\n        tone: \"warning\",\n      });\n    }\n    if (slaChips.length === 0) {\n      slaChips.push({\n        id: \"sla-ok\",\n        label: \"OK\",\n        tone: \"success\",\n      });\n    }\n\n    const pipelineChips: KPIChip[] = [];\n    if (slaBreachedCount > 0) {\n      pipelineChips.push({\n        id: \"pipeline-overdue\",\n        label: `Estourados: ${slaBreachedCount}`,\n        tone: \"danger\",\n      });\n    }\n\n    const slaTargetPath = slaBreachedCount > 0\n      ? \"/pipes?filter=sla_overdue\"\n      : \"/pipes?filter=sla_risk\";\n\n    return {\n      pipeline: {\n        label: \"Pipeline Total\",\n        value: pipelineTotal,\n        valueFormat: \"currency\",\n        subtext: `${openOpps.length} oportunidades abertas`,\n        chips: pipelineChips,\n        line4Text: pipelineChips.length === 0 && staleCount === 0 ? \"Sem alertas hoje\" : undefined,\n        detailAction:\n          staleCount > 0\n            ? { label: \"Ver sem atividade\", targetPath: \"/pipes?filter=stale\" }\n            : undefined,\n        targetPath: \"/pipes\",\n        state: \"default\",\n      },\n      conversion: {\n        label: \"Conversão Global\",\n        value: currentConversion.rate,\n        valueFormat: \"percent\",\n        subtext: hasCurrentConversionData\n          ? `Ganhos no período: ${currentConversion.won}`\n          : \"Sem dados no período\",\n        chips: conversionChips,\n        line4Text: hasCurrentConversionData\n          ? hasPreviousBase\n            ? undefined\n            : \"Sem base comparável\"\n          : \"Ajuste o período para comparar.\",\n        disabled: !hasCurrentConversionData,\n        targetPath: \"/dashboard?view=conversion\",\n        state: \"default\",\n      },\n      activities: {\n        label: \"Atividades\",\n        value: pendingActivities.length,\n        valueFormat: \"integer\",\n        subtext: `${overdueActivityCount} atrasadas · ${todayPendingCount} para hoje`,\n        chips: activityChips.slice(0, 2),\n        targetPath: \"/activities?statuses=pending,overdue\",\n        state: \"default\",\n      },\n      sla: {\n        label: \"SLA Crítico\",\n        value: slaBreachedCount,\n        valueFormat: \"integer\",\n        valueSuffix: \"estourados\",\n        subtext: `${slaRiskCount} em risco`,\n        chips: slaChips.slice(0, 2),\n        detailAction:\n          slaBreachedCount > 0 || slaRiskCount > 0\n            ? { label: \"Ver deals\", targetPath: slaTargetPath }\n            : undefined,\n        microText: `${riskPct}% da carteira em risco`,\n        targetPath: slaTargetPath,\n        state: \"default\",\n      },\n    };\n  }, [\n    filteredActivities,\n    openOpportunities,\n    now,\n    period,\n    context,\n    userId,\n    userRole,\n    opportunities,\n  ]);\n}\n\nfunction formatKpiValue(value: number, format: KPIData[\"valueFormat\"]): string {\n  if (format === \"currency\") {\n    const absValue = Math.abs(value);\n    if (absValue >= 1_000) {\n      return new Intl.NumberFormat(\"pt-BR\", {\n        style: \"currency\",\n        currency: \"BRL\",\n        notation: \"compact\",\n        maximumFractionDigits: absValue >= 1_000_000 ? 2 : 1,\n      }).format(value);\n    }\n\n    return new Intl.NumberFormat(\"pt-BR\", {\n      style: \"currency\",\n      currency: \"BRL\",\n      maximumFractionDigits: 0,\n    }).format(value);\n  }\n\n  if (format === \"percent\") {\n    return `${value.toFixed(1)}%`;\n  }\n\n  return Math.round(value).toString();\n}\n\nfunction AnimatedKpiValue({\n  value,\n  format,\n}: {\n  value: number;\n  format: KPIData[\"valueFormat\"];\n}) {\n  const motionValue = useMotionValue(value);\n  const [displayValue, setDisplayValue] = useState(value);\n\n  useEffect(() => {\n    const unsubscribe = motionValue.on(\"change\", (latest) => {\n      setDisplayValue(latest);\n    });\n    return unsubscribe;\n  }, [motionValue]);\n\n  useEffect(() => {\n    const controls = animate(motionValue, value, {\n      duration: 0.22,\n      ease: [0.22, 0.61, 0.36, 1],\n    });\n    return controls.stop;\n  }, [motionValue, value]);\n\n  return <>{formatKpiValue(displayValue, format)}</>;\n}\n\nfunction KpiChipBadge({ chip }: { chip: KPIChip }) {\n  return (\n    <span\n      className={cn(\n        \"inline-flex h-[24px] max-w-full items-center rounded-full border px-2.5 text-[11px] font-semibold tracking-tight whitespace-nowrap\",\n        chip.tone === \"neutral\" && \"border-zinc-200/85 bg-zinc-100/80 text-zinc-700\",\n        chip.tone === \"info\" && \"border-sky-200/80 bg-sky-50/80 text-sky-700\",\n        chip.tone === \"warning\" && \"border-amber-200/80 bg-amber-50/80 text-amber-700\",\n        chip.tone === \"danger\" && \"border-rose-200/80 bg-rose-50/80 text-rose-700\",\n        chip.tone === \"success\" && \"border-emerald-200/80 bg-emerald-50/80 text-emerald-700\"\n      )}\n      title={chip.label}\n    >\n      <span className=\"truncate\">{chip.label}</span>\n    </span>\n  );\n}\n\nfunction KPITemplateCard({\n  icon,\n  data,\n  onNavigate,\n  onRetry,\n}: {\n  icon: React.ReactNode;\n  data: KPIData;\n  onNavigate: (path: string) => void;\n  onRetry: () => void;\n}) {\n  const state = data.state ?? \"default\";\n  const isInteractive = state === \"default\" && !data.disabled;\n  const chips = data.chips.slice(0, 2);\n  const hasOverflow = data.chips.length > 2;\n  const detailAction = hasOverflow\n    ? { label: \"Ver detalhes\", targetPath: data.targetPath }\n    : data.detailAction;\n\n  function handleCardAction() {\n    if (!isInteractive) return;\n    onNavigate(data.targetPath);\n  }\n\n  function handleCardKeyDown(event: React.KeyboardEvent<HTMLElement>) {\n    if (!isInteractive) return;\n    if (event.key === \"Enter\" || event.key === \" \") {\n      event.preventDefault();\n      onNavigate(data.targetPath);\n    }\n  }\n\n  return (\n    <motion.article\n      onClick={handleCardAction}\n      onKeyDown={handleCardKeyDown}\n      role={isInteractive ? \"button\" : undefined}\n      tabIndex={isInteractive ? 0 : -1}\n      aria-disabled={!isInteractive}\n      whileTap={isInteractive ? { scale: 0.99 } : undefined}\n      transition={{ duration: 0.09, ease: \"easeInOut\" }}\n      className={cn(\n        \"premium-shine group flex h-[222px] w-full flex-col overflow-hidden rounded-[24px] border border-zinc-200/80 bg-white/90 p-5 text-left\",\n        \"shadow-(--shadow-bento-sm) transition-[box-shadow,border-color,background-color] duration-150 ease-out\",\n        isInteractive && \"cursor-pointer hover:shadow-(--shadow-bento-sm-hover)\",\n        \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/25\"\n      )}\n    >\n      {state === \"loading\" ? (\n        <div className=\"flex h-full flex-col gap-4\">\n          <Skeleton className=\"h-4 w-28 rounded-md before:animation-duration-[900ms]\" />\n          <Skeleton className=\"h-10 w-36 rounded-lg before:animation-duration-[900ms]\" />\n        </div>\n      ) : state === \"error\" ? (\n        <div className=\"flex h-full flex-col justify-between gap-3\">\n          <div>\n            <p className=\"text-[13px] font-semibold text-zinc-900\">{data.label}</p>\n            <p className=\"mt-2 text-xs text-red-700\">Erro ao carregar métrica.</p>\n          </div>\n          <button\n            type=\"button\"\n            onClick={(event) => {\n              event.stopPropagation();\n              onRetry();\n            }}\n            className=\"w-fit text-xs font-semibold text-brand underline underline-offset-4\"\n          >\n            Tentar novamente\n          </button>\n        </div>\n      ) : (\n        <>\n          <header className=\"flex h-8 items-center justify-between gap-3\">\n            <div className=\"flex min-w-0 items-center gap-2.5\">\n              <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-[10px] bg-zinc-100 text-zinc-700\">\n                {icon}\n              </div>\n              <p className=\"truncate text-[13px] font-medium text-zinc-600\">\n                {data.label}\n              </p>\n            </div>\n            {isInteractive ? (\n              <ChevronRight className=\"h-4 w-4 shrink-0 text-zinc-400 transition-[color,transform] duration-150 group-hover:translate-x-[1px] group-hover:text-zinc-600\" />\n            ) : null}\n          </header>\n\n          <div className=\"mt-3 flex h-[66px] min-w-0 items-end gap-1.5\">\n            <p className=\"tabular-nums whitespace-nowrap text-[clamp(1.9rem,2.35vw,2.85rem)] leading-[0.92] font-bold tracking-tight text-zinc-900\">\n              <AnimatedKpiValue value={data.value} format={data.valueFormat} />\n            </p>\n            {data.valueSuffix ? (\n              <p className=\"tabular-nums shrink-0 truncate pb-1 text-[13px] font-semibold text-zinc-500\">{data.valueSuffix}</p>\n            ) : null}\n          </div>\n\n          <p className=\"mt-2 h-6 truncate text-[13px] font-medium text-zinc-500\">{data.subtext}</p>\n\n          <footer className=\"mt-auto flex h-[58px] flex-col justify-end pt-3\">\n            <div className=\"flex min-h-[24px] items-center gap-2 overflow-hidden\">\n              {chips.map((chip) => (\n                <KpiChipBadge key={chip.id} chip={chip} />\n              ))}\n\n              {chips.length === 0 && !detailAction ? (\n                <p className=\"truncate text-[12px] text-zinc-500\" title={data.line4Text || \"Sem alertas hoje\"}>\n                  {data.line4Text || \"Sem alertas hoje\"}\n                </p>\n              ) : null}\n\n              {detailAction ? (\n                <button\n                  type=\"button\"\n                  onClick={(event) => {\n                    event.stopPropagation();\n                    onNavigate(detailAction.targetPath);\n                  }}\n                  className=\"inline-flex h-[24px] shrink-0 items-center text-[12px] font-semibold text-brand underline underline-offset-4 transition-[color,transform,opacity] duration-150 hover:translate-x-[1px] hover:text-brand/80\"\n                >\n                  {detailAction.label}\n                </button>\n              ) : null}\n            </div>\n\n            <p className=\"tabular-nums mt-1.5 h-[16px] truncate text-[11px] text-zinc-500\">\n              {data.microText ?? \"\"}\n            </p>\n          </footer>\n        </>\n      )}\n    </motion.article>\n  );\n}\n\nexport function KpiSection() {\n  const router = useRouter();\n  const baseData = useKpiData();\n  const [cardState, setCardState] = useState<Record<keyof typeof baseData, KPIState>>({\n    pipeline: \"default\",\n    conversion: \"default\",\n    activities: \"default\",\n    sla: \"default\",\n  });\n\n  const kpis = useMemo(\n    () => ({\n      pipeline: { ...baseData.pipeline, state: cardState.pipeline },\n      conversion: { ...baseData.conversion, state: cardState.conversion },\n      activities: { ...baseData.activities, state: cardState.activities },\n      sla: { ...baseData.sla, state: cardState.sla },\n    }),\n    [baseData, cardState]\n  );\n\n  function retryCard(card: keyof typeof kpis) {\n    setCardState((prev) => ({ ...prev, [card]: \"loading\" }));\n    window.setTimeout(() => {\n      setCardState((prev) => ({ ...prev, [card]: \"default\" }));\n    }, 240);\n  }\n\n  return (\n    <motion.div\n      variants={cardStaggerContainer}\n      initial=\"hidden\"\n      animate=\"show\"\n      className=\"grid grid-cols-1 items-stretch gap-4 sm:grid-cols-2 xl:grid-cols-4\"\n    >\n      <motion.div custom={0} variants={listItemReveal} className=\"h-full\">\n        <KPITemplateCard\n          icon={<Gauge className=\"h-4 w-4\" />}\n          data={kpis.pipeline}\n          onNavigate={(path) => router.push(path)}\n          onRetry={() => retryCard(\"pipeline\")}\n        />\n      </motion.div>\n\n      <motion.div custom={1} variants={listItemReveal} className=\"h-full\">\n        <KPITemplateCard\n          icon={<TrendingUp className=\"h-4 w-4\" />}\n          data={kpis.conversion}\n          onNavigate={(path) => router.push(path)}\n          onRetry={() => retryCard(\"conversion\")}\n        />\n      </motion.div>\n\n      <motion.div custom={2} variants={listItemReveal} className=\"h-full\">\n        <KPITemplateCard\n          icon={<Clock3 className=\"h-4 w-4\" />}\n          data={kpis.activities}\n          onNavigate={(path) => router.push(path)}\n          onRetry={() => retryCard(\"activities\")}\n        />\n      </motion.div>\n\n      <motion.div custom={3} variants={listItemReveal} className=\"h-full\">\n        <KPITemplateCard\n          icon={<ShieldAlert className=\"h-4 w-4\" />}\n          data={kpis.sla}\n          onNavigate={(path) => router.push(path)}\n          onRetry={() => retryCard(\"sla\")}\n        />\n      </motion.div>\n    </motion.div>\n  );\n}\n","\"use client\";\n\nimport { motion } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport type { FlowStageId, FlowStage } from \"./funnel-config\";\nimport { formatCurrencyCompact } from \"./funnel-utils\";\n\nexport function FlowStepCard({\n  stage,\n  selected,\n  onSelectStage,\n  compact,\n}: {\n  stage: FlowStage;\n  selected: boolean;\n  onSelectStage: (stageId: FlowStageId) => void;\n  compact: boolean;\n}) {\n  return (\n    <motion.button\n      type=\"button\"\n      onClick={() => onSelectStage(stage.id)}\n      whileTap={{ scale: 0.99 }}\n      transition={{ duration: 0.14, ease: \"easeOut\" }}\n      className={cn(\n        \"group/step min-w-0 rounded-xl border px-3 py-3 text-left transition-[background-color,border-color,box-shadow,opacity] duration-[140ms] ease-out\",\n        \"shadow-[0_8px_22px_-18px_rgba(15,23,42,0.45)] hover:shadow-[0_10px_26px_-16px_rgba(15,23,42,0.5)]\",\n        compact ? \"w-full\" : \"flex-[1_1_148px]\",\n        selected\n          ? \"border-brand/40 bg-brand/10 shadow-[0_0_0_1px_rgba(29,78,216,0.14),0_10px_26px_-16px_rgba(29,78,216,0.55)]\"\n          : \"border-zinc-200/85 bg-white/90 hover:border-zinc-300/90\"\n      )}\n      aria-pressed={selected}\n    >\n      <p className=\"truncate text-[11px] font-semibold uppercase tracking-[0.07em] text-zinc-500\">\n        {stage.label}\n      </p>\n      <p className=\"mt-1 text-xl font-bold leading-none text-zinc-900\">\n        {stage.volume}\n      </p>\n      <p className=\"mt-1 text-[11px] text-zinc-500\">{formatCurrencyCompact(stage.value)}</p>\n    </motion.button>\n  );\n}\n","\"use client\";\n\nimport { motion } from \"framer-motion\";\nimport { ArrowDown, ArrowRight } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Tooltip, TooltipContent, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport type { FlowTransition } from \"./funnel-config\";\n\nexport function FlowConnector({\n  transition,\n  isBottleneck,\n  orientation,\n  delay,\n}: {\n  transition: FlowTransition;\n  isBottleneck: boolean;\n  orientation: \"horizontal\" | \"vertical\";\n  delay: number;\n}) {\n  const lineClass = isBottleneck ? \"bg-amber-300/80\" : \"bg-zinc-300/85\";\n  const pillClass = isBottleneck\n    ? \"border-amber-300/80 bg-amber-50 text-amber-700\"\n    : \"border-zinc-200 bg-white text-zinc-600\";\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <motion.div\n          className={cn(\n            \"group/connector relative flex shrink-0 items-center justify-center\",\n            orientation === \"horizontal\"\n              ? \"min-w-[46px] flex-1 md:max-w-[64px]\"\n              : \"h-6 w-full\"\n          )}\n        >\n          {orientation === \"horizontal\" ? (\n            <>\n              <motion.div\n                initial={{ scaleX: 0 }}\n                animate={{ scaleX: 1 }}\n                transition={{ duration: 0.22, delay, ease: \"easeOut\" }}\n                className={cn(\n                  \"h-px w-full origin-left transition-opacity duration-[120ms] group-hover/connector:opacity-100\",\n                  lineClass,\n                  isBottleneck ? \"opacity-95\" : \"opacity-70\"\n                )}\n              />\n              <ArrowRight className=\"ml-1 h-3 w-3 text-zinc-400 transition-opacity duration-[120ms] group-hover/connector:opacity-100\" />\n            </>\n          ) : (\n            <>\n              <motion.div\n                initial={{ scaleY: 0 }}\n                animate={{ scaleY: 1 }}\n                transition={{ duration: 0.22, delay, ease: \"easeOut\" }}\n                className={cn(\n                  \"h-full w-px origin-top transition-opacity duration-[120ms] group-hover/connector:opacity-100\",\n                  lineClass,\n                  isBottleneck ? \"opacity-95\" : \"opacity-70\"\n                )}\n              />\n              <ArrowDown className=\"absolute bottom-[-3px] h-3 w-3 text-zinc-400 transition-opacity duration-[120ms] group-hover/connector:opacity-100\" />\n            </>\n          )}\n\n          <span\n            className={cn(\n              \"absolute rounded-full border px-1.5 py-0.5 text-[10px] font-semibold shadow-sm transition-opacity duration-[120ms] group-hover/connector:opacity-100\",\n              orientation === \"horizontal\" ? \"top-[-11px]\" : \"right-2 top-[2px]\",\n              pillClass,\n              isBottleneck ? \"opacity-100\" : \"opacity-85\"\n            )}\n          >\n            {transition.conversion}%\n          </span>\n        </motion.div>\n      </TooltipTrigger>\n      <TooltipContent side=\"top\" className=\"text-[11px]\">\n        {transition.advanced} de {transition.base} avançaram\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n","\"use client\";\n\nimport { Fragment } from \"react\";\nimport type { FlowStageId, FlowStage, FlowTransition } from \"./funnel-config\";\nimport { FlowStepCard } from \"./flow-step-card\";\nimport { FlowConnector } from \"./flow-connector\";\n\nexport function FlowStepsConnected({\n  stages,\n  transitions,\n  selectedStageId,\n  bottleneckToStageId,\n  onSelectStage,\n}: {\n  stages: FlowStage[];\n  transitions: FlowTransition[];\n  selectedStageId: FlowStageId | null;\n  bottleneckToStageId: FlowStageId | null;\n  onSelectStage: (stageId: FlowStageId) => void;\n}) {\n  return (\n    <>\n      <div className=\"hidden items-stretch gap-2 md:flex md:flex-wrap xl:flex-nowrap\">\n        {stages.map((stage, index) => (\n          <Fragment key={stage.id}>\n            <FlowStepCard\n              stage={stage}\n              selected={selectedStageId === stage.id}\n              onSelectStage={onSelectStage}\n              compact={false}\n            />\n            {index < transitions.length && (\n              <FlowConnector\n                transition={transitions[index]}\n                isBottleneck={bottleneckToStageId === transitions[index].to.id}\n                orientation=\"horizontal\"\n                delay={index * 0.03}\n              />\n            )}\n          </Fragment>\n        ))}\n      </div>\n\n      <div className=\"space-y-2 md:hidden\">\n        {stages.map((stage, index) => (\n          <Fragment key={`mobile-${stage.id}`}>\n            <FlowStepCard\n              stage={stage}\n              selected={selectedStageId === stage.id}\n              onSelectStage={onSelectStage}\n              compact\n            />\n            {index < transitions.length && (\n              <FlowConnector\n                transition={transitions[index]}\n                isBottleneck={bottleneckToStageId === transitions[index].to.id}\n                orientation=\"vertical\"\n                delay={index * 0.03}\n              />\n            )}\n          </Fragment>\n        ))}\n      </div>\n    </>\n  );\n}\n","\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport {\n  AlertTriangle,\n  ArrowRight,\n  ArrowUpRight,\n  Sparkles,\n  TrendingDown,\n} from \"lucide-react\";\nimport { usePathname, useRouter, useSearchParams } from \"next/navigation\";\nimport { BentoCard } from \"@/components/ui/bento-card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\nimport { useActivityStore } from \"@/stores/activity-store\";\nimport { useDashboardFilters } from \"@/hooks/use-dashboard-filters\";\nimport type { FlowStageId, FunnelXRayState, ActionState } from \"./funnel-config\";\nimport {\n  FLOW_STAGE_LABELS,\n  FLOW_STAGE_ORDER,\n  PIPELINE_TO_FLOW,\n  STAGE_TO_PIPELINE,\n  buildStagesFromOpportunities,\n} from \"./funnel-config\";\nimport { buildTransitions } from \"./funnel-utils\";\nimport { FlowStepsConnected } from \"./flow-steps-connected\";\n\nconst STALLED_OPPORTUNITY_DAYS = 5;\nconst DAY_MS = 24 * 60 * 60 * 1000;\n\ntype InsightCardStatus = \"default\" | \"loading\" | \"error\";\ntype InsightCardTone = \"neutral\" | \"danger\" | \"success\";\n\ninterface InsightCardAction {\n  label: string;\n  onAction: () => void;\n  loading?: boolean;\n  disabled?: boolean;\n  asButton?: boolean;\n}\n\ninterface InsightCardSecondaryAction {\n  label: string;\n  onAction: () => void;\n  loading?: boolean;\n}\n\nfunction parseDashboardStageParam(stageParam: string | null): FlowStageId | null {\n  if (!stageParam) return null;\n\n  if (FLOW_STAGE_ORDER.includes(stageParam as FlowStageId)) {\n    return stageParam as FlowStageId;\n  }\n\n  return PIPELINE_TO_FLOW[stageParam] ?? null;\n}\n\nfunction InsightLineCard({\n  tag,\n  headline,\n  description,\n  meta,\n  primaryAction,\n  secondaryAction,\n  onRetry,\n  status = \"default\",\n  tone = \"neutral\",\n  icon,\n  feedback,\n}: {\n  tag: string;\n  headline: string;\n  description: string;\n  meta?: string;\n  primaryAction: InsightCardAction;\n  secondaryAction?: InsightCardSecondaryAction;\n  onRetry: () => void;\n  status?: InsightCardStatus;\n  tone?: InsightCardTone;\n  icon?: React.ReactNode;\n  feedback?: React.ReactNode;\n}) {\n  const isInteractive = status === \"default\";\n\n  const toneClass =\n    tone === \"danger\"\n      ? \"border-red-200/80 bg-red-50/55 hover:border-red-300/90\"\n      : tone === \"success\"\n        ? \"border-emerald-200/80 bg-emerald-50/55 hover:border-emerald-300/90\"\n        : \"border-zinc-200/80 bg-white/85 hover:border-zinc-300/90\";\n\n  function handleCardAction() {\n    if (!isInteractive || primaryAction.disabled || primaryAction.loading) return;\n    primaryAction.onAction();\n  }\n\n  function handleCardKeyDown(event: React.KeyboardEvent<HTMLElement>) {\n    if (!isInteractive || primaryAction.disabled || primaryAction.loading) return;\n    if (event.key === \"Enter\" || event.key === \" \") {\n      event.preventDefault();\n      primaryAction.onAction();\n    }\n  }\n\n  return (\n    <motion.article\n      onClick={handleCardAction}\n      onKeyDown={handleCardKeyDown}\n      role={isInteractive ? \"button\" : undefined}\n      tabIndex={isInteractive ? 0 : -1}\n      aria-disabled={!isInteractive}\n      whileTap={isInteractive ? { scale: 0.99 } : undefined}\n      transition={{ duration: 0.1, ease: \"easeOut\" }}\n      className={cn(\n        \"flex min-h-[186px] flex-col rounded-[20px] border p-4\",\n        \"shadow-[0_10px_20px_-18px_rgba(15,23,42,0.5)]\",\n        \"transition-[background-color,border-color,box-shadow,opacity,color] duration-140 ease-out\",\n        toneClass,\n        isInteractive && \"cursor-pointer hover:shadow-[0_14px_24px_-18px_rgba(15,23,42,0.55)]\",\n        \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/25\"\n      )}\n    >\n      {status === \"loading\" ? (\n        <div className=\"flex h-full flex-col gap-3\">\n          <Skeleton className=\"h-5 w-28 rounded-md\" />\n          <Skeleton className=\"h-8 w-4/5 rounded-md\" />\n          <Skeleton className=\"h-4 w-3/4 rounded-md\" />\n          <div className=\"mt-auto\">\n            <Skeleton className=\"h-4 w-20 rounded-md\" />\n          </div>\n        </div>\n      ) : status === \"error\" ? (\n        <div className=\"flex h-full flex-col\">\n          <p className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-zinc-500\">\n            {tag}\n          </p>\n          <p className=\"mt-3 text-sm font-semibold text-zinc-900\">Erro ao carregar este insight.</p>\n          <p className=\"mt-1 text-xs text-zinc-500\">Os dados não puderam ser processados agora.</p>\n          <button\n            type=\"button\"\n            onClick={(event) => {\n              event.stopPropagation();\n              onRetry();\n            }}\n            className=\"mt-auto w-fit text-xs font-semibold text-brand underline underline-offset-4\"\n          >\n            Tentar novamente\n          </button>\n        </div>\n      ) : (\n        <>\n          <div className=\"flex items-center justify-between gap-2\">\n            <p className=\"text-[11px] font-semibold uppercase tracking-[0.08em] text-zinc-500\">\n              {tag}\n            </p>\n            {icon ? <span className=\"text-zinc-500\">{icon}</span> : null}\n          </div>\n\n          <p className=\"mt-2 truncate text-[1.18rem] font-bold leading-tight text-zinc-900\">\n            {headline}\n          </p>\n\n          <div className=\"mt-2\">\n            <p className=\"truncate text-[13px] text-zinc-600\">{description}</p>\n            {meta ? <p className=\"mt-0.5 text-[11px] text-zinc-500\">{meta}</p> : null}\n          </div>\n\n          <div className=\"mt-auto pt-3\">\n            {feedback ? <div className=\"mb-2 text-[11px]\">{feedback}</div> : null}\n\n            {primaryAction.asButton ? (\n              <button\n                type=\"button\"\n                disabled={Boolean(primaryAction.disabled || primaryAction.loading)}\n                onClick={(event) => {\n                  event.stopPropagation();\n                  if (primaryAction.disabled || primaryAction.loading) return;\n                  primaryAction.onAction();\n                }}\n                className=\"h-9 w-full rounded-full bg-zinc-900 text-xs font-semibold text-white transition-colors hover:bg-zinc-800 disabled:cursor-not-allowed disabled:opacity-65\"\n              >\n                {primaryAction.label}\n              </button>\n            ) : (\n              <button\n                type=\"button\"\n                onClick={(event) => {\n                  event.stopPropagation();\n                  primaryAction.onAction();\n                }}\n                className=\"inline-flex items-center gap-1 text-xs font-semibold text-brand underline-offset-4 transition-colors hover:text-brand-strong hover:underline\"\n              >\n                {primaryAction.label}\n                <ArrowRight className=\"h-3 w-3\" />\n              </button>\n            )}\n\n            {secondaryAction ? (\n              <button\n                type=\"button\"\n                onClick={(event) => {\n                  event.stopPropagation();\n                  secondaryAction.onAction();\n                }}\n                disabled={Boolean(secondaryAction.loading)}\n                className=\"mt-2 w-full text-center text-xs font-semibold text-zinc-600 underline-offset-4 transition-colors hover:text-zinc-800 hover:underline disabled:cursor-not-allowed disabled:opacity-65\"\n              >\n                {secondaryAction.label}\n              </button>\n            ) : null}\n          </div>\n        </>\n      )}\n    </motion.article>\n  );\n}\n\nexport function FunnelXRay({ state = \"ready\" }: { state?: FunnelXRayState }) {\n  const router = useRouter();\n  const pathname = usePathname();\n  const searchParams = useSearchParams();\n  const addActivity = useActivityStore((store) => store.addActivity);\n  const [viewState, setViewState] = useState<FunnelXRayState>(state);\n  const [actionState, setActionState] = useState<ActionState>(\"idle\");\n  const [createdCount, setCreatedCount] = useState(0);\n\n  const {\n    filteredOpportunities,\n    openOpportunities,\n    now,\n    userId,\n  } = useDashboardFilters();\n\n  const stages = useMemo(\n    () => buildStagesFromOpportunities(filteredOpportunities, now),\n    [filteredOpportunities, now]\n  );\n\n  const transitions = useMemo(() => buildTransitions(stages), [stages]);\n  const hasEnoughData = stages.length >= 2 && stages.some((stage) => stage.volume > 0);\n\n  const selectedStageId = useMemo(\n    () =>\n      parseDashboardStageParam(\n        searchParams.get(\"stage\") ?? searchParams.get(\"stageId\")\n      ),\n    [searchParams]\n  );\n\n  const selectedStage = useMemo(() => {\n    if (!selectedStageId) return null;\n    return stages.find((stage) => stage.id === selectedStageId) ?? null;\n  }, [selectedStageId, stages]);\n\n  const bottleneck = useMemo(() => {\n    if (transitions.length === 0) return null;\n    return transitions.reduce((min, current) =>\n      current.conversion < min.conversion ? current : min\n    );\n  }, [transitions]);\n\n  const criticalStage = useMemo(() => {\n    const criticalStageId = bottleneck?.to.id ?? stages[0]?.id ?? null;\n    if (!criticalStageId) return null;\n    return stages.find((stage) => stage.id === criticalStageId) ?? null;\n  }, [bottleneck, stages]);\n\n  const scopeStage = selectedStage ?? criticalStage;\n  const insightScopeKey = selectedStage?.id ?? \"all\";\n\n  const bestStage = useMemo(() => {\n    if (transitions.length === 0) return null;\n    return transitions.reduce((best, current) =>\n      current.conversion > best.conversion ? current : best\n    );\n  }, [transitions]);\n\n  const highlightConversion = bestStage?.conversion ?? 0;\n  const highlightStageName = bestStage?.from.label ?? \"—\";\n  const highlightReason = bestStage\n    ? `${bestStage.advanced} de ${bestStage.base} oportunidades avançaram no período.`\n    : \"Sem base comparável no período.\";\n\n  const riskData = useMemo(() => {\n    const threshold = now.getTime() - STALLED_OPPORTUNITY_DAYS * DAY_MS;\n    const selectedPipelineStage = selectedStage\n      ? STAGE_TO_PIPELINE[selectedStage.id]\n      : null;\n\n    const scopedOpps = openOpportunities.filter((opportunity) => {\n      if (!selectedPipelineStage) return true;\n      return opportunity.stage === selectedPipelineStage;\n    });\n\n    const stalledOpps = scopedOpps\n      .filter((opportunity) => new Date(opportunity.updatedAt).getTime() < threshold)\n      .sort(\n        (first, second) =>\n          new Date(first.updatedAt).getTime() - new Date(second.updatedAt).getTime()\n      );\n\n    const topDeal = stalledOpps[0] ?? null;\n    const total = stalledOpps.length;\n\n    if (!topDeal) {\n      const fallbackFlowId = selectedStage?.id ?? criticalStage?.id ?? null;\n      return {\n        topDealLabel: \"Sem oportunidades em risco hoje\",\n        description: selectedStage\n          ? `Etapa ${selectedStage.label} sem alertas críticos.`\n          : \"Sua carteira está sem riscos críticos no momento.\",\n        meta: \"Total em risco: 0\",\n        total,\n        stageId: fallbackFlowId,\n      };\n    }\n\n    const topDealFlowId = PIPELINE_TO_FLOW[topDeal.stage] ?? selectedStage?.id ?? null;\n    const stageLabel = topDealFlowId\n      ? FLOW_STAGE_LABELS[topDealFlowId]\n      : \"Etapa atual\";\n    const stalledDays = Math.max(\n      1,\n      Math.round((now.getTime() - new Date(topDeal.updatedAt).getTime()) / DAY_MS)\n    );\n\n    return {\n      topDealLabel: topDeal.title || topDeal.clientName,\n      description: `${stalledDays} dias sem retorno · ${stageLabel}`,\n      meta: `Total em risco: ${total}`,\n      total,\n      stageId: topDealFlowId,\n    };\n  }, [openOpportunities, now, selectedStage, criticalStage]);\n\n  const bottleneckDrop = bottleneck ? Math.max(0, 100 - bottleneck.conversion) : 0;\n\n  useEffect(() => {\n    setViewState(state);\n  }, [state]);\n\n  useEffect(() => {\n    setActionState(\"idle\");\n    setCreatedCount(0);\n  }, [selectedStage?.id]);\n\n  // Auto-dismiss action feedback after 6 seconds\n  useEffect(() => {\n    if (actionState !== \"success\" && actionState !== \"error\") return;\n    const t = setTimeout(() => setActionState(\"idle\"), 6000);\n    return () => clearTimeout(t);\n  }, [actionState]);\n\n\n  function setStageSelection(nextStageId: FlowStageId | null) {\n    const current = selectedStage?.id ?? null;\n    if (current === nextStageId) return;\n\n    const params = new URLSearchParams(searchParams.toString());\n    if (nextStageId) {\n      params.set(\"stage\", STAGE_TO_PIPELINE[nextStageId]);\n    } else {\n      params.delete(\"stage\");\n      params.delete(\"stageId\");\n    }\n\n    const serialized = params.toString();\n    router.replace(serialized ? `${pathname}?${serialized}` : pathname, {\n      scroll: false,\n    });\n  }\n\n  function openPipeline({\n    stageId,\n    filters,\n  }: {\n    stageId?: FlowStageId;\n    filters?: \"risk\" | \"stalled\" | \"no_activity\" | \"sla_overdue\" | \"sla_risk\";\n  } = {}) {\n    const params = new URLSearchParams();\n\n    if (stageId) {\n      params.set(\"stageId\", STAGE_TO_PIPELINE[stageId]);\n    }\n\n    if (filters) {\n      params.set(\"filters\", filters);\n    }\n\n    const serialized = params.toString();\n    router.push(serialized ? `/pipes?${serialized}` : \"/pipes\");\n  }\n\n  function openHighlightReason() {\n    if (bestStage?.from.id) {\n      setStageSelection(bestStage.from.id);\n    }\n  }\n\n  function openActivitiesFromAction() {\n    router.push(\"/activities?statuses=pending,overdue&q=Follow-up\");\n  }\n\n\n  function handleRecommendedAction() {\n    if (actionState === \"loading\") return;\n    if (!scopeStage) {\n      setActionState(\"error\");\n      return;\n    }\n\n    setActionState(\"loading\");\n\n    const pipelineStage = STAGE_TO_PIPELINE[scopeStage.id];\n    const stalledThreshold = STALLED_OPPORTUNITY_DAYS * DAY_MS;\n    const stalledOpps = openOpportunities\n      .filter(\n        (opportunity) =>\n          opportunity.stage === pipelineStage &&\n          now.getTime() - new Date(opportunity.updatedAt).getTime() > stalledThreshold\n      )\n      .slice(0, 3);\n\n    const tomorrow = new Date(now);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    const tomorrowStr = tomorrow.toISOString().split(\"T\")[0];\n\n    let count = 0;\n\n    for (const opportunity of stalledOpps) {\n      addActivity({\n        title: `Follow-up: ${opportunity.title || opportunity.clientName}`,\n        description: `Cobrar feedback — oportunidade parada há +${Math.round(\n          (now.getTime() - new Date(opportunity.updatedAt).getTime()) / DAY_MS\n        )} dias`,\n        type: \"call\",\n        status: \"pending\",\n        dueDate: tomorrowStr,\n        dueTime: \"10:00\",\n        opportunityId: opportunity.id,\n        clientId: opportunity.clientId || \"\",\n        responsibleId: userId || opportunity.responsibleId,\n        responsibleName: opportunity.responsibleName,\n      });\n      count += 1;\n    }\n\n    if (count === 0) {\n      setCreatedCount(0);\n      setActionState(\"error\");\n      return;\n    }\n\n    setCreatedCount(count);\n    setActionState(\"success\");\n  }\n\n  function handleRetry() {\n    setViewState(\"loading\");\n    window.setTimeout(() => {\n      setViewState(\"ready\");\n    }, 260);\n  }\n\n  return (\n    <BentoCard\n      noPadding\n      elevated\n      className=\"premium-panel min-h-0 overflow-hidden border-zinc-200/80 bg-white/86 shadow-[0_20px_32px_-28px_rgba(15,23,42,0.45)]\"\n    >\n      <div className=\"border-b border-zinc-200/75 bg-white/85 px-3.5 py-3 backdrop-blur-sm\">\n        <div className=\"flex items-start justify-between gap-3\">\n          <div className=\"min-w-0\">\n            <h3 className=\"font-heading text-[1.02rem] font-semibold text-zinc-900\">\n              Raio X do Funil\n            </h3>\n            <p className=\"truncate text-xs text-zinc-500\">\n              Fluxo de conversão, gargalos e ação recomendada para hoje\n            </p>\n          </div>\n          <motion.button\n            type=\"button\"\n            onClick={() => openPipeline({ stageId: selectedStage?.id })}\n            whileTap={{ scale: 0.99 }}\n            transition={{ duration: 0.09, ease: \"easeOut\" }}\n            className=\"group inline-flex shrink-0 items-center gap-1.5 rounded-full px-2 py-1 text-xs font-semibold text-zinc-700 transition-[background-color,color,border-color,opacity] duration-120 ease-out hover:bg-zinc-100 hover:text-zinc-900\"\n          >\n            <span className=\"underline-offset-4 transition-colors duration-120 group-hover:underline\">\n              Ver Pipeline\n            </span>\n            <ArrowRight className=\"h-3.5 w-3.5\" />\n          </motion.button>\n        </div>\n      </div>\n\n      {viewState === \"ready\" && !hasEnoughData ? (\n        <div className=\"p-5\">\n          <div className=\"rounded-xl border border-dashed border-zinc-300 bg-zinc-50/70 p-4\">\n            <p className=\"text-sm font-semibold text-zinc-900\">\n              Sem dados suficientes para o Raio X\n            </p>\n            <p className=\"mt-1 text-xs text-zinc-500\">\n              Cadastre oportunidades para gerar conversão e gargalos acionáveis.\n            </p>\n            <Button\n              size=\"sm\"\n              className=\"mt-3 h-8 rounded-full bg-zinc-900 text-xs text-white hover:bg-zinc-800\"\n              onClick={() => openPipeline()}\n            >\n              Ver pipeline\n            </Button>\n          </div>\n        </div>\n      ) : null}\n\n      {viewState === \"loading\" || viewState === \"error\" ? (\n        <div className=\"p-5\">\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-2 xl:grid-cols-4\">\n            <InsightLineCard\n              tag=\"Oportunidades em risco\"\n              headline=\"\"\n              description=\"\"\n              primaryAction={{ label: \"Ver etapa\", onAction: () => {} }}\n              onRetry={handleRetry}\n              status={viewState === \"loading\" ? \"loading\" : \"error\"}\n            />\n            <InsightLineCard\n              tag=\"Top gargalo\"\n              headline=\"\"\n              description=\"\"\n              primaryAction={{ label: \"Ver lista\", onAction: () => {} }}\n              onRetry={handleRetry}\n              status={viewState === \"loading\" ? \"loading\" : \"error\"}\n            />\n            <InsightLineCard\n              tag=\"Destaque\"\n              headline=\"\"\n              description=\"\"\n              primaryAction={{ label: \"Ver motivo\", onAction: () => {} }}\n              onRetry={handleRetry}\n              status={viewState === \"loading\" ? \"loading\" : \"error\"}\n            />\n            <InsightLineCard\n              tag=\"Ação recomendada\"\n              headline=\"\"\n              description=\"\"\n              primaryAction={{ label: \"Cobrar feedbacks\", onAction: () => {}, asButton: true }}\n              onRetry={handleRetry}\n              status={viewState === \"loading\" ? \"loading\" : \"error\"}\n            />\n          </div>\n        </div>\n      ) : null}\n\n      {viewState === \"ready\" && hasEnoughData ? (\n        <motion.div\n          initial={{ opacity: 0, y: 6 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.18, ease: \"easeOut\" }}\n          className=\"flex flex-col gap-5 p-5\"\n        >\n          <div className=\"space-y-4\">\n            <TooltipProvider delayDuration={80}>\n              <FlowStepsConnected\n                stages={stages}\n                transitions={transitions}\n                selectedStageId={selectedStage?.id ?? null}\n                bottleneckToStageId={bottleneck?.to.id ?? null}\n                onSelectStage={setStageSelection}\n              />\n            </TooltipProvider>\n\n            {selectedStage ? (\n              <div className=\"flex flex-wrap items-center justify-between gap-2 rounded-xl border border-zinc-200/80 bg-zinc-50/70 px-3 py-2\">\n                <p className=\"text-xs text-zinc-600\">\n                  Exibindo insights da etapa:{\" \"}\n                  <span className=\"font-semibold text-zinc-900\">{selectedStage.label}</span>\n                </p>\n                <button\n                  type=\"button\"\n                  onClick={() => setStageSelection(null)}\n                  className=\"text-xs font-semibold text-brand underline underline-offset-4\"\n                >\n                  Limpar seleção\n                </button>\n              </div>\n            ) : null}\n\n            <AnimatePresence mode=\"wait\">\n              <motion.div\n                key={insightScopeKey}\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n                transition={{ duration: 0.14 }}\n                className=\"grid grid-cols-1 gap-3 md:grid-cols-2 xl:grid-cols-4\"\n              >\n                <InsightLineCard\n                  tag=\"Oportunidades em risco\"\n                  headline={riskData.topDealLabel}\n                  description={riskData.description}\n                  meta={riskData.meta}\n                  primaryAction={{\n                    label: riskData.total > 0 ? \"Ver etapa\" : \"Ver pipeline\",\n                    onAction: () =>\n                      riskData.total > 0\n                        ? openPipeline({ stageId: riskData.stageId ?? undefined, filters: \"risk\" })\n                        : openPipeline({ stageId: selectedStage?.id }),\n                  }}\n                  onRetry={handleRetry}\n                  icon={<AlertTriangle className=\"h-4 w-4 text-amber-600\" />}\n                />\n\n                <InsightLineCard\n                  tag=\"Top gargalo\"\n                  headline={\n                    bottleneck\n                      ? `Queda de ${bottleneckDrop}% em ${bottleneck.to.label}`\n                      : \"Sem gargalos relevantes no período\"\n                  }\n                  description={\n                    bottleneck\n                      ? `${bottleneck.to.stalledCount} oportunidades paradas há +${bottleneck.to.stalledDays} dias`\n                      : \"Nenhuma etapa com queda crítica no período atual.\"\n                  }\n                  primaryAction={{\n                    label: bottleneck ? \"Ver lista\" : \"Ver pipeline\",\n                    onAction: () =>\n                      bottleneck\n                        ? openPipeline({ stageId: bottleneck.to.id, filters: \"stalled\" })\n                        : openPipeline(),\n                  }}\n                  onRetry={handleRetry}\n                  tone={bottleneck ? \"danger\" : \"neutral\"}\n                  icon={<TrendingDown className=\"h-4 w-4 text-red-600\" />}\n                />\n\n                <InsightLineCard\n                  tag=\"Destaque\"\n                  headline={\n                    bestStage && bestStage.base > 0\n                      ? `Melhor conversão: ${highlightConversion}% em ${highlightStageName}`\n                      : \"Sem base comparável no período\"\n                  }\n                  description={highlightReason}\n                  primaryAction={{\n                    label: bestStage && bestStage.base > 0 ? \"Ver motivo\" : \"Ver pipeline\",\n                    onAction: () =>\n                      bestStage && bestStage.base > 0 ? openHighlightReason() : openPipeline(),\n                  }}\n                  onRetry={handleRetry}\n                  tone={bestStage && bestStage.base > 0 ? \"success\" : \"neutral\"}\n                  icon={<ArrowUpRight className=\"h-4 w-4 text-emerald-600\" />}\n                />\n\n                <InsightLineCard\n                  tag=\"Ação recomendada\"\n                  headline={scopeStage ? \"Cobrar feedbacks\" : \"Nenhuma ação recomendada agora\"}\n                  description={\n                    scopeStage\n                      ? `Atenção: ${riskData.total} oportunidades paradas. Priorizar follow-up hoje.`\n                      : \"Sem oportunidades paradas críticas neste momento.\"\n                  }\n                  primaryAction={{\n                    label:\n                      actionState === \"loading\"\n                        ? \"Criando ações...\"\n                        : scopeStage\n                          ? \"Cobrar feedbacks\"\n                          : \"Ver pipeline\",\n                    onAction: () =>\n                      scopeStage ? handleRecommendedAction() : openPipeline(),\n                    asButton: true,\n                    disabled: actionState === \"loading\",\n                    loading: actionState === \"loading\",\n                  }}\n                  feedback={\n                    <>\n                      {actionState === \"success\" ? (\n                        <p className=\"rounded-md border border-emerald-200 bg-emerald-50 px-2 py-1 text-emerald-700\">\n                          Ações criadas ({createdCount}).{\" \"}\n                          <button\n                            type=\"button\"\n                            onClick={(event) => {\n                              event.stopPropagation();\n                              openActivitiesFromAction();\n                            }}\n                            className=\"font-semibold underline underline-offset-4\"\n                          >\n                            Ver atividades\n                          </button>\n                        </p>\n                      ) : null}\n\n                      {actionState === \"error\" ? (\n                        <p className=\"rounded-md border border-red-200 bg-red-50 px-2 py-1 text-red-700\">\n                          Não foi possível criar ações agora.{\" \"}\n                          <button\n                            type=\"button\"\n                            onClick={(event) => {\n                              event.stopPropagation();\n                              handleRecommendedAction();\n                            }}\n                            className=\"font-semibold underline underline-offset-4\"\n                          >\n                            Tentar novamente\n                          </button>\n                        </p>\n                      ) : null}\n\n                    </>\n                  }\n                  onRetry={handleRetry}\n                  icon={<Sparkles className=\"h-4 w-4 text-brand\" />}\n                />\n              </motion.div>\n            </AnimatePresence>\n          </div>\n\n        </motion.div>\n      ) : null}\n    </BentoCard>\n  );\n}\n","\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  AlertCircle,\n  AlertTriangle,\n  CalendarClock,\n  CheckCircle2,\n  ChevronRight,\n  Clock3,\n  Copy,\n  ExternalLink,\n  Info,\n  Mail,\n  MessageCircle,\n  MoreHorizontal,\n  Phone,\n  RefreshCw,\n  ShieldAlert,\n  Target,\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { BentoCard } from \"@/components/ui/bento-card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverDescription,\n  PopoverHeader,\n  PopoverTitle,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useActivityStore } from \"@/stores/activity-store\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport { useClientStore } from \"@/stores/client-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { useExecutionPanelData } from \"@/hooks/use-execution-panel-data\";\nimport { useDashboardFilters } from \"@/hooks/use-dashboard-filters\";\nimport { getActivityDueAt } from \"@/lib/business-rules\";\nimport type { RiskAlert } from \"@/lib/proactive-engine\";\nimport type { Activity, PipelineStage } from \"@/types\";\n\ntype AlertSeverity = \"critical\" | \"high\" | \"medium\";\ntype AlertKind =\n  | \"health_critical\"\n  | \"goal_risk\"\n  | \"stalled_deal\"\n  | \"overdue_activities\"\n  | \"sla_risk\"\n  | \"contract_risk\";\ntype AlertGroup = \"churn\" | \"pipeline\" | \"activities\" | \"goals\";\ntype AlertFilter = \"all\" | \"critical\" | AlertGroup;\ntype AlertLifecycle = \"open\" | \"in_progress\" | \"resolved\" | \"snoozed\";\ntype FeedbackTone = \"success\" | \"error\" | \"info\";\n\ninterface AlertFeedback {\n  tone: FeedbackTone;\n  message: string;\n  linkLabel?: string;\n  linkPath?: string;\n}\n\ninterface AlertRuntime {\n  status: AlertLifecycle;\n  feedback?: AlertFeedback;\n}\n\ninterface DisplayAlert {\n  id: string;\n  title: string;\n  context: string;\n  impact: string;\n  recommendation: string;\n  consequence: string;\n  severity: AlertSeverity;\n  kind: AlertKind;\n  group: AlertGroup;\n  reasonCode: string;\n  viewPath: string;\n  entityId?: string;\n  impactScore: number;\n  duplicateCount: number;\n}\n\ninterface SnoozedAlert {\n  id: string;\n  label: string;\n}\n\ninterface ResolveResult {\n  message: string;\n  linkLabel?: string;\n  linkPath?: string;\n}\n\ninterface ActivityAgendaItem {\n  id: string;\n  title: string;\n  clientLine: string;\n  description: string;\n  type: Activity[\"type\"];\n  status: \"pending\" | \"overdue\";\n  dueDate: string;\n  dueTime?: string;\n  dueAt: Date;\n  hasTime: boolean;\n  delayLabel: string | null;\n}\n\ninterface AgendaNotice {\n  tone: FeedbackTone;\n  message: string;\n  linkLabel?: string;\n  linkPath?: string;\n}\n\ninterface AgendaItemRuntime {\n  loading?: boolean;\n  error?: string;\n}\n\ninterface RescheduleDraft {\n  dueDate: string;\n  dueTime: string;\n}\n\nconst STAGE_LABELS: Record<PipelineStage, string> = {\n  \"lead-in\": \"Leads\",\n  \"contato-feito\": \"Contato\",\n  \"reuniao-agendada\": \"Reunião\",\n  \"proposta-enviada\": \"Proposta\",\n  negociacao: \"Negociação\",\n  fechamento: \"Fechamento\",\n};\n\nconst ALERT_FILTER_OPTIONS: Array<{ id: AlertFilter; label: string }> = [\n  { id: \"all\", label: \"Todos\" },\n  { id: \"critical\", label: \"Críticos\" },\n  { id: \"churn\", label: \"Risco de churn\" },\n  { id: \"pipeline\", label: \"Pipeline parado\" },\n  { id: \"activities\", label: \"Atividades\" },\n  { id: \"goals\", label: \"Metas\" },\n];\n\nconst SNOOZE_OPTIONS = [\n  { label: \"1h\", hours: 1 },\n  { label: \"Amanhã\", hours: 24 },\n  { label: \"1 semana\", hours: 24 * 7 },\n] as const;\n\nconst ALERT_SEVERITY_ORDER: Record<AlertSeverity, number> = {\n  critical: 0,\n  high: 1,\n  medium: 2,\n};\n\nconst ALERT_STATUS_ORDER: Record<AlertLifecycle, number> = {\n  in_progress: 0,\n  open: 1,\n  resolved: 2,\n  snoozed: 3,\n};\n\nconst FALLBACK_RETRY_MESSAGE = \"Não consegui resolver agora.\";\n\nfunction toDateOnly(date: Date): string {\n  const year = date.getFullYear();\n  const month = `${date.getMonth() + 1}`.padStart(2, \"0\");\n  const day = `${date.getDate()}`.padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n\nfunction addDays(baseDate: Date, days: number): Date {\n  const next = new Date(baseDate);\n  next.setDate(next.getDate() + days);\n  return next;\n}\n\nfunction formatStage(stage?: PipelineStage): string {\n  if (!stage) return \"Sem etapa\";\n  return STAGE_LABELS[stage] ?? \"Sem etapa\";\n}\n\nfunction mapRiskSeverity(severity: RiskAlert[\"severity\"]): AlertSeverity {\n  return severity === \"critical\" ? \"critical\" : \"high\";\n}\n\nfunction formatDelay(ms: number): string {\n  if (!Number.isFinite(ms) || ms <= 0) return \"0min\";\n  const totalMinutes = Math.max(1, Math.round(ms / (1000 * 60)));\n  if (totalMinutes < 60) return `${totalMinutes}min`;\n\n  const totalHours = Math.round(totalMinutes / 60);\n  if (totalHours < 24) return `${totalHours}h`;\n\n  const days = Math.round(totalHours / 24);\n  return `${days}d`;\n}\n\nfunction formatSnoozeUntil(baseDate: Date, hours: number): string {\n  const until = new Date(baseDate.getTime() + hours * 60 * 60 * 1000);\n  return until.toLocaleString(\"pt-BR\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n}\n\nfunction formatRescheduleLabel(dueDate: string, dueTime?: string): string {\n  const parsed = new Date(`${dueDate}T${dueTime || \"09:00\"}:00`);\n  if (Number.isNaN(parsed.getTime())) {\n    return dueTime ? `${dueDate} ${dueTime}` : dueDate;\n  }\n\n  return parsed.toLocaleString(\"pt-BR\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n}\n\nfunction getAlertBadgeClass(severity: AlertSeverity): string {\n  if (severity === \"critical\") {\n    return \"border-red-200 bg-red-50 text-red-700\";\n  }\n\n  if (severity === \"high\") {\n    return \"border-amber-200 bg-amber-50 text-amber-700\";\n  }\n\n  return \"border-sky-200 bg-sky-50 text-sky-700\";\n}\n\nfunction getSeverityLabel(severity: AlertSeverity): string {\n  if (severity === \"critical\") return \"Crítico\";\n  if (severity === \"high\") return \"Alto\";\n  return \"Médio\";\n}\n\nfunction getAlertIcon(alert: DisplayAlert) {\n  if (alert.kind === \"sla_risk\") {\n    return <ShieldAlert className=\"h-4 w-4 text-red-600\" />;\n  }\n\n  if (alert.kind === \"goal_risk\") {\n    return <Target className=\"h-4 w-4 text-amber-600\" />;\n  }\n\n  if (alert.severity === \"critical\") {\n    return <AlertCircle className=\"h-4 w-4 text-red-600\" />;\n  }\n\n  if (alert.severity === \"high\") {\n    return <AlertTriangle className=\"h-4 w-4 text-amber-600\" />;\n  }\n\n  return <Info className=\"h-4 w-4 text-sky-600\" />;\n}\n\nfunction matchesAlertFilter(alert: DisplayAlert, filter: AlertFilter): boolean {\n  if (filter === \"all\") return true;\n  if (filter === \"critical\") return alert.severity === \"critical\";\n  return alert.group === filter;\n}\n\nfunction getExecuteLabel(type: Activity[\"type\"]): string {\n  if (type === \"call\") return \"Ligar\";\n  if (type === \"whatsapp\") return \"WhatsApp\";\n  if (type === \"email\") return \"Email\";\n  if (type === \"meeting\") return \"Entrar\";\n  return \"Executar\";\n}\n\nfunction getExecutePath(activityId: string, type: Activity[\"type\"]): string {\n  return `/activities?activityId=${activityId}&execute=${type}`;\n}\n\nfunction getActivityTypeIcon(type: Activity[\"type\"]) {\n  if (type === \"call\") return Phone;\n  if (type === \"email\") return Mail;\n  if (type === \"whatsapp\") return MessageCircle;\n  return CalendarClock;\n}\n\nfunction isActionableAlert(status: AlertLifecycle): boolean {\n  return status === \"open\" || status === \"in_progress\";\n}\n\nfunction sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => {\n    window.setTimeout(resolve, ms);\n  });\n}\n\nexport function CriticalAlerts() {\n  const router = useRouter();\n  const { riskAlerts } = useExecutionPanelData();\n  const {\n    filteredActivities,\n    openOpportunities,\n    now,\n    userId,\n  } = useDashboardFilters();\n\n  const userName = useAuthStore((s) => s.user?.name ?? \"Sales Executive\");\n  const clients = useClientStore((s) => s.clients);\n  const allActivities = useActivityStore((s) => s.activities);\n  const activityLoading = useActivityStore((s) => s.isLoading);\n  const opportunityLoading = useOpportunityStore((s) => s.isLoading);\n\n  const addActivity = useActivityStore((s) => s.addActivity);\n  const updateOpportunity = useOpportunityStore((s) => s.updateOpportunity);\n\n  const [activeFilter, setActiveFilter] = useState<AlertFilter>(\"all\");\n  const [runtimeById, setRuntimeById] = useState<Record<string, AlertRuntime>>({});\n  const [dismissedIds, setDismissedIds] = useState<Set<string>>(new Set());\n  const [snoozePopoverId, setSnoozePopoverId] = useState<string | null>(null);\n  const [snoozeReasonById, setSnoozeReasonById] = useState<Record<string, string>>({});\n  const [snoozedAlerts, setSnoozedAlerts] = useState<SnoozedAlert[]>([]);\n  const [confirmBatchResolveOpen, setConfirmBatchResolveOpen] = useState(false);\n\n  const alerts = useMemo(() => {\n    const opportunityById = new Map(openOpportunities.map((opportunity) => [opportunity.id, opportunity]));\n    const clientById = new Map(clients.map((client) => [client.id, client]));\n    const map = new Map<string, DisplayAlert>();\n\n    const pushAlert = (candidate: Omit<DisplayAlert, \"duplicateCount\">) => {\n      const dedupeKey = `${candidate.kind}:${candidate.entityId ?? \"global\"}:${candidate.reasonCode}`;\n      const existing = map.get(dedupeKey);\n      if (!existing) {\n        map.set(dedupeKey, { ...candidate, duplicateCount: 1 });\n        return;\n      }\n\n      map.set(dedupeKey, {\n        ...existing,\n        impactScore: Math.max(existing.impactScore, candidate.impactScore),\n        severity:\n          ALERT_SEVERITY_ORDER[candidate.severity] < ALERT_SEVERITY_ORDER[existing.severity]\n            ? candidate.severity\n            : existing.severity,\n        duplicateCount: existing.duplicateCount + 1,\n      });\n    };\n\n    for (const alert of riskAlerts) {\n      if (alert.type === \"health-drop\") {\n        const client = alert.linkedEntityId ? clientById.get(alert.linkedEntityId) : null;\n        pushAlert({\n          id: alert.id,\n          title: \"Saúde crítica\",\n          context: client?.companyName ?? alert.title,\n          impact: alert.description,\n          recommendation: \"Reengajar cliente com follow-up imediato.\",\n          consequence: \"Vai criar atividade de WhatsApp para hoje.\",\n          severity: mapRiskSeverity(alert.severity),\n          kind: \"health_critical\",\n          group: \"churn\",\n          reasonCode: \"health_drop\",\n          viewPath: alert.linkedEntityId ? `/clients/${alert.linkedEntityId}` : \"/clients?health=critical\",\n          entityId: alert.linkedEntityId,\n          impactScore: client?.monthlyRevenue ?? 0,\n        });\n        continue;\n      }\n\n      if (alert.type === \"stale\") {\n        const opportunity = alert.linkedEntityId ? opportunityById.get(alert.linkedEntityId) : null;\n        const staleDays = opportunity\n          ? Math.max(1, Math.round((now.getTime() - new Date(opportunity.updatedAt).getTime()) / (1000 * 60 * 60 * 24)))\n          : null;\n\n        pushAlert({\n          id: alert.id,\n          title: staleDays ? `Parado há ${staleDays}d` : \"Pipeline parado\",\n          context: opportunity\n            ? `${opportunity.clientName} - ${formatStage(opportunity.stage)}`\n            : alert.title,\n          impact: alert.description,\n          recommendation: \"Cobrar resposta e registrar próxima ação.\",\n          consequence: \"Vai criar follow-up para hoje e abrir a oportunidade filtrada.\",\n          severity: mapRiskSeverity(alert.severity),\n          kind: \"stalled_deal\",\n          group: \"pipeline\",\n          reasonCode: \"stalled_deal\",\n          viewPath: alert.linkedEntityId\n            ? `/pipes?opportunityId=${alert.linkedEntityId}&tab=activities`\n            : \"/pipes?filter=stale\",\n          entityId: alert.linkedEntityId,\n          impactScore: opportunity?.value ?? 0,\n        });\n        continue;\n      }\n\n      if (alert.type === \"sla-breach\") {\n        const opportunity = alert.linkedEntityId ? opportunityById.get(alert.linkedEntityId) : null;\n\n        pushAlert({\n          id: alert.id,\n          title: \"SLA estourado\",\n          context: opportunity\n            ? `${opportunity.clientName} - ${formatStage(opportunity.stage)}`\n            : alert.title,\n          impact: alert.description,\n          recommendation: \"Tratar SLA imediatamente e formalizar próxima ação.\",\n          consequence: \"Vai criar atividade crítica de follow-up para hoje.\",\n          severity: \"critical\",\n          kind: \"sla_risk\",\n          group: \"pipeline\",\n          reasonCode: \"sla_breach\",\n          viewPath: alert.linkedEntityId\n            ? `/pipes?opportunityId=${alert.linkedEntityId}&filter=sla_overdue`\n            : \"/pipes?filter=sla_overdue\",\n          entityId: alert.linkedEntityId,\n          impactScore: (opportunity?.value ?? 0) + 200000,\n        });\n        continue;\n      }\n\n      if (alert.type === \"goal-risk\") {\n        pushAlert({\n          id: alert.id,\n          title: \"Meta em risco\",\n          context: alert.title,\n          impact: alert.description,\n          recommendation: \"Ajustar plano de recuperação da meta agora.\",\n          consequence: \"Vai criar tarefa de recuperação e abrir metas em risco.\",\n          severity: \"critical\",\n          kind: \"goal_risk\",\n          group: \"goals\",\n          reasonCode: \"goal_risk\",\n          viewPath: \"/goals\",\n          entityId: alert.linkedEntityId,\n          impactScore: 120000,\n        });\n        continue;\n      }\n\n      if (alert.type === \"contract-expiring\") {\n        const client = alert.linkedEntityId ? clientById.get(alert.linkedEntityId) : null;\n\n        pushAlert({\n          id: alert.id,\n          title: \"Contrato expirando\",\n          context: client?.companyName ?? alert.title,\n          impact: alert.description,\n          recommendation: \"Iniciar renovação com proposta de valor objetiva.\",\n          consequence: \"Vai criar atividade de renovação para hoje.\",\n          severity: mapRiskSeverity(alert.severity),\n          kind: \"contract_risk\",\n          group: \"churn\",\n          reasonCode: \"contract_expiring\",\n          viewPath: alert.linkedEntityId ? `/clients/${alert.linkedEntityId}` : \"/clients\",\n          entityId: alert.linkedEntityId,\n          impactScore: client?.monthlyRevenue ?? 0,\n        });\n      }\n    }\n\n    const overdueActivities = filteredActivities.filter(\n      (activity) => activity.effectiveStatus === \"overdue\"\n    );\n\n    if (overdueActivities.length > 0) {\n      const maxDelayMs = overdueActivities.reduce((maxDelay, activity) => {\n        const dueAt = getActivityDueAt(activity);\n        return Math.max(maxDelay, now.getTime() - dueAt.getTime());\n      }, 0);\n\n      const severity: AlertSeverity =\n        overdueActivities.length >= 8 ? \"critical\" : overdueActivities.length >= 3 ? \"high\" : \"medium\";\n\n      pushAlert({\n        id: \"overdue-activities\",\n        title: \"Atividades atrasadas\",\n        context: `${overdueActivities.length} item(ns) aguardando execução`,\n        impact: `Maior atraso acumulado: ${formatDelay(maxDelayMs)}.`,\n        recommendation: \"Priorizar backlog atrasado para proteger o SLA.\",\n        consequence: \"Vai abrir a lista de atrasadas e criar tarefa de mutirão.\",\n        severity,\n        kind: \"overdue_activities\",\n        group: \"activities\",\n        reasonCode: \"overdue_activities\",\n        viewPath: \"/activities?status=overdue\",\n        impactScore: overdueActivities.length * 10000,\n      });\n    }\n\n    return Array.from(map.values()).sort((a, b) => {\n      const bySeverity = ALERT_SEVERITY_ORDER[a.severity] - ALERT_SEVERITY_ORDER[b.severity];\n      if (bySeverity !== 0) return bySeverity;\n      return b.impactScore - a.impactScore;\n    });\n  }, [riskAlerts, filteredActivities, openOpportunities, clients, now]);\n\n  const visibleAlerts = useMemo(() => {\n    return alerts\n      .filter((alert) => !dismissedIds.has(alert.id))\n      .filter((alert) => (runtimeById[alert.id]?.status ?? \"open\") !== \"snoozed\")\n      .filter((alert) => matchesAlertFilter(alert, activeFilter))\n      .sort((a, b) => {\n        const statusA = runtimeById[a.id]?.status ?? \"open\";\n        const statusB = runtimeById[b.id]?.status ?? \"open\";\n        const statusOrder = ALERT_STATUS_ORDER[statusA] - ALERT_STATUS_ORDER[statusB];\n        if (statusOrder !== 0) return statusOrder;\n        return ALERT_SEVERITY_ORDER[a.severity] - ALERT_SEVERITY_ORDER[b.severity];\n      });\n  }, [alerts, dismissedIds, runtimeById, activeFilter]);\n\n  const actionableVisible = visibleAlerts.filter((alert) => {\n    const status = runtimeById[alert.id]?.status ?? \"open\";\n    return isActionableAlert(status);\n  });\n\n  const counterByFilter = useMemo(() => {\n    const next: Record<AlertFilter, number> = {\n      all: 0,\n      critical: 0,\n      churn: 0,\n      pipeline: 0,\n      activities: 0,\n      goals: 0,\n    };\n\n    for (const alert of alerts) {\n      if (dismissedIds.has(alert.id)) continue;\n      const status = runtimeById[alert.id]?.status ?? \"open\";\n      if (!isActionableAlert(status)) continue;\n\n      next.all += 1;\n      if (alert.severity === \"critical\") next.critical += 1;\n      next[alert.group] += 1;\n    }\n\n    return next;\n  }, [alerts, dismissedIds, runtimeById]);\n\n  const isLoading = activityLoading || opportunityLoading;\n\n  const setAlertRuntime = (alertId: string, runtime: AlertRuntime) => {\n    setRuntimeById((prev) => ({\n      ...prev,\n      [alertId]: runtime,\n    }));\n  };\n\n  const scheduleDismiss = (alertId: string) => {\n    window.setTimeout(() => {\n      setDismissedIds((prev) => {\n        const next = new Set(prev);\n        next.add(alertId);\n        return next;\n      });\n    }, 1800);\n  };\n\n  // Auto-dismiss info feedback on alerts after 5 seconds\n  useEffect(() => {\n    const infoAlertIds = Object.entries(runtimeById)\n      .filter(([, r]) => r.feedback?.tone === \"info\" && r.status !== \"resolved\")\n      .map(([id]) => id);\n    if (infoAlertIds.length === 0) return;\n\n    const t = setTimeout(() => {\n      setRuntimeById((prev) => {\n        const next = { ...prev };\n        for (const id of infoAlertIds) {\n          const current = next[id];\n          if (current?.feedback?.tone === \"info\") {\n            const { feedback: _, ...rest } = current;\n            next[id] = rest;\n          }\n        }\n        return next;\n      });\n    }, 5000);\n    return () => clearTimeout(t);\n  }, [runtimeById]);\n\n  const ensureFollowUpActivity = (\n    opts: {\n      title: string;\n      description: string;\n      type: Activity[\"type\"];\n      dueTime: string;\n      opportunityId?: string;\n      clientId?: string;\n      searchTerm: string;\n    }\n  ): string => {\n    const openActivity = allActivities.find((activity) => {\n      if (activity.status === \"completed\" || activity.status === \"cancelled\") return false;\n\n      const lowerTitle = activity.title.toLowerCase();\n      const linkedToOpportunity = opts.opportunityId && activity.opportunityId === opts.opportunityId;\n      const linkedToClient = opts.clientId && activity.clientId === opts.clientId;\n\n      return (Boolean(linkedToOpportunity) || Boolean(linkedToClient)) && lowerTitle.includes(opts.searchTerm);\n    });\n\n    if (openActivity) {\n      return openActivity.id;\n    }\n\n    const created = addActivity({\n      title: opts.title,\n      description: opts.description,\n      type: opts.type,\n      status: \"pending\",\n      dueDate: toDateOnly(now),\n      dueTime: opts.dueTime,\n      opportunityId: opts.opportunityId,\n      clientId: opts.clientId,\n      responsibleId: userId,\n      responsibleName: userName,\n    });\n\n    return created.id;\n  };\n\n  const resolveAlertByType = async (alert: DisplayAlert): Promise<ResolveResult> => {\n    if (alert.kind === \"health_critical\") {\n      const activityId = ensureFollowUpActivity({\n        title: `Follow-up de saúde: ${alert.context}`,\n        description: `Gerado a partir de alerta: ${alert.title}`,\n        type: \"whatsapp\",\n        dueTime: \"16:00\",\n        clientId: alert.entityId,\n        searchTerm: \"saúde\",\n      });\n\n      return {\n        message: \"Resolvido, atividade criada para hoje.\",\n        linkLabel: \"Ver atividade\",\n        linkPath: `/activities?activityId=${activityId}`,\n      };\n    }\n\n    if (alert.kind === \"contract_risk\") {\n      const activityId = ensureFollowUpActivity({\n        title: `Renovacao de contrato: ${alert.context}`,\n        description: `Gerado a partir de alerta: ${alert.title}`,\n        type: \"meeting\",\n        dueTime: \"15:00\",\n        clientId: alert.entityId,\n        searchTerm: \"renovação\",\n      });\n\n      return {\n        message: \"Resolvido, atividade de renovação criada.\",\n        linkLabel: \"Ver atividade\",\n        linkPath: `/activities?activityId=${activityId}`,\n      };\n    }\n\n    if (alert.kind === \"stalled_deal\") {\n      const opportunity = alert.entityId\n        ? openOpportunities.find((item) => item.id === alert.entityId)\n        : null;\n\n      const activityId = ensureFollowUpActivity({\n        title: `Follow-up urgente: ${opportunity?.clientName ?? alert.context}`,\n        description: `Gerado a partir de alerta: ${alert.title}`,\n        type: \"follow-up\",\n        dueTime: \"11:00\",\n        opportunityId: opportunity?.id,\n        clientId: opportunity?.clientId,\n        searchTerm: \"follow-up\",\n      });\n\n      if (opportunity?.id) {\n        updateOpportunity(opportunity.id, { updatedAt: new Date().toISOString() });\n      }\n\n      return {\n        message: \"Resolvido, follow-up registrado e deal atualizado.\",\n        linkLabel: \"Ver atividade\",\n        linkPath: `/activities?activityId=${activityId}`,\n      };\n    }\n\n    if (alert.kind === \"sla_risk\") {\n      const opportunity = alert.entityId\n        ? openOpportunities.find((item) => item.id === alert.entityId)\n        : null;\n\n      const activityId = ensureFollowUpActivity({\n        title: `SLA crítico: ${opportunity?.clientName ?? alert.context}`,\n        description: `Gerado a partir de alerta: ${alert.title}`,\n        type: \"call\",\n        dueTime: \"10:00\",\n        opportunityId: opportunity?.id,\n        clientId: opportunity?.clientId,\n        searchTerm: \"sla\",\n      });\n\n      if (opportunity?.id) {\n        updateOpportunity(opportunity.id, { updatedAt: new Date().toISOString() });\n      }\n\n      return {\n        message: \"Resolvido, plano de SLA registrado para hoje.\",\n        linkLabel: \"Ver atividade\",\n        linkPath: `/activities?activityId=${activityId}`,\n      };\n    }\n\n    if (alert.kind === \"goal_risk\") {\n      const activityId = ensureFollowUpActivity({\n        title: \"Plano de recuperação da meta\",\n        description: `Gerado a partir de alerta: ${alert.context}`,\n        type: \"task\",\n        dueTime: \"09:00\",\n        searchTerm: \"recuperação da meta\",\n      });\n\n      return {\n        message: \"Resolvido, plano de recuperação criado.\",\n        linkLabel: \"Ver plano\",\n        linkPath: `/activities?activityId=${activityId}`,\n      };\n    }\n\n    if (alert.kind === \"overdue_activities\") {\n      const activityId = ensureFollowUpActivity({\n        title: \"Mutirão de atividades atrasadas\",\n        description: \"Priorizar backlog atrasado e concluir itens críticos.\",\n        type: \"task\",\n        dueTime: \"09:30\",\n        searchTerm: \"mutirão\",\n      });\n\n      return {\n        message: \"Resolvido, mutirão criado para limpar atrasos.\",\n        linkLabel: \"Ver mutirão\",\n        linkPath: `/activities?activityId=${activityId}`,\n      };\n    }\n\n    return {\n      message: \"Alerta tratado com sucesso.\",\n      linkLabel: \"Ver detalhes\",\n      linkPath: alert.viewPath,\n    };\n  };\n\n  const handleResolve = async (alert: DisplayAlert) => {\n    setAlertRuntime(alert.id, { status: \"in_progress\" });\n\n    try {\n      await sleep(180);\n      const result = await resolveAlertByType(alert);\n      setAlertRuntime(alert.id, {\n        status: \"resolved\",\n        feedback: {\n          tone: \"success\",\n          message: result.message,\n          linkLabel: result.linkLabel,\n          linkPath: result.linkPath,\n        },\n      });\n      scheduleDismiss(alert.id);\n    } catch {\n      setAlertRuntime(alert.id, {\n        status: \"open\",\n        feedback: {\n          tone: \"error\",\n          message: FALLBACK_RETRY_MESSAGE,\n        },\n      });\n    }\n  };\n\n  const handleMarkAsTreated = (alert: DisplayAlert) => {\n    setAlertRuntime(alert.id, {\n      status: \"resolved\",\n      feedback: {\n        tone: \"success\",\n        message: \"Marcado como tratado.\",\n        linkLabel: \"Ver entidade\",\n        linkPath: alert.viewPath,\n      },\n    });\n    scheduleDismiss(alert.id);\n  };\n\n  const handleCopySummary = async (alert: DisplayAlert) => {\n    try {\n      await navigator.clipboard.writeText(\n        `${alert.title} | ${alert.context} | ${alert.impact} | Ação: ${alert.recommendation}`\n      );\n      setAlertRuntime(alert.id, {\n        status: runtimeById[alert.id]?.status ?? \"open\",\n        feedback: {\n          tone: \"info\",\n          message: \"Resumo copiado.\",\n        },\n      });\n    } catch {\n      setAlertRuntime(alert.id, {\n        status: runtimeById[alert.id]?.status ?? \"open\",\n        feedback: {\n          tone: \"error\",\n          message: \"Não consegui copiar o resumo.\",\n        },\n      });\n    }\n  };\n\n  const handleSnooze = (alert: DisplayAlert, hours: number) => {\n    const reason = (snoozeReasonById[alert.id] ?? \"\").trim();\n    const untilLabel = formatSnoozeUntil(now, hours);\n\n    setAlertRuntime(alert.id, {\n      status: \"snoozed\",\n      feedback: {\n        tone: \"info\",\n        message: reason\n          ? `Adiado ate ${untilLabel}. Motivo: ${reason}.`\n          : `Adiado ate ${untilLabel}.`,\n      },\n    });\n\n    setSnoozedAlerts((prev) => [...prev, { id: alert.id, label: alert.title }]);\n    setSnoozePopoverId(null);\n  };\n\n  const handleUndoLastSnooze = () => {\n    setSnoozedAlerts((prev) => {\n      if (prev.length === 0) return prev;\n\n      const next = [...prev];\n      const last = next.pop();\n      if (last) {\n        setAlertRuntime(last.id, {\n          status: \"open\",\n          feedback: {\n            tone: \"info\",\n            message: \"Adiamento desfeito.\",\n          },\n        });\n      }\n      return next;\n    });\n  };\n\n  const handleRequestBatchResolve = () => {\n    if (actionableVisible.length < 2) return;\n    setConfirmBatchResolveOpen(true);\n  };\n\n  const handleConfirmBatchResolve = async () => {\n    setConfirmBatchResolveOpen(false);\n    for (const alert of actionableVisible) {\n      await handleResolve(alert);\n    }\n  };\n\n  return (\n    <BentoCard className=\"premium-panel flex flex-col gap-4 border-zinc-200/80 bg-white/88 p-5 shadow-[0_18px_32px_-24px_rgba(15,23,42,0.45)] md:p-6\">\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div className=\"flex min-w-0 items-center gap-2\">\n          <h3 className=\"text-base font-semibold text-zinc-900\">Alertas Críticos</h3>\n          <span className=\"inline-flex h-6 min-w-6 items-center justify-center rounded-full border border-red-200 bg-red-50 px-2 text-xs font-semibold text-red-700\">\n            {counterByFilter.all}\n          </span>\n          {snoozedAlerts.length > 0 ? (\n            <span className=\"inline-flex items-center gap-1 rounded-full border border-sky-200 bg-sky-50 px-2 py-1 text-[11px] font-medium text-sky-700\">\n              Adiados {snoozedAlerts.length}\n              <button\n                type=\"button\"\n                className=\"underline underline-offset-4\"\n                onClick={handleUndoLastSnooze}\n              >\n                Desfazer\n              </button>\n            </span>\n          ) : null}\n        </div>\n\n        {actionableVisible.length > 1 ? (\n          <Button\n            size=\"xs\"\n            variant=\"outline\"\n            className=\"h-7 rounded-full border-zinc-200 px-3 text-xs\"\n            onClick={handleRequestBatchResolve}\n          >\n            Resolver todos do tipo\n          </Button>\n        ) : null}\n\n        <AlertDialog open={confirmBatchResolveOpen} onOpenChange={setConfirmBatchResolveOpen}>\n          <AlertDialogContent>\n            <AlertDialogHeader>\n              <AlertDialogTitle>Resolver {actionableVisible.length} alerta(s)?</AlertDialogTitle>\n              <AlertDialogDescription>\n                Isso vai criar atividades de follow-up para cada alerta acionável visível.\n              </AlertDialogDescription>\n            </AlertDialogHeader>\n            <AlertDialogFooter>\n              <AlertDialogCancel>Cancelar</AlertDialogCancel>\n              <AlertDialogAction onClick={handleConfirmBatchResolve}>Resolver todos</AlertDialogAction>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialog>\n      </div>\n\n      <div className=\"flex flex-wrap gap-1.5\">\n        {ALERT_FILTER_OPTIONS.map((option) => {\n          const active = activeFilter === option.id;\n          const count = counterByFilter[option.id];\n          return (\n            <button\n              key={option.id}\n              type=\"button\"\n              onClick={() => setActiveFilter(option.id)}\n              className={cn(\n                \"inline-flex h-7 items-center gap-1 rounded-full border px-2.5 text-[11px] font-medium transition-[border-color,background-color,color] duration-150\",\n                active\n                  ? \"border-zinc-900 bg-zinc-900 text-white\"\n                  : \"border-zinc-200 bg-white text-zinc-600 hover:border-zinc-300 hover:text-zinc-900\"\n              )}\n            >\n              {option.label}\n              <span className={cn(\"text-[10px]\", active ? \"text-white/80\" : \"text-zinc-400\")}>{count}</span>\n            </button>\n          );\n        })}\n      </div>\n\n      {isLoading ? (\n        <div className=\"space-y-2\">\n          {Array.from({ length: 3 }).map((_, index) => (\n            <div key={index} className=\"rounded-xl border border-zinc-200/80 p-3\">\n              <Skeleton className=\"h-4 w-44\" />\n              <Skeleton className=\"mt-2 h-3 w-full\" />\n              <Skeleton className=\"mt-2 h-3 w-[82%]\" />\n            </div>\n          ))}\n        </div>\n      ) : null}\n\n      {!isLoading && visibleAlerts.length === 0 ? (\n        <div className=\"rounded-xl border border-zinc-200/80 bg-zinc-50/40 p-6 text-center\">\n          <CheckCircle2 className=\"mx-auto h-7 w-7 text-emerald-600\" />\n          <p className=\"mt-2 text-sm font-medium text-zinc-900\">Sem alertas ativos no seu escopo.</p>\n          <p className=\"mt-1 text-xs text-zinc-500\">Tudo estável por enquanto.</p>\n        </div>\n      ) : null}\n\n      {!isLoading ? (\n        <div className=\"space-y-2.5\">\n          {visibleAlerts.map((alert) => {\n            const runtime = runtimeById[alert.id];\n            const status = runtime?.status ?? \"open\";\n            const isProcessing = status === \"in_progress\";\n            const isResolved = status === \"resolved\";\n\n            return (\n              <article\n                key={alert.id}\n                className={cn(\n                  \"rounded-xl border bg-white p-3 transition-[border-color,box-shadow,background-color] duration-150\",\n                  \"hover:border-zinc-300 hover:bg-zinc-50/40 hover:shadow-[0_14px_24px_-24px_rgba(15,23,42,0.45)]\",\n                  isResolved && \"border-emerald-200 bg-emerald-50/30\",\n                  !isResolved && alert.severity === \"critical\" && \"border-red-200/85\",\n                  !isResolved && alert.severity === \"high\" && \"border-amber-200/85\",\n                  !isResolved && alert.severity === \"medium\" && \"border-sky-200/85\"\n                )}\n              >\n                <div className=\"flex items-start justify-between gap-3\">\n                  <div className=\"min-w-0 flex-1\">\n                    <div className=\"flex items-start gap-2\">\n                      <span className=\"mt-0.5 shrink-0\">{getAlertIcon(alert)}</span>\n                      <div className=\"min-w-0\">\n                        <div className=\"flex flex-wrap items-center gap-1.5\">\n                          <p className=\"text-sm font-semibold text-zinc-900\">{alert.title}</p>\n                          <span className={cn(\"inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-semibold\", getAlertBadgeClass(alert.severity))}>\n                            {getSeverityLabel(alert.severity)}\n                          </span>\n                          {alert.duplicateCount > 1 ? (\n                            <span className=\"inline-flex items-center rounded-full border border-zinc-200 bg-zinc-100 px-2 py-0.5 text-[10px] font-semibold text-zinc-600\">\n                              +{alert.duplicateCount - 1}\n                            </span>\n                          ) : null}\n                        </div>\n\n                        <p className=\"mt-1 truncate text-sm text-zinc-700\">{alert.context}</p>\n                        <p className=\"mt-0.5 text-xs text-zinc-500\">Impacto: {alert.impact}</p>\n                      </div>\n                    </div>\n\n                    <div className=\"mt-2 rounded-lg border border-zinc-200/80 bg-zinc-50/70 p-2.5\">\n                      <p className=\"text-xs font-semibold text-zinc-700\">Ação recomendada: {alert.recommendation}</p>\n                      <p className=\"mt-0.5 text-xs text-zinc-500\">{alert.consequence}</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex shrink-0 flex-col items-end gap-1.5\">\n                    <Button\n                      size=\"xs\"\n                      className=\"h-7 rounded-md bg-zinc-900 px-3 text-xs font-semibold text-white hover:bg-zinc-800\"\n                      disabled={isProcessing || isResolved}\n                      onClick={() => handleResolve(alert)}\n                    >\n                      {isProcessing ? (\n                        <>\n                          <RefreshCw className=\"h-3.5 w-3.5 animate-spin\" />\n                          Executando...\n                        </>\n                      ) : (\n                        \"Resolver\"\n                      )}\n                    </Button>\n\n                    <Button\n                      size=\"xs\"\n                      variant=\"outline\"\n                      className=\"h-7 rounded-md border-zinc-200 px-3 text-xs\"\n                      onClick={() => router.push(alert.viewPath)}\n                    >\n                      Ver\n                    </Button>\n\n                    <div className=\"flex items-center gap-1\">\n                      <Popover\n                        open={snoozePopoverId === alert.id}\n                        onOpenChange={(open) => setSnoozePopoverId(open ? alert.id : null)}\n                      >\n                        <PopoverTrigger asChild>\n                          <Button size=\"xs\" variant=\"ghost\" className=\"h-7 px-2 text-xs text-zinc-600\">\n                            <Clock3 className=\"h-3.5 w-3.5\" />\n                            Adiar\n                          </Button>\n                        </PopoverTrigger>\n                        <PopoverContent align=\"end\" className=\"w-64 rounded-xl border-zinc-200 p-3\">\n                          <PopoverHeader className=\"gap-0.5\">\n                            <PopoverTitle>Adiar alerta</PopoverTitle>\n                            <PopoverDescription>Escolha o tempo e informe o motivo.</PopoverDescription>\n                          </PopoverHeader>\n                          <Input\n                            className=\"mt-2 h-8\"\n                            placeholder=\"Motivo (opcional)\"\n                            value={snoozeReasonById[alert.id] ?? \"\"}\n                            onChange={(event) =>\n                              setSnoozeReasonById((prev) => ({\n                                ...prev,\n                                [alert.id]: event.target.value,\n                              }))\n                            }\n                          />\n                          <div className=\"mt-2 grid grid-cols-3 gap-1.5\">\n                            {SNOOZE_OPTIONS.map((option) => (\n                              <Button\n                                key={option.label}\n                                size=\"xs\"\n                                variant=\"outline\"\n                                className=\"h-7 rounded-md border-zinc-200 text-[11px]\"\n                                onClick={() => handleSnooze(alert, option.hours)}\n                              >\n                                {option.label}\n                              </Button>\n                            ))}\n                          </div>\n                        </PopoverContent>\n                      </Popover>\n\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button size=\"icon-xs\" variant=\"ghost\" className=\"h-7 w-7 text-zinc-500\">\n                            <MoreHorizontal className=\"h-3.5 w-3.5\" />\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"end\" className=\"w-52 rounded-xl\">\n                          <DropdownMenuItem onClick={() => handleMarkAsTreated(alert)}>\n                            <CheckCircle2 className=\"h-3.5 w-3.5\" />\n                            Marcar como tratado\n                          </DropdownMenuItem>\n                          <DropdownMenuItem onClick={() => handleCopySummary(alert)}>\n                            <Copy className=\"h-3.5 w-3.5\" />\n                            Copiar resumo\n                          </DropdownMenuItem>\n                          <DropdownMenuSeparator />\n                          <DropdownMenuItem onClick={() => router.push(alert.viewPath)}>\n                            <ExternalLink className=\"h-3.5 w-3.5\" />\n                            Abrir entidade\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </div>\n                  </div>\n                </div>\n\n                {runtime?.feedback ? (\n                  <div\n                    className={cn(\n                      \"mt-2 flex flex-wrap items-center gap-2 rounded-md border px-2.5 py-1.5 text-xs\",\n                      runtime.feedback.tone === \"success\" && \"border-emerald-200 bg-emerald-50/70 text-emerald-700\",\n                      runtime.feedback.tone === \"info\" && \"border-sky-200 bg-sky-50/70 text-sky-700\",\n                      runtime.feedback.tone === \"error\" && \"border-red-200 bg-red-50/70 text-red-700\"\n                    )}\n                  >\n                    <span>{runtime.feedback.message}</span>\n                    {runtime.feedback.linkPath && runtime.feedback.linkLabel ? (\n                      <button\n                        type=\"button\"\n                        className=\"font-semibold underline underline-offset-4\"\n                        onClick={() => router.push(runtime.feedback?.linkPath ?? alert.viewPath)}\n                      >\n                        {runtime.feedback.linkLabel}\n                      </button>\n                    ) : null}\n                    {runtime.feedback.tone === \"error\" ? (\n                      <button\n                        type=\"button\"\n                        className=\"font-semibold underline underline-offset-4\"\n                        onClick={() => handleResolve(alert)}\n                      >\n                        Tentar novamente\n                      </button>\n                    ) : null}\n                  </div>\n                ) : null}\n              </article>\n            );\n          })}\n        </div>\n      ) : null}\n    </BentoCard>\n  );\n}\n\nexport function TodayActivities() {\n  const router = useRouter();\n  const { filteredActivities, now } = useDashboardFilters();\n\n  const completeActivity = useActivityStore((s) => s.completeActivity);\n  const postponeActivity = useActivityStore((s) => s.postponeActivity);\n  const cancelActivity = useActivityStore((s) => s.cancelActivity);\n  const activityLoading = useActivityStore((s) => s.isLoading);\n\n  const [executedIds, setExecutedIds] = useState<Set<string>>(new Set());\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [rescheduleDraftById, setRescheduleDraftById] = useState<Record<string, RescheduleDraft>>({});\n  const [notice, setNotice] = useState<AgendaNotice | null>(null);\n  const [runtimeById, setRuntimeById] = useState<Record<string, AgendaItemRuntime>>({});\n  const [confirmCancelId, setConfirmCancelId] = useState<string | null>(null);\n\n  // Auto-dismiss notice after 6 seconds\n  useEffect(() => {\n    if (!notice) return;\n    const t = setTimeout(() => setNotice(null), 6000);\n    return () => clearTimeout(t);\n  }, [notice]);\n\n  const todayIso = toDateOnly(now);\n\n  const agendaItems = useMemo<ActivityAgendaItem[]>(() => {\n    return filteredActivities\n      .filter((activity) => activity.effectiveStatus === \"pending\" || activity.effectiveStatus === \"overdue\")\n      .filter((activity) => activity.dueDate <= todayIso)\n      .map((activity) => {\n        const dueAt = getActivityDueAt(activity);\n        const isOverdue = activity.effectiveStatus === \"overdue\";\n        const status: ActivityAgendaItem[\"status\"] = isOverdue ? \"overdue\" : \"pending\";\n\n        return {\n          id: activity.id,\n          title: activity.title,\n          clientLine:\n            activity.clientName ||\n            activity.opportunityTitle ||\n            \"Sem cliente associado\",\n          description: activity.description || \"Sem descrição registrada.\",\n          type: activity.type,\n          status,\n          dueDate: activity.dueDate,\n          dueTime: activity.dueTime,\n          dueAt,\n          hasTime: Boolean(activity.dueTime),\n          delayLabel: isOverdue ? `Atrasada ${formatDelay(now.getTime() - dueAt.getTime())}` : null,\n        };\n      })\n      .sort((a, b) => a.dueAt.getTime() - b.dueAt.getTime())\n      .slice(0, 10);\n  }, [filteredActivities, now, todayIso]);\n\n  const timedItems = agendaItems.filter((item) => item.hasTime);\n  const unscheduledItems = agendaItems.filter((item) => !item.hasTime);\n\n  const overdueCount = agendaItems.filter((item) => item.status === \"overdue\").length;\n  const todayCount = agendaItems.filter((item) => item.dueDate === todayIso).length;\n\n  const setItemRuntime = (activityId: string, runtime: AgendaItemRuntime) => {\n    setRuntimeById((prev) => ({\n      ...prev,\n      [activityId]: runtime,\n    }));\n  };\n\n  const openReschedule = (item: ActivityAgendaItem) => {\n    const fallbackDate = toDateOnly(addDays(now, 1));\n    setEditingId(item.id);\n    setRescheduleDraftById((prev) => ({\n      ...prev,\n      [item.id]: {\n        dueDate: item.dueDate || fallbackDate,\n        dueTime: item.dueTime || \"09:00\",\n      },\n    }));\n  };\n\n  const handleExecute = (item: ActivityAgendaItem) => {\n    setExecutedIds((prev) => {\n      const next = new Set(prev);\n      next.add(item.id);\n      return next;\n    });\n\n    setNotice({\n      tone: \"info\",\n      message: `${getExecuteLabel(item.type)} iniciado. Ao voltar, conclua ou registre nota.`,\n      linkLabel: \"Abrir atividade\",\n      linkPath: `/activities?activityId=${item.id}`,\n    });\n\n    router.push(getExecutePath(item.id, item.type));\n  };\n\n  const handleComplete = (item: ActivityAgendaItem) => {\n    setItemRuntime(item.id, { loading: true });\n    try {\n      completeActivity(item.id, \"Concluída pela Agenda de Hoje\");\n      setNotice({\n        tone: \"success\",\n        message: \"Atividade concluída com sucesso.\",\n        linkLabel: \"Ver historico\",\n        linkPath: \"/activities?status=completed\",\n      });\n      setExecutedIds((prev) => {\n        const next = new Set(prev);\n        next.delete(item.id);\n        return next;\n      });\n      setItemRuntime(item.id, {});\n    } catch {\n      setItemRuntime(item.id, { error: \"Não consegui concluir agora.\" });\n    }\n  };\n\n  const handleSaveReschedule = (item: ActivityAgendaItem) => {\n    const draft = rescheduleDraftById[item.id];\n    if (!draft?.dueDate) {\n      setItemRuntime(item.id, { error: \"Escolha uma data válida.\" });\n      return;\n    }\n\n    setItemRuntime(item.id, { loading: true });\n\n    try {\n      postponeActivity(item.id, draft.dueDate, draft.dueTime || undefined);\n      setEditingId(null);\n      setNotice({\n        tone: \"success\",\n        message: `Reagendado para ${formatRescheduleLabel(draft.dueDate, draft.dueTime)}.`,\n      });\n      setExecutedIds((prev) => {\n        const next = new Set(prev);\n        next.delete(item.id);\n        return next;\n      });\n      setItemRuntime(item.id, {});\n    } catch {\n      setItemRuntime(item.id, { error: \"Não consegui reagendar agora.\" });\n    }\n  };\n\n  const handleRequestCancel = (item: ActivityAgendaItem) => {\n    setConfirmCancelId(item.id);\n  };\n\n  const handleConfirmCancel = () => {\n    const targetId = confirmCancelId;\n    setConfirmCancelId(null);\n    if (!targetId) return;\n\n    setItemRuntime(targetId, { loading: true });\n\n    try {\n      cancelActivity(targetId);\n      setNotice({\n        tone: \"info\",\n        message: \"Atividade cancelada.\",\n      });\n      setItemRuntime(targetId, {});\n    } catch {\n      setItemRuntime(targetId, { error: \"Não consegui cancelar agora.\" });\n    }\n  };\n\n  return (\n    <BentoCard className=\"premium-panel flex min-h-[320px] flex-col gap-4 border-zinc-200/80 bg-white/88 p-5 shadow-[0_18px_32px_-24px_rgba(15,23,42,0.45)] md:p-6\">\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div className=\"flex min-w-0 items-center gap-2\">\n          <h3 className=\"text-base font-semibold text-zinc-900\">Agenda de Hoje</h3>\n          <span className=\"inline-flex h-6 items-center rounded-full border border-red-200 bg-red-50 px-2 text-[11px] font-semibold text-red-700\">\n            Atrasadas {overdueCount}\n          </span>\n          <span className=\"inline-flex h-6 items-center rounded-full border border-zinc-200 bg-zinc-100 px-2 text-[11px] font-semibold text-zinc-700\">\n            Hoje {todayCount}\n          </span>\n        </div>\n\n        <div className=\"flex items-center gap-1.5\">\n          <Button\n            size=\"xs\"\n            variant=\"outline\"\n            className=\"h-7 rounded-full border-zinc-200 px-3 text-xs\"\n            onClick={() => router.push(\"/activities?view=agenda\")}\n          >\n            Ver tudo\n            <ChevronRight className=\"h-3.5 w-3.5\" />\n          </Button>\n\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button size=\"icon-xs\" variant=\"ghost\" className=\"h-7 w-7 text-zinc-500\">\n                <MoreHorizontal className=\"h-3.5 w-3.5\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-52 rounded-xl\">\n              <DropdownMenuItem onClick={() => router.push(\"/activities?status=overdue\")}>Ver apenas atrasadas</DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </div>\n\n      {notice ? (\n        <div\n          className={cn(\n            \"flex flex-wrap items-center gap-2 rounded-lg border px-3 py-2 text-xs\",\n            notice.tone === \"success\" && \"border-emerald-200 bg-emerald-50/70 text-emerald-700\",\n            notice.tone === \"info\" && \"border-sky-200 bg-sky-50/70 text-sky-700\",\n            notice.tone === \"error\" && \"border-red-200 bg-red-50/70 text-red-700\"\n          )}\n        >\n          <span>{notice.message}</span>\n          {notice.linkPath && notice.linkLabel ? (\n            <button\n              type=\"button\"\n              className=\"font-semibold underline underline-offset-4\"\n              onClick={() => router.push(notice.linkPath ?? \"/activities\")}\n            >\n              {notice.linkLabel}\n            </button>\n          ) : null}\n        </div>\n      ) : null}\n\n      {activityLoading ? (\n        <div className=\"space-y-2\">\n          {Array.from({ length: 4 }).map((_, index) => (\n            <div key={index} className=\"rounded-xl border border-zinc-200/80 p-3\">\n              <Skeleton className=\"h-4 w-32\" />\n              <Skeleton className=\"mt-2 h-3 w-[88%]\" />\n              <Skeleton className=\"mt-2 h-8 w-40\" />\n            </div>\n          ))}\n        </div>\n      ) : null}\n\n      {!activityLoading && agendaItems.length === 0 ? (\n        <div className=\"rounded-xl border border-zinc-200/80 bg-zinc-50/40 p-6 text-center\">\n          <CheckCircle2 className=\"mx-auto h-7 w-7 text-emerald-600\" />\n          <p className=\"mt-2 text-sm font-medium text-zinc-900\">Sem atividades pendentes para hoje.</p>\n          <p className=\"mt-1 text-xs text-zinc-500\">A agenda está limpa no seu escopo.</p>\n          <Button\n            size=\"xs\"\n            variant=\"outline\"\n            className=\"mt-3 h-7 rounded-full border-zinc-200 px-3 text-xs\"\n            onClick={() => router.push(\"/activities?view=agenda\")}\n          >\n            Abrir agenda completa\n          </Button>\n        </div>\n      ) : null}\n\n      {!activityLoading && agendaItems.length > 0 ? (\n        <div className=\"space-y-2\">\n          {timedItems.map((item) => {\n            const Icon = getActivityTypeIcon(item.type);\n            const runtime = runtimeById[item.id];\n            const draft = rescheduleDraftById[item.id];\n            const isEditing = editingId === item.id;\n            const wasExecuted = executedIds.has(item.id);\n\n            return (\n              <article\n                key={item.id}\n                className={cn(\n                  \"rounded-xl border border-zinc-200/85 bg-white p-3 transition-[border-color,box-shadow,background-color] duration-150\",\n                  \"hover:border-zinc-300 hover:bg-zinc-50/40 hover:shadow-[0_12px_24px_-24px_rgba(15,23,42,0.45)]\",\n                  item.status === \"overdue\" && \"border-red-200/90\"\n                )}\n              >\n                <div className=\"grid gap-3 md:grid-cols-[96px_minmax(0,1fr)_auto] md:items-start\">\n                  <div className=\"space-y-1\">\n                    <p className=\"text-xl font-semibold tabular-nums text-zinc-900\">{item.dueTime || \"--:--\"}</p>\n                    {item.delayLabel ? <p className=\"text-xs font-medium text-red-600\">{item.delayLabel}</p> : <p className=\"text-xs text-zinc-500\">No prazo</p>}\n                  </div>\n\n                  <div className=\"min-w-0\">\n                    <div className=\"flex items-start gap-2\">\n                      <Icon className=\"mt-0.5 h-4 w-4 text-zinc-500\" />\n                      <div className=\"min-w-0\">\n                        <p className=\"truncate text-sm font-semibold text-zinc-900\">{item.title}</p>\n                        <p className=\"truncate text-xs text-zinc-600\">{item.clientLine}</p>\n                        <p className=\"mt-0.5 truncate text-xs text-zinc-500\">{item.description}</p>\n                      </div>\n                    </div>\n\n                    {wasExecuted ? (\n                      <div className=\"mt-2 flex flex-wrap items-center gap-1.5 rounded-md border border-zinc-200 bg-zinc-50/80 p-2\">\n                        <span className=\"text-xs text-zinc-600\">Execução iniciada:</span>\n                        <Button\n                          size=\"xs\"\n                          className=\"h-7 rounded-md bg-zinc-900 px-2.5 text-xs text-white hover:bg-zinc-800\"\n                          onClick={() => handleComplete(item)}\n                        >\n                          Marcar concluída\n                        </Button>\n                        <Button\n                          size=\"xs\"\n                          variant=\"outline\"\n                          className=\"h-7 rounded-md border-zinc-200 px-2.5 text-xs\"\n                          onClick={() => router.push(`/activities?activityId=${item.id}`)}\n                        >\n                          Registrar nota\n                        </Button>\n                      </div>\n                    ) : null}\n\n                    {isEditing ? (\n                      <div className=\"mt-2 grid gap-1.5 rounded-md border border-zinc-200 bg-zinc-50/80 p-2 md:grid-cols-[1fr_110px_auto] md:items-center\">\n                        <Input\n                          type=\"date\"\n                          className=\"h-8\"\n                          value={draft?.dueDate ?? \"\"}\n                          onChange={(event) =>\n                            setRescheduleDraftById((prev) => ({\n                              ...prev,\n                              [item.id]: {\n                                dueDate: event.target.value,\n                                dueTime: prev[item.id]?.dueTime ?? item.dueTime ?? \"09:00\",\n                              },\n                            }))\n                          }\n                        />\n                        <Input\n                          type=\"time\"\n                          className=\"h-8\"\n                          value={draft?.dueTime ?? \"\"}\n                          onChange={(event) =>\n                            setRescheduleDraftById((prev) => ({\n                              ...prev,\n                              [item.id]: {\n                                dueDate: prev[item.id]?.dueDate ?? item.dueDate,\n                                dueTime: event.target.value,\n                              },\n                            }))\n                          }\n                        />\n                        <div className=\"flex items-center gap-1\">\n                          <Button\n                            size=\"xs\"\n                            className=\"h-8 rounded-md bg-zinc-900 px-2.5 text-xs text-white hover:bg-zinc-800\"\n                            onClick={() => handleSaveReschedule(item)}\n                          >\n                            Salvar\n                          </Button>\n                          <Button\n                            size=\"xs\"\n                            variant=\"ghost\"\n                            className=\"h-8 rounded-md px-2.5 text-xs\"\n                            onClick={() => setEditingId(null)}\n                          >\n                            Cancelar\n                          </Button>\n                        </div>\n                      </div>\n                    ) : null}\n\n                    {runtime?.error ? (\n                      <div className=\"mt-2 rounded-md border border-red-200 bg-red-50/70 px-2.5 py-1.5 text-xs text-red-700\">\n                        {runtime.error}\n                        <button\n                          type=\"button\"\n                          className=\"ml-2 font-semibold underline underline-offset-4\"\n                          onClick={() => setItemRuntime(item.id, {})}\n                        >\n                          Tentar novamente\n                        </button>\n                      </div>\n                    ) : null}\n                  </div>\n\n                  <div className=\"flex flex-wrap items-center gap-1.5 md:flex-col md:items-end\">\n                    <Button\n                      size=\"xs\"\n                      className=\"h-7 rounded-md bg-zinc-900 px-3 text-xs text-white hover:bg-zinc-800\"\n                      disabled={runtime?.loading}\n                      onClick={() => handleExecute(item)}\n                    >\n                      {runtime?.loading ? (\n                        <RefreshCw className=\"h-3.5 w-3.5 animate-spin\" />\n                      ) : (\n                        getExecuteLabel(item.type)\n                      )}\n                    </Button>\n\n                    <Button\n                      size=\"xs\"\n                      variant=\"outline\"\n                      className=\"h-7 rounded-md border-zinc-200 px-3 text-xs\"\n                      disabled={runtime?.loading}\n                      onClick={() => openReschedule(item)}\n                    >\n                      Reagendar\n                    </Button>\n\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button size=\"icon-xs\" variant=\"ghost\" className=\"h-7 w-7 text-zinc-500\">\n                          <MoreHorizontal className=\"h-3.5 w-3.5\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\" className=\"w-44 rounded-xl\">\n                        <DropdownMenuItem onClick={() => handleComplete(item)}>\n                          <CheckCircle2 className=\"h-3.5 w-3.5\" />\n                          Concluir\n                        </DropdownMenuItem>\n                        <DropdownMenuItem onClick={() => router.push(`/activities?activityId=${item.id}`)}>\n                          <ExternalLink className=\"h-3.5 w-3.5\" />\n                          Ver detalhes\n                        </DropdownMenuItem>\n                        <DropdownMenuSeparator />\n                        <DropdownMenuItem onClick={() => handleRequestCancel(item)}>\n                          Cancelar\n                        </DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </div>\n                </div>\n              </article>\n            );\n          })}\n\n          {unscheduledItems.length > 0 ? (\n            <div className=\"rounded-xl border border-zinc-200/85 bg-zinc-50/30 p-3\">\n              <div className=\"mb-2 flex items-center justify-between\">\n                <p className=\"text-xs font-semibold uppercase tracking-wide text-zinc-500\">Sem horário</p>\n                <Button\n                  size=\"xs\"\n                  variant=\"ghost\"\n                  className=\"h-7 px-2 text-xs text-zinc-600\"\n                  onClick={() => {\n                    const first = unscheduledItems[0];\n                    if (first) openReschedule(first);\n                  }}\n                >\n                  Definir horário\n                </Button>\n              </div>\n\n              <div className=\"space-y-2\">\n                {unscheduledItems.map((item) => {\n                  const Icon = getActivityTypeIcon(item.type);\n                  return (\n                    <div\n                      key={item.id}\n                      className=\"rounded-lg border border-zinc-200/85 bg-white p-2.5\"\n                    >\n                      <div className=\"flex items-start justify-between gap-2\">\n                        <div className=\"flex min-w-0 items-start gap-2\">\n                          <Icon className=\"mt-0.5 h-4 w-4 text-zinc-500\" />\n                          <div className=\"min-w-0\">\n                            <p className=\"truncate text-sm font-medium text-zinc-900\">{item.title}</p>\n                            <p className=\"truncate text-xs text-zinc-600\">{item.clientLine}</p>\n                          </div>\n                        </div>\n                        <Button\n                          size=\"xs\"\n                          variant=\"outline\"\n                          className=\"h-7 rounded-md border-zinc-200 px-2.5 text-xs\"\n                          onClick={() => openReschedule(item)}\n                        >\n                          Definir horário\n                        </Button>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          ) : null}\n        </div>\n      ) : null}\n\n      <AlertDialog open={confirmCancelId !== null} onOpenChange={(open) => { if (!open) setConfirmCancelId(null); }}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Cancelar atividade?</AlertDialogTitle>\n            <AlertDialogDescription>\n              A atividade será cancelada permanentemente.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Manter</AlertDialogCancel>\n            <AlertDialogAction onClick={handleConfirmCancel}>Cancelar atividade</AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </BentoCard>\n  );\n}\n","\"use client\";\n\nimport { useMemo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { useRouter } from \"next/navigation\";\nimport { Users, ThermometerSun, ChevronRight } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { BentoCard } from \"@/components/ui/bento-card\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { useActivityStore } from \"@/stores/activity-store\";\nimport { useDashboardFilters } from \"@/hooks/use-dashboard-filters\";\nimport {\n  calculateTemperature,\n  calculateProjectedCommission,\n  formatCurrencyBRL,\n} from \"@/lib/business-rules\";\nimport { mockUsers } from \"@/lib/mock-data\";\n\n// --- Pipeline Health Component ---\nexport function PipelineHealth() {\n  const router = useRouter();\n  const {\n    openOpportunities,\n    filteredOpportunities,\n    now,\n  } = useDashboardFilters();\n\n  const { healthMetrics, temperature, avgDays } = useMemo(() => {\n    const openOpps = openOpportunities;\n\n    const stalledCount = openOpps.filter((o) => {\n      const daysSinceUpdate = Math.round(\n        (now.getTime() - new Date(o.updatedAt).getTime()) / (1000 * 60 * 60 * 24)\n      );\n      return daysSinceUpdate > 30;\n    }).length;\n\n    const activities = useActivityStore.getState().activities;\n    const oppsWithoutAction = openOpps.filter((o) => {\n      const oppActivities = activities.filter(\n        (a) =>\n          a.opportunityId === o.id &&\n          (a.status === \"pending\" || a.status === \"overdue\")\n      );\n      return oppActivities.length === 0;\n    }).length;\n\n    const noValueCount = openOpps.filter((o) => !o.value || o.value === 0).length;\n\n    const maxDenominator = Math.max(openOpps.length, 1);\n\n    // Calculate temperature using business rules\n    const avgValue =\n      openOpps.length > 0\n        ? openOpps.reduce((sum, o) => sum + (o.value || 0), 0) / openOpps.length\n        : 10000;\n\n    let hotCount = 0;\n    let coldCount = 0;\n    for (const opp of openOpps) {\n      const temp = calculateTemperature(opp, avgValue, now);\n      if (temp === \"hot\") hotCount++;\n      else if (temp === \"cold\") coldCount++;\n    }\n    const computedTemp =\n      hotCount > coldCount ? \"Quente\" : coldCount > hotCount ? \"Frio\" : \"Morno\";\n\n    const wonOpps = filteredOpportunities.filter((o) => o.status === \"won\");\n    let totalDays = 0;\n    wonOpps.forEach((o) => {\n      const created = new Date(o.createdAt).getTime();\n      const closed = new Date(o.updatedAt).getTime();\n      totalDays += Math.max(\n        1,\n        Math.round((closed - created) / (1000 * 60 * 60 * 24))\n      );\n    });\n    const computedAvgDays =\n      wonOpps.length > 0 ? Math.round(totalDays / wonOpps.length) : 0;\n\n    return {\n      healthMetrics: [\n        {\n          label: \"Estagnados (+30 dias)\",\n          value: stalledCount,\n          color: \"bg-red-500\",\n          filter: \"stale\",\n          max: maxDenominator,\n        },\n        {\n          label: \"Sem próxima ação\",\n          value: oppsWithoutAction,\n          color: \"bg-amber-500\",\n          filter: \"no_activity\",\n          max: maxDenominator,\n        },\n        {\n          label: \"Valor vazio\",\n          value: noValueCount,\n          color: \"bg-zinc-400\",\n          filter: \"stale\",\n          max: maxDenominator,\n        },\n      ],\n      temperature: computedTemp,\n      avgDays: computedAvgDays,\n    };\n  }, [openOpportunities, filteredOpportunities, now]);\n\n  const tempColor =\n    temperature === \"Quente\"\n      ? \"text-emerald-600\"\n      : temperature === \"Frio\"\n        ? \"text-red-600\"\n        : \"text-amber-600\";\n\n  return (\n    <BentoCard className=\"premium-panel flex flex-col gap-4 border-zinc-200/80 bg-white/86 p-5 shadow-[0_16px_28px_-24px_rgba(15,23,42,0.45)] md:p-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"flex items-center gap-2 font-semibold text-zinc-900\">\n          <ThermometerSun className=\"h-4 w-4 text-orange-500\" />\n          Saúde do Pipeline\n        </h3>\n      </div>\n\n      <div className=\"space-y-4\">\n        {healthMetrics.map((metric) => (\n          <div\n            key={metric.label}\n            className=\"group cursor-pointer\"\n            onClick={() => router.push(`/pipes?filter=${metric.filter}`)}\n            role=\"button\"\n            tabIndex={0}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\")\n                router.push(`/pipes?filter=${metric.filter}`);\n            }}\n          >\n            <div className=\"mb-1.5 flex items-center justify-between\">\n              <span className=\"text-xs font-medium text-zinc-600 transition-colors group-hover:text-zinc-900\">\n                {metric.label}\n              </span>\n              <span className=\"text-xs font-bold text-zinc-900\">\n                {metric.value} deals\n              </span>\n            </div>\n            <div className=\"h-2 w-full overflow-hidden rounded-full bg-zinc-100\">\n              <motion.div\n                initial={{ width: 0 }}\n                animate={{\n                  width: `${Math.min(\n                    (metric.value / Math.max(metric.max, 1)) * 100,\n                    100\n                  )}%`,\n                }}\n                transition={{ duration: 0.24, ease: \"easeOut\" }}\n                className={cn(\n                  \"h-full rounded-full transition-all group-hover:brightness-110\",\n                  metric.color\n                )}\n              />\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"mt-auto border-t border-zinc-100 pt-4\">\n        <div className=\"flex items-center justify-center gap-6\">\n          <div className=\"text-center\">\n            <p className=\"text-[10px] font-semibold uppercase tracking-wider text-zinc-400\">\n              Temperatura\n            </p>\n            <p className={cn(\"text-lg font-bold\", tempColor)}>{temperature}</p>\n          </div>\n          <div className=\"h-8 w-px bg-zinc-100\" />\n          <div className=\"text-center\">\n            <p className=\"text-[10px] font-semibold uppercase tracking-wider text-zinc-400\">\n              Velocidade\n            </p>\n            <p className=\"text-lg font-bold text-zinc-900\">\n              {avgDays > 0 ? `${avgDays} dias` : \"—\"}\n            </p>\n          </div>\n        </div>\n      </div>\n    </BentoCard>\n  );\n}\n\n// --- Performance Component ---\nexport function TeamPerformance() {\n  const router = useRouter();\n  const { filteredOpportunities, context, userId, userRole } = useDashboardFilters();\n\n  const isBroadRole = userRole === \"master\" || userRole === \"admin\";\n\n  const teamData = useMemo(() => {\n    // filteredOpportunities already respects context via useDashboardFilters:\n    // - context \"me\" + role master/admin → returns ALL items\n    // - context \"me\" + role comercial → returns only own items\n    // So we only need the extra responsibleId filter for non-admin roles\n    const allOpps = filteredOpportunities.filter(\n      (o) => o.status === \"won\" || o.status === \"lost\"\n    );\n\n    const byUser: Record<\n      string,\n      {\n        name: string;\n        role: string;\n        revenue: number;\n        won: number;\n        total: number;\n      }\n    > = {};\n\n    for (const opp of allOpps) {\n      if (!opp.responsibleId) continue;\n      // When context is \"me\" for non-admin roles, only show own data\n      if (context === \"me\" && !isBroadRole && opp.responsibleId !== userId) continue;\n\n      if (!byUser[opp.responsibleId]) {\n        const user = mockUsers.find((u) => u.id === opp.responsibleId);\n        byUser[opp.responsibleId] = {\n          name: user?.name ?? opp.responsibleName ?? \"—\",\n          role: user?.role ?? \"comercial\",\n          revenue: 0,\n          won: 0,\n          total: 0,\n        };\n      }\n      byUser[opp.responsibleId].total += 1;\n      if (opp.status === \"won\") {\n        byUser[opp.responsibleId].revenue += opp.value || 0;\n        byUser[opp.responsibleId].won += 1;\n      }\n    }\n\n    return Object.entries(byUser)\n      .map(([id, data]) => {\n        const commission = calculateProjectedCommission(data.revenue);\n        return {\n          id,\n          name: data.name,\n          role: data.role,\n          revenue: data.revenue,\n          commission: commission.commissionValue,\n          conversion:\n            data.total > 0 ? Math.round((data.won / data.total) * 100) : 0,\n          won: data.won,\n          isMe: id === userId,\n        };\n      })\n      .sort((a, b) => b.revenue - a.revenue)\n      .slice(0, 3);\n  }, [filteredOpportunities, context, userId, isBroadRole]);\n\n  return (\n    <BentoCard className=\"premium-panel flex flex-col gap-4 border-zinc-200/80 bg-white/86 p-5 shadow-[0_16px_28px_-24px_rgba(15,23,42,0.45)] md:p-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"flex items-center gap-2 font-semibold text-zinc-900\">\n          <Users className=\"h-4 w-4 text-blue-500\" />\n          {isBroadRole ? \"Performance do time\" : \"Performance pessoal\"}\n        </h3>\n        <button\n          className=\"text-xs font-medium text-zinc-500 transition-colors hover:text-zinc-900\"\n          onClick={() => router.push(\"/goals\")}\n        >\n          Ver metas\n        </button>\n      </div>\n\n      {teamData.length === 0 ? (\n        <div className=\"py-6 text-center text-sm text-zinc-500\">\n          Sem dados de performance ainda.\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {teamData.map((member, i) => (\n            <div\n              key={member.id}\n              className=\"flex cursor-pointer items-center justify-between rounded-lg p-2 transition-colors hover:bg-zinc-50\"\n              onClick={() => router.push(\"/goals\")}\n              role=\"button\"\n              tabIndex={0}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") router.push(\"/goals\");\n              }}\n            >\n              <div className=\"flex items-center gap-3\">\n                <span\n                  className={cn(\n                    \"flex h-5 w-5 items-center justify-center rounded text-[10px] font-bold\",\n                    i === 0\n                      ? \"bg-amber-100 text-amber-700\"\n                      : i === 1\n                        ? \"bg-zinc-100 text-zinc-600\"\n                        : \"bg-zinc-100 text-zinc-400\"\n                  )}\n                >\n                  {i + 1}\n                </span>\n                <Avatar className=\"h-8 w-8 border border-zinc-100\">\n                  <AvatarFallback className=\"bg-zinc-100 text-[10px]\">\n                    {member.name.substring(0, 2)}\n                  </AvatarFallback>\n                </Avatar>\n                <div>\n                  <p className=\"text-xs font-bold text-zinc-900\">{member.name}</p>\n                  <p className=\"text-[10px] text-zinc-500\">{member.role}</p>\n                </div>\n              </div>\n\n              <div className=\"text-right\">\n                <p className=\"text-xs font-bold text-zinc-900\">\n                  {member.isMe || isBroadRole\n                    ? formatCurrencyBRL(member.revenue)\n                    : `${member.won} ganhos`}\n                </p>\n                <div className=\"flex items-center justify-end gap-1.5\">\n                  <span className=\"text-[10px] text-zinc-500\">\n                    {member.conversion}% conv.\n                  </span>\n                  {(member.isMe || isBroadRole) && member.commission > 0 && (\n                    <span className=\"text-[10px] font-medium text-emerald-600\">\n                      +{formatCurrencyBRL(member.commission)}\n                    </span>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      <button\n        className=\"mt-auto flex w-full items-center justify-center gap-1 rounded-lg border border-zinc-100 py-2 text-xs font-medium text-zinc-600 transition-colors hover:bg-zinc-50\"\n        onClick={() => router.push(\"/finance\")}\n      >\n        Ver relatório de comissão <ChevronRight className=\"h-3 w-3\" />\n      </button>\n    </BentoCard>\n  );\n}\n","export const wrap = (min: number, max: number, v: number) => {\n    const rangeSize = max - min\n    return ((((v - min) % rangeSize) + rangeSize) % rangeSize) + min\n}\n","import { AbsoluteKeyframe } from \"../types\"\n\nexport function compareByTime(\n    a: AbsoluteKeyframe,\n    b: AbsoluteKeyframe\n): number {\n    if (a.at === b.at) {\n        if (a.value === null) return 1\n        if (b.value === null) return -1\n        return 0\n    } else {\n        return a.at - b.at\n    }\n}\n","import { AnimationPlaybackControls, TimelineWithFallback } from \"./types\"\n\ntype PropNames =\n    | \"time\"\n    | \"speed\"\n    | \"duration\"\n    | \"attachTimeline\"\n    | \"startTime\"\n    | \"state\"\n\nexport type AcceptedAnimations = AnimationPlaybackControls\n\nexport type GroupedAnimations = AcceptedAnimations[]\n\nexport class GroupAnimation implements AnimationPlaybackControls {\n    animations: GroupedAnimations\n\n    constructor(animations: Array<AcceptedAnimations | undefined>) {\n        this.animations = animations.filter(Boolean) as GroupedAnimations\n    }\n\n    get finished() {\n        return Promise.all(\n            this.animations.map((animation) => animation.finished)\n        )\n    }\n\n    /**\n     * TODO: Filter out cancelled or stopped animations before returning\n     */\n    private getAll(propName: PropNames) {\n        return this.animations[0][propName] as any\n    }\n\n    private setAll(propName: PropNames, newValue: any) {\n        for (let i = 0; i < this.animations.length; i++) {\n            ;(this.animations[i][propName] as any) = newValue\n        }\n    }\n\n    attachTimeline(timeline: TimelineWithFallback) {\n        const subscriptions = this.animations.map((animation) =>\n            animation.attachTimeline(timeline)\n        )\n\n        return () => {\n            subscriptions.forEach((cancel, i) => {\n                cancel && cancel()\n                this.animations[i].stop()\n            })\n        }\n    }\n\n    get time() {\n        return this.getAll(\"time\")\n    }\n\n    set time(time: number) {\n        this.setAll(\"time\", time)\n    }\n\n    get speed() {\n        return this.getAll(\"speed\")\n    }\n\n    set speed(speed: number) {\n        this.setAll(\"speed\", speed)\n    }\n\n    get state() {\n        return this.getAll(\"state\")\n    }\n\n    get startTime() {\n        return this.getAll(\"startTime\")\n    }\n\n    get duration() {\n        return getMax(this.animations, \"duration\")\n    }\n\n    get iterationDuration() {\n        return getMax(this.animations, \"iterationDuration\")\n    }\n\n    private runAll(\n        methodName: keyof Omit<\n            AnimationPlaybackControls,\n            PropNames | \"then\" | \"finished\" | \"iterationDuration\"\n        >\n    ) {\n        this.animations.forEach((controls) => controls[methodName]())\n    }\n\n    play() {\n        this.runAll(\"play\")\n    }\n\n    pause() {\n        this.runAll(\"pause\")\n    }\n\n    // Bound to accomadate common `return animation.stop` pattern\n    stop = () => this.runAll(\"stop\")\n\n    cancel() {\n        this.runAll(\"cancel\")\n    }\n\n    complete() {\n        this.runAll(\"complete\")\n    }\n}\n\nfunction getMax(\n    animations: GroupedAnimations,\n    propName: \"iterationDuration\" | \"duration\"\n): number {\n    let max = 0\n\n    for (let i = 0; i < animations.length; i++) {\n        const value = animations[i][propName]\n        if (value !== null && value > max) {\n            max = value\n        }\n    }\n    return max\n}\n","export function calculateRepeatDuration(\n    duration: number,\n    repeat: number,\n    _repeatDelay: number\n): number {\n    return duration * (repeat + 1)\n}\n","import { DOMKeyframesDefinition } from \"motion-dom\"\n\nexport function isDOMKeyframes(\n    keyframes: unknown\n): keyframes is DOMKeyframesDefinition {\n    return typeof keyframes === \"object\" && !Array.isArray(keyframes)\n}\n","import { GroupAnimation } from \"./GroupAnimation\"\nimport { AnimationPlaybackControlsWithThen } from \"./types\"\n\nexport class GroupAnimationWithThen\n    extends GroupAnimation\n    implements AnimationPlaybackControlsWithThen\n{\n    then(onResolve: VoidFunction, _onReject?: VoidFunction) {\n        return this.finished.finally(onResolve).then(() => {})\n    }\n}\n","import type { FlowStage, FlowTransition } from \"./funnel-config\";\n\nexport function buildTransitions(stages: FlowStage[]): FlowTransition[] {\n  return stages.slice(0, -1).map((from, index) => {\n    const to = stages[index + 1];\n    const conversion =\n      from.volume > 0 ? Math.round((to.volume / from.volume) * 100) : 0;\n    return {\n      from,\n      to,\n      conversion,\n      advanced: to.volume,\n      base: from.volume,\n    };\n  });\n}\n\nexport function formatCurrencyCompact(value: number): string {\n  if (value >= 1_000_000) return `R$ ${(value / 1_000_000).toFixed(1)}M`;\n  if (value >= 1_000) return `R$ ${(value / 1_000).toFixed(0)}k`;\n  return `R$ ${value}`;\n}\n\nexport function formatCurrencyBRL(value: number): string {\n  return new Intl.NumberFormat(\"pt-BR\", {\n    style: \"currency\",\n    currency: \"BRL\",\n    maximumFractionDigits: 0,\n  }).format(value);\n}\n","import {\n    HTMLVisualElement,\n    isSVGElement,\n    isSVGSVGElement,\n    ObjectVisualElement,\n    SVGVisualElement,\n    visualElementStore,\n} from \"motion-dom\"\n\nexport function createDOMVisualElement(element: HTMLElement | SVGElement) {\n    const options = {\n        presenceContext: null,\n        props: {},\n        visualState: {\n            renderState: {\n                transform: {},\n                transformOrigin: {},\n                style: {},\n                vars: {},\n                attrs: {},\n            },\n            latestValues: {},\n        },\n    }\n    const node =\n        isSVGElement(element) && !isSVGSVGElement(element)\n            ? new SVGVisualElement(options)\n            : new HTMLVisualElement(options)\n\n    node.mount(element as any)\n\n    visualElementStore.set(element, node)\n}\n\nexport function createObjectVisualElement(subject: Object) {\n    const options = {\n        presenceContext: null,\n        props: {},\n        visualState: {\n            renderState: {\n                output: {},\n            },\n            latestValues: {},\n        },\n    }\n    const node = new ObjectVisualElement(options)\n\n    node.mount(subject)\n\n    visualElementStore.set(subject, node)\n}\n","import { wrap } from \"../../wrap\"\nimport { Easing } from \"../types\"\nimport { isEasingArray } from \"./is-easing-array\"\n\nexport function getEasingForSegment(\n    easing: Easing | Easing[],\n    i: number\n): Easing {\n    return isEasingArray(easing) ? easing[wrap(0, easing.length, i)] : easing\n}\n","import {\n    AnimationScope,\n    DOMKeyframesDefinition,\n    SelectorCache,\n    resolveElements,\n} from \"motion-dom\"\nimport { ObjectTarget } from \"../sequence/types\"\nimport { isDOMKeyframes } from \"../utils/is-dom-keyframes\"\n\nexport function resolveSubjects<O extends {}>(\n    subject:\n        | string\n        | Element\n        | Element[]\n        | NodeListOf<Element>\n        | O\n        | O[]\n        | null\n        | undefined,\n    keyframes: DOMKeyframesDefinition | ObjectTarget<O>,\n    scope?: AnimationScope,\n    selectorCache?: SelectorCache\n) {\n    if (subject == null) {\n        return []\n    }\n\n    if (typeof subject === \"string\" && isDOMKeyframes(keyframes)) {\n        return resolveElements(subject, scope, selectorCache)\n    } else if (subject instanceof NodeList) {\n        return Array.from(subject)\n    } else if (Array.isArray(subject)) {\n        return subject.filter((s) => s != null)\n    } else {\n        return [subject]\n    }\n}\n","import { createBox } from \"../../projection/geometry/models\"\nimport { ResolvedValues } from \"../types\"\nimport { VisualElement } from \"../VisualElement\"\n\ninterface ObjectRenderState {\n    output: ResolvedValues\n}\n\nfunction isObjectKey(key: string, object: Object): key is keyof Object {\n    return key in object\n}\n\nexport class ObjectVisualElement extends VisualElement<\n    Object,\n    ObjectRenderState\n> {\n    type = \"object\"\n\n    readValueFromInstance(instance: Object, key: string) {\n        if (isObjectKey(key, instance)) {\n            const value = instance[key]\n            if (typeof value === \"string\" || typeof value === \"number\") {\n                return value\n            }\n        }\n\n        return undefined\n    }\n\n    getBaseTargetFromProps() {\n        return undefined\n    }\n\n    removeValueFromRenderState(\n        key: string,\n        renderState: ObjectRenderState\n    ): void {\n        delete renderState.output[key]\n    }\n\n    measureInstanceViewportBox() {\n        return createBox()\n    }\n\n    build(renderState: ObjectRenderState, latestValues: ResolvedValues) {\n        Object.assign(renderState.output, latestValues)\n    }\n\n    renderInstance(instance: Object, { output }: ObjectRenderState) {\n        Object.assign(instance, output)\n    }\n\n    sortInstanceNodePosition() {\n        return 0\n    }\n}\n","import { mixNumber, UnresolvedValueKeyframe } from \"motion-dom\"\nimport { Easing, getEasingForSegment, removeItem } from \"motion-utils\"\nimport type { ValueSequence } from \"../types\"\n\nexport function eraseKeyframes(\n    sequence: ValueSequence,\n    startTime: number,\n    endTime: number\n): void {\n    for (let i = 0; i < sequence.length; i++) {\n        const keyframe = sequence[i]\n\n        if (keyframe.at > startTime && keyframe.at < endTime) {\n            removeItem(sequence, keyframe)\n\n            // If we remove this item we have to push the pointer back one\n            i--\n        }\n    }\n}\n\nexport function addKeyframes(\n    sequence: ValueSequence,\n    keyframes: UnresolvedValueKeyframe[],\n    easing: Easing | Easing[],\n    offset: number[],\n    startTime: number,\n    endTime: number\n): void {\n    /**\n     * Erase every existing value between currentTime and targetTime,\n     * this will essentially splice this timeline into any currently\n     * defined ones.\n     */\n    eraseKeyframes(sequence, startTime, endTime)\n\n    for (let i = 0; i < keyframes.length; i++) {\n        sequence.push({\n            value: keyframes[i],\n            at: mixNumber(startTime, endTime, offset[i]),\n            easing: getEasingForSegment(easing, i),\n        })\n    }\n}\n","import { SequenceTime } from \"../types\"\n\n/**\n * Given a absolute or relative time definition and current/prev time state of the sequence,\n * calculate an absolute time for the next keyframes.\n */\nexport function calcNextTime(\n    current: number,\n    next: SequenceTime,\n    prev: number,\n    labels: Map<string, number>\n): number {\n    if (typeof next === \"number\") {\n        return next\n    } else if (next.startsWith(\"-\") || next.startsWith(\"+\")) {\n        return Math.max(0, current + parseFloat(next))\n    } else if (next === \"<\") {\n        return prev\n    } else if (next.startsWith(\"<\")) {\n        return Math.max(0, prev + parseFloat(next.slice(1)))\n    } else {\n        return labels.get(next) ?? current\n    }\n}\n","import {\n    AnimationPlaybackControlsWithThen,\n    AnimationScope,\n    motionValue,\n    spring,\n} from \"motion-dom\"\nimport { createAnimationsFromSequence } from \"../sequence/create\"\nimport { AnimationSequence, SequenceOptions } from \"../sequence/types\"\nimport { animateSubject } from \"./subject\"\n\nexport function animateSequence(\n    sequence: AnimationSequence,\n    options?: SequenceOptions,\n    scope?: AnimationScope\n) {\n    const animations: AnimationPlaybackControlsWithThen[] = []\n\n    /**\n     * Pre-process: replace function segments with MotionValue segments,\n     * subscribe callbacks immediately\n     */\n    const processedSequence = sequence.map((segment) => {\n        if (Array.isArray(segment) && typeof segment[0] === \"function\") {\n            const callback = segment[0] as (value: any) => void\n            const mv = motionValue(0)\n            mv.on(\"change\", callback)\n\n            if (segment.length === 1) {\n                return [mv, [0, 1]] as any\n            } else if (segment.length === 2) {\n                return [mv, [0, 1], segment[1]] as any\n            } else {\n                return [mv, segment[1], segment[2]] as any\n            }\n        }\n        return segment\n    }) as AnimationSequence\n\n    const animationDefinitions = createAnimationsFromSequence(\n        processedSequence,\n        options,\n        scope,\n        { spring }\n    )\n\n    animationDefinitions.forEach(({ keyframes, transition }, subject) => {\n        animations.push(...animateSubject(subject, keyframes, transition))\n    })\n\n    return animations\n}\n","import type {\n    AnimationPlaybackControlsWithThen,\n    AnimationScope,\n    DOMKeyframesDefinition,\n    AnimationOptions as DynamicAnimationOptions,\n    ElementOrSelector,\n    MotionValue,\n    UnresolvedValueKeyframe,\n    ValueAnimationTransition,\n} from \"motion-dom\"\nimport { GroupAnimationWithThen } from \"motion-dom\"\nimport { removeItem } from \"motion-utils\"\nimport {\n    AnimationSequence,\n    ObjectTarget,\n    SequenceOptions,\n} from \"../sequence/types\"\nimport { animateSequence } from \"./sequence\"\nimport { animateSubject } from \"./subject\"\n\nfunction isSequence(value: unknown): value is AnimationSequence {\n    return Array.isArray(value) && value.some(Array.isArray)\n}\n\ninterface ScopedAnimateOptions {\n    scope?: AnimationScope\n    reduceMotion?: boolean\n}\n\n/**\n * Creates an animation function that is optionally scoped\n * to a specific element.\n */\nexport function createScopedAnimate(options: ScopedAnimateOptions = {}) {\n    const { scope, reduceMotion } = options\n    /**\n     * Animate a sequence\n     */\n    function scopedAnimate(\n        sequence: AnimationSequence,\n        options?: SequenceOptions\n    ): AnimationPlaybackControlsWithThen\n    /**\n     * Animate a string\n     */\n    function scopedAnimate(\n        value: string | MotionValue<string>,\n        keyframes: string | UnresolvedValueKeyframe<string>[],\n        options?: ValueAnimationTransition<string>\n    ): AnimationPlaybackControlsWithThen\n    /**\n     * Animate a number\n     */\n    function scopedAnimate(\n        value: number | MotionValue<number>,\n        keyframes: number | UnresolvedValueKeyframe<number>[],\n        options?: ValueAnimationTransition<number>\n    ): AnimationPlaybackControlsWithThen\n    /**\n     * Animate a generic motion value\n     */\n    function scopedAnimate<V extends string | number>(\n        value: V | MotionValue<V>,\n        keyframes: V | UnresolvedValueKeyframe<V>[],\n        options?: ValueAnimationTransition<V>\n    ): AnimationPlaybackControlsWithThen\n    /**\n     * Animate an Element\n     */\n    function scopedAnimate(\n        element: ElementOrSelector,\n        keyframes: DOMKeyframesDefinition,\n        options?: DynamicAnimationOptions\n    ): AnimationPlaybackControlsWithThen\n    /**\n     * Animate an object\n     */\n    function scopedAnimate<O extends {}>(\n        object: O | O[],\n        keyframes: ObjectTarget<O>,\n        options?: DynamicAnimationOptions\n    ): AnimationPlaybackControlsWithThen\n    /**\n     * Implementation\n     */\n    function scopedAnimate<O extends {}>(\n        subjectOrSequence:\n            | AnimationSequence\n            | MotionValue<number>\n            | MotionValue<string>\n            | number\n            | string\n            | ElementOrSelector\n            | O\n            | O[],\n        optionsOrKeyframes?:\n            | SequenceOptions\n            | number\n            | string\n            | UnresolvedValueKeyframe<number>[]\n            | UnresolvedValueKeyframe<string>[]\n            | DOMKeyframesDefinition\n            | ObjectTarget<O>,\n        options?:\n            | ValueAnimationTransition<number>\n            | ValueAnimationTransition<string>\n            | DynamicAnimationOptions\n    ): AnimationPlaybackControlsWithThen {\n        let animations: AnimationPlaybackControlsWithThen[] = []\n        let animationOnComplete: VoidFunction | undefined\n\n        if (isSequence(subjectOrSequence)) {\n            animations = animateSequence(\n                subjectOrSequence,\n                reduceMotion !== undefined\n                    ? { reduceMotion, ...(optionsOrKeyframes as SequenceOptions) }\n                    : (optionsOrKeyframes as SequenceOptions),\n                scope\n            )\n        } else {\n            // Extract top-level onComplete so it doesn't get applied per-value\n            const { onComplete, ...rest } = options || {}\n            if (typeof onComplete === \"function\") {\n                animationOnComplete = onComplete as VoidFunction\n            }\n            animations = animateSubject(\n                subjectOrSequence as ElementOrSelector,\n                optionsOrKeyframes as DOMKeyframesDefinition,\n                (reduceMotion !== undefined\n                    ? { reduceMotion, ...rest }\n                    : rest) as DynamicAnimationOptions,\n                scope\n            )\n        }\n\n        const animation = new GroupAnimationWithThen(animations)\n\n        if (animationOnComplete) {\n            animation.finished.then(animationOnComplete)\n        }\n\n        if (scope) {\n            scope.animations.push(animation)\n            animation.finished.then(() => {\n                removeItem(scope.animations, animation)\n            })\n        }\n\n        return animation\n    }\n\n    return scopedAnimate\n}\n\nexport const animate = createScopedAnimate()\n","/**\n * Take an array of times that represent repeated keyframes. For instance\n * if we have original times of [0, 0.5, 1] then our repeated times will\n * be [0, 0.5, 1, 1, 1.5, 2]. Loop over the times and scale them back\n * down to a 0-1 scale.\n */\nexport function normalizeTimes(times: number[], repeat: number): void {\n    for (let i = 0; i < times.length; i++) {\n        times[i] = times[i] / (repeat + 1)\n    }\n}\n","import {\n    animateTarget,\n    AnimationPlaybackControlsWithThen,\n    AnimationScope,\n    AnyResolvedKeyframe,\n    DOMKeyframesDefinition,\n    AnimationOptions as DynamicAnimationOptions,\n    ElementOrSelector,\n    isMotionValue,\n    MotionValue,\n    TargetAndTransition,\n    UnresolvedValueKeyframe,\n    ValueAnimationTransition,\n    visualElementStore,\n} from \"motion-dom\"\nimport { invariant } from \"motion-utils\"\nimport { ObjectTarget } from \"../sequence/types\"\nimport {\n    createDOMVisualElement,\n    createObjectVisualElement,\n} from \"../utils/create-visual-element\"\nimport { isDOMKeyframes } from \"../utils/is-dom-keyframes\"\nimport { resolveSubjects } from \"./resolve-subjects\"\nimport { animateSingleValue } from \"motion-dom\"\n\nexport type AnimationSubject = Element | MotionValue<any> | any\n\nfunction isSingleValue(\n    subject: unknown,\n    keyframes: unknown\n): subject is MotionValue | AnyResolvedKeyframe {\n    return (\n        isMotionValue(subject) ||\n        typeof subject === \"number\" ||\n        (typeof subject === \"string\" && !isDOMKeyframes(keyframes))\n    )\n}\n\n/**\n * Animate a string\n */\nexport function animateSubject(\n    value: string | MotionValue<string>,\n    keyframes: string | UnresolvedValueKeyframe<string>[],\n    options?: ValueAnimationTransition<string>\n): AnimationPlaybackControlsWithThen[]\n/**\n * Animate a number\n */\nexport function animateSubject(\n    value: number | MotionValue<number>,\n    keyframes: number | UnresolvedValueKeyframe<number>[],\n    options?: ValueAnimationTransition<number>\n): AnimationPlaybackControlsWithThen[]\n/**\n * Animate a Element\n */\nexport function animateSubject(\n    element: ElementOrSelector,\n    keyframes: DOMKeyframesDefinition,\n    options?: DynamicAnimationOptions,\n    scope?: AnimationScope\n): AnimationPlaybackControlsWithThen[]\n/**\n * Animate a object\n */\nexport function animateSubject<O extends Object>(\n    object: O | O[],\n    keyframes: ObjectTarget<O>,\n    options?: DynamicAnimationOptions\n): AnimationPlaybackControlsWithThen[]\n/**\n * Implementation\n */\nexport function animateSubject<O extends Object>(\n    subject:\n        | MotionValue<number>\n        | MotionValue<string>\n        | number\n        | string\n        | ElementOrSelector\n        | O\n        | O[],\n    keyframes:\n        | number\n        | string\n        | UnresolvedValueKeyframe<number>[]\n        | UnresolvedValueKeyframe<string>[]\n        | DOMKeyframesDefinition\n        | ObjectTarget<O>,\n    options?:\n        | ValueAnimationTransition<number>\n        | ValueAnimationTransition<string>\n        | DynamicAnimationOptions,\n    scope?: AnimationScope\n): AnimationPlaybackControlsWithThen[] {\n    const animations: AnimationPlaybackControlsWithThen[] = []\n\n    if (isSingleValue(subject, keyframes)) {\n        animations.push(\n            animateSingleValue(\n                subject,\n                isDOMKeyframes(keyframes)\n                    ? (keyframes as any).default || keyframes\n                    : keyframes,\n                options ? (options as any).default || options : options\n            )\n        )\n    } else {\n        // Gracefully handle null/undefined subjects (e.g., from querySelector returning null)\n        if (subject == null) {\n            return animations\n        }\n\n        const subjects = resolveSubjects(\n            subject,\n            keyframes as DOMKeyframesDefinition,\n            scope\n        )\n\n        const numSubjects = subjects.length\n\n        invariant(\n            Boolean(numSubjects),\n            \"No valid elements provided.\",\n            \"no-valid-elements\"\n        )\n\n        for (let i = 0; i < numSubjects; i++) {\n            const thisSubject = subjects[i]\n\n            const createVisualElement =\n                thisSubject instanceof Element\n                    ? createDOMVisualElement\n                    : createObjectVisualElement\n\n            if (!visualElementStore.has(thisSubject)) {\n                createVisualElement(thisSubject as any)\n            }\n\n            const visualElement = visualElementStore.get(thisSubject)!\n            const transition = { ...options }\n\n            /**\n             * Resolve stagger function if provided.\n             */\n            if (\n                \"delay\" in transition &&\n                typeof transition.delay === \"function\"\n            ) {\n                transition.delay = transition.delay(i, numSubjects)\n            }\n\n            animations.push(\n                ...animateTarget(\n                    visualElement,\n                    { ...(keyframes as {}), transition } as TargetAndTransition,\n                    {}\n                )\n            )\n        }\n    }\n\n    return animations\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 2v2', key: 'tus03m' }],\n  ['path', { d: 'M12 8a4 4 0 0 0-1.645 7.647', key: 'wz5p04' }],\n  ['path', { d: 'M2 12h2', key: '1t8f8n' }],\n  ['path', { d: 'M20 14.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0z', key: 'yu0u2z' }],\n  ['path', { d: 'm4.93 4.93 1.41 1.41', key: '149t6j' }],\n  ['path', { d: 'm6.34 17.66-1.41 1.41', key: '1m8zz5' }],\n];\n\n/**\n * @component @name ThermometerSun\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMnYyIiAvPgogIDxwYXRoIGQ9Ik0xMiA4YTQgNCAwIDAgMC0xLjY0NSA3LjY0NyIgLz4KICA8cGF0aCBkPSJNMiAxMmgyIiAvPgogIDxwYXRoIGQ9Ik0yMCAxNC41NGE0IDQgMCAxIDEtNCAwVjRhMiAyIDAgMCAxIDQgMHoiIC8+CiAgPHBhdGggZD0ibTQuOTMgNC45MyAxLjQxIDEuNDEiIC8+CiAgPHBhdGggZD0ibTYuMzQgMTcuNjYtMS40MSAxLjQxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/thermometer-sun\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ThermometerSun = createLucideIcon('thermometer-sun', __iconNode);\n\nexport default ThermometerSun;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1',\n      key: '18etb6',\n    },\n  ],\n  ['path', { d: 'M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4', key: 'xoc0q4' }],\n];\n\n/**\n * @component @name Wallet\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgN1Y0YTEgMSAwIDAgMC0xLTFINWEyIDIgMCAwIDAgMCA0aDE1YTEgMSAwIDAgMSAxIDF2NGgtM2EyIDIgMCAwIDAgMCA0aDNhMSAxIDAgMCAwIDEtMXYtMmExIDEgMCAwIDAtMS0xIiAvPgogIDxwYXRoIGQ9Ik0zIDV2MTRhMiAyIDAgMCAwIDIgMmgxNWExIDEgMCAwIDAgMS0xdi00IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/wallet\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Wallet = createLucideIcon('wallet', __iconNode);\n\nexport default Wallet;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 14 4-4', key: '9kzdfg' }],\n  ['path', { d: 'M3.34 19a10 10 0 1 1 17.32 0', key: '19p75a' }],\n];\n\n/**\n * @component @name Gauge\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTQgNC00IiAvPgogIDxwYXRoIGQ9Ik0zLjM0IDE5YTEwIDEwIDAgMSAxIDE3LjMyIDAiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/gauge\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Gauge = createLucideIcon('gauge', __iconNode);\n\nexport default Gauge;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M16 17h6v-6', key: 't6n2it' }],\n  ['path', { d: 'm22 17-8.5-8.5-5 5L2 7', key: 'x473p' }],\n];\n\n/**\n * @component @name TrendingDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMTdoNnYtNiIgLz4KICA8cGF0aCBkPSJtMjIgMTctOC41LTguNS01IDVMMiA3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/trending-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TrendingDown = createLucideIcon('trending-down', __iconNode);\n\nexport default TrendingDown;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n  ['path', { d: 'm19 12-7 7-7-7', key: '1idqje' }],\n];\n\n/**\n * @component @name ArrowDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KICA8cGF0aCBkPSJtMTkgMTItNyA3LTctNyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowDown = createLucideIcon('arrow-down', __iconNode);\n\nexport default ArrowDown;\n","import {\n    AnimationScope,\n    createGeneratorEasing,\n    defaultOffset,\n    DOMKeyframesDefinition,\n    AnimationOptions as DynamicAnimationOptions,\n    fillOffset,\n    GeneratorFactory,\n    isGenerator,\n    isMotionValue,\n    Transition,\n    UnresolvedValueKeyframe,\n    type AnyResolvedKeyframe,\n    type MotionValue,\n} from \"motion-dom\"\nimport {\n    Easing,\n    getEasingForSegment,\n    invariant,\n    progress,\n    secondsToMilliseconds,\n} from \"motion-utils\"\nimport { resolveSubjects } from \"../animate/resolve-subjects\"\nimport {\n    AnimationSequence,\n    At,\n    ResolvedAnimationDefinitions,\n    SequenceMap,\n    SequenceOptions,\n    ValueSequence,\n} from \"./types\"\nimport { calculateRepeatDuration } from \"./utils/calc-repeat-duration\"\nimport { calcNextTime } from \"./utils/calc-time\"\nimport { addKeyframes } from \"./utils/edit\"\nimport { normalizeTimes } from \"./utils/normalize-times\"\nimport { compareByTime } from \"./utils/sort\"\n\nconst defaultSegmentEasing = \"easeInOut\"\n\nconst MAX_REPEAT = 20\n\nexport function createAnimationsFromSequence(\n    sequence: AnimationSequence,\n    { defaultTransition = {}, ...sequenceTransition }: SequenceOptions = {},\n    scope?: AnimationScope,\n    generators?: { [key: string]: GeneratorFactory }\n): ResolvedAnimationDefinitions {\n    const defaultDuration = defaultTransition.duration || 0.3\n    const animationDefinitions: ResolvedAnimationDefinitions = new Map()\n    const sequences = new Map<Element | MotionValue, SequenceMap>()\n    const elementCache = {}\n    const timeLabels = new Map<string, number>()\n\n    let prevTime = 0\n    let currentTime = 0\n    let totalDuration = 0\n\n    /**\n     * Build the timeline by mapping over the sequence array and converting\n     * the definitions into keyframes and offsets with absolute time values.\n     * These will later get converted into relative offsets in a second pass.\n     */\n    for (let i = 0; i < sequence.length; i++) {\n        const segment = sequence[i]\n\n        /**\n         * If this is a timeline label, mark it and skip the rest of this iteration.\n         */\n        if (typeof segment === \"string\") {\n            timeLabels.set(segment, currentTime)\n            continue\n        } else if (!Array.isArray(segment)) {\n            timeLabels.set(\n                segment.name,\n                calcNextTime(currentTime, segment.at, prevTime, timeLabels)\n            )\n            continue\n        }\n\n        let [subject, keyframes, transition = {}] = segment\n\n        /**\n         * If a relative or absolute time value has been specified we need to resolve\n         * it in relation to the currentTime.\n         */\n        if (transition.at !== undefined) {\n            currentTime = calcNextTime(\n                currentTime,\n                transition.at,\n                prevTime,\n                timeLabels\n            )\n        }\n\n        /**\n         * Keep track of the maximum duration in this definition. This will be\n         * applied to currentTime once the definition has been parsed.\n         */\n        let maxDuration = 0\n\n        const resolveValueSequence = (\n            valueKeyframes: UnresolvedValueKeyframe | UnresolvedValueKeyframe[],\n            valueTransition: Transition | DynamicAnimationOptions,\n            valueSequence: ValueSequence,\n            elementIndex = 0,\n            numSubjects = 0\n        ) => {\n            const valueKeyframesAsList = keyframesAsList(valueKeyframes)\n            const {\n                delay = 0,\n                times = defaultOffset(valueKeyframesAsList),\n                type = defaultTransition.type || \"keyframes\",\n                repeat,\n                repeatType,\n                repeatDelay = 0,\n                ...remainingTransition\n            } = valueTransition\n            let { ease = defaultTransition.ease || \"easeOut\", duration } =\n                valueTransition\n\n            /**\n             * Resolve stagger() if defined.\n             */\n            const calculatedDelay =\n                typeof delay === \"function\"\n                    ? delay(elementIndex, numSubjects)\n                    : delay\n\n            /**\n             * If this animation should and can use a spring, generate a spring easing function.\n             */\n            const numKeyframes = valueKeyframesAsList.length\n            const createGenerator = isGenerator(type)\n                ? type\n                : generators?.[type || \"keyframes\"]\n\n            if (numKeyframes <= 2 && createGenerator) {\n                /**\n                 * As we're creating an easing function from a spring,\n                 * ideally we want to generate it using the real distance\n                 * between the two keyframes. However this isn't always\n                 * possible - in these situations we use 0-100.\n                 */\n                let absoluteDelta = 100\n                if (\n                    numKeyframes === 2 &&\n                    isNumberKeyframesArray(valueKeyframesAsList)\n                ) {\n                    const delta =\n                        valueKeyframesAsList[1] - valueKeyframesAsList[0]\n                    absoluteDelta = Math.abs(delta)\n                }\n\n                const springTransition = {\n                    ...defaultTransition,\n                    ...remainingTransition,\n                }\n                if (duration !== undefined) {\n                    springTransition.duration = secondsToMilliseconds(duration)\n                }\n\n                const springEasing = createGeneratorEasing(\n                    springTransition,\n                    absoluteDelta,\n                    createGenerator\n                )\n\n                ease = springEasing.ease\n                duration = springEasing.duration\n            }\n\n            duration ??= defaultDuration\n\n            const startTime = currentTime + calculatedDelay\n\n            /**\n             * If there's only one time offset of 0, fill in a second with length 1\n             */\n            if (times.length === 1 && times[0] === 0) {\n                times[1] = 1\n            }\n\n            /**\n             * Fill out if offset if fewer offsets than keyframes\n             */\n            const remainder = times.length - valueKeyframesAsList.length\n            remainder > 0 && fillOffset(times, remainder)\n\n            /**\n             * If only one value has been set, ie [1], push a null to the start of\n             * the keyframe array. This will let us mark a keyframe at this point\n             * that will later be hydrated with the previous value.\n             */\n            valueKeyframesAsList.length === 1 &&\n                valueKeyframesAsList.unshift(null)\n\n            /**\n             * Handle repeat options\n             */\n            if (repeat) {\n                invariant(\n                    repeat < MAX_REPEAT,\n                    \"Repeat count too high, must be less than 20\",\n                    \"repeat-count-high\"\n                )\n\n                duration = calculateRepeatDuration(\n                    duration,\n                    repeat,\n                    repeatDelay\n                )\n\n                const originalKeyframes = [...valueKeyframesAsList]\n                const originalTimes = [...times]\n                ease = Array.isArray(ease) ? [...ease] : [ease]\n                const originalEase = [...ease]\n\n                for (let repeatIndex = 0; repeatIndex < repeat; repeatIndex++) {\n                    valueKeyframesAsList.push(...originalKeyframes)\n\n                    for (\n                        let keyframeIndex = 0;\n                        keyframeIndex < originalKeyframes.length;\n                        keyframeIndex++\n                    ) {\n                        times.push(\n                            originalTimes[keyframeIndex] + (repeatIndex + 1)\n                        )\n                        ease.push(\n                            keyframeIndex === 0\n                                ? \"linear\"\n                                : getEasingForSegment(\n                                      originalEase,\n                                      keyframeIndex - 1\n                                  )\n                        )\n                    }\n                }\n\n                normalizeTimes(times, repeat)\n            }\n\n            const targetTime = startTime + duration\n\n            /**\n             * Add keyframes, mapping offsets to absolute time.\n             */\n            addKeyframes(\n                valueSequence,\n                valueKeyframesAsList,\n                ease as Easing | Easing[],\n                times,\n                startTime,\n                targetTime\n            )\n\n            maxDuration = Math.max(calculatedDelay + duration, maxDuration)\n            totalDuration = Math.max(targetTime, totalDuration)\n        }\n\n        if (isMotionValue(subject)) {\n            const subjectSequence = getSubjectSequence(subject, sequences)\n            resolveValueSequence(\n                keyframes as AnyResolvedKeyframe,\n                transition,\n                getValueSequence(\"default\", subjectSequence)\n            )\n        } else {\n            const subjects = resolveSubjects(\n                subject,\n                keyframes as DOMKeyframesDefinition,\n                scope,\n                elementCache\n            )\n\n            const numSubjects = subjects.length\n\n            /**\n             * For every element in this segment, process the defined values.\n             */\n            for (\n                let subjectIndex = 0;\n                subjectIndex < numSubjects;\n                subjectIndex++\n            ) {\n                /**\n                 * Cast necessary, but we know these are of this type\n                 */\n                keyframes = keyframes as DOMKeyframesDefinition\n                transition = transition as DynamicAnimationOptions\n\n                const thisSubject = subjects[subjectIndex]\n                const subjectSequence = getSubjectSequence(\n                    thisSubject,\n                    sequences\n                )\n\n                for (const key in keyframes) {\n                    resolveValueSequence(\n                        keyframes[\n                            key as keyof typeof keyframes\n                        ] as UnresolvedValueKeyframe,\n                        getValueTransition(transition, key),\n                        getValueSequence(key, subjectSequence),\n                        subjectIndex,\n                        numSubjects\n                    )\n                }\n            }\n        }\n\n        prevTime = currentTime\n        currentTime += maxDuration\n    }\n\n    /**\n     * For every element and value combination create a new animation.\n     */\n    sequences.forEach((valueSequences, element) => {\n        for (const key in valueSequences) {\n            const valueSequence = valueSequences[key]\n\n            /**\n             * Arrange all the keyframes in ascending time order.\n             */\n            valueSequence.sort(compareByTime)\n\n            const keyframes: UnresolvedValueKeyframe[] = []\n            const valueOffset: number[] = []\n            const valueEasing: Easing[] = []\n\n            /**\n             * For each keyframe, translate absolute times into\n             * relative offsets based on the total duration of the timeline.\n             */\n            for (let i = 0; i < valueSequence.length; i++) {\n                const { at, value, easing } = valueSequence[i]\n                keyframes.push(value)\n                valueOffset.push(progress(0, totalDuration, at))\n                valueEasing.push(easing || \"easeOut\")\n            }\n\n            /**\n             * If the first keyframe doesn't land on offset: 0\n             * provide one by duplicating the initial keyframe. This ensures\n             * it snaps to the first keyframe when the animation starts.\n             */\n            if (valueOffset[0] !== 0) {\n                valueOffset.unshift(0)\n                keyframes.unshift(keyframes[0])\n                valueEasing.unshift(defaultSegmentEasing)\n            }\n\n            /**\n             * If the last keyframe doesn't land on offset: 1\n             * provide one with a null wildcard value. This will ensure it\n             * stays static until the end of the animation.\n             */\n            if (valueOffset[valueOffset.length - 1] !== 1) {\n                valueOffset.push(1)\n                keyframes.push(null)\n            }\n\n            if (!animationDefinitions.has(element)) {\n                animationDefinitions.set(element, {\n                    keyframes: {},\n                    transition: {},\n                })\n            }\n\n            const definition = animationDefinitions.get(element)!\n\n            definition.keyframes[key] = keyframes\n\n            /**\n             * Exclude `type` from defaultTransition since springs have been\n             * converted to duration-based easing functions in resolveValueSequence.\n             * Including `type: \"spring\"` would cause JSAnimation to error when\n             * the merged keyframes array has more than 2 keyframes.\n             */\n            const { type: _type, ...remainingDefaultTransition } =\n                defaultTransition\n            definition.transition[key] = {\n                ...remainingDefaultTransition,\n                duration: totalDuration,\n                ease: valueEasing,\n                times: valueOffset,\n                ...sequenceTransition,\n            }\n        }\n    })\n\n    return animationDefinitions\n}\n\nfunction getSubjectSequence<O extends {}>(\n    subject: Element | MotionValue | O,\n    sequences: Map<Element | MotionValue | O, SequenceMap>\n): SequenceMap {\n    !sequences.has(subject) && sequences.set(subject, {})\n    return sequences.get(subject)!\n}\n\nfunction getValueSequence(name: string, sequences: SequenceMap): ValueSequence {\n    if (!sequences[name]) sequences[name] = []\n    return sequences[name]\n}\n\nfunction keyframesAsList(\n    keyframes: UnresolvedValueKeyframe | UnresolvedValueKeyframe[]\n): UnresolvedValueKeyframe[] {\n    return Array.isArray(keyframes) ? keyframes : [keyframes]\n}\n\nexport function getValueTransition(\n    transition: DynamicAnimationOptions & At,\n    key: string\n): DynamicAnimationOptions {\n    return transition && transition[key as keyof typeof transition]\n        ? {\n              ...transition,\n              ...(transition[key as keyof typeof transition] as Transition),\n          }\n        : { ...transition }\n}\n\nconst isNumber = (keyframe: unknown) => typeof keyframe === \"number\"\nconst isNumberKeyframesArray = (\n    keyframes: UnresolvedValueKeyframe[]\n): keyframes is number[] => keyframes.every(isNumber)\n","import * as React from \"react\";\nimport { motion } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport { premiumPressMotion } from \"@/lib/motion\";\n\nexport interface BentoCardProps {\n  title?: string;\n  description?: string;\n  actions?: React.ReactNode;\n  children: React.ReactNode;\n  size?: \"sm\" | \"md\" | \"lg\" | \"tall\" | \"wide\";\n  state?: \"default\" | \"loading\" | \"error\" | \"empty\";\n  className?: string;\n  noPadding?: boolean;\n  elevated?: boolean;\n  hoverable?: boolean;\n  shine?: boolean;\n}\n\nconst BentoCard = React.forwardRef<HTMLDivElement, BentoCardProps>(\n  (\n    {\n      title,\n      description,\n      actions,\n      children,\n      size = \"md\",\n      state = \"default\",\n      className,\n      noPadding = false,\n      elevated = false,\n      hoverable = false,\n      shine = true,\n      ...props\n    },\n    ref\n  ) => {\n    const hasHeader = title || description || actions;\n    const sizeClass =\n      size === \"sm\"\n        ? \"min-h-[140px]\"\n        : size === \"lg\"\n          ? \"min-h-[260px]\"\n          : size === \"tall\"\n            ? \"min-h-[340px]\"\n            : size === \"wide\"\n              ? \"min-h-[200px]\"\n              : \"min-h-[180px]\";\n\n    return (\n      <motion.div\n        ref={ref}\n        whileHover={hoverable ? premiumPressMotion.whileHover : undefined}\n        whileTap={hoverable ? premiumPressMotion.whileTap : undefined}\n        transition={\n          hoverable\n            ? { duration: 0.22, ease: [0.22, 0.61, 0.36, 1] }\n            : undefined\n        }\n        className={cn(\n          // Base styles\n          \"group/card relative overflow-hidden\",\n          \"bento-card-base premium-panel\",\n          \"rounded-[var(--radius-bento-card)]\",\n          \"border border-[var(--border-bento-default)]\",\n          \"focus-within:ring-2 focus-within:ring-brand/20\",\n\n          // Shadow elevation\n          elevated && \"bento-card-elevated\",\n          !elevated && \"shadow-[var(--shadow-bento-sm)]\",\n\n          // Hover state\n          hoverable && elevated && \"bento-card-elevated-hover\",\n          hoverable && !elevated && \"bento-card-hover\",\n          hoverable && \"premium-lift\",\n          hoverable && shine && \"premium-shine\",\n\n          // Size\n          sizeClass,\n\n          // State-specific styles\n          state === \"error\" && \"border-[var(--border-bento-error)]\",\n          state === \"loading\" && \"pointer-events-none opacity-80\",\n\n          className\n        )}\n        {...props}\n      >\n        {shine && (\n          <>\n            <div\n              aria-hidden\n              className=\"pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300 ease-out group-hover/card:opacity-100\"\n            >\n              <div className=\"absolute -top-16 right-[-12%] h-40 w-40 rounded-full bg-brand/15 blur-3xl\" />\n              <div className=\"absolute -bottom-16 left-[-10%] h-36 w-36 rounded-full bg-cyan-300/15 blur-3xl\" />\n            </div>\n            <div\n              aria-hidden\n              className=\"pointer-events-none absolute inset-x-0 top-0 h-px bg-linear-to-r from-transparent via-white/90 to-transparent opacity-70\"\n            />\n          </>\n        )}\n\n        {/* Header */}\n        {hasHeader && (\n          <div\n            className={cn(\n              \"flex items-start justify-between gap-4\",\n              noPadding ? \"px-6 pt-6\" : \"px-6 pt-6 pb-4\"\n            )}\n          >\n            <div className=\"min-w-0 flex-1\">\n              {title && (\n                <h3 className=\"font-heading text-lg font-semibold text-black\">\n                  {title}\n                </h3>\n              )}\n              {description && (\n                <p className=\"mt-1 font-body text-sm text-zinc-500\">\n                  {description}\n                </p>\n              )}\n            </div>\n            {actions && <div className=\"flex shrink-0 gap-2\">{actions}</div>}\n          </div>\n        )}\n\n        {/* Content */}\n        <div className={cn(!noPadding && (hasHeader ? \"px-6 pb-6\" : \"p-6\"))}>\n          {children}\n        </div>\n      </motion.div>\n    );\n  }\n);\n\nBentoCard.displayName = \"BentoCard\";\n\nexport { BentoCard };\n","import type { Opportunity } from \"@/types\";\n\ntype FlowStageId = \"lead\" | \"contact\" | \"meeting\" | \"proposal\" | \"negotiation\" | \"won\";\ntype FunnelXRayState = \"ready\" | \"loading\" | \"error\";\ntype ActionState = \"idle\" | \"loading\" | \"success\" | \"error\";\n\ninterface FlowStage {\n  id: FlowStageId;\n  label: string;\n  volume: number;\n  value: number;\n  stalledCount: number;\n  stalledDays: number;\n}\n\ninterface FlowTransition {\n  from: FlowStage;\n  to: FlowStage;\n  conversion: number;\n  advanced: number;\n  base: number;\n}\n\ninterface StageInsight {\n  riskDeals: string[];\n  highlight: string;\n  recommendation: string;\n}\n\nconst STAGE_TO_PIPELINE: Record<FlowStageId, string> = {\n  lead: \"lead-in\",\n  contact: \"contato-feito\",\n  meeting: \"reuniao-agendada\",\n  proposal: \"proposta-enviada\",\n  negotiation: \"negociacao\",\n  won: \"fechamento\",\n};\n\nconst PIPELINE_TO_FLOW: Record<string, FlowStageId> = {\n  \"lead-in\": \"lead\",\n  \"contato-feito\": \"contact\",\n  \"reuniao-agendada\": \"meeting\",\n  \"proposta-enviada\": \"proposal\",\n  \"negociacao\": \"negotiation\",\n  \"fechamento\": \"won\",\n};\n\nconst FLOW_STAGE_LABELS: Record<FlowStageId, string> = {\n  lead: \"Leads\",\n  contact: \"Contato\",\n  meeting: \"Reunião\",\n  proposal: \"Proposta\",\n  negotiation: \"Negociação\",\n  won: \"Fechamento\",\n};\n\nconst FLOW_STAGE_ORDER: FlowStageId[] = [\n  \"lead\",\n  \"contact\",\n  \"meeting\",\n  \"proposal\",\n  \"negotiation\",\n  \"won\",\n];\n\n// ── Dynamic builders ────────────────────────────────────────────────\n\n/**\n * Build FlowStage[] from real opportunity data.\n * Groups open opportunities by pipeline stage and computes volume, value,\n * stalled count & average stalled days.\n */\nfunction buildStagesFromOpportunities(\n  opportunities: Opportunity[],\n  now: Date\n): FlowStage[] {\n  const openOpps = opportunities.filter((o) => o.status === \"open\");\n\n  return FLOW_STAGE_ORDER.map((flowId) => {\n    const pipelineStage = STAGE_TO_PIPELINE[flowId];\n    const stageOpps = openOpps.filter((o) => o.stage === pipelineStage);\n\n    const volume = stageOpps.length;\n    const value = stageOpps.reduce((sum, o) => sum + (o.value || 0), 0);\n\n    // Stalled = not updated in 5+ days\n    const stalledThreshold = 5 * 24 * 60 * 60 * 1000;\n    const stalledOpps = stageOpps.filter(\n      (o) => now.getTime() - new Date(o.updatedAt).getTime() > stalledThreshold\n    );\n    const stalledCount = stalledOpps.length;\n\n    let stalledDays = 0;\n    if (stalledOpps.length > 0) {\n      const totalDays = stalledOpps.reduce((sum, o) => {\n        return sum + Math.round(\n          (now.getTime() - new Date(o.updatedAt).getTime()) / (1000 * 60 * 60 * 24)\n        );\n      }, 0);\n      stalledDays = Math.round(totalDays / stalledOpps.length);\n    }\n\n    return {\n      id: flowId,\n      label: FLOW_STAGE_LABELS[flowId],\n      volume,\n      value,\n      stalledCount,\n      stalledDays,\n    };\n  });\n}\n\n/**\n * Build contextual insights from real data.\n * riskDeals = top 3 stalled opportunity titles per stage.\n * highlight = dynamic text comparing stage performance.\n * recommendation = contextual action based on stage state.\n */\nfunction buildInsightsFromData(\n  stages: FlowStage[],\n  opportunities: Opportunity[],\n  now: Date\n): Record<FlowStageId, StageInsight> {\n  const openOpps = opportunities.filter((o) => o.status === \"open\");\n  const stalledThreshold = 5 * 24 * 60 * 60 * 1000;\n\n  const result = {} as Record<FlowStageId, StageInsight>;\n\n  for (const stage of stages) {\n    const pipelineStage = STAGE_TO_PIPELINE[stage.id];\n    const stageOpps = openOpps.filter((o) => o.stage === pipelineStage);\n\n    // Top 3 stalled deals by days stalled (desc)\n    const stalledOpps = stageOpps\n      .filter((o) => now.getTime() - new Date(o.updatedAt).getTime() > stalledThreshold)\n      .sort(\n        (a, b) =>\n          new Date(a.updatedAt).getTime() - new Date(b.updatedAt).getTime()\n      )\n      .slice(0, 3);\n\n    const riskDeals =\n      stalledOpps.length > 0\n        ? stalledOpps.map((o) => o.title || o.clientName)\n        : stageOpps.slice(0, 3).map((o) => o.title || o.clientName);\n\n    // Dynamic highlight\n    const stalledPct =\n      stage.volume > 0\n        ? Math.round((stage.stalledCount / stage.volume) * 100)\n        : 0;\n    const highlight =\n      stage.stalledCount > 0\n        ? `${stalledPct}% parados há +${stage.stalledDays} dias`\n        : stage.volume > 0\n          ? `${stage.volume} oportunidades ativas`\n          : \"Nenhuma oportunidade nesta etapa\";\n\n    // Context-aware recommendation\n    let recommendation: string;\n    if (stage.stalledCount > 0 && stage.stalledCount >= stage.volume * 0.5) {\n      recommendation = `Atenção: ${stage.stalledCount} oportunidades paradas. Priorizar follow-up urgente.`;\n    } else if (stage.id === \"lead\") {\n      recommendation = \"Priorizar contato inicial com leads das últimas 24h.\";\n    } else if (stage.id === \"contact\") {\n      recommendation = \"Escalar follow-up com decisores sem retorno há 3 dias.\";\n    } else if (stage.id === \"meeting\") {\n      recommendation = \"Fechar agenda com prova de valor em até 48h.\";\n    } else if (stage.id === \"proposal\") {\n      recommendation = \"Cobrar feedbacks das propostas paradas para destravar fechamento.\";\n    } else if (stage.id === \"negotiation\") {\n      recommendation = \"Alinhar objeções e preparar última contraproposta.\";\n    } else {\n      recommendation = \"Subir ticket com pacote premium na reta final.\";\n    }\n\n    result[stage.id] = { riskDeals, highlight, recommendation };\n  }\n\n  return result;\n}\n\nexport type {\n  FlowStageId,\n  FunnelXRayState,\n  ActionState,\n  FlowStage,\n  FlowTransition,\n  StageInsight,\n};\nexport {\n  STAGE_TO_PIPELINE,\n  PIPELINE_TO_FLOW,\n  FLOW_STAGE_ORDER,\n  FLOW_STAGE_LABELS,\n  buildStagesFromOpportunities,\n  buildInsightsFromData,\n};\n"],"names":[],"mappings":"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","ignoreList":[11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]}
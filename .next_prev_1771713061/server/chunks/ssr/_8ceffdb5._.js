module.exports=[69520,a=>{"use strict";let b=(0,a.i(70106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},50489,54651,35397,19274,a=>{"use strict";function b(){return`msg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function c(){return new Date().toISOString()}function d(a){if(a)return{cardId:a.cardId,cardName:a.cardName,stage:a.stageLabel,temperature:a.temperature}}function e(a){switch(a){case"hot":return"ðŸ”¥";case"warm":default:return"ðŸŒ¡ï¸";case"cold":return"â„ï¸"}}function f(a){switch(a){case"hot":return"Quente";case"warm":return"Morno";case"cold":return"Frio";default:return a}}function g(a,d,e){let f;f=d?`âœ¨ **Ol\xe1, ${a.name}!** Sou a Menux Intelligence, seu bra\xe7o direito comercial.

Vi que voc\xea est\xe1 com **${d.cardName}** aberto. Quer que eu te ajude com esse lead ou prefere escolher outro?`:e?`âœ¨ **Bom dia, ${a.name}!** Sou a Menux Intelligence, seu bra\xe7o direito comercial.

Voc\xea tem atividades para hoje e leads quentes esperando a\xe7\xe3o. Quer focar em algum cliente?

**ðŸ“‹ Escolher cliente**

Ou pode mandar sua d\xfavida direto â€” estou aqui pra ajudar.`:`âœ¨ **Ol\xe1, ${a.name}!** Sou a Menux Intelligence, seu bra\xe7o direito comercial.

Quer falar sobre algum cliente espec\xedfico? Selecione abaixo para eu carregar todo o contexto.

**ðŸ“‹ Escolher cliente**

Ou pode mandar sua d\xfavida direto â€” estou aqui pra ajudar.`;let g=d?[]:[{id:b(),type:"open-card",label:"ðŸ“‹ Escolher cliente",icon:"users",payload:{action:"open-client-picker"}}];return{id:b(),role:"assistant",content:f,contentType:"greeting",timestamp:c(),suggestedActions:g.length>0?g:void 0}}function h(a){return{id:b(),role:"assistant",content:`âœ… Contexto carregado: **${a.cardName}** (${a.stageLabel} \xb7 ${e(a.temperature)} ${f(a.temperature)}). Como posso te ajudar com esse lead?`,contentType:"context-loaded",timestamp:c(),contextBadge:d(a)}}a.s(["INTELLIGENCE_LIMITS",0,{MAX_MESSAGES_PER_CONVERSATION:100,MAX_STORED_CONVERSATIONS:50,MAX_USER_MESSAGE_LENGTH:2e3,MAX_AI_RESPONSE_LENGTH:6e3,MAX_PROACTIVE_SUGGESTIONS_PER_DAY:15,MAX_QUERIES_PER_HOUR:60,CONTEXT_WINDOW_MESSAGES:20,HISTORY_RETENTION_DAYS:30,WHATSAPP_CHAR_LIMIT:280,EMAIL_BODY_CHAR_LIMIT:500}],50489),a.s(["buildContextBadge",()=>d,"now",()=>c,"temperatureEmoji",()=>e,"temperatureLabel",()=>f,"uid",()=>b],54651),a.s(["generateContextLoaded",()=>h,"generateGreeting",()=>g],35397);var i=a.i(31791);function j(a){if(!a)return{id:b(),role:"assistant",content:"ðŸ“Š NÃ£o consegui carregar os dados do funil neste momento. Tente novamente em alguns instantes.",contentType:"funnel-summary",timestamp:c(),sourceCommand:"/funil"};let d=Object.values(a.cardsByStage).reduce((a,b)=>a+b,0),e=`ðŸ“Š **Resumo do seu Funil**

**Vis\xe3o geral:**
  - ðŸ”¥ Quentes: precisa de a\xe7\xe3o imediata
  - ðŸ“Š Total no funil: **${d}** oportunidades \xb7 **${(0,i.formatCurrencyBRL)(a.totalMRR)}** em MRR potencial

**Por etapa:**
${Object.entries(a.cardsByStage).map(([a,b])=>`  - **${a}:** ${b} cards`).join("\n")}

**âš ï¸ A\xe7\xf5es imediatas:**
  ${a.overdueCards>0?`- ðŸ”´ **${a.overdueCards}** card(s) com atividade vencida`:"- âœ… Nenhuma atividade vencida"}
  ${a.hotIdleCards>0?`- ðŸ”¥ **${a.hotIdleCards}** lead(s) quente(s) sem atividade`:"- âœ… Leads quentes com atividade em dia"}
  ${a.staleCards>0?`- â° **${a.staleCards}** card(s) parado(s) h\xe1 mais de 7 dias`:"- âœ… Nenhum card parado"}`;return{id:b(),role:"assistant",content:e,contentType:"funnel-summary",timestamp:c(),sourceCommand:"/funil"}}function k(a){let g=a.leadScore??Math.floor(40*Math.random()+50),h=a.overdueActivities.length,i=[];h>0&&i.push(`Atividades vencidas: ${h}`),0===a.contacts.length&&i.push("Nenhum contato registrado"),a.contacts.some(a=>a.isDecisionMaker)||i.push("Sem acesso ao decisor"),a.quotedPlan||i.push("Plano nÃ£o cotado");let j="hot"===a.temperature&&0===h?"Alta (70-85%)":"warm"===a.temperature?"MÃ©dia (40-60%)":"Baixa (15-30%)",k=`ðŸ” **An\xe1lise: ${a.cardName}**

**Sa\xfade do deal:** ${g}/100 ${g>=70?"ðŸŸ¢":g>=40?"ðŸŸ¡":"ðŸ”´"}

**Temperatura:** ${e(a.temperature)} ${f(a.temperature)}
  ${"cold"===a.temperature?"â†’ Frio: sem atividade recente ou engajamento baixo.":"warm"===a.temperature?"â†’ Morno: hÃ¡ engajamento mas precisa de mais aÃ§Ã£o.":"â†’ Quente: lead engajado, momento de avanÃ§ar!"}

**Score de patente:**
  ${a.contacts.length>0?a.contacts.map(a=>`- ${a.name}: ${a.role??"Cargo nÃ£o informado"} ${a.isDecisionMaker?"ðŸ‘‘ Decisor":""}`).join("\n  "):"Nenhum contato mapeado. Priorize mapear o decisor."}

${i.length>0?`**Gargalos:**
${i.map(a=>`  - âš ï¸ ${a}`).join("\n")}`:"**Gargalos:** âœ… Nenhum gargalo identificado"}

**Pr\xf3ximo passo recomendado:** ${h>0?"Resolva as atividades vencidas imediatamente.":!a.contacts.some(a=>a.isDecisionMaker)?"Mapeie e contate o decisor para acelerar o fechamento.":"Envie uma proposta personalizada e agende follow-up em 3 dias."}

**Probabilidade de fechamento:** ${j}`;return{id:b(),role:"assistant",content:k,contentType:"card-analysis",timestamp:c(),contextBadge:d(a),suggestedActions:[{id:b(),type:"create-activity",label:"ðŸ“… Criar atividade",icon:"calendar",payload:{type:h>0?"task":"follow-up",description:`A\xe7\xe3o p\xf3s-an\xe1lise de ${a.cardName}`,opportunityId:a.cardId,opportunityTitle:a.cardName}},{id:b(),type:"save-note",label:"ðŸ“ Salvar na timeline",icon:"file-text",payload:{cardId:a.cardId,entityType:a.entityType,noteText:`An\xe1lise executada para ${a.cardName}: sa\xfade ${g}/100, probabilidade ${j}.`}}],sourceCommand:"/analise"}}function l(a){let d=`âš”ï¸ **Menux vs ${a}**

| Crit\xe9rio | Menux | ${a} |
|----------|-------|${"-".repeat(a.length+2)}|
| Comanda digital | âœ… Nativo, sem hardware extra | Depende de tablet propriet\xe1rio |
| Gest\xe3o de mesas | âœ… Mapa interativo tempo real | B\xe1sico, sem visualiza\xe7\xe3o |
| Card\xe1pio digital | âœ… QR Code + autoatendimento | Apenas PDFs |
| Suporte | âœ… Chat + telefone + CS dedicado | Apenas ticket por email |
| Setup | âœ… Onboarding em at\xe9 7 dias | 30+ dias em m\xe9dia |
| Pre\xe7o | âœ… A partir de R$ 149/m\xeas | Similar ou superior |

**Pontos-chave para usar na conversa:**
1. O Menux n\xe3o exige hardware propriet\xe1rio â€” funciona em qualquer dispositivo
2. Suporte humanizado com CS dedicado (n\xe3o \xe9 s\xf3 chatbot)
3. Setup r\xe1pido: cliente operando em at\xe9 7 dias

âš ï¸ *Dados baseados apenas em informa\xe7\xf5es oficiais documentadas. N\xe3o fa\xe7a promessas sobre o concorrente â€” foque nas vantagens Menux.*`;return{id:b(),role:"assistant",content:d,contentType:"comparison",timestamp:c(),sourceCommand:"/comparar"}}function m(){let a=`ðŸ’° **Planos Menux**

| Plano | Ideal para | Funcionalidades-chave | A partir de |
|-------|-----------|----------------------|------------|
| **Assist** | Opera\xe7\xf5es simples | Comanda digital, card\xe1pio QR, PDV b\xe1sico | R$ 149/m\xeas |
| **Sales** | Restaurantes em crescimento | Tudo do Assist + gest\xe3o de mesas, relat\xf3rios avan\xe7ados, integra\xe7\xf5es delivery | R$ 299/m\xeas |
| **Control** | Opera\xe7\xf5es completas | Tudo do Sales + multi-unidades, CMV, fiscal, API aberta | R$ 499/m\xeas |

**Setup:** Taxa \xfanica a partir de R$ 500 (inclui configura\xe7\xe3o + treinamento da equipe)

**D\xfavidas frequentes:**
- âœ… Sem fidelidade â€” cancele quando quiser
- âœ… 7 dias para onboarding completo
- âœ… Suporte inclu\xeddo em todos os planos

Quer que eu detalhe algum plano espec\xedfico?`;return{id:b(),role:"assistant",content:a,contentType:"plans-info",timestamp:c(),sourceCommand:"/planos"}}a.s(["generateCardAnalysis",()=>k,"generateComparison",()=>l,"generateFunnelSummary",()=>j,"generatePlansInfo",()=>m],19274)},28388,92992,54465,72468,56765,11103,a=>{"use strict";function b(a,b){let c=new Date(a);return Math.floor((new Date(b).getTime()-c.getTime())/864e5)}function c(a,b){let c=new Date(a);return(new Date(b).getTime()-c.getTime())/36e5}function d(a){let b=new Date(a),c=new Date;return b.getDate()===c.getDate()&&b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()}function e(a){let c=b(a,new Date().toISOString());return 0===c?"hoje":1===c?"ontem":`ha ${c} dias`}function f(a,b){for(let c of b){let b=c.stages.find(b=>b.id===a);if(b)return b.name}return a}function g(a,b,c){return"master"===c||"admin"===c?a:a.filter(a=>a.responsibleId===b)}a.s(["daysBetween",()=>b,"filterByUser",()=>g,"getStageName",()=>f,"hoursBetween",()=>c,"isToday",()=>d,"relativeTime",()=>e],92992);var h=a.i(31791);function i(a){let d,i,j,{opportunities:k,activities:l,clients:m,goals:n,pipelines:o,userId:p,userRole:q}=a,r=[...g(l,p,q).filter(a=>"completed"!==a.status&&"cancelled"!==a.status&&new Date(a.dueDate)<new Date).slice(0,3).map(a=>{let c=a.opportunityId?k.find(b=>b.id===a.opportunityId):null;return{type:"overdue-activity",priority:b(a.dueDate,new Date().toISOString())>=3?"high":"medium",message:`Atividade "${a.title}" vencida ${e(a.dueDate)}.${c?` Lead: ${c.clientName}.`:""} Resolva para manter o pipeline saudavel.`,cardId:c?.id,cardName:c?.clientName}}),...(d=new Date,g(k,p,q).filter(a=>"open"===a.status&&a.slaDeadline).map(a=>{let b=c(d.toISOString(),a.slaDeadline);if(b>0&&b<=6){let c=f(a.stage,o);return{type:"sla-approaching",priority:"high",message:`"${a.clientName}" esta a ${Math.round(b)}h do SLA na etapa ${c}. Priorize esta oportunidade!`,cardId:a.id,cardName:a.clientName}}return null}).filter(Boolean)),...function(a,c,d,e,f=3){return g(a,d,e).filter(a=>"open"===a.status&&"hot"===a.temperature).map(a=>{let d=c.filter(b=>b.opportunityId===a.id&&"cancelled"!==b.status).sort((a,b)=>new Date(b.dueDate).getTime()-new Date(a.dueDate).getTime()),e=b(d[0]?.dueDate??a.updatedAt,new Date().toISOString());return e>=f?{type:"hot-lead-idle",priority:"high",message:`Lead quente "${a.clientName}" sem atividade ha ${e} dias. Na etapa ${a.stage}. Momento de agir!`,cardId:a.id,cardName:a.clientName}:null}).filter(Boolean)}(k,l,p,q),...function(a,c,d,e=7){return g(a,c,d).filter(a=>"open"===a.status).map(a=>{let c=b(a.updatedAt,new Date().toISOString());return c>=e?{type:"stale-deal",priority:c>=14?"high":"medium",message:`Negociacao "${a.clientName}" parada ha ${c} dias sem movimentacao. Considere reengajar ou reavaliar.`,cardId:a.id,cardName:a.clientName}:null}).filter(Boolean)}(k,p,q),...(i=new Date,n.map(a=>{let c=new Date(a.endDate),d=new Date(a.startDate);if(c<i)return null;let e=b(d.toISOString(),c.toISOString()),f=b(d.toISOString(),i.toISOString()),g=b(i.toISOString(),c.toISOString()),j=a.target>0?a.current/a.target:0;if(j<.85*(e>0?f/e:1)&&g<=15){let b=a.target-a.current,c="revenue"===a.type?(0,h.formatCurrencyBRL)(b):`${b} ${"conversion"===a.type?"%":""}`;return{type:"goal-risk",priority:g<=7?"high":"medium",message:`Meta "${a.title}" em risco. Faltam ${c} nos proximos ${g} dias. Progresso: ${Math.round(100*j)}%.`}}return null}).filter(Boolean)),...function(a,c,d,e=30){let f=new Date;return("master"===d||"admin"===d?a:a.filter(a=>a.responsibleId===c)).map(a=>{if(!a.contractEnd)return null;let c=b(f.toISOString(),a.contractEnd);return c>0&&c<=e?{type:"contract-expiring",priority:c<=15?"high":"medium",message:`Contrato de "${a.companyName}" expira em ${c} dias. Inicie a renovacao agora.`,cardName:a.companyName}:null}).filter(Boolean)}(m,p,q),...(j=g(k,p,q).filter(a=>"open"===a.status).filter(a=>!a.expectedCloseDate)).length>=3?[{type:"missing-fields",priority:"low",message:`${j.length} oportunidades abertas sem data de fechamento prevista. Preencha para melhorar previsibilidade.`}]:[],...function(a,b,c){let d=("master"===c||"admin"===c?a:a.filter(a=>a.responsibleId===b)).filter(a=>"churn"!==a.stage&&a.monthlyRevenue>0);if(0===d.length)return[];let e=d.reduce((a,b)=>a+b.monthlyRevenue,0)/d.length;return d.filter(a=>"good"===a.healthScore&&a.monthlyRevenue<.7*e).slice(0,2).map(a=>({type:"cross-sell-opportunity",priority:"low",message:`"${a.companyName}" com saude boa e ticket ${(0,h.formatCurrencyBRL)(a.monthlyRevenue)} (media: ${(0,h.formatCurrencyBRL)(e)}). Oportunidade de upsell!`,cardName:a.companyName}))}(m,p,q),...function(a,b,c){let d=new Date;d.setDate(d.getDate()-30);let e=g(a,b,c).filter(a=>"lost"===a.status&&new Date(a.updatedAt)>d&&a.lossReason);if(0===e.length)return[];let f=Object.entries(e.reduce((a,b)=>{let c=b.lossReason??"outro";return a[c]=(a[c]??0)+1,a},{})).sort(([,a],[,b])=>b-a)[0];return f&&f[1]>=2?[{type:"competitive-intelligence",priority:"medium",message:`${e.length} deals perdidos nos ultimos 30 dias. Principal motivo: "${f[0]}" (${f[1]}x). Ajuste sua abordagem.`}]:[]}(k,p,q),...function(a,b){let c=new Date;c.setDate(c.getDate()-30);let d=a.filter(a=>new Date(a.updatedAt)>c);if(d.length<5)return[];let e=d.filter(a=>a.responsibleId===b),f=e.filter(a=>"won"===a.status).length,g=e.filter(a=>"won"===a.status||"lost"===a.status).length,h=g>0?f/g*100:0,i=d.filter(a=>"won"===a.status).length,j=d.filter(a=>"won"===a.status||"lost"===a.status).length;if(g<3)return[];let k=h-(j>0?i/j*100:0);return Math.abs(k)>=10?[{type:"team-performance",priority:"low",message:k>0?`Sua taxa de conversao (${Math.round(h)}%) esta ${Math.round(k)}% acima da media do time. Excelente trabalho!`:`Sua taxa de conversao (${Math.round(h)}%) esta ${Math.round(Math.abs(k))}% abaixo da media. Use /coaching para dicas.`}]:[]}(k,p)],s={high:0,medium:1,low:2};return r.sort((a,b)=>s[a.priority]-s[b.priority])}function j(a,c,d,e){let f=g(a,d,e).filter(a=>"open"===a.status),h={},i=0,j=0,k=0,l=0;for(let a of f){h[a.stage]=(h[a.stage]??0)+1,i+=a.monthlyValue;let d=c.filter(b=>b.opportunityId===a.id&&"cancelled"!==b.status);d.some(a=>"completed"!==a.status&&new Date(a.dueDate)<new Date)&&j++,"hot"===a.temperature&&b(new Date(d.length?Math.max(...d.map(a=>new Date(a.dueDate).getTime())):new Date(a.updatedAt).getTime()).toISOString(),new Date().toISOString())>=3&&k++,b(a.updatedAt,new Date().toISOString())>=7&&l++}return{cardsByStage:h,totalMRR:i,overdueCards:j,hotIdleCards:k,staleCards:l}}function k(a){let{opportunities:h,activities:i,userId:j,userRole:k,pipelines:l}=a,m=[],n=new Date,o=g(i,j,k);for(let a of o.filter(a=>"completed"!==a.status&&"cancelled"!==a.status&&new Date(a.dueDate)<n).slice(0,3))m.push({id:`pri-${a.id}`,type:"overdue",title:a.title,subtitle:`Vencida ${e(a.dueDate)}${a.clientName?` \xb7 ${a.clientName}`:""}`,severity:"critical",linkedEntityId:a.opportunityId,linkedEntityType:"opportunity"});for(let a of o.filter(a=>"pending"===a.status&&d(a.dueDate)).slice(0,3))m.push({id:`pri-${a.id}`,type:"due-today",title:a.title,subtitle:`Hoje${a.dueTime?` as ${a.dueTime}`:""}${a.clientName?` \xb7 ${a.clientName}`:""}`,severity:"warning",linkedEntityId:a.opportunityId,linkedEntityType:"opportunity"});for(let a of g(h,j,k).filter(a=>"open"===a.status&&a.slaDeadline)){let b=c(n.toISOString(),a.slaDeadline);if(b>0&&b<=8){let c=f(a.stage,l);m.push({id:`pri-sla-${a.id}`,type:"sla-warning",title:a.clientName,subtitle:`${Math.round(b)}h para SLA \xb7 ${c}`,severity:"critical",linkedEntityId:a.id,linkedEntityType:"opportunity"})}}for(let a of g(h,j,k).filter(a=>"open"===a.status&&"hot"===a.temperature).slice(0,2)){let c=i.filter(b=>b.opportunityId===a.id&&"cancelled"!==b.status),d=b(new Date(c.length?Math.max(...c.map(a=>new Date(a.dueDate).getTime())):new Date(a.updatedAt).getTime()).toISOString(),n.toISOString());d>=3&&m.push({id:`pri-hot-${a.id}`,type:"hot-idle",title:a.clientName,subtitle:`Lead quente sem atividade ha ${d}d`,severity:"warning",linkedEntityId:a.id,linkedEntityType:"opportunity"})}let p={critical:0,warning:1,info:2};return m.sort((a,b)=>p[a.severity]-p[b.severity]).slice(0,8)}function l(a){let{opportunities:c,goals:d,userId:e,userRole:f}=a,i=[],j=new Date,k=new Date;k.setDate(k.getDate()-30);let l=g(c,e,f),m=l.filter(a=>"won"===a.status&&new Date(a.updatedAt)>k);if(m.length>=2){let a=Math.round(m.reduce((a,c)=>a+b(c.createdAt,c.updatedAt),0)/m.length);i.push({id:"insight-velocity",icon:"zap",title:"Velocidade do Pipeline",description:`Ciclo medio de fechamento: ${a} dias (${m.length} deals fechados nos ultimos 30 dias).`,metric:{value:`${a}d`,trend:a<=21?"up":"down"}})}let n=l.filter(a=>("won"===a.status||"lost"===a.status)&&new Date(a.updatedAt)>k),o=n.filter(a=>"won"===a.status);if(n.length>=3){let a=Math.round(o.length/n.length*100);i.push({id:"insight-conversion",icon:"trending-up",title:"Taxa de Conversao",description:`${a}% de conversao (${o.length} ganhos de ${n.length} finalizados) nos ultimos 30 dias.`,metric:{value:`${a}%`,trend:a>=50?"up":a>=35?"stable":"down"}})}let p=d.filter(a=>new Date(a.endDate)>j);if(p.length>0){let a=p[0],c=Math.round(a.current/a.target*100),d=a.target-a.current,e="revenue"===a.type?(0,h.formatCurrencyBRL)(d):`${d}`,f=b(j.toISOString(),a.endDate);i.push({id:"insight-goal",icon:"target",title:`Meta: ${a.title}`,description:`${c}% concluido. Faltam ${e} em ${f} dias.`,metric:{value:`${c}%`,trend:c>=80?"up":c>=50?"stable":"down"},actionLabel:"Detalhes",actionCommand:"/meta"})}let q=l.filter(a=>"open"===a.status);if(q.length>0){let a=q.reduce((a,b)=>a+b.monthlyValue,0),b=q.reduce((a,b)=>a+b.value,0);i.push({id:"insight-pipeline-value",icon:"bar-chart",title:"Pipeline Ativo",description:`${q.length} oportunidades abertas. MRR potencial: ${(0,h.formatCurrencyBRL)(a)}. Valor total: ${(0,h.formatCurrencyBRL)(b)}.`,metric:{value:(0,h.formatCurrencyBRL)(a),trend:"stable"},actionLabel:"Ver funil",actionCommand:"/funil"})}return i}function m(a){let{opportunities:c,activities:d,userId:e,userRole:f}=a;return g(c,e,f).filter(a=>"open"===a.status).map(a=>{let c;c=0+(({"lead-in":10,"contato-feito":20,"reuniao-agendada":40,"proposta-enviada":60,negociacao:75,fechamento:90})[a.stage]??15),"hot"===a.temperature?c+=15:"warm"===a.temperature&&(c+=5);let e=d.filter(b=>b.opportunityId===a.id&&"cancelled"!==b.status).some(a=>3>=b(a.dueDate,new Date().toISOString()));e&&(c+=10),c=Math.min(95,c);let f=[];return"hot"===a.temperature&&f.push("Lead quente"),("negociacao"===a.stage||"fechamento"===a.stage||"proposta-enviada"===a.stage)&&f.push(a.stage.replace(/-/g," ")),e&&f.push("Atividade recente"),{id:a.id,opportunityId:a.id,clientName:a.clientName,stage:a.stage,probability:c,value:a.monthlyValue,reason:f.join(" + ")||a.stage}}).sort((a,b)=>b.probability-a.probability).slice(0,5)}function n(a){let{opportunities:d,clients:e,goals:f,userId:h,userRole:i}=a,j=[],k=new Date;for(let a of g(d,h,i).filter(a=>"open"===a.status&&a.slaDeadline)){let b=c(k.toISOString(),a.slaDeadline);b<0&&j.push({id:`risk-sla-${a.id}`,type:"sla-breach",title:`SLA estourado: ${a.clientName}`,description:`SLA vencido ha ${Math.abs(Math.round(b))}h na etapa ${a.stage}.`,severity:"critical",linkedEntityId:a.id})}let l="master"===i||"admin"===i?e:e.filter(a=>a.responsibleId===h);for(let a of l.filter(a=>"critical"===a.healthScore&&"churn"!==a.stage).slice(0,3))j.push({id:`risk-health-${a.id}`,type:"health-drop",title:`Saude critica: ${a.companyName}`,description:"Cliente com health score critico. Risco de churn iminente.",severity:"critical",linkedEntityId:a.id});for(let a of g(d,h,i).filter(a=>"open"===a.status&&b(a.updatedAt,k.toISOString())>=14).slice(0,2)){let c=b(a.updatedAt,k.toISOString());j.push({id:`risk-stale-${a.id}`,type:"stale",title:`Parado ha ${c}d: ${a.clientName}`,description:`Sem movimentacao ha ${c} dias. Reengaje ou reavalie.`,severity:"warning",linkedEntityId:a.id})}for(let a of l){if(!a.contractEnd)continue;let c=b(k.toISOString(),a.contractEnd);c>0&&c<=30&&j.push({id:`risk-contract-${a.id}`,type:"contract-expiring",title:`Contrato expirando: ${a.companyName}`,description:`Expira em ${c} dias. Inicie renovacao.`,severity:c<=15?"critical":"warning",linkedEntityId:a.id})}for(let a of f.filter(a=>new Date(a.endDate)>k)){let c=a.target>0?a.current/a.target:0,d=b(k.toISOString(),a.endDate),e=b(a.startDate,a.endDate);c<.7*(e>0?(e-d)/e:1)&&d<=10&&j.push({id:`risk-goal-${a.id}`,type:"goal-risk",title:`Meta em risco: ${a.title}`,description:`${Math.round(100*c)}% concluido com ${d} dias restantes.`,severity:"critical"})}let m={critical:0,warning:1};return j.sort((a,b)=>m[a.severity]-m[b.severity]).slice(0,8)}function o(a){let b=k(a),c=l(a),d=m(a),e=n(a),f=[];if(f.push("ðŸŒ… **Briefing Matinal**\n"),b.length>0){for(let a of(f.push("**Prioridades de hoje:**"),b.slice(0,5))){let b="critical"===a.severity?"ðŸ”´":"warning"===a.severity?"ðŸŸ¡":"ðŸ”µ";f.push(`  ${b} **${a.title}** \u2014 ${a.subtitle}`)}f.push("")}else f.push("**Prioridades:** âœ… Nenhuma urgencia. Dia tranquilo!\n");if(d.length>0){for(let a of(f.push("**Ganhos rapidos (maior probabilidade):**"),d.slice(0,3)))f.push(`  \u{1F3AF} **${a.clientName}** \u2014 ${a.probability}% de probabilidade \u00B7 ${(0,h.formatCurrencyBRL)(a.value)}/mes \u00B7 ${a.reason}`);f.push("")}if(e.length>0){for(let a of(f.push("**Alertas de risco:**"),e.slice(0,3))){let b="critical"===a.severity?"ðŸš¨":"âš ï¸";f.push(`  ${b} ${a.title} \u2014 ${a.description}`)}f.push("")}let g=c.find(a=>"insight-conversion"===a.id);return g?.metric&&f.push(`**Metrica do dia:** Taxa de conversao: ${g.metric.value} ${"up"===g.metric.trend?"ðŸ“ˆ":"down"===g.metric.trend?"ðŸ“‰":"âž¡ï¸"}`),f.push("\nðŸ’¡ Use `/riscos` para detalhes ou `/meta` para progresso das metas."),f.join("\n")}a.s(["computePipelineContext",()=>j,"generateAllSuggestions",()=>i],54465),a.s(["computeQuickWins",()=>m,"computeSmartInsights",()=>l,"computeTodaysPriorities",()=>k],72468),a.s(["computeRiskAlerts",()=>n],56765),a.s(["generateMorningSummaryContent",()=>o],11103),a.s([],28388)},93817,74802,a=>{"use strict";var b=a.i(20226),c=a.i(50489),d=a.i(35397),e=a.i(54651),f=a.i(19274);a.i(28388);var g=a.i(11103),h=a.i(72468),i=a.i(56765),j=a.i(31791),k=a.i(2789),l=a.i(81584),m=a.i(73331),n=a.i(57008),o=a.i(74589),p=a.i(66206);function q(){let a=p.useAuthStore.getState().user;return{opportunities:k.useOpportunityStore.getState().opportunities,activities:l.useActivityStore.getState().activities,clients:m.useClientStore.getState().clients,goals:n.useGoalStore.getState().goals,pipelines:o.usePipelineStore.getState().pipelines,userId:a?.id??"unknown",userRole:a?.role??"comercial"}}function r(){let a=q(),b=(0,g.generateMorningSummaryContent)(a);return{id:(0,e.uid)(),role:"assistant",content:b,contentType:"morning-briefing",timestamp:(0,e.now)(),sourceCommand:"/resumo"}}function s(){let a=q(),b=(0,i.computeRiskAlerts)(a);if(0===b.length)return{id:(0,e.uid)(),role:"assistant",content:"ðŸš¨ **Relatorio de Riscos**\n\nâœ… Nenhum alerta de risco no momento. Seu pipeline esta saudavel!",contentType:"risk-report",timestamp:(0,e.now)(),sourceCommand:"/riscos"};let c=["ðŸš¨ **Relatorio de Riscos**\n"],d=b.filter(a=>"critical"===a.severity),f=b.filter(a=>"warning"===a.severity);if(d.length>0){for(let a of(c.push(`**Criticos (${d.length}):**`),d))c.push(`  ðŸ”´ **${a.title}** â€” ${a.description}`);c.push("")}if(f.length>0){for(let a of(c.push(`**Atencao (${f.length}):**`),f))c.push(`  ðŸŸ¡ **${a.title}** â€” ${a.description}`);c.push("")}return c.push(`
ðŸ“Š Total: **${b.length}** alertas. Resolva os criticos primeiro.`),{id:(0,e.uid)(),role:"assistant",content:c.join("\n"),contentType:"risk-report",timestamp:(0,e.now)(),sourceCommand:"/riscos"}}function t(){let a=q(),b=new Date,c=a.goals.filter(a=>new Date(a.endDate)>b);if(0===c.length)return{id:(0,e.uid)(),role:"assistant",content:"ðŸŽ¯ **Progresso das Metas**\n\nNenhuma meta ativa no momento. Configure suas metas em Configuracoes > Metas.",contentType:"goal-progress",timestamp:(0,e.now)(),sourceCommand:"/meta"};let d=["ðŸŽ¯ **Progresso das Metas**\n"];for(let a of c){let c=Math.round(a.current/a.target*100),e=a.target-a.current,f=Math.max(0,Math.floor((new Date(a.endDate).getTime()-b.getTime())/864e5)),g="revenue"===a.type?(0,j.formatCurrencyBRL)(e):`${e}`,h="revenue"===a.type?(0,j.formatCurrencyBRL)(a.current):`${a.current}`,i="revenue"===a.type?(0,j.formatCurrencyBRL)(a.target):`${a.target}`,k=function(a){let b=Math.round(a/10);return`[${"â–ˆ".repeat(Math.min(b,10))}${"â–‘".repeat(Math.max(10-b,0))}]`}(c),l=c>=100?"âœ…":c>=70?"ðŸŸ¢":c>=40?"ðŸŸ¡":"ðŸ”´";if(d.push(`**${a.title}** ${l}`),d.push(`  ${k} ${c}%`),d.push(`  Atual: **${h}** / Meta: **${i}**`),e>0){if(d.push(`  Faltam: **${g}** em **${f}** dias`),f>0&&"revenue"===a.type){let a=e/f;d.push(`  Ritmo necessario: **${(0,j.formatCurrencyBRL)(a)}/dia**`)}}else d.push(`  ðŸ† **Meta atingida!**`);d.push("")}return{id:(0,e.uid)(),role:"assistant",content:d.join("\n"),contentType:"goal-progress",timestamp:(0,e.now)(),sourceCommand:"/meta"}}function u(){let a=q(),b=(0,h.computeSmartInsights)(a),c=(0,h.computeQuickWins)(a),d=new Date;d.setDate(d.getDate()-30);let f=["ðŸ“ˆ **Coaching de Vendas**\n"],g=b.find(a=>"insight-conversion"===a.id);g?.metric&&(f.push(`**Taxa de conversao:** ${g.metric.value} ${"up"===g.metric.trend?"ðŸ“ˆ Acima da media!":"down"===g.metric.trend?"ðŸ“‰ Abaixo da media.":"âž¡ï¸ Na media."}`),f.push(""));let i=b.find(a=>"insight-velocity"===a.id);i?.metric&&(f.push(`**Velocidade de fechamento:** ${i.metric.value} por deal`),f.push(""));let j=a.activities.filter(b=>b.responsibleId===a.userId&&new Date(b.dueDate)>d),k=j.filter(a=>"completed"===a.status),l=j.length>0?Math.round(k.length/j.length*100):0;f.push(`**Atividades (30 dias):** ${k.length} concluidas de ${j.length} (${l}% de conclusao)`);let m=Object.entries(k.reduce((a,b)=>(a[b.type]=(a[b.type]??0)+1,a),{})).sort(([,a],[,b])=>b-a).slice(0,3);m.length>0&&f.push(`  Canais mais usados: ${m.map(([a,b])=>`${a} (${b}x)`).join(", ")}`),f.push("");let n=a.opportunities.filter(b=>"lost"===b.status&&b.responsibleId===a.userId&&new Date(b.updatedAt)>d);if(n.length>0){let a=n.reduce((a,b)=>{let c=b.lossReason??"outro";return a[c]=(a[c]??0)+1,a},{});for(let[b,c]of(f.push(`**Analise de perdas (${n.length} perdidos):**`),Object.entries(a).sort(([,a],[,b])=>b-a)))f.push(`  - ${b}: ${c}x`);f.push("")}return f.push("**Dicas personalizadas:**"),l<80&&f.push("  ðŸ’¡ Sua taxa de conclusao de atividades esta abaixo de 80%. Priorize fechar as pendentes antes de criar novas."),g?.metric?.trend==="down"&&f.push("  ðŸ’¡ Sua conversao caiu. Revise a qualidade dos leads na entrada do funil e use `/objecao` para preparar contra-argumentos."),c.length>0&&f.push(`  ðŸ’¡ Voce tem ${c.length} ganhos rapidos (deals com alta probabilidade). Foque neles primeiro!`),m.some(([a])=>"call"===a||"meeting"===a)||f.push("  ðŸ’¡ Pouca atividade de ligacao/reuniao. Contato direto aumenta a taxa de conversao em media 30%."),{id:(0,e.uid)(),role:"assistant",content:f.join("\n"),contentType:"coaching",timestamp:(0,e.now)(),sourceCommand:"/coaching"}}function v(){let a=q(),b=(0,h.computeTodaysPriorities)(a),c=new Date,d=c.toISOString().split("T")[0],f=a.activities.filter(b=>b.responsibleId===a.userId&&b.dueDate===d&&"cancelled"!==b.status&&"completed"!==b.status).sort((a,b)=>a.dueTime&&b.dueTime?a.dueTime.localeCompare(b.dueTime):a.dueTime?-1:+!!b.dueTime),g=a.activities.filter(b=>b.responsibleId===a.userId&&"completed"!==b.status&&"cancelled"!==b.status&&new Date(b.dueDate)<c&&b.dueDate!==d),i=["ðŸ“… **Agenda do Dia**\n"];if(g.length>0){for(let a of(i.push(`**ðŸ”´ Atrasadas (${g.length}):**`),g.slice(0,5)))i.push(`  - **${a.title}** â€” vencida em ${a.dueDate}${a.clientName?` \xb7 ${a.clientName}`:""}`);i.push("")}if(f.length>0){for(let a of(i.push(`**ðŸ“‹ Hoje (${f.length}):**`),f)){let b=a.dueTime?`${a.dueTime} â€” `:"",c="call"===a.type?"ðŸ“ž":"email"===a.type?"ðŸ“§":"meeting"===a.type?"ðŸ¤":"whatsapp"===a.type?"ðŸ’¬":"visit"===a.type?"ðŸ¢":"ðŸ“Œ";i.push(`  ${c} ${b}**${a.title}**${a.clientName?` \xb7 ${a.clientName}`:""}`)}i.push("")}else 0===g.length&&i.push("Nenhuma atividade agendada para hoje.\n");if(b.length>0){i.push("**Sugestao de prioridade:**");for(let a=0;a<Math.min(b.length,5);a++){let c=b[a];i.push(`  ${0===a?"1ï¸âƒ£":1===a?"2ï¸âƒ£":2===a?"3ï¸âƒ£":3===a?"4ï¸âƒ£":"5ï¸âƒ£"} **${c.title}** â€” ${c.subtitle}`)}i.push("")}return i.push(`
Total: **${g.length}** atrasadas + **${f.length}** para hoje.`),{id:(0,e.uid)(),role:"assistant",content:i.join("\n"),contentType:"agenda",timestamp:(0,e.now)(),sourceCommand:"/agenda"}}let w={focus:"Foco Cliente",audit:"Auditoria",reply:"Responder",proposal:"Proposta"},x={focus:"Focando na situaÃ§Ã£o especÃ­fica deste cliente e prÃ³ximos passos prÃ¡ticos.",audit:"Analisando mÃ©tricas, gargalos e oportunidades de otimizaÃ§Ã£o.",reply:"Gerando mensagens prontas para envio. Direto e prÃ¡tico.",proposal:"Focando em argumentos de venda, diferenciaÃ§Ã£o e proposta de valor."};function y(a,b){let c={"no-card":"Para usar este comando, abra o card do lead primeiro ou selecione um cliente com ðŸ“‹. Posso te ajudar com outra coisa?","rate-limit":`Voc\xea atingiu o limite de consultas nesta hora. O limite ser\xe1 resetado \xe0s ${b?.resetTime??"--:--"}. Enquanto isso, suas conversas e hist\xf3rico continuam dispon\xedveis.`,"api-error":"Ops, tive um problema ao processar sua mensagem. Tente novamente em alguns instantes.","max-messages":"Atingimos o limite desta conversa (100 mensagens). Inicie uma nova conversa para continuar.","media-unsupported":"Por enquanto, consigo processar apenas texto. Descreva sua dÃºvida por escrito que eu te ajudo!","forbidden-command":`Voc\xea n\xe3o tem permiss\xe3o para usar o comando ${b?.command??"solicitado"} neste perfil.`,"invalid-command":"Comando invÃ¡lido. Use /ajuda para ver os comandos disponÃ­veis.","missing-command-input":`Faltou informar o conte\xfado para ${b?.command??"este comando"}. ${b?.hint??"Preencha o campo e tente novamente."}`};return{id:(0,e.uid)(),role:"assistant",content:c[a]??c["api-error"],contentType:"error",timestamp:(0,e.now)()}}async function z(a){var b,d,g,h,i;let k=["/briefing","/analise","/funil","/pitch"].includes(a.command??"")?1500+2e3*Math.random():800+1200*Math.random();if(await new Promise(a=>setTimeout(a,k)),a.command)switch(a.command){case"/briefing":let l,m,n,o,p;if(!a.card)return y("no-card");return l=(b=a.card).overdueActivities.length,m=b.contacts.length?b.contacts.map(a=>`  - **${a.name}** ${a.role?`(${a.role})`:""} ${a.isDecisionMaker?"ðŸ‘‘ Decisor":""}`).join("\n"):"  - Nenhum contato registrado",n=[],l>0&&n.push(`âš ï¸ ${l} atividade(s) vencida(s)`),"cold"===b.temperature&&n.push("â„ï¸ Lead frio â€” pode estar esfriando"),b.registeredObjections.length>0&&n.push(`ðŸ›¡ï¸ ${b.registeredObjections.length} obje\xe7\xe3o(\xf5es) registrada(s)`),o=`ðŸ“‹ **Briefing: ${b.cardName}**

**Contexto r\xe1pido:**
  - Etapa: **${b.stageLabel}** \xb7 ${(0,e.temperatureEmoji)(b.temperature)} ${(0,e.temperatureLabel)(b.temperature)}
  ${b.cnpj?`- CNPJ: ${b.cnpj}`:""}
  ${b.tags.length?`- Tags: ${b.tags.join(", ")}`:""}

**Contatos:**
${m}

**Valor:**
  ${b.quotedPlan?`- Plano cotado: **${b.quotedPlan}**`:"- Plano: nÃ£o cotado ainda"}
  ${b.setupValue?`- Setup: ${(0,j.formatCurrencyBRL)(b.setupValue)}`:""}
  ${b.mrrValue?`- MRR: ${(0,j.formatCurrencyBRL)(b.mrrValue)}`:""}

${b.timelineNotes.length>0?`**\xdaltimas intera\xe7\xf5es:**
${b.timelineNotes.slice(0,5).map((a,b)=>`  ${b+1}. ${a}`).join("\n")}`:"**HistÃ³rico:** Sem notas registradas"}

${n.length>0?`**Riscos:**
${n.map(a=>`  ${a}`).join("\n")}`:"**Riscos:** âœ… Nenhum risco identificado"}

**Pr\xf3ximo passo sugerido:** ${l>0?"Priorize as atividades vencidas antes de avanÃ§ar.":"hot"===b.temperature?"Lead quente! Agende uma reuniÃ£o o mais rÃ¡pido possÃ­vel.":"FaÃ§a um follow-up personalizado para manter o engajamento."}`,p=[{id:(0,e.uid)(),type:"create-activity",label:"ðŸ“… Criar atividade",icon:"calendar",payload:{type:"follow-up",description:`Follow-up do briefing de ${b.cardName}`,opportunityId:b.cardId,opportunityTitle:b.cardName}},{id:(0,e.uid)(),type:"save-note",label:"ðŸ“ Salvar na timeline",icon:"file-text",payload:{cardId:b.cardId,entityType:b.entityType,noteText:`Briefing gerado para ${b.cardName} (${b.stageLabel} \xb7 ${(0,e.temperatureLabel)(b.temperature)}).`}}],{id:(0,e.uid)(),role:"assistant",content:o,contentType:"briefing",timestamp:(0,e.now)(),contextBadge:(0,e.buildContextBadge)(b),suggestedActions:p,sourceCommand:"/briefing"};case"/objecao":let q,z,A,B,C,D;return d=a.text,g=a.card,q=d.toLowerCase(),z="Geral",q.includes("preÃ§o")||q.includes("caro")||q.includes("custo")?z="PreÃ§o":q.includes("concorrent")||q.includes("outro sistema")?z="Concorrente":q.includes("momento")||q.includes("agora nÃ£o")||q.includes("depois")?z="Timing":q.includes("preciso")||q.includes("necessidade")?z="Falta de necessidade":q.includes("confia")||q.includes("garantia")?z="DesconfianÃ§a":(q.includes("tÃ©cnic")||q.includes("integra"))&&(z="TÃ©cnica"),A=g?`

ðŸ’¡ *Contexto de ${g.cardName}: ${g.stageLabel} \xb7 ${(0,e.temperatureEmoji)(g.temperature)}*`:"",B="PreÃ§o"===z?`Entendo a preocupa\xe7\xe3o com investimento! O legal \xe9 que o retorno vem r\xe1pido: clientes como voc\xea geralmente recuperam o valor em 2-3 meses. Posso te mostrar como?`:"Timing"===z?`Faz total sentido! S\xf3 pra te ajudar a planejar: quando seria o melhor momento pra gente retomar? Assim garanto que voc\xea n\xe3o perde as condi\xe7\xf5es atuais.`:`\xd3timo ponto! Muitos clientes tinham a mesma d\xfavida. Posso te mostrar como resolvemos isso na pr\xe1tica?`,C=`ðŸ›¡ï¸ **An\xe1lise da obje\xe7\xe3o**

**Categoria:** ${z}
**Obje\xe7\xe3o recebida:** "${d}"${A}

**Contra-argumento:**
${"PreÃ§o"===z?"Foque no ROI, nÃ£o no custo. O Menux se paga em 2-3 meses com ganho de eficiÃªncia operacional. Destaque o impacto financeiro de NÃƒO ter o sistema.":"Timing"===z?"Respeite o momento, mas crie urgÃªncia suave. Pergunte o que acontece se continuarem sem soluÃ§Ã£o atÃ© lÃ¡. Plante a semente de que resolver antes gera vantagem.":"Concorrente"===z?"NÃ£o fale mal do concorrente. Foque nas diferenÃ§as de entrega, suporte e resultados comprovados do Menux. PeÃ§a para compararem funcionalidades lado a lado.":"Valide a preocupaÃ§Ã£o e redirecione com uma pergunta que traga o lead de volta ao valor."}

**Pergunta de avan\xe7o:**
"${"PreÃ§o"===z?"Se eu te mostrasse que o investimento se paga em 3 meses, faria sentido avanÃ§armos?":"O que precisaria acontecer para vocÃª se sentir seguro(a) pra avanÃ§ar?"}"`,D=[{id:(0,e.uid)(),content:B,channel:"whatsapp",charLimit:c.INTELLIGENCE_LIMITS.WHATSAPP_CHAR_LIMIT,label:"Mensagem WhatsApp"}],{id:(0,e.uid)(),role:"assistant",content:C,contentType:"objection-response",timestamp:(0,e.now)(),contextBadge:(0,e.buildContextBadge)(g),copyableBlocks:D,sourceCommand:"/objecao"};case"/mensagem":return function(a,b){let d=a.toLowerCase(),f="whatsapp";d.includes("email")?f="email":(d.includes("ligaÃ§Ã£o")||d.includes("call"))&&(f="call");let g=b?.cardName??"cliente",h=b?.contacts?.[0]?.name??"",i=[];if("whatsapp"===f){let a=h?`Oi ${h}! Tudo bem? Aqui \xe9 da Menux. Vi que voc\xea demonstrou interesse no nosso sistema. Teria uns minutinhos pra gente bater um papo sobre como otimizar a opera\xe7\xe3o a\xed? ðŸ˜Š`:`Ol\xe1! Aqui \xe9 da Menux. Gostaria de conversar sobre como podemos ajudar a otimizar a opera\xe7\xe3o do seu restaurante. Teria uns minutinhos? ðŸ˜Š`;i.push({id:(0,e.uid)(),content:a,channel:"whatsapp",charLimit:c.INTELLIGENCE_LIMITS.WHATSAPP_CHAR_LIMIT,label:"Mensagem WhatsApp"})}else"email"===f?i.push({id:(0,e.uid)(),content:`Otimize a opera\xe7\xe3o do ${g} com a Menux`,channel:"email",label:"Assunto"},{id:(0,e.uid)(),content:`${h?`Ol\xe1 ${h},`:"OlÃ¡,"}

Espero que esteja tudo bem! Sou da Menux e gostaria de mostrar como nosso sistema pode transformar a gest\xe3o do seu restaurante.

Podemos agendar uma conversa r\xe1pida de 15 minutos esta semana?

Abra\xe7o!`,channel:"email",charLimit:c.INTELLIGENCE_LIMITS.EMAIL_BODY_CHAR_LIMIT,label:"Corpo do email"}):i.push({id:(0,e.uid)(),content:`â€¢ Abertura: Apresentar-se e confirmar se \xe9 bom momento
â€¢ Contexto: Mencionar como conhecemos o restaurante
â€¢ Dor: Perguntar sobre principais desafios da opera\xe7\xe3o
â€¢ Valor: Conectar dores com solu\xe7\xf5es Menux
â€¢ Pr\xf3ximo passo: Propor demonstra\xe7\xe3o ou reuni\xe3o`,channel:"call",label:"Roteiro de ligaÃ§Ã£o"});let j=`ðŸ’¬ **Mensagem gerada para ${"whatsapp"===f?"WhatsApp":"email"===f?"Email":"LigaÃ§Ã£o"}**${b?`

ðŸ“‹ *Baseado em: ${b.cardName}*`:""}`;return{id:(0,e.uid)(),role:"assistant",content:j,contentType:"ghostwriting",timestamp:(0,e.now)(),contextBadge:(0,e.buildContextBadge)(b),copyableBlocks:i,sourceCommand:"/mensagem"}}(a.text,a.card);case"/pitch":let E;if(!a.card)return y("no-card");return h=a.card,E=`ðŸŽ¯ **Pitch Personalizado: ${h.cardName}**

**Perfil:** ${h.stageLabel} \xb7 ${(0,e.temperatureEmoji)(h.temperature)} ${(0,e.temperatureLabel)(h.temperature)}${h.tags.length?` \xb7 ${h.tags.join(", ")}`:""}

**Ponto de valor 1 â€” Efici\xeancia operacional:**
  - ðŸ”´ Dor: Perda de tempo com processos manuais no sal\xe3o
  - âœ… Menux: Automa\xe7\xe3o completa de comanda digital e gest\xe3o de mesas
  - ðŸ“Š Case: Restaurantes similares reduziram 40% do tempo de atendimento

**Ponto de valor 2 â€” Controle financeiro:**
  - ðŸ”´ Dor: Falta de visibilidade sobre custos e margem por prato
  - âœ… Menux: Dashboard em tempo real com CMV, ticket m\xe9dio e faturamento
  - ðŸ“Š Case: Aumento de 25% na margem ap\xf3s 3 meses de uso

**Ponto de valor 3 â€” Experi\xeancia do cliente:**
  - ðŸ”´ Dor: Filas, erros de pedido, demora no atendimento
  - âœ… Menux: Card\xe1pio digital + autoatendimento + integra\xe7\xe3o com delivery

**Pergunta de abertura:** "Qual o maior gargalo da opera\xe7\xe3o hoje â€” atendimento, controle financeiro ou gest\xe3o do card\xe1pio?"

**Frase de fechamento:** "Com base no que conversamos, faz sentido agendarmos uma demonstra\xe7\xe3o personalizada para a semana que vem?"`,{id:(0,e.uid)(),role:"assistant",content:E,contentType:"pitch",timestamp:(0,e.now)(),contextBadge:(0,e.buildContextBadge)(h),suggestedActions:[{id:(0,e.uid)(),type:"create-activity",label:"ðŸ“… Agendar demonstraÃ§Ã£o",icon:"calendar",payload:{type:"meeting",description:`Demo ${h.cardName}`,opportunityId:h.cardId,opportunityTitle:h.cardName}}],sourceCommand:"/pitch"};case"/funil":return(0,f.generateFunnelSummary)(a.pipeline);case"/analise":if(!a.card)return y("no-card");return(0,f.generateCardAnalysis)(a.card);case"/comparar":return(0,f.generateComparison)(a.text||"Concorrente");case"/planos":return(0,f.generatePlansInfo)();case"/followup":let F,G,H,I;if(!a.card)return y("no-card");return i=a.card,F=i.contacts?.[0]?.name??"",G=i.timelineNotes.length>0?i.timelineNotes[0]:"sem interaÃ§Ã£o recente",H=F?`Oi ${F}! Tudo bem? Estou passando pra retomar nossa conversa sobre o Menux. Vi que ficou de analisar internamente â€” teve alguma novidade? Fico \xe0 disposi\xe7\xe3o! ðŸ˜Š`:`Ol\xe1! Passando pra retomar nossa conversa sobre o Menux. Conseguiu avaliar as informa\xe7\xf5es que enviamos? Estou \xe0 disposi\xe7\xe3o pra qualquer d\xfavida!`,I=`ðŸ”„ **Follow-up: ${i.cardName}**

ðŸ“‹ *\xdaltima intera\xe7\xe3o: ${G}*

**Estrat\xe9gia:** Retomada gentil com abertura para atualiza\xe7\xe3o do lead.`,{id:(0,e.uid)(),role:"assistant",content:I,contentType:"followup",timestamp:(0,e.now)(),contextBadge:(0,e.buildContextBadge)(i),copyableBlocks:[{id:(0,e.uid)(),content:H,channel:"whatsapp",charLimit:c.INTELLIGENCE_LIMITS.WHATSAPP_CHAR_LIMIT,label:"Mensagem WhatsApp"}],suggestedActions:[{id:(0,e.uid)(),type:"schedule-followup",label:"ðŸ”„ Agendar follow-up",icon:"refresh-cw",payload:{type:"follow-up",description:`Follow-up ${i.cardName}`,opportunityId:i.cardId,opportunityTitle:i.cardName}}],sourceCommand:"/followup"};case"/ajuda":let J;return J=`â“ **O que posso fazer por voc\xea?**

Sou a Menux Intelligence â€” seu bra\xe7o direito comercial. Aqui est\xe1 o que sei fazer:

| Comando | O que faz |
|---------|----------|
| \`/briefing\` | ðŸ“‹ Resumo completo do lead antes de uma liga\xe7\xe3o ou reuni\xe3o |
| \`/objecao\` | ðŸ›¡ï¸ Contra-argumentos para obje\xe7\xf5es + mensagem pronta |
| \`/mensagem\` | ðŸ’¬ Escrevo mensagens para WhatsApp, email ou liga\xe7\xe3o |
| \`/pitch\` | ðŸŽ¯ Argumentos de venda personalizados pro perfil do lead |
| \`/funil\` | ðŸ“Š Vis\xe3o geral do seu pipeline com a\xe7\xf5es priorit\xe1rias |
| \`/analise\` | ðŸ” Diagn\xf3stico completo de um card com probabilidade de fechamento |
| \`/comparar\` | âš”ï¸ Comparativo Menux vs concorrente |
| \`/planos\` | ðŸ’° Info sobre planos, pre\xe7os e funcionalidades |
| \`/followup\` | ðŸ”„ Gero follow-up baseado na \xfaltima intera\xe7\xe3o |
| \`/resumo\` | ðŸŒ… Briefing matinal com prioridades, ganhos rapidos e alertas |
| \`/riscos\` | ðŸš¨ Todos os alertas de risco do seu pipeline |
| \`/meta\` | ðŸŽ¯ Progresso das metas com projecoes |
| \`/coaching\` | ðŸ“ˆ Coaching de vendas com dicas personalizadas |
| \`/agenda\` | ðŸ“… Atividades do dia + sugestao de prioridade |

ðŸ’¡ **Dicas:**
- Abra o card de um lead e me pergunte â€” uso todo o contexto automaticamente
- Use os bot\xf5es de a\xe7\xe3o para criar atividades e salvar notas direto no CRM
- Copie mensagens prontas com 1 clique

Quer experimentar algum comando?`,{id:(0,e.uid)(),role:"assistant",content:J,contentType:"help",timestamp:(0,e.now)(),sourceCommand:"/ajuda"};case"/resumo":return r();case"/riscos":return s();case"/meta":return t();case"/coaching":return u();case"/agenda":return v()}return function(a,b,c,d){let g=a.toLowerCase();if(g.includes("preÃ§o")||g.includes("plano")||g.includes("quanto custa"))return(0,f.generatePlansInfo)();if(g.includes("bom dia")||g.includes("resumo do dia")||g.includes("meu dia")||g.includes("briefing matinal"))return r();if(g.includes("risco")||g.includes("alerta")||g.includes("perigo")||g.includes("problema"))return s();if(g.includes("meta")||g.includes("objetivo")||g.includes("target"))return t();if(g.includes("coaching")||g.includes("performance")||g.includes("desempenho")||g.includes("como estou"))return u();if(g.includes("agenda")||g.includes("atividades de hoje")||g.includes("o que tenho"))return v();if(g.includes("mover")||g.includes("mova")||g.includes("avanÃ§ar card"))return{id:(0,e.uid)(),role:"assistant",content:`N\xe3o consigo mover cards diretamente, mas posso te ajudar a preparar tudo para o avan\xe7o. ${b?`O card **${b.cardName}** est\xe1 na etapa **${b.stageLabel}**. Quer que eu verifique o que falta para avan\xe7ar?`:"Abra o card que deseja avanÃ§ar e eu te ajudo!"}`,contentType:"text",timestamp:(0,e.now)(),contextBadge:(0,e.buildContextBadge)(b)};let h="formal"===d?" Responderei de forma executiva e profissional.":"casual"===d?" Responderei de forma descontraÃ­da e direta.":"",i=c&&"focus"!==c?`

*Modo ${w[c]} ativo â€” ${x[c]}*`:"",j=b?`Entendi sua pergunta sobre **${b.cardName}**! ${"hot"===b.temperature?"ðŸ”¥ Esse lead estÃ¡ quente â€” ":""}Como posso te ajudar com isso? Posso gerar um \`/briefing\`, preparar uma \`/mensagem\` ou analisar o card com \`/analise\`.${h}${i}`:`Entendi! Posso te ajudar de v\xe1rias formas. Use os comandos r\xe1pidos (/) para a\xe7\xf5es espec\xedficas, ou me pergunte sobre planos, obje\xe7\xf5es, ou estrat\xe9gias de venda.${h}

ðŸ’¡ Dica: selecione um cliente com ðŸ“‹ para eu carregar todo o contexto e personalizar minhas respostas.${i}`;return{id:(0,e.uid)(),role:"assistant",content:j,contentType:"text",timestamp:(0,e.now)(),contextBadge:(0,e.buildContextBadge)(b)}}(a.text,a.card,a.mode,a.tone)}let A=[{command:"/briefing",label:"Briefing do Lead",icon:"ðŸ“‹",description:"Gera resumo completo do card: contexto, objeÃ§Ãµes, histÃ³rico, prÃ³ximo passo sugerido",requiresCard:!0,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/objecao",label:"Quebrar ObjeÃ§Ã£o",icon:"ðŸ›¡ï¸",description:"Solicita a objeÃ§Ã£o recebida e retorna contra-argumento + mensagem pronta para WhatsApp",requiresCard:!1,availableFor:["comercial","cs"],requiresInput:!0,inputPlaceholder:"Qual objeÃ§Ã£o vocÃª recebeu?"},{command:"/mensagem",label:"Escrever Mensagem",icon:"ðŸ’¬",description:"Ghostwriting de mensagem para WhatsApp/email com tom e contexto do lead",requiresCard:!1,availableFor:["comercial","cs"],requiresInput:!0,inputPlaceholder:"Qual o canal (WhatsApp/Email/LigaÃ§Ã£o) e objetivo da mensagem?"},{command:"/pitch",label:"Pitch Personalizado",icon:"ðŸŽ¯",description:"Gera 2-3 argumentos matadores baseados no perfil do lead (segmento, mesas, dores)",requiresCard:!0,availableFor:["comercial"],requiresInput:!1},{command:"/funil",label:"Resumo do Funil",icon:"ðŸ“Š",description:"VisÃ£o consolidada do pipeline: quentes, parados, em risco, prÃ³ximas aÃ§Ãµes",requiresCard:!1,availableFor:["comercial","admin","master"],requiresInput:!1},{command:"/analise",label:"Analisar Card",icon:"ðŸ”",description:"DiagnÃ³stico completo: temperatura, score, risco, sugestÃ£o de prÃ³ximo passo",requiresCard:!0,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/comparar",label:"Comparativo",icon:"âš”ï¸",description:"Menux vs concorrente citado â€” apenas pontos oficiais e documentados",requiresCard:!1,availableFor:["comercial"],requiresInput:!0,inputPlaceholder:"Qual concorrente vocÃª quer comparar?"},{command:"/planos",label:"Planos e PreÃ§os",icon:"ðŸ’°",description:"Consulta rÃ¡pida sobre Assist, Sales, Control â€” preÃ§os, features, setup",requiresCard:!1,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/followup",label:"Gerar Follow-up",icon:"ðŸ”„",description:"Cria mensagem de follow-up baseada na Ãºltima interaÃ§Ã£o do card",requiresCard:!0,availableFor:["comercial","cs"],requiresInput:!1},{command:"/ajuda",label:"O que vocÃª pode fazer?",icon:"â“",description:"Lista capacidades da Menux Intelligence com exemplos",requiresCard:!1,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/resumo",label:"Briefing Matinal",icon:"ðŸŒ…",description:"Resumo do dia: prioridades, ganhos rÃ¡pidos, alertas e mÃ©tricas",requiresCard:!1,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/riscos",label:"Alertas de Risco",icon:"ðŸš¨",description:"Todos os alertas de risco: SLA, deals parados, contratos expirando, saÃºde de clientes",requiresCard:!1,availableFor:["comercial","admin","master"],requiresInput:!1},{command:"/meta",label:"Progresso da Meta",icon:"ðŸŽ¯",description:"Progresso das suas metas com projeÃ§Ãµes e o que falta para bater",requiresCard:!1,availableFor:["comercial","cs","admin","master"],requiresInput:!1},{command:"/coaching",label:"Coaching de Vendas",icon:"ðŸ“ˆ",description:"Insights de performance, taxa de conversÃ£o, dicas personalizadas de melhoria",requiresCard:!1,availableFor:["comercial","admin","master"],requiresInput:!1},{command:"/agenda",label:"Agenda do Dia",icon:"ðŸ“…",description:"Atividades de hoje + sugestÃ£o de ordem de prioridade",requiresCard:!1,availableFor:["comercial","cs","admin","master"],requiresInput:!1}];function B(a){return A.filter(b=>b.availableFor.includes(a))}function C(a){return A.find(b=>b.command===a)}function D(a,b){if(!b||"/"===b)return a;let c=b.toLowerCase().replace("/","").trim();return a.filter(a=>a.command.toLowerCase().includes(c)||a.label.toLowerCase().includes(c)||a.description.toLowerCase().includes(c))}a.s(["filterCommands",()=>D,"getAvailableCommands",()=>B,"getCommandDefinition",()=>C],74802);var E=a.i(54465);function F(){return`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function G(){return new Date().toISOString()}function H(a=[]){return{id:F(),preview:a[0]?.content?.slice(0,80)??"",messages:a,createdAt:G(),updatedAt:G(),messageCount:a.length}}function I(){let a=p.useAuthStore.getState().user,b=k.useOpportunityStore.getState().opportunities.filter(b=>b.responsibleId===a?.id),c=b.filter(a=>"won"===a.status||"lost"===a.status),d=c.filter(a=>"won"===a.status),e=c.length>=3?Math.round(d.length/c.length*100):void 0;return{id:a?.id??"unknown",name:a?.name??"Vendedor",role:a?.role??"comercial",assignedCardCount:b.filter(a=>"open"===a.status).length,conversionRate:e}}function J(){try{let a=p.useAuthStore.getState().user;if(!a)return null;let b=k.useOpportunityStore.getState().opportunities,c=l.useActivityStore.getState().activities;return(0,E.computePipelineContext)(b,c,a.id,a.role)}catch(a){return console.error("[Menux Intelligence] Erro ao computar pipeline context:",a),null}}let K=(0,b.create)((a,b)=>({isOpen:!1,activeConversation:null,messages:[],isTyping:!1,greetingSent:!1,contextCard:null,isClientPickerOpen:!1,clientPickerSearch:"",clientPickerFilters:{},proactiveSuggestions:[],history:[],isHistoryOpen:!1,viewingHistoryConversation:null,activeScreen:"other",remainingQueries:c.INTELLIGENCE_LIMITS.MAX_QUERIES_PER_HOUR,rateLimitResetAt:null,menuxIntelligenceMode:"focus",aiTone:"neutral",proactiveFrequency:5,proactiveNotifications:!0,isSettingsOpen:!1,isThinking:!1,open:()=>{let c=b();if(c.greetingSent&&c.messages.length>0)return void a({isOpen:!0});let e=I(),f=(0,d.generateGreeting)(e,c.contextCard,!0);a({isOpen:!0,greetingSent:!0,messages:[f],activeConversation:H([f])})},close:()=>a({isOpen:!1}),toggle:()=>{let a=b();a.isOpen?a.close():a.open()},sendMessage:async d=>{let e=b();if(!d.trim()||d.length>c.INTELLIGENCE_LIMITS.MAX_USER_MESSAGE_LENGTH)return;if(e.messages.length>=c.INTELLIGENCE_LIMITS.MAX_MESSAGES_PER_CONVERSATION){let b=y("max-messages");a(a=>({messages:[...a.messages,b]}));return}if(e.remainingQueries<=0){let b=y("rate-limit",{resetTime:e.rateLimitResetAt?new Date(e.rateLimitResetAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"--:--"});a(a=>({messages:[...a.messages,b]}));return}let f={id:F(),role:"user",content:d,contentType:"text",timestamp:G()};a(a=>({messages:[...a.messages,f],isTyping:!0}));try{let b=I(),c=await z({text:d,card:e.contextCard,vendor:b,pipeline:J(),mode:e.menuxIntelligenceMode,tone:e.aiTone});a(a=>({messages:[...a.messages,c],isTyping:!1,remainingQueries:a.remainingQueries-1,activeConversation:a.activeConversation?{...a.activeConversation,messages:[...a.messages,c],messageCount:a.messages.length+1,updatedAt:G()}:null}))}catch{let b=y("api-error");a(a=>({messages:[...a.messages,b],isTyping:!1}))}},executeSlashCommand:async(d,e)=>{let f=b(),g=p.useAuthStore.getState().user?.role,h="master"===g||"admin"===g||"comercial"===g||"cs"===g?g:null,i=C(d);if(!i){let b=y("invalid-command");a(a=>({messages:[...a.messages,b]}));return}if(!h||!i.availableFor.includes(h)){let b=y("forbidden-command",{command:i.command});a(a=>({messages:[...a.messages,b]}));return}if(i.requiresCard&&!f.contextCard){let b=y("no-card");a(a=>({messages:[...a.messages,b]}));return}if(i.requiresInput&&!(e??"").trim()){let b=y("missing-command-input",{command:i.command,hint:i.inputPlaceholder??""});a(a=>({messages:[...a.messages,b]}));return}if(f.remainingQueries<=0){let b=y("rate-limit");a(a=>({messages:[...a.messages,b]}));return}if(f.messages.length>=c.INTELLIGENCE_LIMITS.MAX_MESSAGES_PER_CONVERSATION){let b=y("max-messages");a(a=>({messages:[...a.messages,b]}));return}let j={id:F(),role:"user",content:e?`${d} ${e}`:d,contentType:"text",timestamp:G(),sourceCommand:d};a(a=>({messages:[...a.messages,j],isTyping:!0}));try{let b=I(),c=await z({text:e??"",command:d,card:f.contextCard,vendor:b,pipeline:J(),mode:f.menuxIntelligenceMode,tone:f.aiTone});a(a=>({messages:[...a.messages,c],isTyping:!1,remainingQueries:a.remainingQueries-1,activeConversation:a.activeConversation?{...a.activeConversation,messages:[...a.messages,c],messageCount:a.messages.length+1,updatedAt:G()}:null}))}catch{let b=y("api-error");a(a=>({messages:[...a.messages,b],isTyping:!1}))}},setContextCard:b=>{a({contextCard:b})},openClientPicker:()=>{a({isClientPickerOpen:!0,clientPickerSearch:"",clientPickerFilters:{}})},closeClientPicker:()=>{a({isClientPickerOpen:!1})},setClientPickerSearch:b=>{a({clientPickerSearch:b})},setClientPickerFilters:b=>{a({clientPickerFilters:b})},selectClient:b=>{let c={cardId:b.entityId,cardName:b.companyName,stage:b.stage,stageLabel:b.stageLabel,temperature:b.temperature,contacts:[],tags:b.tags??[],overdueActivities:[],timelineNotes:[],registeredObjections:[],entityType:b.entityType},e=(0,d.generateContextLoaded)(c);a(a=>({contextCard:c,isClientPickerOpen:!1,messages:[...a.messages,e]}))},dismissSuggestion:b=>{a(a=>({proactiveSuggestions:a.proactiveSuggestions.map(a=>a.id===b?{...a,dismissed:!0}:a)}))},startNewConversation:()=>{let e=b();e.activeConversation&&e.messages.length>1&&a({history:[{...e.activeConversation,messages:e.messages,messageCount:e.messages.length,updatedAt:G()},...e.history].slice(0,c.INTELLIGENCE_LIMITS.MAX_STORED_CONVERSATIONS)});let f=I(),g=(0,d.generateGreeting)(f,null,!1);a({messages:[g],greetingSent:!0,activeConversation:H([g]),contextCard:null,viewingHistoryConversation:null,isHistoryOpen:!1})},loadConversation:c=>{let d=b().history.find(a=>a.id===c);d&&a({viewingHistoryConversation:d,isHistoryOpen:!1})},exitHistoryView:()=>{a({viewingHistoryConversation:null})},toggleHistory:()=>{a(a=>({isHistoryOpen:!a.isHistoryOpen}))},setActiveScreen:b=>{a({activeScreen:b})},addProactiveSuggestion:d=>{b().proactiveSuggestions.filter(a=>{let b=new Date(a.createdAt),c=new Date;return b.getDate()===c.getDate()&&b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()&&!a.dismissed}).length>=c.INTELLIGENCE_LIMITS.MAX_PROACTIVE_SUGGESTIONS_PER_DAY||a(a=>({proactiveSuggestions:[...a.proactiveSuggestions,{...d,id:F(),dismissed:!1,createdAt:G()}]}))},markActionExecuted:(b,c)=>{a(a=>({messages:a.messages.map(a=>a.id===b?{...a,suggestedActions:a.suggestedActions?.map(a=>a.id===c?{...a,executed:!0}:a)}:a)}))},addAssistantMessage:b=>{let c={...b,id:F(),timestamp:G(),role:"assistant"};a(a=>({messages:[...a.messages,c]}))},decrementRateLimit:()=>{a(a=>{let b=a.remainingQueries-1;return{remainingQueries:Math.max(0,b),rateLimitResetAt:b<=0&&!a.rateLimitResetAt?new Date(Date.now()+36e5).toISOString():a.rateLimitResetAt}})},resetRateLimit:()=>{a({remainingQueries:c.INTELLIGENCE_LIMITS.MAX_QUERIES_PER_HOUR,rateLimitResetAt:null})},setMenuxIntelligenceMode:b=>a({menuxIntelligenceMode:b}),openSettings:()=>a({isSettingsOpen:!0}),closeSettings:()=>a({isSettingsOpen:!1}),setAiTone:b=>a({aiTone:b}),setProactiveFrequency:b=>a({proactiveFrequency:b}),setProactiveNotifications:b=>a({proactiveNotifications:b})}));a.s(["useIntelligenceStore",0,K],93817)}];

//# sourceMappingURL=_8ceffdb5._.js.map
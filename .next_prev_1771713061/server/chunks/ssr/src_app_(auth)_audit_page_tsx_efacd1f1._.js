module.exports=[54308,a=>{"use strict";let b,c;var d,e=a.i(87924),f=a.i(72131),g=a.i(87532),h=a.i(5784),i=a.i(67552),j=a.i(13749),k=a.i(50522),l=a.i(15618),m=a.i(99464),n=a.i(81560),o=a.i(32860),p=a.i(3314),q=a.i(73570),r=a.i(69012),s=a.i(41675),t=a.i(99570),u=a.i(66718),v=a.i(33140),w=a.i(72233),x=a.i(80701),y=a.i(6015),z=a.i(46271),A=a.i(55376);a.i(42651);var B=a.i(49917),C=a.i(69506);let D={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},E={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.45,ease:[.25,.46,.45,.94]}}},F={created:{label:"Criado",bgColor:"bg-status-success-light",textColor:"text-status-success",icon:(0,e.jsx)(l.Plus,{className:"h-3 w-3"})},updated:{label:"Atualizado",bgColor:"bg-status-info-light",textColor:"text-status-info",icon:(0,e.jsx)(m.Pencil,{className:"h-3 w-3"})},deleted:{label:"Excluído",bgColor:"bg-status-danger-light",textColor:"text-status-danger",icon:(0,e.jsx)(n.Trash2,{className:"h-3 w-3"})},moved:{label:"Movido",bgColor:"bg-status-warning-light",textColor:"text-status-warning",icon:(0,e.jsx)(o.ArrowRight,{className:"h-3 w-3"})}},G={opportunity:"Oportunidade",client:"Cliente",activity:"Atividade",user:"Usuário",settings:"Configuração"},H=[{value:"all",label:"Todos"},{value:"opportunity",label:"Oportunidades"},{value:"client",label:"Clientes"},{value:"activity",label:"Atividades"},{value:"user",label:"Usuários"},{value:"settings",label:"Configurações"}],I=[{value:"all",label:"Todos os usuários"},...C.mockUsers.filter(a=>a.isActive).map(a=>({value:a.name,label:a.name}))],J=(d=B.mockAuditLog,b={"Rafael Mendes":"bg-brand-light text-brand","Camila Ferreira":"bg-status-info-light text-status-info","Lucas Oliveira":"bg-status-success-light text-status-success","Juliana Costa":"bg-status-warning-light text-status-warning","Fernanda Lima":"bg-purple-100 text-purple-700","Marcos Pereira":"bg-amber-100 text-amber-700","Carolina Santos":"bg-pink-100 text-pink-700"},c={"Ganhou oportunidade":"created","Perdeu oportunidade":"deleted","Criou oportunidade":"created","Adicionou cliente":"created","Completou atividade":"updated","Avançou estágio":"moved","Alterou saúde do cliente":"updated","Atualizou configuração":"updated","Criou atividade":"created"},d.map(a=>{let d=a.userName.split(" ").map(a=>a[0]).join("").slice(0,2).toUpperCase();return{id:a.id,timestamp:a.timestamp,user:{name:a.userName,initials:d,color:b[a.userName]??"bg-zinc-100 text-zinc-600"},action:c[a.action]??"updated",entityType:a.entity,entityName:a.entityName,details:a.details}}));function K({event:a,isExpanded:b,onToggle:c}){let d=F[a.action];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(y.TableRow,{className:"cursor-pointer transition-colors hover:bg-zinc-50",onClick:c,children:[(0,e.jsx)(y.TableCell,{children:(0,e.jsx)("span",{className:"font-body text-sm text-zinc-600",children:new Date(a.timestamp).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})}),(0,e.jsx)(y.TableCell,{children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(w.Avatar,{size:"sm",children:(0,e.jsx)(w.AvatarFallback,{className:`text-[10px] ${a.user.color}`,children:a.user.initials})}),(0,e.jsx)("span",{className:"font-body text-sm font-medium text-black",children:a.user.name})]})}),(0,e.jsx)(y.TableCell,{children:(0,e.jsxs)("span",{className:`inline-flex items-center gap-1 rounded-[10px] px-2 py-1 font-body text-xs font-medium ${d.bgColor} ${d.textColor}`,children:[d.icon,d.label]})}),(0,e.jsx)(y.TableCell,{children:(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)("span",{className:"font-body text-sm font-medium text-black",children:a.entityName}),(0,e.jsx)("span",{className:"font-body text-xs text-zinc-400",children:G[a.entityType]})]})}),(0,e.jsx)(y.TableCell,{children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"flex-1 truncate font-body text-sm text-zinc-600",children:a.details}),a.fullDetails&&(0,e.jsx)("button",{type:"button",className:"shrink-0 text-zinc-400","aria-label":b?"Ocultar detalhes":"Exibir detalhes",onClick:a=>{a.stopPropagation(),c()},children:b?(0,e.jsx)(i.ChevronUp,{className:"h-4 w-4"}):(0,e.jsx)(h.ChevronDown,{className:"h-4 w-4"})})]})})]}),b&&a.fullDetails&&(0,e.jsx)(y.TableRow,{className:"bg-zinc-50/50",children:(0,e.jsx)(y.TableCell,{colSpan:5,className:"px-6 py-4",children:(0,e.jsxs)("div",{className:"rounded-[10px] bg-zinc-100 p-4",children:[(0,e.jsx)("p",{className:"mb-2 font-heading text-xs font-semibold uppercase tracking-wider text-zinc-400",children:"Detalhes completos"}),(0,e.jsx)("pre",{className:"whitespace-pre-wrap font-body text-sm leading-relaxed text-zinc-600",children:a.fullDetails})]})})})]})}function L(){let[a,b]=(0,f.useState)(!0);(0,f.useEffect)(()=>{let a=setTimeout(()=>b(!1),800);return()=>clearTimeout(a)},[]);let[c,d]=(0,f.useState)("all"),[h,i]=(0,f.useState)("all"),[l,m]=(0,f.useState)("all"),[n,w]=(0,f.useState)(""),[B,C]=(0,f.useState)(""),[F,G]=(0,f.useState)(null),[L,M]=(0,f.useState)(1),N=(0,f.useMemo)(()=>J.filter(a=>{if("all"!==c&&a.entityType!==c||"all"!==h&&a.user.name!==h||"all"!==l&&a.action!==l)return!1;if(n&&new Date(a.timestamp)<new Date(n))return!1;if(B){let b=new Date(a.timestamp),c=new Date(B);if(c.setHours(23,59,59),b>c)return!1}return!0}),[c,h,l,n,B]),O=Math.ceil(247/15),P=Math.min(15*L,247),Q=(0,f.useCallback)(a=>{G(b=>b===a?null:a)},[]),R=(0,f.useCallback)(()=>{d("all"),i("all"),m("all"),w(""),C(""),M(1)},[]),S="all"!==c||"all"!==h||"all"!==l||n||B,T=N.filter(a=>"deleted"===a.action).length,U=N.filter(a=>"moved"===a.action).length,V=(0,f.useCallback)(()=>{m("deleted"),M(1)},[]),W=(0,f.useCallback)(()=>{m("moved"),M(1)},[]);return a?(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(v.Skeleton,{className:"h-8 w-52"}),(0,e.jsx)(v.Skeleton,{className:"mt-2 h-4 w-72"})]}),(0,e.jsx)(v.Skeleton,{className:"h-8 w-56 rounded-lg"})]}),(0,e.jsx)(v.Skeleton,{className:"h-14 rounded-xl"}),(0,e.jsx)("div",{className:"space-y-2 rounded-xl border border-zinc-200 p-4",children:Array.from({length:8}).map((a,b)=>(0,e.jsx)(v.Skeleton,{className:"h-12 rounded-lg"},b))})]}):(0,e.jsxs)(z.motion.div,{initial:"hidden",animate:"show",variants:D,className:"space-y-6",children:[(0,e.jsx)(z.motion.div,{variants:E,children:(0,e.jsx)(A.ModuleCommandHeader,{title:"Log de Auditoria",description:"Rastreie todas as ações realizadas no sistema.",meta:`${N.length} registros no filtro atual`,chips:[{id:"deleted",label:`${T} exclus\xf5es`,icon:(0,e.jsx)(q.AlertTriangle,{className:"h-3.5 w-3.5"}),tone:T>0?"danger":"neutral",onClick:V},{id:"moved",label:`${U} movimenta\xe7\xf5es`,icon:(0,e.jsx)(o.ArrowRight,{className:"h-3.5 w-3.5"}),tone:U>0?"warning":"neutral",onClick:W},{id:"total",label:"247 registros totais",icon:(0,e.jsx)(p.Shield,{className:"h-3.5 w-3.5"}),tone:"info",onClick:R}],actions:(0,e.jsx)("div",{className:"flex flex-wrap items-center justify-end gap-2",children:(0,e.jsxs)("div",{className:"flex items-center gap-2 rounded-[10px] bg-zinc-50 px-3 py-2",children:[(0,e.jsx)(p.Shield,{className:"h-4 w-4 text-zinc-400"}),(0,e.jsx)("span",{className:"font-body text-xs text-zinc-500",children:"Registros mantidos por 5 anos"})]})})})}),(0,e.jsxs)(z.motion.div,{variants:E,className:"flex flex-wrap items-end gap-3 rounded-[15px] border border-zinc-200 bg-white p-4",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(r.Filter,{className:"h-4 w-4 text-zinc-400"}),(0,e.jsx)("span",{className:"font-heading text-sm font-medium text-black",children:"Filtros"})]}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)("label",{className:"font-body text-xs text-zinc-500",children:"Entidade"}),(0,e.jsxs)(x.Select,{value:c,onValueChange:d,children:[(0,e.jsx)(x.SelectTrigger,{className:"w-full rounded-[10px] sm:w-[160px]",children:(0,e.jsx)(x.SelectValue,{})}),(0,e.jsx)(x.SelectContent,{children:H.map(a=>(0,e.jsx)(x.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)("label",{className:"font-body text-xs text-zinc-500",children:"Usuário"}),(0,e.jsxs)(x.Select,{value:h,onValueChange:i,children:[(0,e.jsx)(x.SelectTrigger,{className:"w-full rounded-[10px] sm:w-[180px]",children:(0,e.jsx)(x.SelectValue,{})}),(0,e.jsx)(x.SelectContent,{children:I.map(a=>(0,e.jsx)(x.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)("label",{className:"font-body text-xs text-zinc-500",children:"Data início"}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(s.Calendar,{className:"absolute left-2.5 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-zinc-400"}),(0,e.jsx)(u.Input,{type:"date",value:n,onChange:a=>w(a.target.value),className:"w-full rounded-[10px] pl-8 font-body text-sm sm:w-[150px]"})]})]}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)("label",{className:"font-body text-xs text-zinc-500",children:"Data fim"}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(s.Calendar,{className:"absolute left-2.5 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-zinc-400"}),(0,e.jsx)(u.Input,{type:"date",value:B,onChange:a=>C(a.target.value),className:"w-full rounded-[10px] pl-8 font-body text-sm sm:w-[150px]"})]})]}),S&&(0,e.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:R,className:"rounded-full font-heading text-zinc-500",children:"Limpar filtros"})]}),(0,e.jsxs)(z.motion.div,{variants:E,className:"rounded-[15px] border border-zinc-200 bg-white",children:[(0,e.jsxs)(y.Table,{children:[(0,e.jsx)(y.TableHeader,{children:(0,e.jsxs)(y.TableRow,{className:"border-b-zinc-200 hover:bg-transparent",children:[(0,e.jsx)(y.TableHead,{className:"font-heading text-xs font-semibold uppercase tracking-wider text-zinc-400",children:"Data/Hora"}),(0,e.jsx)(y.TableHead,{className:"font-heading text-xs font-semibold uppercase tracking-wider text-zinc-400",children:"Usuário"}),(0,e.jsx)(y.TableHead,{className:"font-heading text-xs font-semibold uppercase tracking-wider text-zinc-400",children:"Ação"}),(0,e.jsx)(y.TableHead,{className:"font-heading text-xs font-semibold uppercase tracking-wider text-zinc-400",children:"Entidade"}),(0,e.jsx)(y.TableHead,{className:"font-heading text-xs font-semibold uppercase tracking-wider text-zinc-400",children:"Detalhes"})]})}),(0,e.jsx)(y.TableBody,{children:N.length>0?N.map(a=>(0,e.jsx)(K,{event:a,isExpanded:F===a.id,onToggle:()=>Q(a.id)},a.id)):(0,e.jsx)(y.TableRow,{children:(0,e.jsx)(y.TableCell,{colSpan:5,className:"py-12 text-center",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2 text-zinc-400",children:[(0,e.jsx)(g.Search,{className:"h-8 w-8"}),(0,e.jsx)("p",{className:"font-body text-sm",children:"Nenhum registro encontrado com os filtros aplicados"}),(0,e.jsx)(t.Button,{variant:"ghost",size:"sm",onClick:R,className:"mt-2 rounded-full font-heading text-brand",children:"Limpar filtros"})]})})})})]}),N.length>0&&(0,e.jsxs)("div",{className:"flex items-center justify-between border-t border-zinc-200 px-4 py-3",children:[(0,e.jsxs)("span",{className:"font-body text-sm text-zinc-500",children:["Mostrando ",(L-1)*15+1,"-",P," de ",247," registros"]}),(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(t.Button,{variant:"outline",size:"icon-xs",onClick:()=>M(a=>Math.max(1,a-1)),disabled:1===L,className:"rounded-full",children:(0,e.jsx)(j.ChevronLeft,{className:"h-3.5 w-3.5"})}),Array.from({length:Math.min(5,O)}).map((a,b)=>{let c;return c=O<=5||L<=3?b+1:L>=O-2?O-4+b:L-2+b,(0,e.jsx)(t.Button,{variant:L===c?"default":"ghost",size:"icon-xs",onClick:()=>M(c),className:`rounded-full font-heading text-xs ${L===c?"bg-black text-white hover:bg-zinc-800":"text-zinc-600"}`,children:c},c)}),O>5&&L<O-2&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{className:"px-1 font-body text-xs text-zinc-400",children:"..."}),(0,e.jsx)(t.Button,{variant:"ghost",size:"icon-xs",onClick:()=>M(O),className:"rounded-full font-heading text-xs text-zinc-600",children:O})]}),(0,e.jsx)(t.Button,{variant:"outline",size:"icon-xs",onClick:()=>M(a=>Math.min(O,a+1)),disabled:L===O,className:"rounded-full",children:(0,e.jsx)(k.ChevronRight,{className:"h-3.5 w-3.5"})})]})]})]}),(0,e.jsxs)(z.motion.div,{variants:E,className:"flex items-center justify-center gap-2 rounded-[15px] bg-zinc-50 py-3",children:[(0,e.jsx)(p.Shield,{className:"h-4 w-4 text-zinc-400"}),(0,e.jsx)("span",{className:"font-body text-sm text-zinc-500",children:"Registros mantidos por 5 anos conforme política de retenção de dados"})]})]})}a.s(["default",()=>L])}];

//# sourceMappingURL=src_app_%28auth%29_audit_page_tsx_efacd1f1._.js.map
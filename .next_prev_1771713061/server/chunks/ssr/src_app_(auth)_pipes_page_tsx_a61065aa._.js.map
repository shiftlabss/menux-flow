{"version":3,"sources":["../../../../src/app/%28auth%29/pipes/lib/pipeline-config.tsx","../../../../src/app/%28auth%29/pipes/hooks/use-pipeline-board.ts","../../../../src/app/%28auth%29/pipes/hooks/use-stage-customization.ts","../../../../src/app/%28auth%29/pipes/components/deal-card-bento.tsx","../../../../src/app/%28auth%29/pipes/components/pipeline-skeleton.tsx","../../../../src/app/%28auth%29/pipes/page.tsx","../../../../src/app/%28auth%29/pipes/lib/pipeline-validation.ts","../../../../node_modules/lucide-react/src/icons/settings-2.ts","../../../../node_modules/lucide-react/src/icons/columns-3.ts","../../../../node_modules/lucide-react/src/icons/palette.ts"],"sourcesContent":["import { Flame, Thermometer, Snowflake } from \"lucide-react\";\nimport type { Opportunity, PipelineStage, Temperature } from \"@/types\";\n\n// ===================================================================\n// Funnel Definitions\n// ===================================================================\n\nexport interface FunnelDefinition {\n  id: string;\n  label: string;\n  stages: { id: PipelineStage; label: string; slaHours: number }[];\n}\n\nexport const funnels: FunnelDefinition[] = [\n  {\n    id: \"comercial\",\n    label: \"Leads\",\n    stages: [\n      { id: \"lead-in\", label: \"Lead-In\", slaHours: 48 },\n      { id: \"contato-feito\", label: \"Contato Feito\", slaHours: 72 },\n      { id: \"reuniao-agendada\", label: \"Reuniao Agendada\", slaHours: 120 },\n      { id: \"proposta-enviada\", label: \"Proposta Enviada\", slaHours: 96 },\n      { id: \"negociacao\", label: \"Negociacao\", slaHours: 168 },\n      { id: \"fechamento\", label: \"Fechamento\", slaHours: 48 },\n    ],\n  },\n  {\n    id: \"indicacao\",\n    label: \"Indicacao\",\n    stages: [\n      { id: \"lead-in\", label: \"Lead-In\", slaHours: 24 },\n      { id: \"contato-feito\", label: \"Contato Feito\", slaHours: 48 },\n      { id: \"proposta-enviada\", label: \"Proposta Enviada\", slaHours: 72 },\n      { id: \"fechamento\", label: \"Fechamento\", slaHours: 48 },\n    ],\n  },\n];\n\n// ===================================================================\n// Stage Validation Required Fields\n// ===================================================================\n\nexport const stageRequiredFields: Record<\n  PipelineStage,\n  { field: keyof Opportunity; label: string }[]\n> = {\n  \"lead-in\": [],\n  \"contato-feito\": [{ field: \"clientName\", label: \"Nome do contato\" }],\n  \"reuniao-agendada\": [\n    { field: \"clientName\", label: \"Nome do contato\" },\n    { field: \"expectedCloseDate\", label: \"Data prevista de fechamento\" },\n  ],\n  \"proposta-enviada\": [\n    { field: \"clientName\", label: \"Nome do contato\" },\n    { field: \"expectedCloseDate\", label: \"Data prevista de fechamento\" },\n    { field: \"value\", label: \"Valor da proposta\" },\n  ],\n  negociacao: [\n    { field: \"clientName\", label: \"Nome do contato\" },\n    { field: \"expectedCloseDate\", label: \"Data prevista de fechamento\" },\n    { field: \"value\", label: \"Valor da proposta\" },\n    { field: \"monthlyValue\", label: \"Valor mensal\" },\n  ],\n  fechamento: [\n    { field: \"clientName\", label: \"Nome do contato\" },\n    { field: \"expectedCloseDate\", label: \"Data prevista de fechamento\" },\n    { field: \"value\", label: \"Valor da proposta\" },\n    { field: \"monthlyValue\", label: \"Valor mensal\" },\n  ],\n};\n\n// ===================================================================\n// Temperature Config\n// ===================================================================\n\nexport const temperatureConfig: Record<\n  Temperature,\n  { icon: React.ReactNode; label: string; colorClass: string }\n> = {\n  hot: {\n    icon: <Flame className=\"h-3.5 w-3.5\" />,\n    label: \"Quente\",\n    colorClass: \"text-status-danger\",\n  },\n  warm: {\n    icon: <Thermometer className=\"h-3.5 w-3.5\" />,\n    label: \"Morno\",\n    colorClass: \"text-status-warning\",\n  },\n  cold: {\n    icon: <Snowflake className=\"h-3.5 w-3.5\" />,\n    label: \"Frio\",\n    colorClass: \"text-status-info\",\n  },\n};\n\n// ===================================================================\n// Stage Color Palette\n// ===================================================================\n\nexport const stageColorPalette = [\n  { id: \"default\", label: \"Padrao\", bg: \"bg-brand\", hex: \"#1d4ed8\" },\n  { id: \"blue\", label: \"Azul\", bg: \"bg-blue-500\", hex: \"#3b82f6\" },\n  { id: \"cyan\", label: \"Ciano\", bg: \"bg-cyan-500\", hex: \"#06b6d4\" },\n  { id: \"green\", label: \"Verde\", bg: \"bg-emerald-500\", hex: \"#10b981\" },\n  { id: \"yellow\", label: \"Amarelo\", bg: \"bg-amber-400\", hex: \"#fbbf24\" },\n  { id: \"orange\", label: \"Laranja\", bg: \"bg-orange-500\", hex: \"#f97316\" },\n  { id: \"red\", label: \"Vermelho\", bg: \"bg-red-500\", hex: \"#ef4444\" },\n  { id: \"pink\", label: \"Rosa\", bg: \"bg-pink-500\", hex: \"#ec4899\" },\n  { id: \"gray\", label: \"Cinza\", bg: \"bg-zinc-400\", hex: \"#a1a1aa\" },\n];\n\n// ===================================================================\n// Stage Customization\n// ===================================================================\n\nexport interface StageCustomization {\n  label?: string;\n  colorId?: string;\n}\n\nexport const STAGE_CUSTOM_STORAGE_KEY = \"flow-stage-customizations\";\n\nexport function loadStageCustomizations(): Record<string, StageCustomization> {\n  if (typeof window === \"undefined\") return {};\n  try {\n    const raw = localStorage.getItem(STAGE_CUSTOM_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  } catch {\n    try { localStorage.removeItem(STAGE_CUSTOM_STORAGE_KEY); } catch { }\n    return {};\n  }\n}\n\nexport function saveStageCustomizations(\n  data: Record<string, StageCustomization>\n): void {\n  if (typeof window === \"undefined\") return;\n  try {\n    localStorage.setItem(STAGE_CUSTOM_STORAGE_KEY, JSON.stringify(data));\n  } catch {\n    // Silently ignore quota errors\n  }\n}\n","\"use client\";\n\nimport { useState, useCallback, useRef, useEffect } from \"react\";\nimport type { Opportunity, PipelineStage } from \"@/types\";\nimport { calculateSlaDeadline } from \"@/lib/business-rules\";\nimport { validateStageTransition } from \"../lib/pipeline-validation\";\nimport type { FunnelDefinition } from \"../lib/pipeline-config\";\n\ninterface UsePipelineBoardOptions {\n  localOpportunities: Opportunity[];\n  setLocalOpportunities: React.Dispatch<React.SetStateAction<Opportunity[]>>;\n  activeFunnel: FunnelDefinition;\n  announce: (message: string) => void;\n  canMoveCards?: boolean;\n}\n\ninterface ColumnErrorState {\n  stage: PipelineStage;\n  message: string;\n  tone: \"warning\" | \"error\";\n  cardId?: string;\n  missingFields?: string[];\n  targetStage?: PipelineStage;\n}\n\ninterface SuccessFeedbackState {\n  stage: PipelineStage;\n  message: string;\n  cardId?: string;\n}\n\nconst AUTO_SCROLL_EDGE_PX = 96;\nconst AUTO_SCROLL_MAX_DELTA = 22;\n\nfunction clamp(value: number, min: number, max: number) {\n  return Math.min(Math.max(value, min), max);\n}\n\nfunction getAutoScrollDelta(\n  pointer: number,\n  start: number,\n  end: number\n) {\n  if (pointer < start + AUTO_SCROLL_EDGE_PX) {\n    const distance = pointer - start;\n    const intensity = 1 - clamp(distance, 0, AUTO_SCROLL_EDGE_PX) / AUTO_SCROLL_EDGE_PX;\n    return -Math.ceil(intensity * AUTO_SCROLL_MAX_DELTA);\n  }\n\n  if (pointer > end - AUTO_SCROLL_EDGE_PX) {\n    const distance = end - pointer;\n    const intensity = 1 - clamp(distance, 0, AUTO_SCROLL_EDGE_PX) / AUTO_SCROLL_EDGE_PX;\n    return Math.ceil(intensity * AUTO_SCROLL_MAX_DELTA);\n  }\n\n  return 0;\n}\n\nfunction resolveInsertIndexForEmptyStage(\n  opportunities: Opportunity[],\n  targetStage: PipelineStage,\n  stageOrder: PipelineStage[]\n) {\n  const targetStageIndex = stageOrder.indexOf(targetStage);\n  if (targetStageIndex === -1) return opportunities.length;\n\n  for (let idx = targetStageIndex - 1; idx >= 0; idx -= 1) {\n    const prevStage = stageOrder[idx];\n    for (let i = opportunities.length - 1; i >= 0; i -= 1) {\n      if (opportunities[i].stage === prevStage) {\n        return i + 1;\n      }\n    }\n  }\n\n  for (let idx = targetStageIndex + 1; idx < stageOrder.length; idx += 1) {\n    const nextStage = stageOrder[idx];\n    const nextIndex = opportunities.findIndex((op) => op.stage === nextStage);\n    if (nextIndex !== -1) return nextIndex;\n  }\n\n  return opportunities.length;\n}\n\nexport function usePipelineBoard({\n  localOpportunities,\n  setLocalOpportunities,\n  activeFunnel,\n  announce,\n  canMoveCards = true,\n}: UsePipelineBoardOptions) {\n  const [draggingCardId, setDraggingCardId] = useState<string | null>(null);\n  const [draggingCardStage, setDraggingCardStage] = useState<PipelineStage | null>(null);\n  const [draggingOpportunity, setDraggingOpportunity] = useState<Opportunity | null>(null);\n  const [dragOverStage, setDragOverStage] = useState<PipelineStage | null>(null);\n  const [dropIndicator, setDropIndicator] = useState<{\n    stage: PipelineStage;\n    index: number;\n  } | null>(null);\n  const [columnError, setColumnError] = useState<ColumnErrorState | null>(null);\n  const [successFeedback, setSuccessFeedback] = useState<SuccessFeedbackState | null>(null);\n  const [updatingCardId, setUpdatingCardId] = useState<string | null>(null);\n  const [recentlyMovedCardId, setRecentlyMovedCardId] = useState<string | null>(null);\n  const dragCardRef = useRef<Opportunity | null>(null);\n  const autoScrollFrameRef = useRef<number | null>(null);\n  const timeoutIdsRef = useRef<number[]>([]);\n  const autoScrollStateRef = useRef<{\n    clientX: number;\n    clientY: number;\n    horizontalContainer: HTMLElement | null;\n    verticalContainer: HTMLElement | null;\n  } | null>(null);\n\n  const stopAutoScroll = useCallback(() => {\n    if (autoScrollFrameRef.current !== null) {\n      window.cancelAnimationFrame(autoScrollFrameRef.current);\n      autoScrollFrameRef.current = null;\n    }\n    autoScrollStateRef.current = null;\n  }, []);\n\n  const runWithTimeout = useCallback((fn: () => void, delayMs: number) => {\n    const timeoutId = window.setTimeout(() => {\n      timeoutIdsRef.current = timeoutIdsRef.current.filter((id) => id !== timeoutId);\n      fn();\n    }, delayMs);\n    timeoutIdsRef.current.push(timeoutId);\n  }, []);\n\n  const runAutoScroll = useCallback(() => {\n    const tick = () => {\n      const state = autoScrollStateRef.current;\n      if (!state) {\n        autoScrollFrameRef.current = null;\n        return;\n      }\n\n      const { clientX, clientY, horizontalContainer, verticalContainer } = state;\n      let shouldKeepLooping = false;\n\n      if (verticalContainer) {\n        const rect = verticalContainer.getBoundingClientRect();\n        const deltaY = getAutoScrollDelta(clientY, rect.top, rect.bottom);\n        if (deltaY !== 0) {\n          verticalContainer.scrollTop += deltaY;\n          shouldKeepLooping = true;\n        }\n      }\n\n      if (horizontalContainer) {\n        const rect = horizontalContainer.getBoundingClientRect();\n        const deltaX = getAutoScrollDelta(clientX, rect.left, rect.right);\n        if (deltaX !== 0) {\n          horizontalContainer.scrollLeft += deltaX;\n          shouldKeepLooping = true;\n        }\n      }\n\n      if (shouldKeepLooping || autoScrollStateRef.current !== null) {\n        autoScrollFrameRef.current = window.requestAnimationFrame(tick);\n        return;\n      }\n\n      autoScrollFrameRef.current = null;\n    };\n\n    tick();\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      stopAutoScroll();\n      timeoutIdsRef.current.forEach((timeoutId) => window.clearTimeout(timeoutId));\n      timeoutIdsRef.current = [];\n    };\n  }, [stopAutoScroll]);\n\n  const handleDragStart = useCallback(\n    (e: React.DragEvent, opportunity: Opportunity) => {\n      if (!canMoveCards) {\n        e.preventDefault();\n        announce(\"Voce nao tem permissao para mover oportunidades.\");\n        return;\n      }\n\n      setDraggingCardId(opportunity.id);\n      setDraggingCardStage(opportunity.stage);\n      setDraggingOpportunity(opportunity);\n      dragCardRef.current = opportunity;\n      autoScrollStateRef.current = null;\n      e.dataTransfer.effectAllowed = \"move\";\n      e.dataTransfer.setData(\"text/plain\", opportunity.id);\n      document.body.style.cursor = \"grabbing\";\n      announce(\n        `Arrastando card ${opportunity.title}. Solte em uma etapa para mover.`\n      );\n    },\n    [announce, canMoveCards]\n  );\n\n  const handleDragOver = useCallback(\n    (e: React.DragEvent, stage: PipelineStage) => {\n      if (!canMoveCards) return;\n      e.preventDefault();\n      e.dataTransfer.dropEffect = \"move\";\n      setDragOverStage(stage);\n\n      const column = e.currentTarget as HTMLElement;\n      const cardElements = column.querySelectorAll(\"[data-card-index]\");\n      let insertIndex = cardElements.length;\n\n      for (let i = 0; i < cardElements.length; i++) {\n        const rect = cardElements[i].getBoundingClientRect();\n        const midY = rect.top + rect.height / 2;\n        if (e.clientY < midY) {\n          insertIndex = i;\n          break;\n        }\n      }\n\n      setDropIndicator({ stage, index: insertIndex });\n\n      const target = e.currentTarget as HTMLElement;\n      const verticalContainer = target.closest(\"[data-pipe-column-scroll]\") as HTMLElement | null;\n      const horizontalContainer = target.closest(\"[data-pipe-board-scroll]\") as HTMLElement | null;\n\n      autoScrollStateRef.current = {\n        clientX: e.clientX,\n        clientY: e.clientY,\n        horizontalContainer,\n        verticalContainer,\n      };\n\n      if (autoScrollFrameRef.current === null) {\n        autoScrollFrameRef.current = window.requestAnimationFrame(runAutoScroll);\n      }\n    },\n    [canMoveCards, runAutoScroll]\n  );\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    const related = e.relatedTarget as Node | null;\n    // relatedTarget can be null in Chrome during drag — only clear if we\n    // truly left the column (related exists and is outside currentTarget)\n    if (related && !e.currentTarget.contains(related)) {\n      setDragOverStage(null);\n      setDropIndicator(null);\n    }\n  }, []);\n\n  const handleDrop = useCallback(\n    (e: React.DragEvent, targetStage: PipelineStage) => {\n      if (!canMoveCards) {\n        e.preventDefault();\n        announce(\"Voce nao tem permissao para mover oportunidades.\");\n        return;\n      }\n\n      e.preventDefault();\n      setDragOverStage(null);\n      setDropIndicator(null);\n      setColumnError(null);\n      document.body.style.cursor = \"\";\n      stopAutoScroll();\n\n      const card = dragCardRef.current;\n      if (!card) return;\n      setUpdatingCardId(card.id);\n\n      try {\n      const stageOrder = activeFunnel.stages.map((stage) => stage.id);\n      const sourceStageCards = localOpportunities.filter(\n        (opportunity) => opportunity.stage === card.stage\n      );\n      const sourceStageIndex = sourceStageCards.findIndex(\n        (opportunity) => opportunity.id === card.id\n      );\n\n      const rawDropIndex =\n        dropIndicator?.stage === targetStage\n          ? dropIndicator.index\n          : localOpportunities.filter((opportunity) => opportunity.stage === targetStage)\n            .length;\n\n      let normalizedDropIndex = rawDropIndex;\n      if (card.stage === targetStage && sourceStageIndex > -1 && sourceStageIndex < normalizedDropIndex) {\n        normalizedDropIndex -= 1;\n      }\n\n      if (\n        card.stage === targetStage &&\n        sourceStageIndex > -1 &&\n        normalizedDropIndex === sourceStageIndex\n      ) {\n        setDraggingCardId(null);\n        setDraggingCardStage(null);\n        dragCardRef.current = null;\n        setUpdatingCardId(null);\n        return;\n      }\n\n      const { missing, isRegression } = validateStageTransition(\n        card,\n        targetStage\n      );\n      const targetStageDef = activeFunnel.stages.find(\n        (stage) => stage.id === targetStage\n      );\n      const targetStageLabel = targetStageDef?.label ?? targetStage.replace(/-/g, \" \");\n\n      if (missing.length > 0) {\n        setColumnError({\n          stage: targetStage,\n          tone: \"error\",\n          cardId: card.id,\n          missingFields: missing,\n          targetStage,\n          message: `Para mover para ${targetStageLabel}, preencha: ${missing.join(\", \")}.`,\n        });\n        announce(`Aviso: campos pendentes — ${missing.join(\", \")}`);\n        setDraggingCardId(null);\n        setDraggingCardStage(null);\n        setDraggingOpportunity(null);\n        dragCardRef.current = null;\n        setUpdatingCardId(null);\n        runWithTimeout(() => setColumnError(null), 4200);\n        return;\n      }\n\n      if (isRegression) {\n        const fromLabel = activeFunnel.stages.find(\n          (stage) => stage.id === card.stage\n        )?.label ?? card.stage;\n        const toLabel = targetStageLabel;\n        setColumnError({\n          stage: targetStage,\n          tone: \"warning\",\n          message: `Card retrocedido de ${fromLabel} para ${toLabel}`,\n        });\n        announce(`Aviso: card retrocedido de ${fromLabel} para ${toLabel}`);\n        runWithTimeout(() => setColumnError(null), 4000);\n      }\n\n      const newSlaDeadline = targetStageDef\n        ? calculateSlaDeadline(targetStageDef.slaHours)\n        : undefined;\n\n      setLocalOpportunities((prev) => {\n        const sourceIndex = prev.findIndex((opportunity) => opportunity.id === card.id);\n        if (sourceIndex === -1) return prev;\n\n        const sourceCard = prev[sourceIndex];\n        const remaining = prev.filter((opportunity) => opportunity.id !== sourceCard.id);\n        const targetStageCards = remaining.filter(\n          (opportunity) => opportunity.stage === targetStage\n        );\n        const safeTargetIndex = clamp(\n          normalizedDropIndex,\n          0,\n          targetStageCards.length\n        );\n\n        const updatedCard: Opportunity = {\n          ...sourceCard,\n          stage: targetStage,\n          updatedAt: new Date().toISOString(),\n          slaDeadline: newSlaDeadline,\n        };\n\n        let insertIndex = remaining.length;\n        if (targetStageCards.length === 0) {\n          insertIndex = resolveInsertIndexForEmptyStage(\n            remaining,\n            targetStage,\n            stageOrder\n          );\n        } else if (safeTargetIndex >= targetStageCards.length) {\n          const anchorId = targetStageCards[targetStageCards.length - 1].id;\n          const anchorIndex = remaining.findIndex((opportunity) => opportunity.id === anchorId);\n          insertIndex = anchorIndex === -1 ? remaining.length : anchorIndex + 1;\n        } else {\n          const anchorId = targetStageCards[safeTargetIndex].id;\n          const anchorIndex = remaining.findIndex((opportunity) => opportunity.id === anchorId);\n          insertIndex = anchorIndex === -1 ? remaining.length : anchorIndex;\n        }\n\n        const next = [...remaining];\n        next.splice(insertIndex, 0, updatedCard);\n        return next;\n      });\n\n      if (card.stage === targetStage) {\n        setSuccessFeedback({\n          stage: targetStage,\n          message: `${card.title} reordenado na etapa.`,\n          cardId: card.id,\n        });\n        announce(`Card ${card.title} reordenado dentro da etapa.`);\n        runWithTimeout(() => setSuccessFeedback(null), 1800);\n      } else if (!isRegression) {\n        setSuccessFeedback({\n          stage: targetStage,\n          message: `${card.title} movido para ${targetStageLabel} agora.`,\n          cardId: card.id,\n        });\n        announce(\n          `Card ${card.title} movido com sucesso para ${targetStageLabel}`\n        );\n        runWithTimeout(() => setSuccessFeedback(null), 2500);\n      } else {\n        setSuccessFeedback({\n          stage: targetStage,\n          message: `${card.title} retrocedido para ${targetStageLabel}.`,\n          cardId: card.id,\n        });\n        runWithTimeout(() => setSuccessFeedback(null), 2300);\n      }\n\n      setRecentlyMovedCardId(card.id);\n      runWithTimeout(() => setRecentlyMovedCardId((prev) => (prev === card.id ? null : prev)), 2600);\n      runWithTimeout(() => setUpdatingCardId((prev) => (prev === card.id ? null : prev)), 850);\n\n      } finally {\n        setDraggingCardId(null);\n        setDraggingCardStage(null);\n        setDraggingOpportunity(null);\n        dragCardRef.current = null;\n        document.body.style.cursor = \"\";\n      }\n    },\n    [\n      activeFunnel,\n      announce,\n      canMoveCards,\n      dropIndicator,\n      localOpportunities,\n      runWithTimeout,\n      setLocalOpportunities,\n      stopAutoScroll,\n    ]\n  );\n\n  const handleDragEnd = useCallback(() => {\n    setDraggingCardId(null);\n    setDraggingCardStage(null);\n    setDraggingOpportunity(null);\n    setDragOverStage(null);\n    setDropIndicator(null);\n    dragCardRef.current = null;\n    document.body.style.cursor = \"\";\n    stopAutoScroll();\n  }, [stopAutoScroll]);\n\n  return {\n    draggingCardId,\n    draggingCardStage,\n    draggingOpportunity,\n    dragOverStage,\n    dropIndicator,\n    columnError,\n    setColumnError,\n    successFeedback,\n    updatingCardId,\n    recentlyMovedCardId,\n    handleDragStart,\n    handleDragOver,\n    handleDragLeave,\n    handleDrop,\n    handleDragEnd,\n  };\n}\n","\"use client\";\n\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport type { PipelineStage } from \"@/types\";\nimport {\n  type StageCustomization,\n  stageColorPalette,\n  loadStageCustomizations,\n  saveStageCustomizations,\n} from \"../lib/pipeline-config\";\n\nconst RENAME_MIN_LENGTH = 2;\nconst RENAME_MAX_LENGTH = 30;\n\nexport function useStageCustomization() {\n  const [stageCustomizations, setStageCustomizations] = useState<\n    Record<string, StageCustomization>\n  >(() => loadStageCustomizations());\n\n  const [renamingStage, setRenamingStage] = useState<PipelineStage | null>(null);\n  const [renameValue, setRenameValue] = useState(\"\");\n  const [renameError, setRenameError] = useState<string | null>(null);\n  const renameInputRef = useRef<HTMLInputElement>(null);\n\n  // Persist stage customizations to localStorage on every change\n  useEffect(() => {\n    saveStageCustomizations(stageCustomizations);\n  }, [stageCustomizations]);\n\n  const startRename = useCallback(\n    (stageId: PipelineStage, currentLabel: string) => {\n      setRenamingStage(stageId);\n      setRenameValue(currentLabel);\n      setRenameError(null);\n      setTimeout(() => renameInputRef.current?.focus(), 50);\n    },\n    []\n  );\n\n  const confirmRename = useCallback(() => {\n    if (!renamingStage) return;\n\n    const trimmed = renameValue.trim();\n\n    if (trimmed.length < RENAME_MIN_LENGTH) {\n      setRenameError(`Mínimo ${RENAME_MIN_LENGTH} caracteres`);\n      renameInputRef.current?.focus();\n      return;\n    }\n\n    if (trimmed.length > RENAME_MAX_LENGTH) {\n      setRenameError(`Máximo ${RENAME_MAX_LENGTH} caracteres`);\n      renameInputRef.current?.focus();\n      return;\n    }\n\n    setStageCustomizations((prev) => ({\n      ...prev,\n      [renamingStage]: {\n        ...prev[renamingStage],\n        label: trimmed,\n      },\n    }));\n    setRenamingStage(null);\n    setRenameValue(\"\");\n    setRenameError(null);\n  }, [renamingStage, renameValue]);\n\n  const cancelRename = useCallback(() => {\n    setRenamingStage(null);\n    setRenameValue(\"\");\n    setRenameError(null);\n  }, []);\n\n  const setStageColor = useCallback(\n    (stageId: PipelineStage, colorId: string) => {\n      setStageCustomizations((prev) => ({\n        ...prev,\n        [stageId]: { ...prev[stageId], colorId },\n      }));\n    },\n    []\n  );\n\n  const getStageColor = useCallback(\n    (stageId: PipelineStage) => {\n      const colorId = stageCustomizations[stageId]?.colorId || \"default\";\n      return (\n        stageColorPalette.find((c) => c.id === colorId) ?? stageColorPalette[0]\n      );\n    },\n    [stageCustomizations]\n  );\n\n  return {\n    stageCustomizations,\n    renamingStage,\n    renameValue,\n    renameError,\n    setRenameValue,\n    renameInputRef,\n    startRename,\n    confirmRename,\n    cancelRename,\n    setStageColor,\n    getStageColor,\n  };\n}\n","\"use client\";\n\nimport { useRef, useCallback } from \"react\";\nimport {\n  MoreHorizontal,\n  Clock3,\n  AlertTriangle,\n  MapPin,\n  Tags,\n  CalendarClock,\n  CheckCircle2,\n} from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { cn } from \"@/lib/cn\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport type { Opportunity } from \"@/types\";\nimport { formatCurrencyBRL } from \"@/lib/business-rules\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { getInitials, getSlaStatus, getSlaColors } from \"../lib/pipeline-validation\";\n\n// ===================================================================\n// DealCardBento -- Card Spec padronizado\n// ===================================================================\n//\n// Slots fixos:\n//   1. Header row:  title (ellipsis) + menu \"...\"\n//   2. Sub row:     client name (ellipsis) + owner avatar chip\n//   3. Meta row:    value (currency) + SLA countdown\n//   4. Tags row:    max 2 tags + \"+N\" chip (conditional)\n//   5. Temperature: bottom-right indicator\n//\n// Estados: default, hover, focus-visible, dragging (ghost via parent)\n\ninterface DealCardBentoProps {\n  opportunity: Opportunity;\n  temp: { icon: React.ReactNode; label: string; colorClass: string };\n  isDragging?: boolean;\n  isUpdating?: boolean;\n  isHighlighted?: boolean;\n  canMove?: boolean;\n  canEdit?: boolean;\n  canCreateActivity?: boolean;\n  onOpen: () => void;\n  onDragStart: (e: React.DragEvent) => void;\n  onDragEnd: () => void;\n  inlineFeedback?: {\n    tone: \"success\" | \"warning\" | \"error\";\n    message: string;\n    actionLabel?: string;\n    onAction?: () => void;\n  } | null;\n  onTagClick?: (tag: string) => void;\n}\n\nfunction formatElapsed(isoDate: string): string {\n  const base = new Date(isoDate);\n  const now = new Date();\n  const diffMs = Math.max(0, now.getTime() - base.getTime());\n  const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n\n  if (diffHours < 1) return \"<1h\";\n  if (diffHours < 24) return `${diffHours}h`;\n  const diffDays = Math.floor(diffHours / 24);\n  if (diffDays < 30) return `${diffDays}d`;\n  const diffMonths = Math.floor(diffDays / 30);\n  return `${Math.max(1, diffMonths)}m`;\n}\n\nfunction getTemperatureChipClassesByLabel(label: string) {\n  switch (label) {\n    case \"Quente\":\n      return \"border-red-200 bg-red-50 text-red-700\";\n    case \"Morno\":\n      return \"border-amber-200 bg-amber-50 text-amber-700\";\n    case \"Frio\":\n      return \"border-sky-200 bg-sky-50 text-sky-700\";\n    default:\n      return \"border-zinc-200 bg-zinc-50 text-zinc-600\";\n  }\n}\n\nfunction getPriorityVisual(\n  opportunity: Opportunity,\n  slaStatus: \"ok\" | \"near\" | \"breached\",\n  computedTempLabel: string,\n) {\n  if (slaStatus === \"breached\") {\n    return {\n      label: \"Critica\",\n      className: \"border-red-200 bg-red-50 text-red-700\",\n    };\n  }\n\n  if (computedTempLabel === \"Quente\" || opportunity.value >= 20000) {\n    return {\n      label: \"Alta\",\n      className: \"border-amber-200 bg-amber-50 text-amber-700\",\n    };\n  }\n\n  return {\n    label: \"Normal\",\n    className: \"border-zinc-200 bg-zinc-50 text-zinc-600\",\n  };\n}\n\nexport function DealCardBento({\n  opportunity,\n  temp,\n  isDragging,\n  isUpdating,\n  isHighlighted,\n  canMove = true,\n  canEdit = true,\n  canCreateActivity = true,\n  onOpen,\n  onDragStart,\n  onDragEnd,\n  inlineFeedback,\n  onTagClick,\n}: DealCardBentoProps) {\n  const { openDrawer, openModal } = useUIStore();\n  const wasDraggingRef = useRef(false);\n  const sla = getSlaStatus(opportunity.slaDeadline);\n  const slaColors = getSlaColors(sla.status);\n  const priority = getPriorityVisual(opportunity, sla.status, temp.label);\n  const primarySegment = opportunity.tags[0] ?? \"Sem segmento\";\n\n  const handleDragStartInternal = useCallback(\n    (e: React.DragEvent) => {\n      wasDraggingRef.current = true;\n      onDragStart(e);\n    },\n    [onDragStart]\n  );\n\n  const handleDragEndInternal = useCallback(() => {\n    // Keep wasDragging flag set for the click event that fires after dragEnd\n    setTimeout(() => {\n      wasDraggingRef.current = false;\n    }, 0);\n    onDragEnd();\n  }, [onDragEnd]);\n\n  const handleClick = useCallback(() => {\n    if (wasDraggingRef.current) return;\n    onOpen();\n  }, [onOpen]);\n\n  return (\n    <div\n      className={`group relative rounded-[22px] border border-zinc-200/90 border-l-[3px] ${slaColors.border} bg-white p-4 shadow-[var(--shadow-bento-sm)] transition-all duration-300 hover:-translate-y-[1.5px] hover:shadow-[0_8px_24px_-10px_rgba(0,0,0,0.08)] focus-within:ring-2 focus-within:ring-brand/40 active:scale-[0.98] ${isDragging\n        ? \"cursor-grabbing shadow-[0_14px_30px_-18px_rgba(15,23,42,0.38)] scale-[1.02]\"\n        : canMove\n          ? \"cursor-grab\"\n          : \"cursor-pointer\"\n        } ${isUpdating ? \"opacity-60 saturate-50 pointer-events-none\" : \"\"} ${isHighlighted\n          ? \"ring-2 ring-emerald-300/70\"\n          : \"\"\n        }`}\n      onClick={handleClick}\n      draggable={canMove}\n      onDragStart={handleDragStartInternal}\n      onDragEnd={handleDragEndInternal}\n      tabIndex={0}\n      role=\"button\"\n      aria-roledescription=\"card arrastavel\"\n      aria-label={`${opportunity.title}, ${formatCurrencyBRL(opportunity.value)}, prioridade ${priority.label}`}\n      onKeyDown={(e) => {\n        if (e.key === \"Enter\" || e.key === \" \") {\n          e.preventDefault();\n          onOpen();\n        }\n      }}\n    >\n      {/* 1. Linha principal: nome + prioridade + acoes */}\n      <div className=\"flex items-start gap-2\">\n        <span className=\"min-w-0 flex-1 truncate font-heading text-[17px] font-semibold text-zinc-950\">\n          {opportunity.title}\n        </span>\n        <span\n          className={`inline-flex h-6 shrink-0 items-center rounded-full border px-2.5 text-[11px] font-semibold ${priority.className}`}\n        >\n          {priority.label}\n        </span>\n\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <button\n              className=\"flex h-7 w-7 shrink-0 items-center justify-center rounded-lg text-zinc-400 opacity-0 transition-opacity hover:bg-zinc-100 hover:text-zinc-600 group-hover:opacity-100 focus:opacity-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand\"\n              onClick={(e) => e.stopPropagation()}\n              onPointerDown={(e) => e.stopPropagation()}\n              aria-label=\"Acoes da oportunidade\"\n            >\n              <MoreHorizontal className=\"h-3.5 w-3.5\" />\n            </button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent\n            align=\"end\"\n            className=\"rounded-[var(--radius-bento-card)]\"\n            onClick={(e) => e.stopPropagation()}\n            onCloseAutoFocus={(e) => e.preventDefault()}\n          >\n            <DropdownMenuItem\n              disabled={!canEdit}\n              onClick={(e) => {\n                e.stopPropagation();\n                onOpen();\n              }}\n            >\n              Editar\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              disabled={!canCreateActivity}\n              onClick={(e) => {\n                e.stopPropagation();\n                openDrawer(\"new-activity\", {\n                  opportunityId: opportunity.id,\n                });\n              }}\n            >\n              Nova atividade\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem\n              disabled={!canEdit}\n              className=\"text-status-success\"\n              onClick={(e) => {\n                e.stopPropagation();\n                openModal(\"win-opportunity\", { opportunityId: opportunity.id });\n              }}\n            >\n              Marcar como Ganho\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              disabled={!canEdit}\n              className=\"text-status-danger\"\n              onClick={(e) => {\n                e.stopPropagation();\n                openModal(\"lose-opportunity\", { opportunityId: opportunity.id });\n              }}\n            >\n              Marcar como Perdido\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n\n      {/* 2. Valor + temperatura */}\n      <div className=\"mt-2 flex items-center justify-between gap-2\">\n        <span className=\"font-heading text-[20px] font-bold tracking-tight text-zinc-950\">\n          {opportunity.value > 0\n            ? formatCurrencyBRL(opportunity.value)\n            : \"Sem valor\"}\n        </span>\n        <span\n          className={`inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-[11px] font-semibold ${getTemperatureChipClassesByLabel(temp.label)}`}\n        >\n          {temp.icon}\n          {temp.label}\n        </span>\n      </div>\n\n      {/* 3. Localizacao + segmento */}\n      <div className=\"mt-2 flex items-center justify-between gap-2 text-[12px] text-zinc-600\">\n        <span className=\"inline-flex min-w-0 flex-1 items-center gap-1.5 truncate\">\n          <MapPin className=\"h-3.5 w-3.5 shrink-0 text-zinc-400\" />\n          {opportunity.neighborhood || \"Sem localizacao\"}\n        </span>\n        <span\n          className={cn(\"inline-flex shrink-0 items-center gap-1 rounded-full border border-zinc-200 bg-zinc-50 px-2.5 py-1 text-[11px] font-medium text-zinc-600 transition-colors\",\n            onTagClick && primarySegment !== \"Sem segmento\" && \"cursor-pointer hover:bg-zinc-100 hover:text-zinc-900\"\n          )}\n          onClick={(e) => {\n            if (onTagClick && primarySegment !== \"Sem segmento\") {\n              e.stopPropagation();\n              onTagClick(primarySegment);\n            }\n          }}\n        >\n          <Tags className=\"h-3 w-3\" />\n          {primarySegment}\n        </span>\n      </div>\n\n      {/* 4. Ultima atividade + idade do card */}\n      <div className=\"mt-2.5 grid grid-cols-2 gap-2 text-[11px] text-zinc-500\">\n        <span className=\"inline-flex items-center gap-1.5\">\n          <Clock3 className=\"h-3.5 w-3.5 shrink-0 text-zinc-400\" />\n          Ultima atividade {formatElapsed(opportunity.updatedAt)}\n        </span>\n        <span className=\"inline-flex items-center justify-end gap-1.5 text-right\">\n          <CalendarClock className=\"h-3.5 w-3.5 shrink-0 text-zinc-400\" />\n          No pipeline ha {formatElapsed(opportunity.createdAt)}\n        </span>\n      </div>\n\n      {/* 5. SLA + owner */}\n      <div className=\"mt-2.5 flex items-center justify-between gap-2\">\n        <span\n          className={`inline-flex min-w-0 items-center gap-1.5 rounded-full border px-2.5 py-1 text-[11px] font-semibold ${sla.status === \"breached\"\n            ? \"border-red-200 bg-red-50 text-red-700\"\n            : sla.status === \"near\"\n              ? \"border-amber-200 bg-amber-50 text-amber-700\"\n              : \"border-zinc-200 bg-zinc-50 text-zinc-600\"\n            }`}\n        >\n          {sla.status === \"breached\" ? (\n            <AlertTriangle className=\"h-3.5 w-3.5\" />\n          ) : (\n            <Clock3 className=\"h-3.5 w-3.5\" />\n          )}\n          {sla.status === \"breached\" ? \"Estourado\" : `SLA ${sla.label || \"ok\"}`}\n        </span>\n\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <span className=\"flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-zinc-900 font-heading text-[10px] font-semibold text-white\">\n              {getInitials(opportunity.responsibleName)}\n            </span>\n          </TooltipTrigger>\n          <TooltipContent>{opportunity.responsibleName}</TooltipContent>\n        </Tooltip>\n      </div>\n\n      {/* Tags extras */}\n      {opportunity.tags.length > 0 && (\n        <div className=\"mt-3 flex flex-wrap items-center gap-1.5\">\n          {opportunity.tags.slice(0, 2).map((tag: string, idx: number) => (\n            <Badge\n              key={idx}\n              variant=\"secondary\"\n              className={cn(\"shrink-0 rounded-full border border-zinc-200 bg-zinc-50 px-2 py-0.5 font-body text-[10px] text-zinc-600 transition-colors\",\n                onTagClick && \"cursor-pointer hover:bg-zinc-100 hover:text-zinc-900\"\n              )}\n              onClick={(e) => {\n                if (onTagClick) {\n                  e.stopPropagation();\n                  onTagClick(tag);\n                }\n              }}\n            >\n              {tag}\n            </Badge>\n          ))}\n          {opportunity.tags.length > 2 && (\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Badge\n                  variant=\"secondary\"\n                  className=\"shrink-0 rounded-full border border-zinc-200 bg-zinc-50 px-2 py-0.5 font-body text-[10px] text-zinc-600\"\n                >\n                  +{opportunity.tags.length - 2}\n                </Badge>\n              </TooltipTrigger>\n              <TooltipContent>\n                {opportunity.tags.slice(2).join(\", \")}\n              </TooltipContent>\n            </Tooltip>\n          )}\n        </div>\n      )}\n\n      {inlineFeedback ? (\n        <div\n          className={`mt-3 rounded-xl border px-2.5 py-2 text-[11px] ${inlineFeedback.tone === \"error\"\n            ? \"border-red-200 bg-red-50 text-red-700\"\n            : inlineFeedback.tone === \"warning\"\n              ? \"border-amber-200 bg-amber-50 text-amber-700\"\n              : \"border-emerald-200 bg-emerald-50 text-emerald-700\"\n            }`}\n          role={inlineFeedback.tone === \"error\" ? \"alert\" : \"status\"}\n        >\n          <div className=\"flex items-start gap-1.5\">\n            {inlineFeedback.tone === \"success\" ? (\n              <CheckCircle2 className=\"mt-0.5 h-3.5 w-3.5 shrink-0\" />\n            ) : (\n              <AlertTriangle className=\"mt-0.5 h-3.5 w-3.5 shrink-0\" />\n            )}\n            <div className=\"min-w-0 flex-1\">\n              <p>{inlineFeedback.message}</p>\n              {inlineFeedback.actionLabel && inlineFeedback.onAction ? (\n                <button\n                  type=\"button\"\n                  onClick={(event) => {\n                    event.stopPropagation();\n                    inlineFeedback.onAction?.();\n                  }}\n                  className=\"mt-1 font-semibold underline underline-offset-2\"\n                >\n                  {inlineFeedback.actionLabel}\n                </button>\n              ) : null}\n            </div>\n          </div>\n        </div>\n      ) : null}\n\n      <span className=\"sr-only\">{sla.detailLabel}</span>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\nexport function PipelineSkeleton({ stageCount }: { stageCount: number }) {\n  return (\n    <div className=\"flex h-[calc(100vh-64px)] flex-col overflow-hidden\">\n      {/* Header skeleton */}\n      <div className=\"shrink-0 space-y-3 pb-4\">\n        <div className=\"flex flex-wrap items-start justify-between gap-3\">\n          <div className=\"space-y-2\">\n            <Skeleton className=\"h-7 w-52\" />\n            <Skeleton className=\"h-4 w-72\" />\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Skeleton className=\"h-9 w-[180px] rounded-full\" />\n            <Skeleton className=\"h-9 w-20 rounded-full\" />\n            <Skeleton className=\"h-9 w-16 rounded-full\" />\n            <Skeleton className=\"h-9 w-28 rounded-full\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Board skeleton */}\n      <div className=\"flex flex-1 gap-3 overflow-hidden px-7 pb-2\">\n        {Array.from({ length: stageCount }).map((_, i) => (\n          <div\n            key={i}\n            className=\"flex w-[320px] shrink-0 flex-col rounded-[var(--radius-bento-card)] bg-zinc-50/80 p-3\"\n          >\n            {/* Column header skeleton */}\n            <div className=\"mb-3 flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Skeleton className=\"h-2.5 w-2.5 rounded-full\" />\n                <Skeleton className=\"h-4 w-24\" />\n                <Skeleton className=\"h-4 w-6 rounded-md\" />\n              </div>\n              <Skeleton className=\"h-4 w-16\" />\n            </div>\n\n            {/* Card skeletons */}\n            {Array.from({ length: 2 - (i % 2) }).map((_, j) => (\n              <div\n                key={j}\n                className=\"mb-2 rounded-[var(--radius-bento-card)] border border-zinc-200 bg-white p-3\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <Skeleton className=\"h-4 w-32\" />\n                  <Skeleton className=\"h-4 w-4 rounded\" />\n                </div>\n                <div className=\"mt-2 flex items-center gap-2\">\n                  <Skeleton className=\"h-3 w-28\" />\n                  <Skeleton className=\"h-6 w-6 rounded-full\" />\n                </div>\n                <div className=\"mt-2 flex items-center justify-between\">\n                  <Skeleton className=\"h-4 w-20\" />\n                  <Skeleton className=\"h-3 w-12\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport {\n  useState,\n  useCallback,\n  useRef,\n  useMemo,\n  useEffect,\n  Suspense,\n} from \"react\";\nimport {\n  Search,\n  Filter,\n  X,\n  Palette,\n  Check,\n  CheckCircle2,\n  AlertTriangle,\n  CircleDollarSign,\n  Columns3,\n  ChevronDown,\n  Settings2,\n  Plus,\n  Sparkles,\n  Flame,\n  TimerReset,\n} from \"lucide-react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useUIStore } from \"@/stores/ui-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport {\n  calculateTemperature,\n  formatCurrencyBRL,\n} from \"@/lib/business-rules\";\nimport { screenContainer, sectionEnter, listItemReveal } from \"@/lib/motion\";\nimport { cn } from \"@/lib/cn\";\nimport {\n  funnels,\n  stageColorPalette,\n  temperatureConfig,\n} from \"./lib/pipeline-config\";\nimport type { PipelineStage, Opportunity } from \"@/types\";\nimport { getSlaStatus, validateStageTransition } from \"./lib/pipeline-validation\";\nimport { usePipelineBoard } from \"./hooks/use-pipeline-board\";\nimport { useStageCustomization } from \"./hooks/use-stage-customization\";\nimport { DealCardBento } from \"./components/deal-card-bento\";\nimport { PipelineSkeleton } from \"./components/pipeline-skeleton\";\nimport { ModuleCommandHeader } from \"@/components/shared/module-command-header\";\n\nconst FILTERS_APPLIED_EVENT = \"flow:filters-applied\";\nconst STALE_ACTIVITY_DAYS = 5;\nconst SLA_RISK_WINDOW_HOURS = 24;\ntype GlobalPipesFilters = {\n  responsible: string[];\n  stage: string[];\n  temperature: string[];\n  tags: string[];\n  dateStart: string;\n  dateEnd: string;\n  valueMin: string;\n  valueMax: string;\n  overdue: boolean;\n  stale: boolean;\n  risk?: boolean;\n};\n\nconst WIP_LIMIT_BY_STAGE: Record<PipelineStage, number> = {\n  \"lead-in\": 9,\n  \"contato-feito\": 8,\n  \"reuniao-agendada\": 7,\n  \"proposta-enviada\": 7,\n  negociacao: 6,\n  fechamento: 5,\n};\n\nfunction isStaleOpportunity(opportunity: Opportunity): boolean {\n  const updatedAt = new Date(opportunity.updatedAt).getTime();\n  const staleThreshold = Date.now() - STALE_ACTIVITY_DAYS * 24 * 60 * 60 * 1000;\n  return updatedAt < staleThreshold;\n}\n\nfunction isSlaRiskOpportunity(opportunity: Opportunity): boolean {\n  if (!opportunity.slaDeadline) return false;\n  const deadline = new Date(opportunity.slaDeadline).getTime();\n  const hoursLeft = (deadline - Date.now()) / (1000 * 60 * 60);\n  return hoursLeft > 0 && hoursLeft <= SLA_RISK_WINDOW_HOURS;\n}\n\nfunction createEmptyPipesFilters(): GlobalPipesFilters {\n  return {\n    responsible: [],\n    stage: [],\n    temperature: [],\n    tags: [],\n    dateStart: \"\",\n    dateEnd: \"\",\n    valueMin: \"\",\n    valueMax: \"\",\n    overdue: false,\n    stale: false,\n    risk: false,\n  };\n}\n\nfunction getStageParamLabel(stage: PipelineStage) {\n  return stage\n    .replace(/-/g, \" \")\n    .replace(/\\b\\w/g, (char) => char.toUpperCase());\n}\n\nfunction PipesPageContent() {\n  const { openDrawer, openModal } = useUIStore();\n  const { user, permissions } = useAuthStore();\n  const storeOpportunities = useOpportunityStore((state) => state.opportunities);\n  const replaceOpportunities = useOpportunityStore((state) => state.replaceOpportunities);\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const userId = user?.id ?? null;\n\n  const canCreateOpportunity = permissions?.canCreateOpportunity ?? false;\n  const canMoveCards = permissions?.canEditOpportunity ?? false;\n  const canCreateActivity = permissions?.canCreateActivity ?? false;\n  const canConfigureStages = permissions?.canManageSettings ?? false;\n  const canViewAllUnits = permissions?.canViewAllUnits ?? false;\n\n  const [selectedFunnel, setSelectedFunnel] = useState(\"comercial\");\n  const [colorPopoverStage, setColorPopoverStage] = useState<PipelineStage | null>(null);\n  const [filtersInlineFeedback, setFiltersInlineFeedback] = useState<{\n    tone: \"success\" | \"error\" | \"info\";\n    message: string;\n  } | null>(null);\n  const opportunities = useMemo(() => {\n    const openOpportunities = storeOpportunities.filter((opportunity) => opportunity.status === \"open\");\n    if (canViewAllUnits || !userId) {\n      return openOpportunities;\n    }\n    return openOpportunities.filter((opportunity) => opportunity.responsibleId === userId);\n  }, [canViewAllUnits, storeOpportunities, userId]);\n\n  useEffect(() => {\n    const opportunityId = searchParams.get(\"opportunityId\");\n    if (!opportunityId) return;\n\n    const opportunity = opportunities.find((candidate) => candidate.id === opportunityId);\n    let feedbackTimeoutId: number | null = null;\n    if (!opportunity) {\n      feedbackTimeoutId = window.setTimeout(() => {\n        setFiltersInlineFeedback({\n          tone: \"error\",\n          message: \"Não foi possível abrir o card. Oportunidade não encontrada no escopo atual.\",\n        });\n      }, 0);\n    } else {\n      openModal(\"lead-card\", {\n        id: opportunityId,\n        opportunitySnapshot: opportunity,\n      });\n    }\n\n    const nextParams = new URLSearchParams(searchParams.toString());\n    nextParams.delete(\"opportunityId\");\n    const serialized = nextParams.toString();\n    router.replace(serialized ? `/pipes?${serialized}` : \"/pipes\", {\n      scroll: false,\n    });\n    return () => {\n      if (feedbackTimeoutId) {\n        window.clearTimeout(feedbackTimeoutId);\n      }\n    };\n  }, [openModal, opportunities, router, searchParams]);\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [searchInputValue, setSearchInputValue] = useState(\"\");\n  const [isMobileSearchOpen, setIsMobileSearchOpen] = useState(false);\n  const [globalPipesFilters, setGlobalPipesFilters] = useState<GlobalPipesFilters | null>(null);\n\n  useEffect(() => {\n    const rawFilterParam = searchParams.get(\"filter\") ?? searchParams.get(\"filters\");\n    if (!rawFilterParam) return;\n    const filterTokens = rawFilterParam\n      .split(\",\")\n      .map((token) => token.trim())\n      .filter(Boolean);\n\n    const frameId = window.requestAnimationFrame(() => {\n      setGlobalPipesFilters((prev) => {\n        const base = prev ?? createEmptyPipesFilters();\n        const next: GlobalPipesFilters = {\n          ...base,\n          overdue: false,\n          stale: false,\n          risk: false,\n        };\n\n        for (const token of filterTokens) {\n          if (token === \"sla_overdue\") next.overdue = true;\n          if (token === \"sla_risk\" || token === \"risk\") next.risk = true;\n          if (\n            token === \"stale\" ||\n            token === \"stalled\" ||\n            token === \"no_activity\"\n          ) {\n            next.stale = true;\n          }\n        }\n\n        if (\n          base.overdue === next.overdue &&\n          base.stale === next.stale &&\n          Boolean(base.risk) === Boolean(next.risk)\n        ) {\n          return prev ?? next;\n        }\n\n        return next;\n      });\n    });\n    return () => window.cancelAnimationFrame(frameId);\n  }, [searchParams]);\n\n  const searchInputRef = useRef<HTMLInputElement>(null);\n  const mobileSearchInputRef = useRef<HTMLInputElement>(null);\n  const liveRegionRef = useRef<HTMLDivElement>(null);\n\n  const activeFunnel = funnels.find((funnel) => funnel.id === selectedFunnel) ?? funnels[0];\n\n  const activeStageIds = useMemo(\n    () => activeFunnel.stages.map((stage) => stage.id),\n    [activeFunnel]\n  );\n\n  const stageFilter = useMemo(() => {\n    const raw = searchParams.get(\"stage\") ?? searchParams.get(\"stageId\");\n    if (!raw) return null;\n    const candidate = raw as PipelineStage;\n    return activeStageIds.includes(candidate) ? candidate : null;\n  }, [searchParams, activeStageIds]);\n\n  const visibleStages = useMemo(\n    () =>\n      stageFilter\n        ? activeFunnel.stages.filter((stage) => stage.id === stageFilter)\n        : activeFunnel.stages,\n    [activeFunnel, stageFilter]\n  );\n\n  const effectiveStageIds = useMemo(\n    () => (stageFilter ? [stageFilter] : activeStageIds),\n    [stageFilter, activeStageIds]\n  );\n\n  const setScopedOpportunities = useCallback(\n    (\n      next:\n        | Opportunity[]\n        | ((previous: Opportunity[]) => Opportunity[])\n    ) => {\n      const previousScoped = opportunities;\n      const nextScoped =\n        typeof next === \"function\" ? next(previousScoped) : next;\n      const scopedIds = new Set(previousScoped.map((opportunity) => opportunity.id));\n      const nextScopedById = new Map(\n        nextScoped.map((opportunity) => [opportunity.id, opportunity])\n      );\n      const nextGlobal = storeOpportunities.map((opportunity) => {\n        if (!scopedIds.has(opportunity.id)) return opportunity;\n        return nextScopedById.get(opportunity.id) ?? opportunity;\n      });\n\n      for (const opportunity of nextScoped) {\n        if (!storeOpportunities.some((current) => current.id === opportunity.id)) {\n          nextGlobal.push(opportunity);\n        }\n      }\n\n      replaceOpportunities(nextGlobal);\n    },\n    [opportunities, replaceOpportunities, storeOpportunities]\n  );\n\n  const announce = useCallback((message: string) => {\n    if (liveRegionRef.current) {\n      liveRegionRef.current.textContent = message;\n    }\n  }, []);\n\n  useEffect(() => {\n    const timer = window.setTimeout(() => setIsLoading(false), 600);\n    return () => window.clearTimeout(timer);\n  }, []);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n\n    const handleFiltersApplied = (event: Event) => {\n      const customEvent = event as CustomEvent<{\n        context?: string;\n        count?: number;\n        filters?: GlobalPipesFilters;\n      }>;\n      if (customEvent.detail?.context !== \"pipes\") return;\n\n      if (customEvent.detail?.filters) {\n        setGlobalPipesFilters(customEvent.detail.filters);\n      }\n      const count = Number(customEvent.detail?.count ?? 0);\n      if (Number.isFinite(count) && count >= 0) {\n        setFiltersInlineFeedback({\n          tone: \"success\",\n          message:\n            count > 0\n              ? `${count} filtro(s) aplicado(s) no pipeline.`\n              : \"Filtros aplicados. Nenhum critério ativo.\",\n        });\n      }\n    };\n\n    window.addEventListener(FILTERS_APPLIED_EVENT, handleFiltersApplied as EventListener);\n    return () =>\n      window.removeEventListener(\n        FILTERS_APPLIED_EVENT,\n        handleFiltersApplied as EventListener\n      );\n  }, []);\n\n  useEffect(() => {\n    if (!filtersInlineFeedback) return;\n    const timer = window.setTimeout(() => setFiltersInlineFeedback(null), 2200);\n    return () => window.clearTimeout(timer);\n  }, [filtersInlineFeedback]);\n\n  useEffect(() => {\n    const timer = window.setTimeout(() => {\n      setSearchQuery(searchInputValue);\n    }, 250);\n    return () => window.clearTimeout(timer);\n  }, [searchInputValue]);\n\n  const normalizedSearch = useMemo(\n    () => searchQuery.toLowerCase().trim(),\n    [searchQuery]\n  );\n\n  const activeCards = useMemo(\n    () => opportunities.filter((opportunity) => effectiveStageIds.includes(opportunity.stage)),\n    [effectiveStageIds, opportunities]\n  );\n\n  const averageDealValue = useMemo(() => {\n    if (activeCards.length === 0) return 10000;\n    return activeCards.reduce((acc, opportunity) => acc + opportunity.value, 0) / activeCards.length;\n  }, [activeCards]);\n\n  const resolveTemperature = useCallback(\n    (opportunity: Opportunity) => calculateTemperature(opportunity, averageDealValue),\n    [averageDealValue]\n  );\n\n  const getTemp = useCallback(\n    (opportunity: Opportunity) => temperatureConfig[resolveTemperature(opportunity)],\n    [resolveTemperature]\n  );\n\n  const opportunitiesByStage = useMemo(() => {\n    const grouped: Record<PipelineStage, Opportunity[]> = {\n      \"lead-in\": [],\n      \"contato-feito\": [],\n      \"reuniao-agendada\": [],\n      \"proposta-enviada\": [],\n      negociacao: [],\n      fechamento: [],\n    };\n\n    for (const opportunity of opportunities) {\n      if (!effectiveStageIds.includes(opportunity.stage)) continue;\n\n      if (normalizedSearch) {\n        const textMatch =\n          opportunity.title.toLowerCase().includes(normalizedSearch) ||\n          opportunity.clientName.toLowerCase().includes(normalizedSearch) ||\n          opportunity.tags.some((tag) => tag.toLowerCase().includes(normalizedSearch));\n\n        const numericSearch = normalizedSearch.replace(/\\D/g, \"\");\n        const valueMatch = numericSearch.length > 0 && String(opportunity.value).includes(numericSearch);\n\n        if (!textMatch && !valueMatch) {\n          continue;\n        }\n      }\n\n      const computedTemperature = resolveTemperature(opportunity);\n\n      if (globalPipesFilters) {\n        if (globalPipesFilters.temperature?.length > 0 && !globalPipesFilters.temperature.includes(computedTemperature)) continue;\n        if (globalPipesFilters.responsible?.length > 0 && !globalPipesFilters.responsible.includes(opportunity.responsibleId)) continue;\n        if (globalPipesFilters.tags?.length > 0 && !globalPipesFilters.tags.some(t => opportunity.tags.includes(t))) continue;\n        if (globalPipesFilters.overdue && getSlaStatus(opportunity.slaDeadline).status !== \"breached\") continue;\n        if (globalPipesFilters.risk && !isSlaRiskOpportunity(opportunity)) continue;\n        if (globalPipesFilters.stale && !isStaleOpportunity(opportunity)) continue;\n        if (globalPipesFilters.stage?.length > 0 && !globalPipesFilters.stage.includes(opportunity.stage)) continue;\n\n        const referenceDate = (opportunity.expectedCloseDate ?? opportunity.updatedAt).slice(0, 10);\n        if (globalPipesFilters.dateStart && referenceDate < globalPipesFilters.dateStart) continue;\n        if (globalPipesFilters.dateEnd && referenceDate > globalPipesFilters.dateEnd) continue;\n\n        const valueMin = Number(globalPipesFilters.valueMin || 0);\n        if (Number.isFinite(valueMin) && valueMin > 0 && opportunity.value < valueMin) continue;\n        const valueMax = Number(globalPipesFilters.valueMax || 0);\n        if (Number.isFinite(valueMax) && valueMax > 0 && opportunity.value > valueMax) continue;\n      }\n\n      grouped[opportunity.stage].push(opportunity);\n    }\n\n    return grouped;\n  }, [\n    opportunities,\n    effectiveStageIds,\n    normalizedSearch,\n    resolveTemperature,\n    globalPipesFilters,\n  ]);\n\n  const boardMetrics = useMemo(() => {\n    const allVisibleCards = Object.values(opportunitiesByStage).flat();\n\n    return {\n      totalCards: allVisibleCards.length,\n      boardTotal: allVisibleCards.reduce((acc, opportunity) => acc + opportunity.value, 0),\n      overdueCards: allVisibleCards.filter(\n        (opportunity) => getSlaStatus(opportunity.slaDeadline).status === \"breached\"\n      ).length,\n      staleCards: allVisibleCards.filter((opportunity) => isStaleOpportunity(opportunity)).length,\n    };\n  }, [opportunitiesByStage]);\n\n  const activeFilterCount = useMemo(() => {\n    if (!globalPipesFilters) return stageFilter ? 1 : 0;\n    return (\n      globalPipesFilters.responsible.length +\n      globalPipesFilters.stage.length +\n      globalPipesFilters.temperature.length +\n      globalPipesFilters.tags.length +\n      (globalPipesFilters.dateStart ? 1 : 0) +\n      (globalPipesFilters.dateEnd ? 1 : 0) +\n      (globalPipesFilters.valueMin ? 1 : 0) +\n      (globalPipesFilters.valueMax ? 1 : 0) +\n      (globalPipesFilters.overdue ? 1 : 0) +\n      (globalPipesFilters.stale ? 1 : 0) +\n      (globalPipesFilters.risk ? 1 : 0) +\n      (stageFilter ? 1 : 0)\n    );\n  }, [globalPipesFilters, stageFilter]);\n\n  const clearSearch = useCallback(() => {\n    setSearchInputValue(\"\");\n    setSearchQuery(\"\");\n    setIsMobileSearchOpen(false);\n  }, []);\n\n  const updateStageFilter = useCallback(\n    (next: PipelineStage | \"all\") => {\n      const params = new URLSearchParams(searchParams.toString());\n      if (next === \"all\") {\n        params.delete(\"stage\");\n        params.delete(\"stageId\");\n      } else {\n        params.set(\"stage\", next);\n        params.delete(\"stageId\");\n      }\n      const serialized = params.toString();\n      router.replace(serialized ? `/pipes?${serialized}` : \"/pipes\", {\n        scroll: false,\n      });\n    },\n    [router, searchParams]\n  );\n\n  const clearLocalFilters = useCallback(() => {\n    setGlobalPipesFilters(null);\n    setFiltersInlineFeedback({\n      tone: \"info\",\n      message: \"Filtros do pipeline limpos.\",\n    });\n    if (typeof window !== \"undefined\") {\n      window.dispatchEvent(\n        new CustomEvent(\"flow:filters-clear\", { detail: { context: \"pipes\" } })\n      );\n    }\n    setSearchInputValue(\"\");\n    setSearchQuery(\"\");\n    setIsMobileSearchOpen(false);\n    const params = new URLSearchParams(searchParams.toString());\n    params.delete(\"filter\");\n    params.delete(\"filters\");\n    params.delete(\"stage\");\n    params.delete(\"stageId\");\n    const serialized = params.toString();\n    router.replace(serialized ? `/pipes?${serialized}` : \"/pipes\", { scroll: false });\n  }, [router, searchParams]);\n\n  const toggleQuickFilter = useCallback(\n    (key: keyof Pick<GlobalPipesFilters, \"overdue\" | \"stale\">) => {\n      setGlobalPipesFilters((prev) => {\n        const base = prev ?? createEmptyPipesFilters();\n        const next = { ...base, [key]: !base[key] };\n        if (typeof window !== \"undefined\") {\n          window.dispatchEvent(\n            new CustomEvent(\"flow:filters-update\", { detail: { context: \"pipes\", filters: next } })\n          );\n        }\n        return next;\n      });\n    },\n    []\n  );\n\n  const handleFunnelChange = useCallback(\n    (pipelineId: string) => {\n      setSelectedFunnel(pipelineId);\n      if (searchInputValue) {\n        clearSearch();\n      }\n      updateStageFilter(\"all\");\n    },\n    [clearSearch, searchInputValue, updateStageFilter]\n  );\n\n  const metricChips = useMemo(() => {\n    const chips: Array<{\n      id: string;\n      label: string;\n      icon: React.ReactNode;\n      tone: \"neutral\" | \"info\" | \"warning\" | \"danger\" | \"success\";\n      onClick?: () => void;\n    }> = [\n        {\n          id: \"pipeline-total\",\n          label: `Pipeline: ${formatCurrencyBRL(boardMetrics.boardTotal)}`,\n          icon: <CircleDollarSign className=\"h-3.5 w-3.5\" />,\n          tone: \"info\",\n        },\n        {\n          id: \"stages-visible\",\n          label: `Etapas: ${visibleStages.length}`,\n          icon: <Columns3 className=\"h-3.5 w-3.5\" />,\n          tone: \"neutral\",\n        },\n        {\n          id: \"cards-total\",\n          label: `Cards: ${boardMetrics.totalCards}`,\n          icon: <Filter className=\"h-3.5 w-3.5\" />,\n          tone: \"neutral\",\n        },\n        {\n          id: \"cards-overdue\",\n          label: `Estourados: ${boardMetrics.overdueCards}`,\n          icon: <Flame className=\"h-3.5 w-3.5\" />,\n          tone: globalPipesFilters?.overdue ? \"danger\" : \"neutral\",\n          onClick: () => toggleQuickFilter(\"overdue\"),\n        },\n        {\n          id: \"cards-stale\",\n          label: `Sem atividade: ${boardMetrics.staleCards}`,\n          icon: <TimerReset className=\"h-3.5 w-3.5\" />,\n          tone: globalPipesFilters?.stale ? \"warning\" : \"neutral\",\n          onClick: () => toggleQuickFilter(\"stale\"),\n        },\n      ];\n\n    return chips;\n  }, [\n    boardMetrics.boardTotal,\n    boardMetrics.overdueCards,\n    boardMetrics.staleCards,\n    boardMetrics.totalCards,\n    visibleStages.length,\n    globalPipesFilters,\n    toggleQuickFilter,\n  ]);\n\n  const activeFilters = useMemo(() => {\n    const filters: { id: string; label: string; onRemove: () => void }[] = [];\n    if (globalPipesFilters) {\n      const dispatchUpdate = (newFilters: NonNullable<typeof globalPipesFilters>) => {\n        setGlobalPipesFilters(newFilters);\n        if (typeof window !== \"undefined\") {\n          window.dispatchEvent(\n            new CustomEvent(\"flow:filters-update\", { detail: { context: \"pipes\", filters: newFilters } })\n          );\n        }\n      };\n\n      if (globalPipesFilters.temperature?.length > 0) {\n        filters.push({\n          id: \"temp\",\n          label: `Temperatura: ${globalPipesFilters.temperature.map((t) => (t === \"hot\" ? \"Quente\" : t === \"warm\" ? \"Morna\" : \"Fria\")).join(\", \")}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, temperature: [] }),\n        });\n      }\n      if (globalPipesFilters.responsible?.length > 0) {\n        filters.push({\n          id: \"owner\",\n          label: `Donos: ${globalPipesFilters.responsible.length}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, responsible: [] }),\n        });\n      }\n      if (globalPipesFilters.tags?.length > 0) {\n        filters.push({\n          id: \"segment\",\n          label: `Tags: ${globalPipesFilters.tags.join(\", \")}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, tags: [] }),\n        });\n      }\n      if (globalPipesFilters.stage?.length > 0) {\n        filters.push({\n          id: \"stage-filters\",\n          label: `Etapas: ${globalPipesFilters.stage.length}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, stage: [] }),\n        });\n      }\n      if (globalPipesFilters.dateStart || globalPipesFilters.dateEnd) {\n        filters.push({\n          id: \"period\",\n          label: `Periodo: ${globalPipesFilters.dateStart || \"...\"} ate ${globalPipesFilters.dateEnd || \"...\"}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, dateStart: \"\", dateEnd: \"\" }),\n        });\n      }\n      if (globalPipesFilters.valueMin || globalPipesFilters.valueMax) {\n        const minLabel = globalPipesFilters.valueMin\n          ? formatCurrencyBRL(Number(globalPipesFilters.valueMin))\n          : \"...\";\n        const maxLabel = globalPipesFilters.valueMax\n          ? formatCurrencyBRL(Number(globalPipesFilters.valueMax))\n          : \"...\";\n        filters.push({\n          id: \"value-range\",\n          label: `Valor: ${minLabel} ate ${maxLabel}`,\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, valueMin: \"\", valueMax: \"\" }),\n        });\n      }\n      if (globalPipesFilters.overdue) {\n        filters.push({\n          id: \"overdue\",\n          label: \"Somente estourados\",\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, overdue: false }),\n        });\n      }\n      if (globalPipesFilters.risk) {\n        filters.push({\n          id: \"risk\",\n          label: \"Somente em risco\",\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, risk: false }),\n        });\n      }\n      if (globalPipesFilters.stale) {\n        filters.push({\n          id: \"stale\",\n          label: \"Somente sem atividade\",\n          onRemove: () => dispatchUpdate({ ...globalPipesFilters, stale: false }),\n        });\n      }\n    }\n\n    if (stageFilter) {\n      filters.push({\n        id: \"stage\",\n        label: `Etapa: ${activeFunnel.stages.find((stage) => stage.id === stageFilter)?.label ?? getStageParamLabel(stageFilter)}`,\n        onRemove: () => updateStageFilter(\"all\"),\n      });\n    }\n\n    return filters;\n  }, [globalPipesFilters, stageFilter, activeFunnel.stages, updateStageFilter]);\n\n  useEffect(() => {\n    if (!normalizedSearch) return;\n    const total = Object.values(opportunitiesByStage).reduce(\n      (acc, cards) => acc + cards.length,\n      0\n    );\n    announce(`${total} cards encontrados para \"${searchQuery}\"`);\n  }, [announce, normalizedSearch, opportunitiesByStage, searchQuery]);\n\n  const {\n    draggingCardId,\n    draggingOpportunity,\n    dragOverStage,\n    dropIndicator,\n    columnError,\n    setColumnError,\n    successFeedback,\n    updatingCardId,\n    recentlyMovedCardId,\n    handleDragStart,\n    handleDragOver,\n    handleDragLeave,\n    handleDrop,\n    handleDragEnd,\n  } = usePipelineBoard({\n    localOpportunities: opportunities,\n    setLocalOpportunities: setScopedOpportunities,\n    activeFunnel,\n    announce,\n    canMoveCards,\n  });\n\n  const {\n    stageCustomizations,\n    renamingStage,\n    renameValue,\n    renameError,\n    setRenameValue,\n    renameInputRef,\n    startRename,\n    confirmRename,\n    cancelRename,\n    setStageColor,\n    getStageColor,\n  } = useStageCustomization();\n\n  const getDropPreview = useCallback(\n    (targetStage: PipelineStage) => {\n      if (!draggingOpportunity || dragOverStage !== targetStage) return null;\n\n      const targetLabel =\n        activeFunnel.stages.find((stage) => stage.id === targetStage)?.label ??\n        getStageParamLabel(targetStage);\n      const validation = validateStageTransition(draggingOpportunity, targetStage);\n\n      if (validation.missing.length > 0) {\n        return {\n          tone: \"error\" as const,\n          message: `Bloqueado: faltam ${validation.missing.join(\", \")} para mover para ${targetLabel}.`,\n        };\n      }\n\n      if (validation.isRegression) {\n        return {\n          tone: \"warning\" as const,\n          message: `Retrocesso detectado. Solte para mover para ${targetLabel}.`,\n        };\n      }\n\n      // WIP limit warning\n      const currentCards = opportunitiesByStage[targetStage] || [];\n      const wipLimit = WIP_LIMIT_BY_STAGE[targetStage] ?? 7;\n      const isDifferentStage = draggingOpportunity.stage !== targetStage;\n      const projectedCount = isDifferentStage ? currentCards.length + 1 : currentCards.length;\n\n      if (projectedCount > wipLimit) {\n        return {\n          tone: \"warning\" as const,\n          message: `WIP excedido (${projectedCount}/${wipLimit}). Solte para mover para ${targetLabel}.`,\n        };\n      }\n\n      return {\n        tone: \"success\" as const,\n        message: `Solte para mover para ${targetLabel}.`,\n      };\n    },\n    [activeFunnel.stages, dragOverStage, draggingOpportunity, opportunitiesByStage]\n  );\n\n  const handleOpenBlockedMove = useCallback(() => {\n    if (!columnError?.cardId) return;\n    const blockedOpportunity = opportunities.find((opportunity) => opportunity.id === columnError.cardId);\n    openModal(\"lead-card\", {\n      id: columnError.cardId,\n      focusFields: columnError.missingFields,\n      pendingStage: columnError.targetStage,\n      initialTab: \"empresa\",\n      opportunitySnapshot: blockedOpportunity,\n    });\n  }, [columnError, openModal, opportunities]);\n\n  useEffect(() => {\n    function handleKeyDown(event: KeyboardEvent) {\n      if ((event.metaKey || event.ctrlKey) && event.key.toLowerCase() === \"k\") {\n        event.preventDefault();\n        window.setTimeout(() => searchInputRef.current?.focus(), 50);\n        return;\n      }\n\n      if (event.key === \"Escape\") {\n        setIsMobileSearchOpen(false);\n        searchInputRef.current?.blur();\n        mobileSearchInputRef.current?.blur();\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n\n  useEffect(() => {\n    if (!isMobileSearchOpen) return;\n    const timer = window.setTimeout(() => {\n      mobileSearchInputRef.current?.focus();\n    }, 50);\n    return () => window.clearTimeout(timer);\n  }, [isMobileSearchOpen]);\n\n  if (isLoading) {\n    return <PipelineSkeleton stageCount={visibleStages.length} />;\n  }\n\n  return (\n    <>\n      <div\n        ref={liveRegionRef}\n        role=\"status\"\n        aria-live=\"polite\"\n        aria-atomic=\"true\"\n        className=\"sr-only\"\n      />\n\n      <motion.div\n        initial=\"hidden\"\n        animate=\"show\"\n        variants={screenContainer}\n        className=\"flex h-[calc(100dvh-2rem)] min-h-0 w-full max-w-full flex-col gap-4\"\n      >\n        <motion.div variants={sectionEnter} className=\"shrink-0\">\n          <ModuleCommandHeader\n            title={activeFunnel.label}\n            titleAccessory={\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <button\n                    type=\"button\"\n                    aria-label=\"Trocar funil\"\n                    className=\"premium-shine inline-flex h-8 w-8 items-center justify-center rounded-full border border-zinc-200 bg-white/90 text-zinc-500 transition-all duration-120 hover:-translate-y-px hover:bg-zinc-100 hover:text-zinc-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-300\"\n                  >\n                    <ChevronDown className=\"h-4 w-4\" />\n                  </button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent\n                  align=\"start\"\n                  className=\"w-[270px] rounded-[16px] border-zinc-200 bg-white/95 p-1.5 shadow-[0_18px_30px_-24px_rgba(15,23,42,0.45)]\"\n                >\n                  <div className=\"px-2.5 pb-2 pt-1.5\">\n                    <p className=\"text-[10px] font-semibold uppercase tracking-[0.08em] text-zinc-500\">\n                      Selecionar funil\n                    </p>\n                    <p className=\"mt-0.5 text-xs text-zinc-500\">\n                      Troque o contexto do board e mantenha o foco operacional.\n                    </p>\n                  </div>\n\n                  {funnels.map((funnel) => (\n                    <DropdownMenuItem\n                      key={funnel.id}\n                      onClick={() => handleFunnelChange(funnel.id)}\n                      className=\"h-9 rounded-xl px-2.5 font-medium text-zinc-700\"\n                    >\n                      <span className=\"truncate\">{funnel.label}</span>\n                      {funnel.id === selectedFunnel ? (\n                        <Check className=\"h-3.5 w-3.5 text-brand\" />\n                      ) : null}\n                    </DropdownMenuItem>\n                  ))}\n                </DropdownMenuContent>\n              </DropdownMenu>\n            }\n            description=\"Mesa de controle do pipeline comercial com prioridade operacional clara.\"\n            chips={metricChips}\n            actionsClassName=\"gap-2.5 p-2\"\n            actions={[\n              <div key=\"search\" className=\"relative hidden w-[min(38vw,360px)] md:block\">\n                <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400\" />\n                <Input\n                  ref={searchInputRef}\n                  value={searchInputValue}\n                  onChange={(event) => setSearchInputValue(event.target.value)}\n                  placeholder=\"Buscar atividade, cliente, valor ou segmento\"\n                  className=\"h-10 rounded-full border-zinc-200 pl-9 pr-16 font-body text-sm\"\n                />\n                <span className=\"pointer-events-none absolute right-8 top-1/2 hidden -translate-y-1/2 rounded-md border border-zinc-200 bg-zinc-50 px-1.5 py-0.5 text-[10px] font-medium text-zinc-500 lg:inline-flex\">\n                  Ctrl K\n                </span>\n                {searchInputValue ? (\n                  <button\n                    type=\"button\"\n                    onClick={clearSearch}\n                    className=\"absolute right-2.5 top-1/2 -translate-y-1/2 rounded-full p-1 text-zinc-400 transition-colors hover:bg-zinc-100 hover:text-zinc-600\"\n                    aria-label=\"Limpar busca\"\n                  >\n                    <X className=\"h-3.5 w-3.5\" />\n                  </button>\n                ) : null}\n              </div>,\n              <Popover\n                key=\"mobile-search\"\n                open={isMobileSearchOpen}\n                onOpenChange={setIsMobileSearchOpen}\n              >\n                <PopoverTrigger asChild>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"h-10 rounded-full px-3 md:hidden\"\n                  >\n                    <Search className=\"h-3.5 w-3.5\" />\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent\n                  align=\"end\"\n                  side=\"bottom\"\n                  sideOffset={8}\n                  className=\"w-[min(92vw,360px)] rounded-[16px] border-zinc-200 bg-white p-2\"\n                >\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-2.5 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400\" />\n                    <Input\n                      ref={mobileSearchInputRef}\n                      value={searchInputValue}\n                      onChange={(event) => setSearchInputValue(event.target.value)}\n                      placeholder=\"Buscar cards...\"\n                      className=\"h-10 w-full rounded-full pl-8 pr-8 font-body text-sm\"\n                    />\n                    {searchInputValue ? (\n                      <button\n                        type=\"button\"\n                        onClick={clearSearch}\n                        className=\"absolute right-2.5 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600\"\n                        aria-label=\"Limpar busca\"\n                      >\n                        <X className=\"h-3.5 w-3.5\" />\n                      </button>\n                    ) : null}\n                  </div>\n                </PopoverContent>\n              </Popover>,\n              <Button\n                key=\"filters\"\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"h-10 rounded-full px-4\"\n                onClick={() => openDrawer(\"filters\")}\n              >\n                <Filter className=\"h-4 w-4\" />\n                Filtros\n                {activeFilterCount > 0 ? (\n                  <span className=\"ml-1.5 flex h-5 w-5 items-center justify-center rounded-[7px] bg-zinc-100 text-[10px] font-bold text-zinc-900 border border-zinc-200\">\n                    {activeFilterCount}\n                  </span>\n                ) : null}\n              </Button>,\n              <DropdownMenu key=\"new-card\">\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    size=\"sm\"\n                    className=\"h-10 rounded-full px-5\"\n                    disabled={!canCreateOpportunity}\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                    Novo\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-[220px] rounded-[16px]\">\n                  <DropdownMenuItem\n                    onClick={() => openDrawer(\"new-opportunity\")}\n                    disabled={!canCreateOpportunity}\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                    Novo card\n                  </DropdownMenuItem>\n                  <DropdownMenuItem\n                    onClick={() =>\n                      openDrawer(\"new-opportunity\", {\n                        source: \"captura-rapida\",\n                      })\n                    }\n                    disabled={!canCreateOpportunity}\n                  >\n                    <Sparkles className=\"h-4 w-4\" />\n                    Capturar lead\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>,\n            ]}\n          >\n            {activeFilters.length > 0 ? (\n              <div className=\"flex flex-wrap items-center gap-2\" role=\"group\" aria-label=\"Filtros ativos\">\n                {activeFilters.map((f) => (\n                  <span\n                    key={f.id}\n                    className=\"inline-flex h-[28px] items-center gap-1 rounded-full border border-zinc-200/80 bg-white/70 pl-2.5 pr-1 text-[11.5px] font-medium text-zinc-700 shadow-(--shadow-premium-soft)\"\n                  >\n                    <span className=\"truncate max-w-[140px] sm:max-w-[200px]\">{f.label}</span>\n                    <button\n                      type=\"button\"\n                      onClick={f.onRemove}\n                      className=\"ml-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full text-zinc-400 transition-colors hover:bg-zinc-200 hover:text-zinc-900 focus:outline-none\"\n                      aria-label={`Remover filtro ${f.label}`}\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </span>\n                ))}\n                <button\n                  type=\"button\"\n                  onClick={clearLocalFilters}\n                  className=\"ml-2 flex h-[26px] items-center justify-center text-[11.5px] font-semibold text-zinc-500 underline decoration-zinc-300 underline-offset-2 transition-colors hover:text-zinc-900\"\n                >\n                  Limpar tudo\n                </button>\n              </div>\n            ) : null}\n          </ModuleCommandHeader>\n        </motion.div>\n\n        {filtersInlineFeedback ? (\n          <div\n            className={cn(\n              \"shrink-0 rounded-[14px] border px-3.5 py-2 text-xs font-medium\",\n              filtersInlineFeedback.tone === \"error\"\n                ? \"border-red-200 bg-red-50 text-red-700\"\n                : filtersInlineFeedback.tone === \"info\"\n                  ? \"border-sky-200 bg-sky-50 text-sky-700\"\n                  : \"border-emerald-200 bg-emerald-50 text-emerald-700\"\n            )}\n            role=\"status\"\n          >\n            {filtersInlineFeedback.message}\n          </div>\n        ) : null}\n\n        <div\n          className=\"premium-ambient premium-grain relative flex min-h-0 min-w-0 flex-1 flex-col overflow-hidden rounded-[22px] border border-zinc-200/70 bg-white/72 p-3 shadow-(--shadow-premium-soft) backdrop-blur-sm md:p-4\"\n          role=\"region\"\n          aria-label=\"Pipeline de vendas arrastavel\"\n        >\n          <div className=\"mb-2 flex items-center justify-between px-1 text-[11px] text-zinc-500 md:hidden\">\n            <span>Deslize para ver as etapas</span>\n            <span>{visibleStages.length} colunas</span>\n          </div>\n\n          <div\n            data-pipe-board-scroll\n            className=\"flex min-w-0 flex-1 gap-4 overflow-x-auto scroll-smooth px-1 pb-1 md:gap-5 md:px-2\"\n            style={{ scrollSnapType: \"x proximity\" }}\n          >\n            {visibleStages.map((stageDef, index) => {\n              const isFiltered = Boolean(normalizedSearch) || activeFilterCount > 0;\n              const cards = opportunitiesByStage[stageDef.id] || [];\n              const stageLabel = stageCustomizations[stageDef.id]?.label || stageDef.label;\n              const stageColor = getStageColor(stageDef.id);\n              const totalValue = cards.reduce((acc, opportunity) => acc + opportunity.value, 0);\n              const isDropTarget = dragOverStage === stageDef.id;\n              const stageError = columnError?.stage === stageDef.id ? columnError : null;\n              const stageSuccess = successFeedback?.stage === stageDef.id ? successFeedback : null;\n              const dropPreview = getDropPreview(stageDef.id);\n              const stageBreachedCount = cards.filter(\n                (opportunity) => getSlaStatus(opportunity.slaDeadline).status === \"breached\"\n              ).length;\n              const wipLimit = WIP_LIMIT_BY_STAGE[stageDef.id] ?? 7;\n              const isWipExceeded = cards.length > wipLimit;\n\n              return (\n                <motion.div\n                  key={stageDef.id}\n                  custom={index}\n                  variants={listItemReveal}\n                  className={cn(\n                    \"group/col flex w-[min(88vw,372px)] shrink-0 flex-col rounded-[22px] border transition-all duration-200 sm:w-[352px]\",\n                    isDropTarget\n                      ? \"border-brand/70 bg-brand/5 ring-2 ring-brand/26 shadow-[0_18px_30px_-22px_rgba(37,99,235,0.52)]\"\n                      : \"border-zinc-200/80 bg-white/88\"\n                  )}\n                  style={{ scrollSnapAlign: \"start\" }}\n                  onDragOver={(event) => handleDragOver(event, stageDef.id)}\n                  onDragLeave={handleDragLeave}\n                  onDrop={(event) => handleDrop(event, stageDef.id)}\n                  role=\"list\"\n                  aria-label={`Etapa ${stageLabel}, ${cards.length} cards, total ${formatCurrencyBRL(totalValue)}`}\n                >\n                  <div className=\"sticky top-0 z-10 rounded-t-[22px] bg-inherit px-3.5 pb-3 pt-3 backdrop-blur-sm\">\n                    <div className=\"mb-2 h-1 w-full rounded-full bg-zinc-200/70\">\n                      <div className={cn(\"h-1 rounded-full\", stageColor.bg)} />\n                    </div>\n\n                    <div className=\"flex items-start justify-between gap-2\">\n                      <div className=\"flex min-w-0 items-center gap-2\">\n                        {canConfigureStages ? (\n                          <Popover\n                            open={colorPopoverStage === stageDef.id}\n                            onOpenChange={(open) => setColorPopoverStage(open ? stageDef.id : null)}\n                          >\n                            <PopoverTrigger asChild>\n                              <button\n                                className=\"flex h-7 w-7 shrink-0 items-center justify-center rounded-lg border border-zinc-200 bg-white text-zinc-400 shadow-sm transition-all hover:bg-zinc-50 hover:text-zinc-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand\"\n                                aria-label={`Personalizar etapa ${stageLabel}`}\n                              >\n                                <Settings2 className=\"h-3.5 w-3.5\" />\n                              </button>\n                            </PopoverTrigger>\n                            <PopoverContent align=\"start\" className=\"w-auto rounded-[16px] p-3\">\n                              <div className=\"mb-2 flex items-center gap-1.5 text-[11px] font-medium text-zinc-600\">\n                                <Palette className=\"h-3 w-3\" />\n                                Cor da etapa\n                              </div>\n                              <div className=\"grid grid-cols-5 gap-1.5\">\n                                {stageColorPalette.map((color) => {\n                                  const isActive =\n                                    (stageCustomizations[stageDef.id]?.colorId || \"default\") ===\n                                    color.id;\n                                  return (\n                                    <button\n                                      key={color.id}\n                                      onClick={() => {\n                                        setStageColor(stageDef.id, color.id);\n                                        setColorPopoverStage(null);\n                                      }}\n                                      className={cn(\n                                        \"flex h-6 w-6 items-center justify-center rounded-full transition-all\",\n                                        color.bg,\n                                        isActive\n                                          ? \"ring-2 ring-zinc-900 ring-offset-2\"\n                                          : \"hover:ring-2 hover:ring-zinc-300 hover:ring-offset-1\"\n                                      )}\n                                      title={color.label}\n                                      aria-label={color.label}\n                                    >\n                                      {isActive ? <Check className=\"h-3 w-3 text-white\" /> : null}\n                                    </button>\n                                  );\n                                })}\n                              </div>\n                            </PopoverContent>\n                          </Popover>\n                        ) : null}\n\n                        {renamingStage === stageDef.id && canConfigureStages ? (\n                          <div className=\"flex min-w-0 flex-1 flex-col\">\n                            <input\n                              ref={renameInputRef}\n                              value={renameValue}\n                              maxLength={30}\n                              onChange={(event) => setRenameValue(event.target.value)}\n                              onBlur={confirmRename}\n                              onKeyDown={(event) => {\n                                if (event.key === \"Enter\") confirmRename();\n                                if (event.key === \"Escape\") cancelRename();\n                              }}\n                              className={cn(\n                                \"min-w-0 w-full truncate rounded-md border bg-white px-1.5 py-0.5 font-heading text-[14px] font-semibold text-zinc-900 outline-none focus:ring-1\",\n                                renameError\n                                  ? \"border-red-400 focus:border-red-400 focus:ring-red-300\"\n                                  : \"border-zinc-300 focus:border-brand focus:ring-brand\"\n                              )}\n                              aria-label=\"Renomear etapa\"\n                              aria-invalid={Boolean(renameError)}\n                            />\n                            {renameError ? (\n                              <span className=\"mt-0.5 text-[10px] font-medium text-red-600\" role=\"alert\">\n                                {renameError}\n                              </span>\n                            ) : null}\n                          </div>\n                        ) : canConfigureStages ? (\n                          <button\n                            onClick={() => startRename(stageDef.id, stageLabel)}\n                            className=\"truncate font-heading text-[15px] font-semibold text-zinc-900 transition-colors hover:text-brand\"\n                            title=\"Clique para renomear\"\n                          >\n                            {stageLabel}\n                          </button>\n                        ) : (\n                          <span className=\"truncate font-heading text-[15px] font-semibold text-zinc-900\">\n                            {stageLabel}\n                          </span>\n                        )}\n\n                        <span className=\"shrink-0 rounded-md bg-zinc-200/80 px-1.5 py-0.5 font-body text-[11px] font-semibold text-zinc-700\">\n                          {cards.length}\n                        </span>\n                      </div>\n\n                      <span className=\"shrink-0 text-[11px] font-semibold text-zinc-500\">\n                        {formatCurrencyBRL(totalValue)}\n                      </span>\n                    </div>\n\n                    <div className=\"mt-2 flex flex-wrap items-center gap-1.5\">\n                      <span className=\"rounded-full border border-zinc-200 bg-zinc-50 px-2 py-1 text-[10px] font-semibold text-zinc-600\">\n                        SLA {stageDef.slaHours}h\n                      </span>\n                      <span\n                        className={cn(\n                          \"rounded-full border px-2 py-1 text-[10px] font-semibold\",\n                          isWipExceeded\n                            ? \"border-amber-200 bg-amber-50 text-amber-700\"\n                            : \"border-emerald-200 bg-emerald-50 text-emerald-700\"\n                        )}\n                      >\n                        WIP {cards.length}/{wipLimit}\n                      </span>\n                      <span\n                        className={cn(\n                          \"rounded-full border px-2 py-1 text-[10px] font-semibold\",\n                          stageBreachedCount > 0\n                            ? \"border-red-200 bg-red-50 text-red-700\"\n                            : \"border-zinc-200 bg-zinc-50 text-zinc-600\"\n                        )}\n                      >\n                        Estourados {stageBreachedCount}\n                      </span>\n                    </div>\n\n                    {dropPreview ? (\n                      <div\n                        className={cn(\n                          \"mt-2 rounded-[14px] border px-2.5 py-2 text-[11px] font-medium\",\n                          dropPreview.tone === \"error\"\n                            ? \"border-red-200 bg-red-50 text-red-700\"\n                            : dropPreview.tone === \"warning\"\n                              ? \"border-amber-200 bg-amber-50 text-amber-700\"\n                              : \"border-emerald-200 bg-emerald-50 text-emerald-700\"\n                        )}\n                        role=\"status\"\n                      >\n                        {dropPreview.message}\n                      </div>\n                    ) : null}\n\n                    {stageError ? (\n                      <div\n                        className={cn(\n                          \"mt-2 rounded-[14px] border px-2.5 py-2\",\n                          stageError.tone === \"warning\"\n                            ? \"border-amber-200 bg-amber-50 text-amber-700\"\n                            : \"border-red-200 bg-red-50 text-red-700\"\n                        )}\n                        role=\"alert\"\n                      >\n                        <div className=\"flex items-start gap-2\">\n                          <AlertTriangle className=\"mt-0.5 h-3.5 w-3.5 shrink-0\" />\n                          <div className=\"min-w-0 flex-1\">\n                            <p className=\"text-[11px] font-medium leading-relaxed\">{stageError.message}</p>\n                            {stageError.missingFields?.length ? (\n                              <button\n                                type=\"button\"\n                                onClick={handleOpenBlockedMove}\n                                className=\"mt-1 text-[11px] font-semibold underline underline-offset-2\"\n                              >\n                                Preencher agora\n                              </button>\n                            ) : null}\n                          </div>\n                          <button\n                            onClick={() => setColumnError(null)}\n                            className=\"rounded-md p-1 transition hover:bg-black/5 focus:outline-none focus-visible:ring-2\"\n                            aria-label=\"Fechar aviso\"\n                          >\n                            <X className=\"h-3.5 w-3.5\" />\n                          </button>\n                        </div>\n                      </div>\n                    ) : null}\n\n                    {stageSuccess ? (\n                      <div\n                        className=\"mt-2 rounded-[14px] border border-emerald-200 bg-emerald-50 px-2.5 py-2 text-emerald-700\"\n                        role=\"status\"\n                      >\n                        <div className=\"flex items-start gap-1.5\">\n                          <CheckCircle2 className=\"mt-0.5 h-3.5 w-3.5 shrink-0\" />\n                          <span className=\"text-[11px] font-medium leading-relaxed\">\n                            {stageSuccess.message}\n                          </span>\n                        </div>\n                      </div>\n                    ) : null}\n                  </div>\n\n                  <div\n                    data-pipe-column-scroll\n                    className=\"flex-1 overflow-y-auto px-3.5 pb-3.5\"\n                    onDragOver={(event) => handleDragOver(event, stageDef.id)}\n                    onDrop={(event) => handleDrop(event, stageDef.id)}\n                  >\n                    {cards.length > 0 || isDropTarget ? (\n                      <div className=\"space-y-3\">\n                        {(() => {\n                          const showPlaceholder = Boolean(\n                            draggingCardId && dropIndicator?.stage === stageDef.id\n                          );\n                          const placeholderIndex = showPlaceholder\n                            ? Math.min(dropIndicator?.index ?? 0, cards.length)\n                            : -1;\n\n                          return (\n                            <AnimatePresence initial={false}>\n                              {cards.flatMap((opportunity, idx) => {\n                                const nodes: React.ReactNode[] = [];\n                                const isDraggingCurrentCard = draggingCardId === opportunity.id;\n                                const cardInlineFeedback =\n                                  stageError?.cardId === opportunity.id\n                                    ? ({\n                                      tone: stageError.tone === \"error\" ? \"error\" : \"warning\",\n                                      message: stageError.message,\n                                      actionLabel: stageError.missingFields?.length\n                                        ? \"Preencher agora\"\n                                        : undefined,\n                                      onAction: stageError.missingFields?.length\n                                        ? handleOpenBlockedMove\n                                        : undefined,\n                                    } as const)\n                                    : stageSuccess?.cardId === opportunity.id\n                                      ? ({\n                                        tone: \"success\",\n                                        message: stageSuccess.message,\n                                      } as const)\n                                      : null;\n\n                                if (showPlaceholder && placeholderIndex === idx) {\n                                  nodes.push(\n                                    <motion.div\n                                      key={`drop-placeholder-${stageDef.id}-${idx}`}\n                                      layout\n                                      initial={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                      animate={{ opacity: 1, scaleY: 1, height: 190 }}\n                                      exit={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                      transition={{ duration: 0.18, ease: [0.22, 1, 0.36, 1] }}\n                                      className=\"rounded-[22px] border border-dashed border-brand/45 bg-brand/5 shadow-[inset_0_0_0_1px_rgba(37,99,235,0.16)]\"\n                                    />\n                                  );\n                                }\n\n                                nodes.push(\n                                  <motion.div\n                                    key={opportunity.id}\n                                    layout\n                                    data-card-index={idx}\n                                    animate={{\n                                      x: stageError?.cardId === opportunity.id ? [-5, 5, -4, 4, -2, 2, 0] : 0,\n                                    }}\n                                    transition={{\n                                      x: { duration: 0.4, ease: \"easeInOut\" },\n                                      layout: { duration: 0.22, ease: [0.22, 1, 0.36, 1] },\n                                    }}\n                                    className={cn(\n                                      \"transition-[transform,opacity,filter] duration-180 ease-out\",\n                                      isDraggingCurrentCard ? \"scale-[0.985] opacity-30 saturate-50\" : \"\"\n                                    )}\n                                  >\n                                    <DealCardBento\n                                      opportunity={opportunity}\n                                      temp={getTemp(opportunity)}\n                                      isDragging={isDraggingCurrentCard}\n                                      isUpdating={updatingCardId === opportunity.id}\n                                      isHighlighted={recentlyMovedCardId === opportunity.id}\n                                      canMove={canMoveCards}\n                                      canEdit={canMoveCards}\n                                      canCreateActivity={canCreateActivity}\n                                      inlineFeedback={cardInlineFeedback}\n                                      onTagClick={(tag) => {\n                                        setSearchInputValue(tag);\n                                        setSearchQuery(tag);\n                                        window.scrollTo({ top: 0, behavior: \"smooth\" });\n                                        searchInputRef.current?.focus();\n                                      }}\n                                      onOpen={() =>\n                                        openModal(\"lead-card\", {\n                                          id: opportunity.id,\n                                          opportunitySnapshot: opportunity,\n                                        })\n                                      }\n                                      onDragStart={(event) =>\n                                        handleDragStart(event, opportunity)\n                                      }\n                                      onDragEnd={handleDragEnd}\n                                    />\n                                  </motion.div>\n                                );\n\n                                if (\n                                  idx === cards.length - 1 &&\n                                  showPlaceholder &&\n                                  placeholderIndex >= cards.length\n                                ) {\n                                  nodes.push(\n                                    <motion.div\n                                      key={`drop-placeholder-${stageDef.id}-end`}\n                                      layout\n                                      initial={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                      animate={{ opacity: 1, scaleY: 1, height: 190 }}\n                                      exit={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                      transition={{ duration: 0.18, ease: [0.22, 1, 0.36, 1] }}\n                                      className=\"rounded-[22px] border border-dashed border-brand/45 bg-brand/5 shadow-[inset_0_0_0_1px_rgba(37,99,235,0.16)]\"\n                                    />\n                                  );\n                                }\n\n                                return nodes;\n                              })}\n\n                              {cards.length === 0 && isDropTarget ? (\n                                <motion.div\n                                  key={`drop-placeholder-empty-${stageDef.id}`}\n                                  layout\n                                  initial={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                  animate={{ opacity: 1, scaleY: 1, height: 190 }}\n                                  exit={{ opacity: 0, scaleY: 0.82, height: 0 }}\n                                  transition={{ duration: 0.18, ease: [0.22, 1, 0.36, 1] }}\n                                  className=\"rounded-[22px] border border-dashed border-brand/45 bg-brand/5 shadow-[inset_0_0_0_1px_rgba(37,99,235,0.16)]\"\n                                />\n                              ) : null}\n                            </AnimatePresence>\n                          );\n                        })()}\n                      </div>\n                    ) : (\n                      <div className=\"mt-1 flex min-h-[180px] flex-col items-center justify-center rounded-[16px] border-2 border-dashed border-zinc-200 bg-zinc-50/40 px-4 text-center\">\n                        <p className=\"text-sm font-semibold text-zinc-700\">\n                          {isFiltered ? \"Zero resultados no filtro\" : \"Sem cards nesta etapa\"}\n                        </p>\n                        <p className=\"mt-1 text-[11px] leading-relaxed text-zinc-500\">\n                          {isFiltered ? \"Tente limpar a busca ou os filtros ativos acima.\" : \"Crie um novo card aqui ou mova um card de outra coluna.\"}\n                        </p>\n                        <div className=\"mt-3 flex flex-wrap items-center justify-center gap-2\">\n                          <Button\n                            size=\"sm\"\n                            className=\"h-8 rounded-full px-3 text-xs\"\n                            onClick={() =>\n                              openDrawer(\"new-opportunity\", {\n                                initialStage: stageDef.id,\n                              })\n                            }\n                            disabled={!canCreateOpportunity}\n                          >\n                            <Plus className=\"h-3.5 w-3.5\" />\n                            Criar card nesta etapa\n                          </Button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </motion.div>\n              );\n            })}\n          </div>\n        </div>\n      </motion.div>\n    </>\n  );\n}\n\nfunction PipesPageFallback() {\n  return (\n    <div className=\"premium-ambient min-h-[calc(100vh-72px)] p-6\">\n      <PipelineSkeleton stageCount={funnels[0].stages.length} />\n    </div>\n  );\n}\n\nexport default function PipesPage() {\n  return (\n    <Suspense fallback={<PipesPageFallback />}>\n      <PipesPageContent />\n    </Suspense>\n  );\n}\n","import type { Opportunity, PipelineStage } from \"@/types\";\nimport { PIPELINE_STAGE_ORDER } from \"@/lib/business-rules\";\nimport { stageRequiredFields } from \"./pipeline-config\";\n\n// ===================================================================\n// Helpers\n// ===================================================================\n\nexport function getInitials(name: string): string {\n  return name\n    .split(\" \")\n    .filter(Boolean)\n    .map((w) => w[0])\n    .slice(0, 2)\n    .join(\"\")\n    .toUpperCase();\n}\n\n// ===================================================================\n// SLA Status\n// ===================================================================\n\nexport type SlaStatus = \"ok\" | \"near\" | \"breached\";\n\nexport function getSlaStatus(\n  slaDeadline?: string\n): { status: SlaStatus; label: string; detailLabel: string } {\n  if (!slaDeadline)\n    return { status: \"ok\", label: \"\", detailLabel: \"SLA nao definido\" };\n  const now = new Date();\n  const deadline = new Date(slaDeadline);\n  const diffMs = deadline.getTime() - now.getTime();\n\n  if (diffMs <= 0) {\n    const overMs = Math.abs(diffMs);\n    const overHours = Math.floor(overMs / (1000 * 60 * 60));\n    const overDays = Math.floor(overHours / 24);\n    const remainHours = overHours % 24;\n    const overLabel =\n      overDays > 0 ? `${overDays}d ${remainHours}h` : `${overHours}h`;\n    return {\n      status: \"breached\",\n      label: \"Estourado\",\n      detailLabel: `SLA estourado ha ${overLabel}`,\n    };\n  }\n\n  const totalHours = diffMs / (1000 * 60 * 60);\n  const days = Math.floor(totalHours / 24);\n  const hours = Math.floor(totalHours % 24);\n  const label = days > 0 ? `${days}d ${hours}h` : `${hours}h`;\n\n  if (totalHours <= 12) {\n    return {\n      status: \"near\",\n      label,\n      detailLabel: `SLA vence em ${label} — atencao!`,\n    };\n  }\n\n  return { status: \"ok\", label, detailLabel: `SLA restante: ${label}` };\n}\n\nexport function getSlaColors(status: SlaStatus) {\n  switch (status) {\n    case \"ok\":\n      return {\n        dot: \"bg-status-success\",\n        border: \"border-l-brand\",\n        text: \"text-zinc-400\",\n      };\n    case \"near\":\n      return {\n        dot: \"bg-status-warning\",\n        border: \"border-l-status-warning\",\n        text: \"text-status-warning\",\n      };\n    case \"breached\":\n      return {\n        dot: \"bg-status-danger\",\n        border: \"border-l-status-danger\",\n        text: \"text-status-danger\",\n      };\n  }\n}\n\n// ===================================================================\n// Stage Transition Validation\n// ===================================================================\n\nexport function validateStageTransition(\n  opportunity: Opportunity,\n  targetStage: PipelineStage\n): { missing: string[]; isRegression: boolean } {\n  const currentIdx = PIPELINE_STAGE_ORDER.indexOf(opportunity.stage);\n  const targetIdx = PIPELINE_STAGE_ORDER.indexOf(targetStage);\n\n  if (targetIdx < currentIdx) {\n    return { missing: [], isRegression: true };\n  }\n\n  const requiredFields = stageRequiredFields[targetStage] || [];\n  const missing: string[] = [];\n\n  for (const req of requiredFields) {\n    const val = opportunity[req.field];\n    if (val === undefined || val === null || val === \"\") {\n      missing.push(req.label);\n    } else if (typeof val === \"number\" && val <= 0) {\n      missing.push(req.label);\n    }\n  }\n\n  return { missing, isRegression: false };\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M14 17H5', key: 'gfn3mx' }],\n  ['path', { d: 'M19 7h-9', key: '6i9tg' }],\n  ['circle', { cx: '17', cy: '17', r: '3', key: '18b49y' }],\n  ['circle', { cx: '7', cy: '7', r: '3', key: 'dfmy0x' }],\n];\n\n/**\n * @component @name Settings2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQgMTdINSIgLz4KICA8cGF0aCBkPSJNMTkgN2gtOSIgLz4KICA8Y2lyY2xlIGN4PSIxNyIgY3k9IjE3IiByPSIzIiAvPgogIDxjaXJjbGUgY3g9IjciIGN5PSI3IiByPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/settings-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Settings2 = createLucideIcon('settings-2', __iconNode);\n\nexport default Settings2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', key: 'afitv7' }],\n  ['path', { d: 'M9 3v18', key: 'fh3hqa' }],\n  ['path', { d: 'M15 3v18', key: '14nvp0' }],\n];\n\n/**\n * @component @name Columns3\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Ik05IDN2MTgiIC8+CiAgPHBhdGggZD0iTTE1IDN2MTgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/columns-3\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Columns3 = createLucideIcon('columns-3', __iconNode);\n\nexport default Columns3;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z',\n      key: 'e79jfc',\n    },\n  ],\n  ['circle', { cx: '13.5', cy: '6.5', r: '.5', fill: 'currentColor', key: '1okk4w' }],\n  ['circle', { cx: '17.5', cy: '10.5', r: '.5', fill: 'currentColor', key: 'f64h9f' }],\n  ['circle', { cx: '6.5', cy: '12.5', r: '.5', fill: 'currentColor', key: 'qy21gx' }],\n  ['circle', { cx: '8.5', cy: '7.5', r: '.5', fill: 'currentColor', key: 'fotxhn' }],\n];\n\n/**\n * @component @name Palette\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjJhMSAxIDAgMCAxIDAtMjAgMTAgOSAwIDAgMSAxMCA5IDUgNSAwIDAgMS01IDVoLTIuMjVhMS43NSAxLjc1IDAgMCAwLTEuNCAyLjhsLjMuNGExLjc1IDEuNzUgMCAwIDEtMS40IDIuOHoiIC8+CiAgPGNpcmNsZSBjeD0iMTMuNSIgY3k9IjYuNSIgcj0iLjUiIGZpbGw9ImN1cnJlbnRDb2xvciIgLz4KICA8Y2lyY2xlIGN4PSIxNy41IiBjeT0iMTAuNSIgcj0iLjUiIGZpbGw9ImN1cnJlbnRDb2xvciIgLz4KICA8Y2lyY2xlIGN4PSI2LjUiIGN5PSIxMi41IiByPSIuNSIgZmlsbD0iY3VycmVudENvbG9yIiAvPgogIDxjaXJjbGUgY3g9IjguNSIgY3k9IjcuNSIgcj0iLjUiIGZpbGw9ImN1cnJlbnRDb2xvciIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/palette\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Palette = createLucideIcon('palette', __iconNode);\n\nexport default Palette;\n"],"names":[],"mappings":"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","ignoreList":[7,8,9]}
{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/refresh-cw.ts","../../../../src/types/intelligence.ts","../../../../src/lib/intelligence-engine/helpers.ts","../../../../src/lib/intelligence-engine/greeting.ts","../../../../src/lib/intelligence-engine/analysis.ts","../../../../src/lib/proactive-engine/helpers.ts","../../../../src/lib/proactive-engine/analyzers.ts","../../../../src/lib/proactive-engine/aggregators.ts","../../../../src/lib/proactive-engine/insights.ts","../../../../src/lib/proactive-engine/alerts.ts","../../../../src/lib/proactive-engine/formatter.ts","../../../../src/stores/intelligence-store.ts","../../../../src/lib/intelligence-engine/index.ts","../../../../src/lib/intelligence-engine/freeform.ts","../../../../src/lib/intelligence-engine/proactive-commands.ts","../../../../src/lib/intelligence-engine/sales-commands.ts","../../../../src/lib/intelligence-engine/router.ts","../../../../src/lib/intelligence-commands.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8', key: 'v9h5vc' }],\n  ['path', { d: 'M21 3v5h-5', key: '1q7to0' }],\n  ['path', { d: 'M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16', key: '3uifl3' }],\n  ['path', { d: 'M8 16H3v5', key: '1cv678' }],\n];\n\n/**\n * @component @name RefreshCw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAwIDEgOS05IDkuNzUgOS43NSAwIDAgMSA2Ljc0IDIuNzRMMjEgOCIgLz4KICA8cGF0aCBkPSJNMjEgM3Y1aC01IiAvPgogIDxwYXRoIGQ9Ik0yMSAxMmE5IDkgMCAwIDEtOSA5IDkuNzUgOS43NSAwIDAgMS02Ljc0LTIuNzRMMyAxNiIgLz4KICA8cGF0aCBkPSJNOCAxNkgzdjUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/refresh-cw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RefreshCw = createLucideIcon('refresh-cw', __iconNode);\n\nexport default RefreshCw;\n","// ============================================================================\n// Menux Intelligence â€” Types & Interfaces\n// Ref: docs/Menux Intelligence.md (v1.1)\n// ============================================================================\n\nimport type { Activity, Temperature } from \"@/types\";\n\n// â”€â”€â”€ Slash Commands â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport type SlashCommand =\n  | \"/briefing\"\n  | \"/objecao\"\n  | \"/mensagem\"\n  | \"/pitch\"\n  | \"/funil\"\n  | \"/analise\"\n  | \"/comparar\"\n  | \"/planos\"\n  | \"/followup\"\n  | \"/ajuda\"\n  | \"/resumo\"\n  | \"/riscos\"\n  | \"/meta\"\n  | \"/coaching\"\n  | \"/agenda\";\n\nexport interface SlashCommandDefinition {\n  command: SlashCommand;\n  label: string;\n  icon: string;\n  description: string;\n  requiresCard: boolean;\n  availableFor: UserRoleIntelligence[];\n  /** Se true, pede input adicional apÃ³s seleÃ§Ã£o */\n  requiresInput: boolean;\n  /** Placeholder do input quando o comando Ã© selecionado */\n  inputPlaceholder?: string;\n}\n\n// â”€â”€â”€ User / Permission â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport type UserRoleIntelligence =\n  | \"master\"\n  | \"admin\"\n  | \"comercial\"\n  | \"cs\";\n\nexport type MenuxIntelligenceMode = \"focus\" | \"audit\" | \"reply\" | \"proposal\";\n\nexport type AiTone = \"formal\" | \"casual\" | \"neutral\";\nexport type ProactiveFrequency = 5 | 15 | 30;\n\n/** Mapa de capacidades por perfil â€” seÃ§Ã£o 9.1 do documento */\nexport interface IntelligencePermissions {\n  canAccessIntelligence: boolean;\n  canBriefingAllCards: boolean;\n  canBriefingOwnCards: boolean;\n  canViewAllFunnel: boolean;\n  canViewOwnFunnel: boolean;\n  canGhostwrite: boolean;\n  canUseObjectionsAndPitch: boolean;\n  canQueryMenuxBase: boolean;\n  canViewOthersHistory: boolean;\n  canReceiveProactiveSuggestions: boolean;\n  canSelectAllClientsInPicker: boolean;\n}\n\n// â”€â”€â”€ Messages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport type MessageRole = \"user\" | \"assistant\" | \"system\";\n\nexport type MessageContentType =\n  | \"text\"\n  | \"briefing\"\n  | \"objection-response\"\n  | \"ghostwriting\"\n  | \"pitch\"\n  | \"funnel-summary\"\n  | \"card-analysis\"\n  | \"comparison\"\n  | \"plans-info\"\n  | \"followup\"\n  | \"help\"\n  | \"greeting\"\n  | \"context-loaded\"\n  | \"error\"\n  | \"morning-briefing\"\n  | \"risk-report\"\n  | \"goal-progress\"\n  | \"coaching\"\n  | \"agenda\";\n\n/** Bloco copiÃ¡vel dentro de uma mensagem â€” seÃ§Ã£o 6.1 */\nexport interface CopyableBlock {\n  id: string;\n  content: string;\n  channel?: \"whatsapp\" | \"email\" | \"call\";\n  /** Limite de caracteres para este canal */\n  charLimit?: number;\n  /** Label do bloco (ex: \"Assunto\", \"Corpo\") */\n  label?: string;\n}\n\n/** AÃ§Ã£o sugerida pela IA â€” seÃ§Ã£o 6.2 */\nexport type SuggestedActionType =\n  | \"create-activity\"\n  | \"save-note\"\n  | \"schedule-followup\"\n  | \"open-card\";\n\nexport interface SuggestedAction {\n  id: string;\n  type: SuggestedActionType;\n  label: string;\n  icon: string;\n  /** Dados prÃ©-preenchidos para a aÃ§Ã£o */\n  payload?: Record<string, unknown>;\n  /** Se a aÃ§Ã£o jÃ¡ foi executada */\n  executed?: boolean;\n}\n\n/** Badge de contexto exibido no topo de uma resposta â€” seÃ§Ã£o 4.1.2 */\nexport interface ContextBadge {\n  cardId: string;\n  cardName: string;\n  stage: string;\n  temperature: Temperature;\n}\n\nexport interface Message {\n  id: string;\n  role: MessageRole;\n  content: string;\n  contentType: MessageContentType;\n  timestamp: string;\n  /** Blocos copiÃ¡veis dentro da mensagem */\n  copyableBlocks?: CopyableBlock[];\n  /** AÃ§Ãµes sugeridas abaixo da mensagem */\n  suggestedActions?: SuggestedAction[];\n  /** Badge de contexto (se baseado em card) */\n  contextBadge?: ContextBadge;\n  /** Slash command que gerou esta mensagem */\n  sourceCommand?: SlashCommand;\n  /** Se a mensagem estÃ¡ sendo gerada (streaming) */\n  isStreaming?: boolean;\n}\n\n// â”€â”€â”€ Conversations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport interface Conversation {\n  id: string;\n  /** Primeira mensagem (truncada) para preview no histÃ³rico */\n  preview: string;\n  messages: Message[];\n  /** Card relacionado (se houver) */\n  relatedCardId?: string;\n  relatedCardName?: string;\n  createdAt: string;\n  updatedAt: string;\n  /** Total de mensagens */\n  messageCount: number;\n}\n\n// â”€â”€â”€ Proactive Suggestions â€” seÃ§Ã£o 5 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport type ProactiveSuggestionType =\n  | \"overdue-activity\"\n  | \"hot-lead-idle\"\n  | \"advanced-stage-opened\"\n  | \"morning-summary\"\n  | \"missing-fields\"\n  | \"sla-approaching\"\n  | \"stale-deal\"\n  | \"follow-up-reminder\"\n  | \"goal-risk\"\n  | \"win-probability-drop\"\n  | \"contract-expiring\"\n  | \"cross-sell-opportunity\"\n  | \"competitive-intelligence\"\n  | \"team-performance\";\n\nexport type ProactiveSuggestionPriority = \"high\" | \"medium\" | \"low\";\n\nexport interface ProactiveSuggestion {\n  id: string;\n  type: ProactiveSuggestionType;\n  priority: ProactiveSuggestionPriority;\n  message: string;\n  /** Card relacionado */\n  cardId?: string;\n  cardName?: string;\n  /** Se jÃ¡ foi dispensada */\n  dismissed: boolean;\n  createdAt: string;\n}\n\n// â”€â”€â”€ Client Picker (Modal D11) â€” seÃ§Ã£o 2.3.2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport interface ClientPickerItem {\n  id: string;\n  /** ID da oportunidade ou cliente */\n  entityId: string;\n  entityType: \"opportunity\" | \"client\";\n  companyName: string;\n  segment?: string;\n  stage: string;\n  stageLabel: string;\n  temperature: Temperature;\n  lastContact?: string;\n  value?: number;\n  /** Tags do card */\n  tags?: string[];\n}\n\nexport interface ClientPickerFilters {\n  pipeId?: string;\n  temperature?: Temperature[];\n}\n\n// â”€â”€â”€ Context â€” seÃ§Ã£o 4.1.1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport interface ContactInfo {\n  name: string;\n  role?: string;\n  isDecisionMaker?: boolean;\n  /** Score de patente (0-100) */\n  patentScore?: number;\n}\n\nexport interface CardContext {\n  cardId: string;\n  cardName: string;\n  cnpj?: string;\n  contacts: ContactInfo[];\n  stage: string;\n  stageLabel: string;\n  temperature: Temperature;\n  leadScore?: number;\n  patentScore?: number;\n  quotedPlan?: string;\n  setupValue?: number;\n  mrrValue?: number;\n  tags: string[];\n  /** Ãšltima atividade */\n  lastActivity?: {\n    type: string;\n    date: string;\n    description?: string;\n  };\n  /** PrÃ³xima atividade */\n  nextActivity?: {\n    type: string;\n    date: string;\n    description?: string;\n  };\n  /** Atividades vencidas */\n  overdueActivities: Activity[];\n  /** Ãšltimas 10 notas da timeline */\n  timelineNotes: string[];\n  /** ObjeÃ§Ãµes registradas */\n  registeredObjections: string[];\n  /** Tipo da entidade (oportunidade ou cliente) */\n  entityType: \"opportunity\" | \"client\";\n}\n\nexport interface VendorContext {\n  id: string;\n  name: string;\n  role: UserRoleIntelligence | \"leitura\";\n  /** Cards atribuÃ­dos ao vendedor */\n  assignedCardCount: number;\n  /** Taxa de conversÃ£o */\n  conversionRate?: number;\n}\n\nexport interface PipelineContext {\n  /** Cards por etapa */\n  cardsByStage: Record<string, number>;\n  /** Cards com atividade vencida */\n  overdueCards: number;\n  /** Cards quentes sem atividade */\n  hotIdleCards: number;\n  /** Cards parados > 7 dias */\n  staleCards: number;\n  /** Total MRR potencial */\n  totalMRR: number;\n}\n\n/** Tela ativa do vendedor â€” define placeholder e comportamento */\nexport type ActiveScreen =\n  | \"dashboard\"\n  | \"pipes\"\n  | \"clients\"\n  | \"activities\"\n  | \"finance\"\n  | \"settings\"\n  | \"other\";\n\nexport interface IntelligenceContext {\n  card: CardContext | null;\n  vendor: VendorContext;\n  pipeline: PipelineContext | null;\n  activeScreen: ActiveScreen;\n}\n\n// â”€â”€â”€ Store State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport interface IntelligenceState {\n  /** Drawer aberto/fechado */\n  isOpen: boolean;\n  /** Conversa ativa */\n  activeConversation: Conversation | null;\n  /** Mensagens da conversa ativa */\n  messages: Message[];\n  /** IA estÃ¡ digitando */\n  isTyping: boolean;\n  /** SaudaÃ§Ã£o jÃ¡ foi enviada nesta sessÃ£o */\n  greetingSent: boolean;\n  /** Card de contexto atualmente carregado */\n  contextCard: CardContext | null;\n  /** Modal de seleÃ§Ã£o de cliente aberto */\n  isClientPickerOpen: boolean;\n  /** Texto de busca no modal de seleÃ§Ã£o */\n  clientPickerSearch: string;\n  /** Filtros ativos no modal de seleÃ§Ã£o */\n  clientPickerFilters: ClientPickerFilters;\n  /** SugestÃµes proativas pendentes */\n  proactiveSuggestions: ProactiveSuggestion[];\n  /** HistÃ³rico de conversas (Ãºltimas 50) */\n  history: Conversation[];\n  /** Se o histÃ³rico estÃ¡ sendo visualizado */\n  isHistoryOpen: boolean;\n  /** Conversa do histÃ³rico sendo visualizada (somente leitura) */\n  viewingHistoryConversation: Conversation | null;\n  /** Tela ativa do vendedor */\n  activeScreen: ActiveScreen;\n  /** Rate limit: consultas restantes nesta hora */\n  remainingQueries: number;\n  /** Timestamp de reset do rate limit */\n  rateLimitResetAt: string | null;\n  /** Modo atual da Menux Intelligence */\n  menuxIntelligenceMode: MenuxIntelligenceMode;\n  /** Tom da IA */\n  aiTone: AiTone;\n  /** FrequÃªncia do motor proativo em minutos */\n  proactiveFrequency: ProactiveFrequency;\n  /** NotificaÃ§Ãµes proativas habilitadas */\n  proactiveNotifications: boolean;\n  /** Settings dialog aberto */\n  isSettingsOpen: boolean;\n}\n\nexport interface IntelligenceActions {\n  /** Abre o drawer */\n  open: () => void;\n  /** Fecha o drawer */\n  close: () => void;\n  /** Toggle do drawer */\n  toggle: () => void;\n  /** Envia mensagem e dispara processamento da IA */\n  sendMessage: (text: string) => void;\n  /** Executa slash command */\n  executeSlashCommand: (command: SlashCommand, payload?: string) => void;\n  /** Define card de contexto */\n  setContextCard: (card: CardContext | null) => void;\n  /** Abre modal de seleÃ§Ã£o de cliente */\n  openClientPicker: () => void;\n  /** Fecha modal de seleÃ§Ã£o de cliente */\n  closeClientPicker: () => void;\n  /** Atualiza busca do client picker */\n  setClientPickerSearch: (search: string) => void;\n  /** Atualiza filtros do client picker */\n  setClientPickerFilters: (filters: ClientPickerFilters) => void;\n  /** Seleciona cliente no modal â†’ setContextCard + close + mensagem de confirmaÃ§Ã£o */\n  selectClient: (item: ClientPickerItem) => void;\n  /** Dispensa sugestÃ£o proativa */\n  dismissSuggestion: (id: string) => void;\n  /** Inicia nova conversa + saudaÃ§Ã£o */\n  startNewConversation: () => void;\n  /** Carrega conversa do histÃ³rico (somente leitura) */\n  loadConversation: (id: string) => void;\n  /** Define modo da Menux Intelligence */\n  setMenuxIntelligenceMode: (mode: MenuxIntelligenceMode) => void;\n  /** Volta para conversa ativa (sai do histÃ³rico) */\n  exitHistoryView: () => void;\n  /** Abre/fecha painel de histÃ³rico */\n  toggleHistory: () => void;\n  /** Define tela ativa */\n  setActiveScreen: (screen: ActiveScreen) => void;\n  /** Adiciona sugestÃ£o proativa */\n  addProactiveSuggestion: (suggestion: Omit<ProactiveSuggestion, \"id\" | \"dismissed\" | \"createdAt\">) => void;\n  /** Marca aÃ§Ã£o sugerida como executada */\n  markActionExecuted: (messageId: string, actionId: string) => void;\n  /** Adiciona mensagem da IA (usado internamente pelo engine) */\n  addAssistantMessage: (message: Omit<Message, \"id\" | \"timestamp\" | \"role\">) => void;\n  /** Decrementa rate limit */\n  decrementRateLimit: () => void;\n  /** Reseta rate limit */\n  resetRateLimit: () => void;\n  /** Abre settings dialog */\n  openSettings: () => void;\n  /** Fecha settings dialog */\n  closeSettings: () => void;\n  /** Atualiza tom da IA */\n  setAiTone: (tone: AiTone) => void;\n  /** Atualiza frequÃªncia proativa */\n  setProactiveFrequency: (freq: ProactiveFrequency) => void;\n  /** Atualiza notificaÃ§Ãµes proativas */\n  setProactiveNotifications: (enabled: boolean) => void;\n}\n\nexport type IntelligenceStore = IntelligenceState & IntelligenceActions;\n\n// â”€â”€â”€ Constantes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n/** Limites tÃ©cnicos â€” seÃ§Ã£o 10 */\nexport const INTELLIGENCE_LIMITS = {\n  /** MÃ¡x mensagens por conversa */\n  MAX_MESSAGES_PER_CONVERSATION: 100,\n  /** MÃ¡x conversas armazenadas por vendedor */\n  MAX_STORED_CONVERSATIONS: 50,\n  /** MÃ¡x caracteres por mensagem do vendedor */\n  MAX_USER_MESSAGE_LENGTH: 2000,\n  /** MÃ¡x caracteres por resposta da IA */\n  MAX_AI_RESPONSE_LENGTH: 6000,\n  /** SugestÃµes proativas por dia */\n  MAX_PROACTIVE_SUGGESTIONS_PER_DAY: 15,\n  /** Consultas por hora */\n  MAX_QUERIES_PER_HOUR: 60,\n  /** Janela de contexto (mensagens) */\n  CONTEXT_WINDOW_MESSAGES: 20,\n  /** RetenÃ§Ã£o de histÃ³rico em dias */\n  HISTORY_RETENTION_DAYS: 30,\n  /** Limite de caracteres para WhatsApp */\n  WHATSAPP_CHAR_LIMIT: 280,\n  /** Limite de caracteres para email (corpo) */\n  EMAIL_BODY_CHAR_LIMIT: 500,\n} as const;\n\n/** SLA de resposta em ms â€” seÃ§Ã£o 10 */\nexport const INTELLIGENCE_SLA = {\n  SIMPLE_RESPONSE_MS: 5000,\n  COMPLEX_RESPONSE_MS: 15000,\n} as const;\n","// â”€â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nimport type { CardContext, ContextBadge } from \"@/types/intelligence\";\n\nexport function uid(): string {\n  return `msg-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n}\n\nexport function now(): string {\n  return new Date().toISOString();\n}\n\nexport function buildContextBadge(card: CardContext | null): ContextBadge | undefined {\n  if (!card) return undefined;\n  return {\n    cardId: card.cardId,\n    cardName: card.cardName,\n    stage: card.stageLabel,\n    temperature: card.temperature,\n  };\n}\n\nexport function temperatureEmoji(t: string): string {\n  switch (t) {\n    case \"hot\":\n      return \"ðŸ”¥\";\n    case \"warm\":\n      return \"ðŸŒ¡ï¸\";\n    case \"cold\":\n      return \"â„ï¸\";\n    default:\n      return \"ðŸŒ¡ï¸\";\n  }\n}\n\nexport function temperatureLabel(t: string): string {\n  switch (t) {\n    case \"hot\":\n      return \"Quente\";\n    case \"warm\":\n      return \"Morno\";\n    case \"cold\":\n      return \"Frio\";\n    default:\n      return t;\n  }\n}\n","// â”€â”€â”€ Greeting â€” seÃ§Ã£o 2.3.1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nimport type { Message, CardContext, VendorContext, SuggestedAction, SuggestedActionType } from \"@/types/intelligence\";\nimport { uid, now, buildContextBadge, temperatureEmoji, temperatureLabel } from \"./helpers\";\n\nexport function generateGreeting(\n  vendor: VendorContext,\n  card: CardContext | null,\n  isFirstOfDay: boolean\n): Message {\n  let content: string;\n\n  if (card) {\n    // Se o vendedor jÃ¡ tem um card aberto\n    content = `âœ¨ **OlÃ¡, ${vendor.name}!** Sou a Menux Intelligence, seu braÃ§o direito comercial.\\n\\nVi que vocÃª estÃ¡ com **${card.cardName}** aberto. Quer que eu te ajude com esse lead ou prefere escolher outro?`;\n  } else if (isFirstOfDay) {\n    // Primeira abertura do dia â†’ resumo matinal\n    content = `âœ¨ **Bom dia, ${vendor.name}!** Sou a Menux Intelligence, seu braÃ§o direito comercial.\\n\\nVocÃª tem atividades para hoje e leads quentes esperando aÃ§Ã£o. Quer focar em algum cliente?\\n\\n**ðŸ“‹ Escolher cliente**\\n\\nOu pode mandar sua dÃºvida direto â€” estou aqui pra ajudar.`;\n  } else {\n    // Abertura genÃ©rica\n    content = `âœ¨ **OlÃ¡, ${vendor.name}!** Sou a Menux Intelligence, seu braÃ§o direito comercial.\\n\\nQuer falar sobre algum cliente especÃ­fico? Selecione abaixo para eu carregar todo o contexto.\\n\\n**ðŸ“‹ Escolher cliente**\\n\\nOu pode mandar sua dÃºvida direto â€” estou aqui pra ajudar.`;\n  }\n\n  // SaudaÃ§Ãµes sem card oferecem botÃ£o de seleÃ§Ã£o de cliente\n  const suggestedActions: SuggestedAction[] = !card\n    ? [\n        {\n          id: uid(),\n          type: \"open-card\" as SuggestedActionType,\n          label: \"ðŸ“‹ Escolher cliente\",\n          icon: \"users\",\n          payload: { action: \"open-client-picker\" },\n        },\n      ]\n    : [];\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"greeting\",\n    timestamp: now(),\n    suggestedActions: suggestedActions.length > 0 ? suggestedActions : undefined,\n  };\n}\n\n// â”€â”€â”€ Context Loaded Confirmation â€” seÃ§Ã£o 2.3.2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateContextLoaded(card: CardContext): Message {\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content: `âœ… Contexto carregado: **${card.cardName}** (${card.stageLabel} Â· ${temperatureEmoji(card.temperature)} ${temperatureLabel(card.temperature)}). Como posso te ajudar com esse lead?`,\n    contentType: \"context-loaded\",\n    timestamp: now(),\n    contextBadge: buildContextBadge(card),\n  };\n}\n","// â”€â”€â”€ Analysis Generators â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nimport type { Message, CardContext, PipelineContext } from \"@/types/intelligence\";\nimport { formatCurrencyBRL } from \"@/lib/business-rules\";\nimport { uid, now, buildContextBadge, temperatureEmoji, temperatureLabel } from \"./helpers\";\n\n// â”€â”€â”€ Funil â€” seÃ§Ã£o 4.2.5 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateFunnelSummary(pipeline: PipelineContext | null): Message {\n  if (!pipeline) {\n    return {\n      id: uid(),\n      role: \"assistant\",\n      content:\n        \"ðŸ“Š NÃ£o consegui carregar os dados do funil neste momento. Tente novamente em alguns instantes.\",\n      contentType: \"funnel-summary\",\n      timestamp: now(),\n      sourceCommand: \"/funil\",\n    };\n  }\n\n  const totalCards = Object.values(pipeline.cardsByStage).reduce(\n    (a, b) => a + b,\n    0\n  );\n\n  const content = `ðŸ“Š **Resumo do seu Funil**\n\n**VisÃ£o geral:**\n  - ðŸ”¥ Quentes: precisa de aÃ§Ã£o imediata\n  - ðŸ“Š Total no funil: **${totalCards}** oportunidades Â· **${formatCurrencyBRL(pipeline.totalMRR)}** em MRR potencial\n\n**Por etapa:**\n${Object.entries(pipeline.cardsByStage)\n  .map(([stage, count]) => `  - **${stage}:** ${count} cards`)\n  .join(\"\\n\")}\n\n**âš ï¸ AÃ§Ãµes imediatas:**\n  ${pipeline.overdueCards > 0 ? `- ðŸ”´ **${pipeline.overdueCards}** card(s) com atividade vencida` : \"- âœ… Nenhuma atividade vencida\"}\n  ${pipeline.hotIdleCards > 0 ? `- ðŸ”¥ **${pipeline.hotIdleCards}** lead(s) quente(s) sem atividade` : \"- âœ… Leads quentes com atividade em dia\"}\n  ${pipeline.staleCards > 0 ? `- â° **${pipeline.staleCards}** card(s) parado(s) hÃ¡ mais de 7 dias` : \"- âœ… Nenhum card parado\"}`;\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"funnel-summary\",\n    timestamp: now(),\n    sourceCommand: \"/funil\",\n  };\n}\n\n// â”€â”€â”€ AnÃ¡lise â€” seÃ§Ã£o 4.2.6 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateCardAnalysis(card: CardContext): Message {\n  const healthScore = card.leadScore ?? Math.floor(Math.random() * 40 + 50);\n  const overdueCount = card.overdueActivities.length;\n\n  const gargalos: string[] = [];\n  if (overdueCount > 0)\n    gargalos.push(`Atividades vencidas: ${overdueCount}`);\n  if (card.contacts.length === 0)\n    gargalos.push(\"Nenhum contato registrado\");\n  if (!card.contacts.some((c) => c.isDecisionMaker))\n    gargalos.push(\"Sem acesso ao decisor\");\n  if (!card.quotedPlan) gargalos.push(\"Plano nÃ£o cotado\");\n\n  const closeProbability =\n    card.temperature === \"hot\" && overdueCount === 0\n      ? \"Alta (70-85%)\"\n      : card.temperature === \"warm\"\n        ? \"MÃ©dia (40-60%)\"\n        : \"Baixa (15-30%)\";\n\n  const content = `ðŸ” **AnÃ¡lise: ${card.cardName}**\n\n**SaÃºde do deal:** ${healthScore}/100 ${healthScore >= 70 ? \"ðŸŸ¢\" : healthScore >= 40 ? \"ðŸŸ¡\" : \"ðŸ”´\"}\n\n**Temperatura:** ${temperatureEmoji(card.temperature)} ${temperatureLabel(card.temperature)}\n  ${\n    card.temperature === \"cold\"\n      ? \"â†’ Frio: sem atividade recente ou engajamento baixo.\"\n      : card.temperature === \"warm\"\n        ? \"â†’ Morno: hÃ¡ engajamento mas precisa de mais aÃ§Ã£o.\"\n        : \"â†’ Quente: lead engajado, momento de avanÃ§ar!\"\n  }\n\n**Score de patente:**\n  ${\n    card.contacts.length > 0\n      ? card.contacts\n          .map(\n            (c) =>\n              `- ${c.name}: ${c.role ?? \"Cargo nÃ£o informado\"} ${c.isDecisionMaker ? \"ðŸ‘‘ Decisor\" : \"\"}`\n          )\n          .join(\"\\n  \")\n      : \"Nenhum contato mapeado. Priorize mapear o decisor.\"\n  }\n\n${\n  gargalos.length > 0\n    ? `**Gargalos:**\\n${gargalos.map((g) => `  - âš ï¸ ${g}`).join(\"\\n\")}`\n    : \"**Gargalos:** âœ… Nenhum gargalo identificado\"\n}\n\n**PrÃ³ximo passo recomendado:** ${\n    overdueCount > 0\n      ? \"Resolva as atividades vencidas imediatamente.\"\n      : !card.contacts.some((c) => c.isDecisionMaker)\n        ? \"Mapeie e contate o decisor para acelerar o fechamento.\"\n        : \"Envie uma proposta personalizada e agende follow-up em 3 dias.\"\n  }\n\n**Probabilidade de fechamento:** ${closeProbability}`;\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"card-analysis\",\n    timestamp: now(),\n    contextBadge: buildContextBadge(card),\n    suggestedActions: [\n      {\n        id: uid(),\n        type: \"create-activity\",\n        label: \"ðŸ“… Criar atividade\",\n        icon: \"calendar\",\n        payload: {\n          type: overdueCount > 0 ? \"task\" : \"follow-up\",\n          description: `AÃ§Ã£o pÃ³s-anÃ¡lise de ${card.cardName}`,\n          opportunityId: card.cardId,\n          opportunityTitle: card.cardName,\n        },\n      },\n      {\n        id: uid(),\n        type: \"save-note\",\n        label: \"ðŸ“ Salvar na timeline\",\n        icon: \"file-text\",\n        payload: {\n          cardId: card.cardId,\n          entityType: card.entityType,\n          noteText: `AnÃ¡lise executada para ${card.cardName}: saÃºde ${healthScore}/100, probabilidade ${closeProbability}.`,\n        },\n      },\n    ],\n    sourceCommand: \"/analise\",\n  };\n}\n\n// â”€â”€â”€ Comparativo â€” seÃ§Ã£o 4.2.7 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateComparison(competitor: string): Message {\n  const content = `âš”ï¸ **Menux vs ${competitor}**\n\n| CritÃ©rio | Menux | ${competitor} |\n|----------|-------|${\"-\".repeat(competitor.length + 2)}|\n| Comanda digital | âœ… Nativo, sem hardware extra | Depende de tablet proprietÃ¡rio |\n| GestÃ£o de mesas | âœ… Mapa interativo tempo real | BÃ¡sico, sem visualizaÃ§Ã£o |\n| CardÃ¡pio digital | âœ… QR Code + autoatendimento | Apenas PDFs |\n| Suporte | âœ… Chat + telefone + CS dedicado | Apenas ticket por email |\n| Setup | âœ… Onboarding em atÃ© 7 dias | 30+ dias em mÃ©dia |\n| PreÃ§o | âœ… A partir de R$ 149/mÃªs | Similar ou superior |\n\n**Pontos-chave para usar na conversa:**\n1. O Menux nÃ£o exige hardware proprietÃ¡rio â€” funciona em qualquer dispositivo\n2. Suporte humanizado com CS dedicado (nÃ£o Ã© sÃ³ chatbot)\n3. Setup rÃ¡pido: cliente operando em atÃ© 7 dias\n\nâš ï¸ *Dados baseados apenas em informaÃ§Ãµes oficiais documentadas. NÃ£o faÃ§a promessas sobre o concorrente â€” foque nas vantagens Menux.*`;\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"comparison\",\n    timestamp: now(),\n    sourceCommand: \"/comparar\",\n  };\n}\n\n// â”€â”€â”€ Planos â€” seÃ§Ã£o 4.2.7 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generatePlansInfo(): Message {\n  const content = `ðŸ’° **Planos Menux**\n\n| Plano | Ideal para | Funcionalidades-chave | A partir de |\n|-------|-----------|----------------------|------------|\n| **Assist** | OperaÃ§Ãµes simples | Comanda digital, cardÃ¡pio QR, PDV bÃ¡sico | R$ 149/mÃªs |\n| **Sales** | Restaurantes em crescimento | Tudo do Assist + gestÃ£o de mesas, relatÃ³rios avanÃ§ados, integraÃ§Ãµes delivery | R$ 299/mÃªs |\n| **Control** | OperaÃ§Ãµes completas | Tudo do Sales + multi-unidades, CMV, fiscal, API aberta | R$ 499/mÃªs |\n\n**Setup:** Taxa Ãºnica a partir de R$ 500 (inclui configuraÃ§Ã£o + treinamento da equipe)\n\n**DÃºvidas frequentes:**\n- âœ… Sem fidelidade â€” cancele quando quiser\n- âœ… 7 dias para onboarding completo\n- âœ… Suporte incluÃ­do em todos os planos\n\nQuer que eu detalhe algum plano especÃ­fico?`;\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"plans-info\",\n    timestamp: now(),\n    sourceCommand: \"/planos\",\n  };\n}\n","// ============================================================================\n// Proactive Engine â€” Helpers\n// ============================================================================\n\nimport type { PipelineStageConfig } from \"@/stores/pipeline-store\";\n\nexport function daysBetween(dateA: string | Date, dateB: string | Date): number {\n  const a = new Date(dateA);\n  const b = new Date(dateB);\n  return Math.floor((b.getTime() - a.getTime()) / (1000 * 60 * 60 * 24));\n}\n\nexport function hoursBetween(dateA: string | Date, dateB: string | Date): number {\n  const a = new Date(dateA);\n  const b = new Date(dateB);\n  return (b.getTime() - a.getTime()) / (1000 * 60 * 60);\n}\n\nexport function isToday(date: string): boolean {\n  const d = new Date(date);\n  const now = new Date();\n  return (\n    d.getDate() === now.getDate() &&\n    d.getMonth() === now.getMonth() &&\n    d.getFullYear() === now.getFullYear()\n  );\n}\n\nexport function relativeTime(date: string): string {\n  const days = daysBetween(date, new Date().toISOString());\n  if (days === 0) return \"hoje\";\n  if (days === 1) return \"ontem\";\n  return `ha ${days} dias`;\n}\n\nexport function getStageName(\n  stageId: string,\n  pipelines: { stages: PipelineStageConfig[] }[]\n): string {\n  for (const p of pipelines) {\n    const found = p.stages.find((s) => s.id === stageId);\n    if (found) return found.name;\n  }\n  return stageId;\n}\n\nexport function filterByUser<T extends { responsibleId: string }>(\n  items: T[],\n  userId: string,\n  userRole: string\n): T[] {\n  if (userRole === \"master\" || userRole === \"admin\") return items;\n  return items.filter((i) => i.responsibleId === userId);\n}\n","// ============================================================================\n// Proactive Engine â€” Individual Analyzers\n// ============================================================================\n\nimport type { Opportunity, Activity, Client, Goal } from \"@/types\";\nimport type { PipelineStageConfig } from \"@/stores/pipeline-store\";\nimport type {\n  ProactiveSuggestionType,\n  ProactiveSuggestionPriority,\n} from \"@/types/intelligence\";\nimport { formatCurrencyBRL } from \"@/lib/business-rules\";\nimport type { GeneratedSuggestion } from \"./types\";\nimport {\n  daysBetween,\n  hoursBetween,\n  relativeTime,\n  getStageName,\n  filterByUser,\n} from \"./helpers\";\n\nexport function analyzeOverdueActivities(\n  activities: Activity[],\n  opportunities: Opportunity[],\n  userId: string,\n  userRole: string\n): GeneratedSuggestion[] {\n  const userActs = filterByUser(activities, userId, userRole);\n  const overdue = userActs.filter((a) => {\n    if (a.status === \"completed\" || a.status === \"cancelled\") return false;\n    const dueDate = new Date(a.dueDate);\n    return dueDate < new Date();\n  });\n\n  return overdue.slice(0, 3).map((act) => {\n    const opp = act.opportunityId\n      ? opportunities.find((o) => o.id === act.opportunityId)\n      : null;\n    const daysOverdue = daysBetween(act.dueDate, new Date().toISOString());\n\n    return {\n      type: \"overdue-activity\" as ProactiveSuggestionType,\n      priority: (daysOverdue >= 3 ? \"high\" : \"medium\") as ProactiveSuggestionPriority,\n      message: `Atividade \"${act.title}\" vencida ${relativeTime(act.dueDate)}.${opp ? ` Lead: ${opp.clientName}.` : \"\"} Resolva para manter o pipeline saudavel.`,\n      cardId: opp?.id,\n      cardName: opp?.clientName,\n    };\n  });\n}\n\nexport function analyzeHotLeadsIdle(\n  opportunities: Opportunity[],\n  activities: Activity[],\n  userId: string,\n  userRole: string,\n  thresholdDays = 3\n): GeneratedSuggestion[] {\n  const userOpps = filterByUser(opportunities, userId, userRole).filter(\n    (o) => o.status === \"open\" && o.temperature === \"hot\"\n  );\n\n  return userOpps\n    .map((opp) => {\n      const oppActivities = activities\n        .filter((a) => a.opportunityId === opp.id && a.status !== \"cancelled\")\n        .sort(\n          (a, b) =>\n            new Date(b.dueDate).getTime() - new Date(a.dueDate).getTime()\n        );\n\n      const lastDate = oppActivities[0]?.dueDate ?? opp.updatedAt;\n      const daysSince = daysBetween(lastDate, new Date().toISOString());\n\n      if (daysSince >= thresholdDays) {\n        return {\n          type: \"hot-lead-idle\" as ProactiveSuggestionType,\n          priority: \"high\" as ProactiveSuggestionPriority,\n          message: `Lead quente \"${opp.clientName}\" sem atividade ha ${daysSince} dias. Na etapa ${opp.stage}. Momento de agir!`,\n          cardId: opp.id,\n          cardName: opp.clientName,\n        };\n      }\n      return null;\n    })\n    .filter(Boolean) as GeneratedSuggestion[];\n}\n\nexport function analyzeSLAApproaching(\n  opportunities: Opportunity[],\n  pipelines: { stages: PipelineStageConfig[] }[],\n  userId: string,\n  userRole: string\n): GeneratedSuggestion[] {\n  const now = new Date();\n  const userOpps = filterByUser(opportunities, userId, userRole).filter(\n    (o) => o.status === \"open\" && o.slaDeadline\n  );\n\n  return userOpps\n    .map((opp) => {\n      const hoursLeft = hoursBetween(now.toISOString(), opp.slaDeadline!);\n      if (hoursLeft > 0 && hoursLeft <= 6) {\n        const stageName = getStageName(opp.stage, pipelines);\n        return {\n          type: \"sla-approaching\" as ProactiveSuggestionType,\n          priority: \"high\" as ProactiveSuggestionPriority,\n          message: `\"${opp.clientName}\" esta a ${Math.round(hoursLeft)}h do SLA na etapa ${stageName}. Priorize esta oportunidade!`,\n          cardId: opp.id,\n          cardName: opp.clientName,\n        };\n      }\n      return null;\n    })\n    .filter(Boolean) as GeneratedSuggestion[];\n}\n\nexport function analyzeStaleDeals(\n  opportunities: Opportunity[],\n  userId: string,\n  userRole: string,\n  thresholdDays = 7\n): GeneratedSuggestion[] {\n  const userOpps = filterByUser(opportunities, userId, userRole).filter(\n    (o) => o.status === \"open\"\n  );\n\n  return userOpps\n    .map((opp) => {\n      const daysSince = daysBetween(opp.updatedAt, new Date().toISOString());\n      if (daysSince >= thresholdDays) {\n        return {\n          type: \"stale-deal\" as ProactiveSuggestionType,\n          priority: (daysSince >= 14 ? \"high\" : \"medium\") as ProactiveSuggestionPriority,\n          message: `Negociacao \"${opp.clientName}\" parada ha ${daysSince} dias sem movimentacao. Considere reengajar ou reavaliar.`,\n          cardId: opp.id,\n          cardName: opp.clientName,\n        };\n      }\n      return null;\n    })\n    .filter(Boolean) as GeneratedSuggestion[];\n}\n\nexport function analyzeGoalRisk(\n  goals: Goal[]\n): GeneratedSuggestion[] {\n  const now = new Date();\n\n  return goals\n    .map((goal) => {\n      const endDate = new Date(goal.endDate);\n      const startDate = new Date(goal.startDate);\n      if (endDate < now) return null; // past goal\n\n      const totalDuration = daysBetween(startDate.toISOString(), endDate.toISOString());\n      const elapsed = daysBetween(startDate.toISOString(), now.toISOString());\n      const daysRemaining = daysBetween(now.toISOString(), endDate.toISOString());\n      const expectedProgress = totalDuration > 0 ? elapsed / totalDuration : 1;\n      const actualProgress = goal.target > 0 ? goal.current / goal.target : 0;\n\n      // Only alert if behind schedule AND within 15 days of deadline\n      if (actualProgress < expectedProgress * 0.85 && daysRemaining <= 15) {\n        const deficit = goal.target - goal.current;\n        const deficitStr =\n          goal.type === \"revenue\"\n            ? formatCurrencyBRL(deficit)\n            : `${deficit} ${goal.type === \"conversion\" ? \"%\" : \"\"}`;\n\n        return {\n          type: \"goal-risk\" as ProactiveSuggestionType,\n          priority: (daysRemaining <= 7 ? \"high\" : \"medium\") as ProactiveSuggestionPriority,\n          message: `Meta \"${goal.title}\" em risco. Faltam ${deficitStr} nos proximos ${daysRemaining} dias. Progresso: ${Math.round(actualProgress * 100)}%.`,\n        };\n      }\n      return null;\n    })\n    .filter(Boolean) as GeneratedSuggestion[];\n}\n\nexport function analyzeContractExpiring(\n  clients: Client[],\n  userId: string,\n  userRole: string,\n  thresholdDays = 30\n): GeneratedSuggestion[] {\n  const now = new Date();\n  const userClients =\n    userRole === \"master\" || userRole === \"admin\"\n      ? clients\n      : clients.filter((c) => c.responsibleId === userId);\n\n  return userClients\n    .map((client) => {\n      if (!client.contractEnd) return null;\n      const daysUntil = daysBetween(now.toISOString(), client.contractEnd);\n      if (daysUntil > 0 && daysUntil <= thresholdDays) {\n        return {\n          type: \"contract-expiring\" as ProactiveSuggestionType,\n          priority: (daysUntil <= 15 ? \"high\" : \"medium\") as ProactiveSuggestionPriority,\n          message: `Contrato de \"${client.companyName}\" expira em ${daysUntil} dias. Inicie a renovacao agora.`,\n          cardName: client.companyName,\n        };\n      }\n      return null;\n    })\n    .filter(Boolean) as GeneratedSuggestion[];\n}\n\nexport function analyzeMissingFields(\n  opportunities: Opportunity[],\n  userId: string,\n  userRole: string\n): GeneratedSuggestion[] {\n  const userOpps = filterByUser(opportunities, userId, userRole).filter(\n    (o) => o.status === \"open\"\n  );\n\n  const noCloseDate = userOpps.filter((o) => !o.expectedCloseDate);\n  if (noCloseDate.length >= 3) {\n    return [\n      {\n        type: \"missing-fields\" as ProactiveSuggestionType,\n        priority: \"low\" as ProactiveSuggestionPriority,\n        message: `${noCloseDate.length} oportunidades abertas sem data de fechamento prevista. Preencha para melhorar previsibilidade.`,\n      },\n    ];\n  }\n  return [];\n}\n\nexport function analyzeCrossSell(\n  clients: Client[],\n  userId: string,\n  userRole: string\n): GeneratedSuggestion[] {\n  const userClients =\n    userRole === \"master\" || userRole === \"admin\"\n      ? clients\n      : clients.filter((c) => c.responsibleId === userId);\n\n  const activeClients = userClients.filter(\n    (c) => c.stage !== \"churn\" && c.monthlyRevenue > 0\n  );\n  if (activeClients.length === 0) return [];\n\n  const avgRevenue =\n    activeClients.reduce((sum, c) => sum + c.monthlyRevenue, 0) /\n    activeClients.length;\n\n  return activeClients\n    .filter(\n      (c) => c.healthScore === \"good\" && c.monthlyRevenue < avgRevenue * 0.7\n    )\n    .slice(0, 2)\n    .map((c) => ({\n      type: \"cross-sell-opportunity\" as ProactiveSuggestionType,\n      priority: \"low\" as ProactiveSuggestionPriority,\n      message: `\"${c.companyName}\" com saude boa e ticket ${formatCurrencyBRL(c.monthlyRevenue)} (media: ${formatCurrencyBRL(avgRevenue)}). Oportunidade de upsell!`,\n      cardName: c.companyName,\n    }));\n}\n\nexport function analyzeCompetitiveLosses(\n  opportunities: Opportunity[],\n  userId: string,\n  userRole: string\n): GeneratedSuggestion[] {\n  const thirtyDaysAgo = new Date();\n  thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n  const recentLosses = filterByUser(opportunities, userId, userRole).filter(\n    (o) =>\n      o.status === \"lost\" &&\n      new Date(o.updatedAt) > thirtyDaysAgo &&\n      o.lossReason\n  );\n\n  if (recentLosses.length === 0) return [];\n\n  // Group by loss reason\n  const reasonCounts = recentLosses.reduce(\n    (acc, o) => {\n      const reason = o.lossReason ?? \"outro\";\n      acc[reason] = (acc[reason] ?? 0) + 1;\n      return acc;\n    },\n    {} as Record<string, number>\n  );\n\n  const topReason = Object.entries(reasonCounts).sort(\n    ([, a], [, b]) => b - a\n  )[0];\n\n  if (topReason && topReason[1] >= 2) {\n    return [\n      {\n        type: \"competitive-intelligence\" as ProactiveSuggestionType,\n        priority: \"medium\" as ProactiveSuggestionPriority,\n        message: `${recentLosses.length} deals perdidos nos ultimos 30 dias. Principal motivo: \"${topReason[0]}\" (${topReason[1]}x). Ajuste sua abordagem.`,\n      },\n    ];\n  }\n  return [];\n}\n\nexport function analyzeTeamPerformance(\n  opportunities: Opportunity[],\n  userId: string\n): GeneratedSuggestion[] {\n  const thirtyDaysAgo = new Date();\n  thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n  const recentOpps = opportunities.filter(\n    (o) => new Date(o.updatedAt) > thirtyDaysAgo\n  );\n\n  if (recentOpps.length < 5) return [];\n\n  // Calculate user conversion vs team average\n  const userOpps = recentOpps.filter((o) => o.responsibleId === userId);\n  const userWon = userOpps.filter((o) => o.status === \"won\").length;\n  const userTotal = userOpps.filter(\n    (o) => o.status === \"won\" || o.status === \"lost\"\n  ).length;\n  const userRate = userTotal > 0 ? (userWon / userTotal) * 100 : 0;\n\n  const teamWon = recentOpps.filter((o) => o.status === \"won\").length;\n  const teamTotal = recentOpps.filter(\n    (o) => o.status === \"won\" || o.status === \"lost\"\n  ).length;\n  const teamRate = teamTotal > 0 ? (teamWon / teamTotal) * 100 : 0;\n\n  if (userTotal < 3) return [];\n\n  const diff = userRate - teamRate;\n  if (Math.abs(diff) >= 10) {\n    return [\n      {\n        type: \"team-performance\" as ProactiveSuggestionType,\n        priority: \"low\" as ProactiveSuggestionPriority,\n        message:\n          diff > 0\n            ? `Sua taxa de conversao (${Math.round(userRate)}%) esta ${Math.round(diff)}% acima da media do time. Excelente trabalho!`\n            : `Sua taxa de conversao (${Math.round(userRate)}%) esta ${Math.round(Math.abs(diff))}% abaixo da media. Use /coaching para dicas.`,\n      },\n    ];\n  }\n  return [];\n}\n","// ============================================================================\n// Proactive Engine â€” Aggregators\n// ============================================================================\n\nimport type { Opportunity, Activity } from \"@/types\";\nimport type { PipelineContext } from \"@/types/intelligence\";\nimport type { ProactiveEngineInput, GeneratedSuggestion } from \"./types\";\nimport { daysBetween, filterByUser } from \"./helpers\";\nimport {\n  analyzeOverdueActivities,\n  analyzeHotLeadsIdle,\n  analyzeSLAApproaching,\n  analyzeStaleDeals,\n  analyzeGoalRisk,\n  analyzeContractExpiring,\n  analyzeMissingFields,\n  analyzeCrossSell,\n  analyzeCompetitiveLosses,\n  analyzeTeamPerformance,\n} from \"./analyzers\";\n\nexport function generateAllSuggestions(\n  input: ProactiveEngineInput\n): GeneratedSuggestion[] {\n  const { opportunities, activities, clients, goals, pipelines, userId, userRole } =\n    input;\n\n  const suggestions: GeneratedSuggestion[] = [\n    ...analyzeOverdueActivities(activities, opportunities, userId, userRole),\n    ...analyzeSLAApproaching(opportunities, pipelines, userId, userRole),\n    ...analyzeHotLeadsIdle(opportunities, activities, userId, userRole),\n    ...analyzeStaleDeals(opportunities, userId, userRole),\n    ...analyzeGoalRisk(goals),\n    ...analyzeContractExpiring(clients, userId, userRole),\n    ...analyzeMissingFields(opportunities, userId, userRole),\n    ...analyzeCrossSell(clients, userId, userRole),\n    ...analyzeCompetitiveLosses(opportunities, userId, userRole),\n    ...analyzeTeamPerformance(opportunities, userId),\n  ];\n\n  // Sort: high > medium > low\n  const priorityOrder = { high: 0, medium: 1, low: 2 };\n  return suggestions.sort(\n    (a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]\n  );\n}\n\nexport function computePipelineContext(\n  opportunities: Opportunity[],\n  activities: Activity[],\n  userId: string,\n  userRole: string\n): PipelineContext {\n  const userOpps = filterByUser(opportunities, userId, userRole).filter(\n    (o) => o.status === \"open\"\n  );\n\n  const cardsByStage: Record<string, number> = {};\n  let totalMRR = 0;\n  let overdueCards = 0;\n  let hotIdleCards = 0;\n  let staleCards = 0;\n\n  for (const opp of userOpps) {\n    // Count by stage\n    cardsByStage[opp.stage] = (cardsByStage[opp.stage] ?? 0) + 1;\n\n    // Total MRR\n    totalMRR += opp.monthlyValue;\n\n    // Overdue check\n    const oppActs = activities.filter(\n      (a) => a.opportunityId === opp.id && a.status !== \"cancelled\"\n    );\n    const hasOverdue = oppActs.some(\n      (a) => a.status !== \"completed\" && new Date(a.dueDate) < new Date()\n    );\n    if (hasOverdue) overdueCards++;\n\n    // Hot idle check\n    if (opp.temperature === \"hot\") {\n      const lastDate = oppActs.length\n        ? Math.max(...oppActs.map((a) => new Date(a.dueDate).getTime()))\n        : new Date(opp.updatedAt).getTime();\n      const daysSince = daysBetween(\n        new Date(lastDate).toISOString(),\n        new Date().toISOString()\n      );\n      if (daysSince >= 3) hotIdleCards++;\n    }\n\n    // Stale check\n    const daysSinceUpdate = daysBetween(\n      opp.updatedAt,\n      new Date().toISOString()\n    );\n    if (daysSinceUpdate >= 7) staleCards++;\n  }\n\n  return { cardsByStage, totalMRR, overdueCards, hotIdleCards, staleCards };\n}\n","// ============================================================================\n// Proactive Engine â€” Insights (Priorities, Smart Insights, Quick Wins)\n// ============================================================================\n\nimport { formatCurrencyBRL } from \"@/lib/business-rules\";\nimport type { ProactiveEngineInput, PriorityItem, SmartInsight, QuickWinItem } from \"./types\";\nimport { daysBetween, hoursBetween, isToday, relativeTime, getStageName, filterByUser } from \"./helpers\";\n\nexport function computeTodaysPriorities(\n  input: ProactiveEngineInput\n): PriorityItem[] {\n  const { opportunities, activities, userId, userRole, pipelines } = input;\n  const items: PriorityItem[] = [];\n  const now = new Date();\n\n  // 1. Overdue activities\n  const userActs = filterByUser(activities, userId, userRole);\n  const overdueActs = userActs.filter((a) => {\n    if (a.status === \"completed\" || a.status === \"cancelled\") return false;\n    return new Date(a.dueDate) < now;\n  });\n\n  for (const act of overdueActs.slice(0, 3)) {\n    items.push({\n      id: `pri-${act.id}`,\n      type: \"overdue\",\n      title: act.title,\n      subtitle: `Vencida ${relativeTime(act.dueDate)}${act.clientName ? ` Â· ${act.clientName}` : \"\"}`,\n      severity: \"critical\",\n      linkedEntityId: act.opportunityId,\n      linkedEntityType: \"opportunity\",\n    });\n  }\n\n  // 2. Today's pending activities\n  const todayActs = userActs.filter(\n    (a) => a.status === \"pending\" && isToday(a.dueDate)\n  );\n  for (const act of todayActs.slice(0, 3)) {\n    items.push({\n      id: `pri-${act.id}`,\n      type: \"due-today\",\n      title: act.title,\n      subtitle: `Hoje${act.dueTime ? ` as ${act.dueTime}` : \"\"}${act.clientName ? ` Â· ${act.clientName}` : \"\"}`,\n      severity: \"warning\",\n      linkedEntityId: act.opportunityId,\n      linkedEntityType: \"opportunity\",\n    });\n  }\n\n  // 3. SLA approaching\n  const userOpps = filterByUser(opportunities, userId, userRole).filter(\n    (o) => o.status === \"open\" && o.slaDeadline\n  );\n  for (const opp of userOpps) {\n    const hoursLeft = hoursBetween(now.toISOString(), opp.slaDeadline!);\n    if (hoursLeft > 0 && hoursLeft <= 8) {\n      const stageName = getStageName(opp.stage, pipelines);\n      items.push({\n        id: `pri-sla-${opp.id}`,\n        type: \"sla-warning\",\n        title: opp.clientName,\n        subtitle: `${Math.round(hoursLeft)}h para SLA Â· ${stageName}`,\n        severity: \"critical\",\n        linkedEntityId: opp.id,\n        linkedEntityType: \"opportunity\",\n      });\n    }\n  }\n\n  // 4. Hot leads idle\n  const hotIdle = filterByUser(opportunities, userId, userRole).filter(\n    (o) => o.status === \"open\" && o.temperature === \"hot\"\n  );\n  for (const opp of hotIdle.slice(0, 2)) {\n    const oppActs = activities.filter(\n      (a) => a.opportunityId === opp.id && a.status !== \"cancelled\"\n    );\n    const lastDate = oppActs.length\n      ? Math.max(...oppActs.map((a) => new Date(a.dueDate).getTime()))\n      : new Date(opp.updatedAt).getTime();\n    const daysSince = daysBetween(\n      new Date(lastDate).toISOString(),\n      now.toISOString()\n    );\n    if (daysSince >= 3) {\n      items.push({\n        id: `pri-hot-${opp.id}`,\n        type: \"hot-idle\",\n        title: opp.clientName,\n        subtitle: `Lead quente sem atividade ha ${daysSince}d`,\n        severity: \"warning\",\n        linkedEntityId: opp.id,\n        linkedEntityType: \"opportunity\",\n      });\n    }\n  }\n\n  // Sort by severity then return top 8\n  const severityOrder = { critical: 0, warning: 1, info: 2 };\n  return items\n    .sort((a, b) => severityOrder[a.severity] - severityOrder[b.severity])\n    .slice(0, 8);\n}\n\nexport function computeSmartInsights(\n  input: ProactiveEngineInput\n): SmartInsight[] {\n  const { opportunities, goals, userId, userRole } = input;\n  const insights: SmartInsight[] = [];\n  const now = new Date();\n  const thirtyDaysAgo = new Date();\n  thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n  const userOpps = filterByUser(opportunities, userId, userRole);\n\n  // 1. Pipeline velocity (avg days to close won deals)\n  const recentWins = userOpps.filter(\n    (o) => o.status === \"won\" && new Date(o.updatedAt) > thirtyDaysAgo\n  );\n  if (recentWins.length >= 2) {\n    const avgDays = Math.round(\n      recentWins.reduce(\n        (sum, o) => sum + daysBetween(o.createdAt, o.updatedAt),\n        0\n      ) / recentWins.length\n    );\n    insights.push({\n      id: \"insight-velocity\",\n      icon: \"zap\",\n      title: \"Velocidade do Pipeline\",\n      description: `Ciclo medio de fechamento: ${avgDays} dias (${recentWins.length} deals fechados nos ultimos 30 dias).`,\n      metric: { value: `${avgDays}d`, trend: avgDays <= 21 ? \"up\" : \"down\" },\n    });\n  }\n\n  // 2. Conversion rate\n  const closed = userOpps.filter(\n    (o) =>\n      (o.status === \"won\" || o.status === \"lost\") &&\n      new Date(o.updatedAt) > thirtyDaysAgo\n  );\n  const won = closed.filter((o) => o.status === \"won\");\n  if (closed.length >= 3) {\n    const rate = Math.round((won.length / closed.length) * 100);\n    insights.push({\n      id: \"insight-conversion\",\n      icon: \"trending-up\",\n      title: \"Taxa de Conversao\",\n      description: `${rate}% de conversao (${won.length} ganhos de ${closed.length} finalizados) nos ultimos 30 dias.`,\n      metric: {\n        value: `${rate}%`,\n        trend: rate >= 50 ? \"up\" : rate >= 35 ? \"stable\" : \"down\",\n      },\n    });\n  }\n\n  // 3. Goal progress\n  const activeGoals = goals.filter((g) => new Date(g.endDate) > now);\n  if (activeGoals.length > 0) {\n    const mainGoal = activeGoals[0];\n    const progress = Math.round(\n      (mainGoal.current / mainGoal.target) * 100\n    );\n    const remaining = mainGoal.target - mainGoal.current;\n    const remainingStr =\n      mainGoal.type === \"revenue\" ? formatCurrencyBRL(remaining) : `${remaining}`;\n    const daysLeft = daysBetween(now.toISOString(), mainGoal.endDate);\n\n    insights.push({\n      id: \"insight-goal\",\n      icon: \"target\",\n      title: `Meta: ${mainGoal.title}`,\n      description: `${progress}% concluido. Faltam ${remainingStr} em ${daysLeft} dias.`,\n      metric: {\n        value: `${progress}%`,\n        trend: progress >= 80 ? \"up\" : progress >= 50 ? \"stable\" : \"down\",\n      },\n      actionLabel: \"Detalhes\",\n      actionCommand: \"/meta\",\n    });\n  }\n\n  // 4. Total pipeline value\n  const openOpps = userOpps.filter((o) => o.status === \"open\");\n  if (openOpps.length > 0) {\n    const totalMRR = openOpps.reduce((sum, o) => sum + o.monthlyValue, 0);\n    const totalValue = openOpps.reduce((sum, o) => sum + o.value, 0);\n    insights.push({\n      id: \"insight-pipeline-value\",\n      icon: \"bar-chart\",\n      title: \"Pipeline Ativo\",\n      description: `${openOpps.length} oportunidades abertas. MRR potencial: ${formatCurrencyBRL(totalMRR)}. Valor total: ${formatCurrencyBRL(totalValue)}.`,\n      metric: { value: formatCurrencyBRL(totalMRR), trend: \"stable\" },\n      actionLabel: \"Ver funil\",\n      actionCommand: \"/funil\",\n    });\n  }\n\n  return insights;\n}\n\nexport function computeQuickWins(\n  input: ProactiveEngineInput\n): QuickWinItem[] {\n  const { opportunities, activities, userId, userRole } = input;\n\n  const userOpps = filterByUser(opportunities, userId, userRole).filter(\n    (o) => o.status === \"open\"\n  );\n\n  return userOpps\n    .map((opp) => {\n      // Calculate probability based on stage, temperature, recent activity\n      let probability = 0;\n\n      // Stage advancement (later stages = higher probability)\n      const stageScores: Record<string, number> = {\n        \"lead-in\": 10,\n        \"contato-feito\": 20,\n        \"reuniao-agendada\": 40,\n        \"proposta-enviada\": 60,\n        \"negociacao\": 75,\n        \"fechamento\": 90,\n      };\n      probability += stageScores[opp.stage] ?? 15;\n\n      // Temperature bonus\n      if (opp.temperature === \"hot\") probability += 15;\n      else if (opp.temperature === \"warm\") probability += 5;\n\n      // Recent activity bonus\n      const oppActs = activities.filter(\n        (a) => a.opportunityId === opp.id && a.status !== \"cancelled\"\n      );\n      const hasRecentActivity = oppActs.some(\n        (a) => daysBetween(a.dueDate, new Date().toISOString()) <= 3\n      );\n      if (hasRecentActivity) probability += 10;\n\n      // Cap at 95\n      probability = Math.min(95, probability);\n\n      // Reason text\n      const reasons: string[] = [];\n      if (opp.temperature === \"hot\") reasons.push(\"Lead quente\");\n      if (\n        opp.stage === \"negociacao\" ||\n        opp.stage === \"fechamento\" ||\n        opp.stage === \"proposta-enviada\"\n      )\n        reasons.push(opp.stage.replace(/-/g, \" \"));\n      if (hasRecentActivity) reasons.push(\"Atividade recente\");\n\n      return {\n        id: opp.id,\n        opportunityId: opp.id,\n        clientName: opp.clientName,\n        stage: opp.stage,\n        probability,\n        value: opp.monthlyValue,\n        reason: reasons.join(\" + \") || opp.stage,\n      };\n    })\n    .sort((a, b) => b.probability - a.probability)\n    .slice(0, 5);\n}\n","// ============================================================================\n// Proactive Engine â€” Risk Alerts\n// ============================================================================\n\nimport type { ProactiveEngineInput, RiskAlert } from \"./types\";\nimport { daysBetween, hoursBetween, filterByUser } from \"./helpers\";\n\nexport function computeRiskAlerts(\n  input: ProactiveEngineInput\n): RiskAlert[] {\n  const { opportunities, clients, goals, userId, userRole } = input;\n  const alerts: RiskAlert[] = [];\n  const now = new Date();\n\n  // 1. SLA breaches\n  const userOpps = filterByUser(opportunities, userId, userRole).filter(\n    (o) => o.status === \"open\" && o.slaDeadline\n  );\n  for (const opp of userOpps) {\n    const hoursLeft = hoursBetween(now.toISOString(), opp.slaDeadline!);\n    if (hoursLeft < 0) {\n      alerts.push({\n        id: `risk-sla-${opp.id}`,\n        type: \"sla-breach\",\n        title: `SLA estourado: ${opp.clientName}`,\n        description: `SLA vencido ha ${Math.abs(Math.round(hoursLeft))}h na etapa ${opp.stage}.`,\n        severity: \"critical\",\n        linkedEntityId: opp.id,\n      });\n    }\n  }\n\n  // 2. Client health drops\n  const userClients =\n    userRole === \"master\" || userRole === \"admin\"\n      ? clients\n      : clients.filter((c) => c.responsibleId === userId);\n\n  const atRiskClients = userClients.filter(\n    (c) =>\n      c.healthScore === \"critical\" &&\n      c.stage !== \"churn\"\n  );\n  for (const client of atRiskClients.slice(0, 3)) {\n    alerts.push({\n      id: `risk-health-${client.id}`,\n      type: \"health-drop\",\n      title: `Saude critica: ${client.companyName}`,\n      description: `Cliente com health score critico. Risco de churn iminente.`,\n      severity: \"critical\",\n      linkedEntityId: client.id,\n    });\n  }\n\n  // 3. Stale deals\n  const staleOpps = filterByUser(opportunities, userId, userRole).filter(\n    (o) =>\n      o.status === \"open\" &&\n      daysBetween(o.updatedAt, now.toISOString()) >= 14\n  );\n  for (const opp of staleOpps.slice(0, 2)) {\n    const days = daysBetween(opp.updatedAt, now.toISOString());\n    alerts.push({\n      id: `risk-stale-${opp.id}`,\n      type: \"stale\",\n      title: `Parado ha ${days}d: ${opp.clientName}`,\n      description: `Sem movimentacao ha ${days} dias. Reengaje ou reavalie.`,\n      severity: \"warning\",\n      linkedEntityId: opp.id,\n    });\n  }\n\n  // 4. Contract expiring\n  for (const client of userClients) {\n    if (!client.contractEnd) continue;\n    const daysUntil = daysBetween(now.toISOString(), client.contractEnd);\n    if (daysUntil > 0 && daysUntil <= 30) {\n      alerts.push({\n        id: `risk-contract-${client.id}`,\n        type: \"contract-expiring\",\n        title: `Contrato expirando: ${client.companyName}`,\n        description: `Expira em ${daysUntil} dias. Inicie renovacao.`,\n        severity: daysUntil <= 15 ? \"critical\" : \"warning\",\n        linkedEntityId: client.id,\n      });\n    }\n  }\n\n  // 5. Goal risk\n  const activeGoals = goals.filter((g) => new Date(g.endDate) > now);\n  for (const goal of activeGoals) {\n    const progress = goal.target > 0 ? goal.current / goal.target : 0;\n    const daysLeft = daysBetween(now.toISOString(), goal.endDate);\n    const totalDays = daysBetween(goal.startDate, goal.endDate);\n    const expectedProgress = totalDays > 0 ? (totalDays - daysLeft) / totalDays : 1;\n\n    if (progress < expectedProgress * 0.7 && daysLeft <= 10) {\n      alerts.push({\n        id: `risk-goal-${goal.id}`,\n        type: \"goal-risk\",\n        title: `Meta em risco: ${goal.title}`,\n        description: `${Math.round(progress * 100)}% concluido com ${daysLeft} dias restantes.`,\n        severity: \"critical\",\n      });\n    }\n  }\n\n  // Sort by severity\n  const severityOrder = { critical: 0, warning: 1 };\n  return alerts\n    .sort((a, b) => severityOrder[a.severity] - severityOrder[b.severity])\n    .slice(0, 8);\n}\n","// ============================================================================\n// Proactive Engine â€” Morning Briefing Formatter\n// ============================================================================\n\nimport { formatCurrencyBRL } from \"@/lib/business-rules\";\nimport type { ProactiveEngineInput } from \"./types\";\nimport { computeTodaysPriorities, computeSmartInsights, computeQuickWins } from \"./insights\";\nimport { computeRiskAlerts } from \"./alerts\";\n\nexport function generateMorningSummaryContent(\n  input: ProactiveEngineInput\n): string {\n  const priorities = computeTodaysPriorities(input);\n  const insights = computeSmartInsights(input);\n  const quickWins = computeQuickWins(input);\n  const risks = computeRiskAlerts(input);\n\n  const sections: string[] = [];\n\n  sections.push(\"\\u{1F305} **Briefing Matinal**\\n\");\n\n  // Priorities\n  if (priorities.length > 0) {\n    sections.push(\"**Prioridades de hoje:**\");\n    for (const p of priorities.slice(0, 5)) {\n      const icon = p.severity === \"critical\" ? \"\\u{1F534}\" : p.severity === \"warning\" ? \"\\u{1F7E1}\" : \"\\u{1F535}\";\n      sections.push(`  ${icon} **${p.title}** \\u2014 ${p.subtitle}`);\n    }\n    sections.push(\"\");\n  } else {\n    sections.push(\"**Prioridades:** \\u2705 Nenhuma urgencia. Dia tranquilo!\\n\");\n  }\n\n  // Quick wins\n  if (quickWins.length > 0) {\n    sections.push(\"**Ganhos rapidos (maior probabilidade):**\");\n    for (const qw of quickWins.slice(0, 3)) {\n      sections.push(\n        `  \\u{1F3AF} **${qw.clientName}** \\u2014 ${qw.probability}% de probabilidade \\u00B7 ${formatCurrencyBRL(qw.value)}/mes \\u00B7 ${qw.reason}`\n      );\n    }\n    sections.push(\"\");\n  }\n\n  // Risks\n  if (risks.length > 0) {\n    sections.push(\"**Alertas de risco:**\");\n    for (const r of risks.slice(0, 3)) {\n      const icon = r.severity === \"critical\" ? \"\\u{1F6A8}\" : \"\\u26A0\\uFE0F\";\n      sections.push(`  ${icon} ${r.title} \\u2014 ${r.description}`);\n    }\n    sections.push(\"\");\n  }\n\n  // Key metric\n  const conversionInsight = insights.find(\n    (i) => i.id === \"insight-conversion\"\n  );\n  if (conversionInsight?.metric) {\n    sections.push(\n      `**Metrica do dia:** Taxa de conversao: ${conversionInsight.metric.value} ${conversionInsight.metric.trend === \"up\" ? \"\\u{1F4C8}\" : conversionInsight.metric.trend === \"down\" ? \"\\u{1F4C9}\" : \"\\u27A1\\uFE0F\"}`\n    );\n  }\n\n  sections.push(\"\\n\\u{1F4A1} Use `/riscos` para detalhes ou `/meta` para progresso das metas.\");\n\n  return sections.join(\"\\n\");\n}\n","// ============================================================================\n// Menux Intelligence â€” Zustand Store\n// Ref: docs/Menux Intelligence.md â€” seÃ§Ã£o 14\n// ============================================================================\n\nimport { create } from \"zustand\";\nimport type {\n  IntelligenceStore,\n  Message,\n  Conversation,\n  CardContext,\n  ClientPickerItem,\n  ClientPickerFilters,\n  SlashCommand,\n  ActiveScreen,\n  UserRoleIntelligence,\n  AiTone,\n  ProactiveFrequency,\n} from \"@/types/intelligence\";\nimport { INTELLIGENCE_LIMITS } from \"@/types/intelligence\";\nimport {\n  processMessage,\n  generateGreeting,\n  generateContextLoaded,\n  generateErrorMessage,\n} from \"@/lib/intelligence-engine\";\nimport { getCommandDefinition } from \"@/lib/intelligence-commands\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport { useActivityStore } from \"@/stores/activity-store\";\nimport { computePipelineContext } from \"@/lib/proactive-engine\";\n\n// â”€â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nfunction uid(): string {\n  return `${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n}\n\nfunction now(): string {\n  return new Date().toISOString();\n}\n\nfunction isIntelligenceRole(\n  role: string | undefined\n): role is UserRoleIntelligence {\n  return (\n    role === \"master\" ||\n    role === \"admin\" ||\n    role === \"comercial\" ||\n    role === \"cs\"\n  );\n}\n\nfunction createConversation(messages: Message[] = []): Conversation {\n  return {\n    id: uid(),\n    preview: messages[0]?.content?.slice(0, 80) ?? \"\",\n    messages,\n    createdAt: now(),\n    updatedAt: now(),\n    messageCount: messages.length,\n  };\n}\n\nfunction getVendorContext() {\n  const user = useAuthStore.getState().user;\n  const opportunities = useOpportunityStore.getState().opportunities;\n  const userOpps = opportunities.filter((o) => o.responsibleId === user?.id);\n  const closed = userOpps.filter((o) => o.status === \"won\" || o.status === \"lost\");\n  const won = closed.filter((o) => o.status === \"won\");\n  const conversionRate = closed.length >= 3 ? Math.round((won.length / closed.length) * 100) : undefined;\n\n  return {\n    id: user?.id ?? \"unknown\",\n    name: user?.name ?? \"Vendedor\",\n    role: (user?.role ?? \"comercial\") as UserRoleIntelligence,\n    assignedCardCount: userOpps.filter((o) => o.status === \"open\").length,\n    conversionRate,\n  };\n}\n\nfunction getPipelineContext() {\n  try {\n    const user = useAuthStore.getState().user;\n    if (!user) return null;\n\n    const opportunities = useOpportunityStore.getState().opportunities;\n    const activities = useActivityStore.getState().activities;\n    return computePipelineContext(opportunities, activities, user.id, user.role);\n  } catch (err) {\n    console.error(\"[Menux Intelligence] Erro ao computar pipeline context:\", err);\n    return null;\n  }\n}\n\n// â”€â”€â”€ Store â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport const useIntelligenceStore = create<IntelligenceStore>((set, get) => ({\n  // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  isOpen: false,\n  activeConversation: null,\n  messages: [],\n  isTyping: false,\n  greetingSent: false,\n  contextCard: null,\n  isClientPickerOpen: false,\n  clientPickerSearch: \"\",\n  clientPickerFilters: {},\n  proactiveSuggestions: [],\n  history: [],\n  isHistoryOpen: false,\n  viewingHistoryConversation: null,\n  activeScreen: \"other\",\n  remainingQueries: INTELLIGENCE_LIMITS.MAX_QUERIES_PER_HOUR,\n  rateLimitResetAt: null,\n  menuxIntelligenceMode: \"focus\",\n  aiTone: \"neutral\" as AiTone,\n  proactiveFrequency: 5 as ProactiveFrequency,\n  proactiveNotifications: true,\n  isSettingsOpen: false,\n  isThinking: false,\n\n  // â”€â”€ Actions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n  open: () => {\n    const state = get();\n\n    // Se jÃ¡ tem conversa ativa com saudaÃ§Ã£o enviada, apenas abre\n    if (state.greetingSent && state.messages.length > 0) {\n      set({ isOpen: true });\n      return;\n    }\n\n    // Nova sessÃ£o â†’ gerar saudaÃ§Ã£o\n    const vendor = getVendorContext();\n    const greeting = generateGreeting(vendor, state.contextCard, true);\n\n    set({\n      isOpen: true,\n      greetingSent: true,\n      messages: [greeting],\n      activeConversation: createConversation([greeting]),\n    });\n  },\n\n  close: () => set({ isOpen: false }),\n\n  toggle: () => {\n    const state = get();\n    if (state.isOpen) {\n      state.close();\n    } else {\n      state.open();\n    }\n  },\n\n  sendMessage: async (text: string) => {\n    const state = get();\n\n    // ValidaÃ§Ãµes â€” seÃ§Ã£o 10 e 11\n    if (!text.trim()) return;\n\n    if (text.length > INTELLIGENCE_LIMITS.MAX_USER_MESSAGE_LENGTH) {\n      return; // Silenciosamente ignora â€” o UI deve jÃ¡ travar no limite\n    }\n\n    if (state.messages.length >= INTELLIGENCE_LIMITS.MAX_MESSAGES_PER_CONVERSATION) {\n      const errorMsg = generateErrorMessage(\"max-messages\");\n      set((s) => ({ messages: [...s.messages, errorMsg] }));\n      return;\n    }\n\n    if (state.remainingQueries <= 0) {\n      const errorMsg = generateErrorMessage(\"rate-limit\", {\n        resetTime: state.rateLimitResetAt\n          ? new Date(state.rateLimitResetAt).toLocaleTimeString(\"pt-BR\", {\n              hour: \"2-digit\",\n              minute: \"2-digit\",\n            })\n          : \"--:--\",\n      });\n      set((s) => ({ messages: [...s.messages, errorMsg] }));\n      return;\n    }\n\n    // Criar mensagem do vendedor\n    const userMessage: Message = {\n      id: uid(),\n      role: \"user\",\n      content: text,\n      contentType: \"text\",\n      timestamp: now(),\n    };\n\n    set((s) => ({\n      messages: [...s.messages, userMessage],\n      isTyping: true,\n    }));\n\n    // Processar resposta da IA\n    try {\n      const vendor = getVendorContext();\n      const response = await processMessage({\n        text,\n        card: state.contextCard,\n        vendor,\n        pipeline: getPipelineContext(),\n        mode: state.menuxIntelligenceMode,\n        tone: state.aiTone,\n      });\n\n      set((s) => ({\n        messages: [...s.messages, response],\n        isTyping: false,\n        remainingQueries: s.remainingQueries - 1,\n        activeConversation: s.activeConversation\n          ? {\n              ...s.activeConversation,\n              messages: [...s.messages, response],\n              messageCount: s.messages.length + 1,\n              updatedAt: now(),\n            }\n          : null,\n      }));\n    } catch {\n      const errorMsg = generateErrorMessage(\"api-error\");\n      set((s) => ({\n        messages: [...s.messages, errorMsg],\n        isTyping: false,\n      }));\n    }\n  },\n\n  executeSlashCommand: async (command: SlashCommand, payload?: string) => {\n    const state = get();\n    const rawRole = useAuthStore.getState().user?.role;\n    const role = isIntelligenceRole(rawRole) ? rawRole : null;\n    const definition = getCommandDefinition(command);\n\n    if (!definition) {\n      const errorMsg = generateErrorMessage(\"invalid-command\");\n      set((s) => ({ messages: [...s.messages, errorMsg] }));\n      return;\n    }\n\n    if (!role || !definition.availableFor.includes(role)) {\n      const errorMsg = generateErrorMessage(\"forbidden-command\", {\n        command: definition.command,\n      });\n      set((s) => ({ messages: [...s.messages, errorMsg] }));\n      return;\n    }\n\n    if (definition.requiresCard && !state.contextCard) {\n      const errorMsg = generateErrorMessage(\"no-card\");\n      set((s) => ({ messages: [...s.messages, errorMsg] }));\n      return;\n    }\n\n    if (definition.requiresInput && !(payload ?? \"\").trim()) {\n      const errorMsg = generateErrorMessage(\"missing-command-input\", {\n        command: definition.command,\n        hint: definition.inputPlaceholder ?? \"\",\n      });\n      set((s) => ({ messages: [...s.messages, errorMsg] }));\n      return;\n    }\n\n    if (state.remainingQueries <= 0) {\n      const errorMsg = generateErrorMessage(\"rate-limit\");\n      set((s) => ({ messages: [...s.messages, errorMsg] }));\n      return;\n    }\n\n    if (state.messages.length >= INTELLIGENCE_LIMITS.MAX_MESSAGES_PER_CONVERSATION) {\n      const errorMsg = generateErrorMessage(\"max-messages\");\n      set((s) => ({ messages: [...s.messages, errorMsg] }));\n      return;\n    }\n\n    // Criar mensagem do vendedor mostrando o comando\n    const userMessage: Message = {\n      id: uid(),\n      role: \"user\",\n      content: payload ? `${command} ${payload}` : command,\n      contentType: \"text\",\n      timestamp: now(),\n      sourceCommand: command,\n    };\n\n    set((s) => ({\n      messages: [...s.messages, userMessage],\n      isTyping: true,\n    }));\n\n    try {\n      const vendor = getVendorContext();\n      const response = await processMessage({\n        text: payload ?? \"\",\n        command,\n        card: state.contextCard,\n        vendor,\n        pipeline: getPipelineContext(),\n        mode: state.menuxIntelligenceMode,\n        tone: state.aiTone,\n      });\n\n      set((s) => ({\n        messages: [...s.messages, response],\n        isTyping: false,\n        remainingQueries: s.remainingQueries - 1,\n        activeConversation: s.activeConversation\n          ? {\n              ...s.activeConversation,\n              messages: [...s.messages, response],\n              messageCount: s.messages.length + 1,\n              updatedAt: now(),\n            }\n          : null,\n      }));\n    } catch {\n      const errorMsg = generateErrorMessage(\"api-error\");\n      set((s) => ({\n        messages: [...s.messages, errorMsg],\n        isTyping: false,\n      }));\n    }\n  },\n\n  setContextCard: (card: CardContext | null) => {\n    set({ contextCard: card });\n  },\n\n  openClientPicker: () => {\n    set({\n      isClientPickerOpen: true,\n      clientPickerSearch: \"\",\n      clientPickerFilters: {},\n    });\n  },\n\n  closeClientPicker: () => {\n    set({ isClientPickerOpen: false });\n  },\n\n  setClientPickerSearch: (search: string) => {\n    set({ clientPickerSearch: search });\n  },\n\n  setClientPickerFilters: (filters: ClientPickerFilters) => {\n    set({ clientPickerFilters: filters });\n  },\n\n  selectClient: (item: ClientPickerItem) => {\n    const cardContext: CardContext = {\n      cardId: item.entityId,\n      cardName: item.companyName,\n      stage: item.stage,\n      stageLabel: item.stageLabel,\n      temperature: item.temperature,\n      contacts: [],\n      tags: item.tags ?? [],\n      overdueActivities: [],\n      timelineNotes: [],\n      registeredObjections: [],\n      entityType: item.entityType,\n    };\n\n    // Gerar mensagem de confirmaÃ§Ã£o\n    const confirmMsg = generateContextLoaded(cardContext);\n\n    set((s) => ({\n      contextCard: cardContext,\n      isClientPickerOpen: false,\n      messages: [...s.messages, confirmMsg],\n    }));\n  },\n\n  dismissSuggestion: (id: string) => {\n    set((s) => ({\n      proactiveSuggestions: s.proactiveSuggestions.map((sug) =>\n        sug.id === id ? { ...sug, dismissed: true } : sug\n      ),\n    }));\n  },\n\n  startNewConversation: () => {\n    const state = get();\n\n    // Salvar conversa atual no histÃ³rico (se tiver mensagens)\n    if (state.activeConversation && state.messages.length > 1) {\n      const history = [\n        {\n          ...state.activeConversation,\n          messages: state.messages,\n          messageCount: state.messages.length,\n          updatedAt: now(),\n        },\n        ...state.history,\n      ].slice(0, INTELLIGENCE_LIMITS.MAX_STORED_CONVERSATIONS);\n\n      set({ history });\n    }\n\n    // Gerar nova saudaÃ§Ã£o\n    const vendor = getVendorContext();\n    const greeting = generateGreeting(vendor, null, false);\n\n    set({\n      messages: [greeting],\n      greetingSent: true,\n      activeConversation: createConversation([greeting]),\n      contextCard: null,\n      viewingHistoryConversation: null,\n      isHistoryOpen: false,\n    });\n  },\n\n  loadConversation: (id: string) => {\n    const state = get();\n    const convo = state.history.find((c) => c.id === id);\n    if (convo) {\n      set({\n        viewingHistoryConversation: convo,\n        isHistoryOpen: false,\n      });\n    }\n  },\n\n  exitHistoryView: () => {\n    set({ viewingHistoryConversation: null });\n  },\n\n  toggleHistory: () => {\n    set((s) => ({ isHistoryOpen: !s.isHistoryOpen }));\n  },\n\n  setActiveScreen: (screen: ActiveScreen) => {\n    set({ activeScreen: screen });\n  },\n\n  addProactiveSuggestion: (suggestion) => {\n    const state = get();\n    const todaySuggestions = state.proactiveSuggestions.filter((s) => {\n      const created = new Date(s.createdAt);\n      const today = new Date();\n      return (\n        created.getDate() === today.getDate() &&\n        created.getMonth() === today.getMonth() &&\n        created.getFullYear() === today.getFullYear() &&\n        !s.dismissed\n      );\n    });\n\n    // Limite de 3 sugestÃµes proativas por dia â€” seÃ§Ã£o 5.2\n    if (todaySuggestions.length >= INTELLIGENCE_LIMITS.MAX_PROACTIVE_SUGGESTIONS_PER_DAY) {\n      return;\n    }\n\n    set((s) => ({\n      proactiveSuggestions: [\n        ...s.proactiveSuggestions,\n        {\n          ...suggestion,\n          id: uid(),\n          dismissed: false,\n          createdAt: now(),\n        },\n      ],\n    }));\n  },\n\n  markActionExecuted: (messageId: string, actionId: string) => {\n    set((s) => ({\n      messages: s.messages.map((msg) =>\n        msg.id === messageId\n          ? {\n              ...msg,\n              suggestedActions: msg.suggestedActions?.map((action) =>\n                action.id === actionId\n                  ? { ...action, executed: true }\n                  : action\n              ),\n            }\n          : msg\n      ),\n    }));\n  },\n\n  addAssistantMessage: (message) => {\n    const fullMessage: Message = {\n      ...message,\n      id: uid(),\n      timestamp: now(),\n      role: \"assistant\",\n    };\n\n    set((s) => ({\n      messages: [...s.messages, fullMessage],\n    }));\n  },\n\n  decrementRateLimit: () => {\n    set((s) => {\n      const remaining = s.remainingQueries - 1;\n      return {\n        remainingQueries: Math.max(0, remaining),\n        rateLimitResetAt:\n          remaining <= 0 && !s.rateLimitResetAt\n            ? new Date(Date.now() + 60 * 60 * 1000).toISOString()\n            : s.rateLimitResetAt,\n      };\n    });\n  },\n\n  resetRateLimit: () => {\n    set({\n      remainingQueries: INTELLIGENCE_LIMITS.MAX_QUERIES_PER_HOUR,\n      rateLimitResetAt: null,\n    });\n  },\n\n  setMenuxIntelligenceMode: (mode) => set({ menuxIntelligenceMode: mode }),\n  openSettings: () => set({ isSettingsOpen: true }),\n  closeSettings: () => set({ isSettingsOpen: false }),\n  setAiTone: (aiTone) => set({ aiTone }),\n  setProactiveFrequency: (proactiveFrequency) => set({ proactiveFrequency }),\n  setProactiveNotifications: (proactiveNotifications) => set({ proactiveNotifications }),\n}));\n","// Public API â€” matches original exports\nexport { generateGreeting, generateContextLoaded } from \"./greeting\";\nexport { generateErrorMessage } from \"./freeform\";\nexport { processMessage } from \"./router\";\nexport type { ProcessMessageInput } from \"./router\";\n","// â”€â”€â”€ Free-form response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nimport type { Message, CardContext, MenuxIntelligenceMode, AiTone } from \"@/types/intelligence\";\nimport { uid, now, buildContextBadge } from \"./helpers\";\nimport { generatePlansInfo } from \"./analysis\";\nimport { generateMorningBriefing, generateRiskReport, generateGoalProgress, generateCoachingInsights, generateAgenda } from \"./proactive-commands\";\n\nconst MODE_LABELS: Record<MenuxIntelligenceMode, string> = {\n  focus: \"Foco Cliente\",\n  audit: \"Auditoria\",\n  reply: \"Responder\",\n  proposal: \"Proposta\",\n};\n\nconst MODE_HINTS: Record<MenuxIntelligenceMode, string> = {\n  focus: \"Focando na situaÃ§Ã£o especÃ­fica deste cliente e prÃ³ximos passos prÃ¡ticos.\",\n  audit: \"Analisando mÃ©tricas, gargalos e oportunidades de otimizaÃ§Ã£o.\",\n  reply: \"Gerando mensagens prontas para envio. Direto e prÃ¡tico.\",\n  proposal: \"Focando em argumentos de venda, diferenciaÃ§Ã£o e proposta de valor.\",\n};\n\nexport function generateFreeResponse(\n  text: string,\n  card: CardContext | null,\n  mode?: MenuxIntelligenceMode,\n  tone?: AiTone,\n): Message {\n  const txtLower = text.toLowerCase();\n\n  // Detectar intenÃ§Ã£o e responder contextualmente\n  if (\n    txtLower.includes(\"preÃ§o\") ||\n    txtLower.includes(\"plano\") ||\n    txtLower.includes(\"quanto custa\")\n  ) {\n    return generatePlansInfo();\n  }\n\n  if (\n    txtLower.includes(\"bom dia\") ||\n    txtLower.includes(\"resumo do dia\") ||\n    txtLower.includes(\"meu dia\") ||\n    txtLower.includes(\"briefing matinal\")\n  ) {\n    return generateMorningBriefing();\n  }\n\n  if (\n    txtLower.includes(\"risco\") ||\n    txtLower.includes(\"alerta\") ||\n    txtLower.includes(\"perigo\") ||\n    txtLower.includes(\"problema\")\n  ) {\n    return generateRiskReport();\n  }\n\n  if (\n    txtLower.includes(\"meta\") ||\n    txtLower.includes(\"objetivo\") ||\n    txtLower.includes(\"target\")\n  ) {\n    return generateGoalProgress();\n  }\n\n  if (\n    txtLower.includes(\"coaching\") ||\n    txtLower.includes(\"performance\") ||\n    txtLower.includes(\"desempenho\") ||\n    txtLower.includes(\"como estou\")\n  ) {\n    return generateCoachingInsights();\n  }\n\n  if (\n    txtLower.includes(\"agenda\") ||\n    txtLower.includes(\"atividades de hoje\") ||\n    txtLower.includes(\"o que tenho\")\n  ) {\n    return generateAgenda();\n  }\n\n  if (\n    txtLower.includes(\"mover\") ||\n    txtLower.includes(\"mova\") ||\n    txtLower.includes(\"avanÃ§ar card\")\n  ) {\n    // Edge case: seÃ§Ã£o 11 â€” IA nÃ£o executa aÃ§Ãµes diretas\n    return {\n      id: uid(),\n      role: \"assistant\",\n      content: `NÃ£o consigo mover cards diretamente, mas posso te ajudar a preparar tudo para o avanÃ§o. ${card ? `O card **${card.cardName}** estÃ¡ na etapa **${card.stageLabel}**. Quer que eu verifique o que falta para avanÃ§ar?` : \"Abra o card que deseja avanÃ§ar e eu te ajudo!\"}`,\n      contentType: \"text\",\n      timestamp: now(),\n      contextBadge: buildContextBadge(card),\n    };\n  }\n\n  // Resposta genÃ©rica contextual\n  const toneHint = tone === \"formal\"\n    ? \" Responderei de forma executiva e profissional.\"\n    : tone === \"casual\"\n      ? \" Responderei de forma descontraÃ­da e direta.\"\n      : \"\";\n\n  const modeHint = mode && mode !== \"focus\"\n    ? `\\n\\n*Modo ${MODE_LABELS[mode]} ativo â€” ${MODE_HINTS[mode]}*`\n    : \"\";\n\n  const content = card\n    ? `Entendi sua pergunta sobre **${card.cardName}**! ${card.temperature === \"hot\" ? \"ðŸ”¥ Esse lead estÃ¡ quente â€” \" : \"\"}Como posso te ajudar com isso? Posso gerar um \\`/briefing\\`, preparar uma \\`/mensagem\\` ou analisar o card com \\`/analise\\`.${toneHint}${modeHint}`\n    : `Entendi! Posso te ajudar de vÃ¡rias formas. Use os comandos rÃ¡pidos (/) para aÃ§Ãµes especÃ­ficas, ou me pergunte sobre planos, objeÃ§Ãµes, ou estratÃ©gias de venda.${toneHint}\\n\\nðŸ’¡ Dica: selecione um cliente com ðŸ“‹ para eu carregar todo o contexto e personalizar minhas respostas.${modeHint}`;\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"text\",\n    timestamp: now(),\n    contextBadge: buildContextBadge(card),\n  };\n}\n\n// â”€â”€â”€ Error responses â€” seÃ§Ã£o 11 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateErrorMessage(\n  type:\n    | \"no-card\"\n    | \"rate-limit\"\n    | \"api-error\"\n    | \"max-messages\"\n    | \"media-unsupported\"\n    | \"forbidden-command\"\n    | \"invalid-command\"\n    | \"missing-command-input\",\n  extra?: Record<string, string>\n): Message {\n  const messages: Record<string, string> = {\n    \"no-card\":\n      \"Para usar este comando, abra o card do lead primeiro ou selecione um cliente com ðŸ“‹. Posso te ajudar com outra coisa?\",\n    \"rate-limit\": `VocÃª atingiu o limite de consultas nesta hora. O limite serÃ¡ resetado Ã s ${extra?.resetTime ?? \"--:--\"}. Enquanto isso, suas conversas e histÃ³rico continuam disponÃ­veis.`,\n    \"api-error\":\n      \"Ops, tive um problema ao processar sua mensagem. Tente novamente em alguns instantes.\",\n    \"max-messages\":\n      \"Atingimos o limite desta conversa (100 mensagens). Inicie uma nova conversa para continuar.\",\n    \"media-unsupported\":\n      \"Por enquanto, consigo processar apenas texto. Descreva sua dÃºvida por escrito que eu te ajudo!\",\n    \"forbidden-command\":\n      `VocÃª nÃ£o tem permissÃ£o para usar o comando ${extra?.command ?? \"solicitado\"} neste perfil.`,\n    \"invalid-command\":\n      \"Comando invÃ¡lido. Use /ajuda para ver os comandos disponÃ­veis.\",\n    \"missing-command-input\":\n      `Faltou informar o conteÃºdo para ${extra?.command ?? \"este comando\"}. ${extra?.hint ?? \"Preencha o campo e tente novamente.\"}`,\n  };\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content: messages[type] ?? messages[\"api-error\"],\n    contentType: \"error\",\n    timestamp: now(),\n  };\n}\n","// â”€â”€â”€ Proactive Command Handlers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nimport type { Message } from \"@/types/intelligence\";\nimport type { ProactiveEngineInput } from \"@/lib/proactive-engine\";\nimport {\n  generateMorningSummaryContent,\n  computeSmartInsights,\n  computeQuickWins,\n  computeRiskAlerts,\n  computeTodaysPriorities,\n} from \"@/lib/proactive-engine\";\nimport { formatCurrencyBRL } from \"@/lib/business-rules\";\nimport { useOpportunityStore } from \"@/stores/opportunity-store\";\nimport { useActivityStore } from \"@/stores/activity-store\";\nimport { useClientStore } from \"@/stores/client-store\";\nimport { useGoalStore } from \"@/stores/goal-store\";\nimport { usePipelineStore } from \"@/stores/pipeline-store\";\nimport { useAuthStore } from \"@/stores/auth-store\";\nimport { uid, now } from \"./helpers\";\n\n// â”€â”€â”€ Engine Input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function getEngineInput(): ProactiveEngineInput {\n  const user = useAuthStore.getState().user;\n  return {\n    opportunities: useOpportunityStore.getState().opportunities,\n    activities: useActivityStore.getState().activities,\n    clients: useClientStore.getState().clients,\n    goals: useGoalStore.getState().goals,\n    pipelines: usePipelineStore.getState().pipelines,\n    userId: user?.id ?? \"unknown\",\n    userRole: user?.role ?? \"comercial\",\n  };\n}\n\n// â”€â”€â”€ Morning Briefing â€” /resumo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateMorningBriefing(): Message {\n  const input = getEngineInput();\n  const content = generateMorningSummaryContent(input);\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"morning-briefing\",\n    timestamp: now(),\n    sourceCommand: \"/resumo\",\n  };\n}\n\n// â”€â”€â”€ Risk Report â€” /riscos â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateRiskReport(): Message {\n  const input = getEngineInput();\n  const risks = computeRiskAlerts(input);\n\n  if (risks.length === 0) {\n    return {\n      id: uid(),\n      role: \"assistant\",\n      content: \"ðŸš¨ **Relatorio de Riscos**\\n\\nâœ… Nenhum alerta de risco no momento. Seu pipeline esta saudavel!\",\n      contentType: \"risk-report\",\n      timestamp: now(),\n      sourceCommand: \"/riscos\",\n    };\n  }\n\n  const sections: string[] = [\"ðŸš¨ **Relatorio de Riscos**\\n\"];\n\n  const critical = risks.filter((r) => r.severity === \"critical\");\n  const warning = risks.filter((r) => r.severity === \"warning\");\n\n  if (critical.length > 0) {\n    sections.push(`**Criticos (${critical.length}):**`);\n    for (const r of critical) {\n      sections.push(`  ðŸ”´ **${r.title}** â€” ${r.description}`);\n    }\n    sections.push(\"\");\n  }\n\n  if (warning.length > 0) {\n    sections.push(`**Atencao (${warning.length}):**`);\n    for (const r of warning) {\n      sections.push(`  ðŸŸ¡ **${r.title}** â€” ${r.description}`);\n    }\n    sections.push(\"\");\n  }\n\n  sections.push(`\\nðŸ“Š Total: **${risks.length}** alertas. Resolva os criticos primeiro.`);\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content: sections.join(\"\\n\"),\n    contentType: \"risk-report\",\n    timestamp: now(),\n    sourceCommand: \"/riscos\",\n  };\n}\n\n// â”€â”€â”€ Goal Progress â€” /meta â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateGoalProgress(): Message {\n  const input = getEngineInput();\n  const now_ = new Date();\n  const activeGoals = input.goals.filter((g) => new Date(g.endDate) > now_);\n\n  if (activeGoals.length === 0) {\n    return {\n      id: uid(),\n      role: \"assistant\",\n      content: \"ðŸŽ¯ **Progresso das Metas**\\n\\nNenhuma meta ativa no momento. Configure suas metas em Configuracoes > Metas.\",\n      contentType: \"goal-progress\",\n      timestamp: now(),\n      sourceCommand: \"/meta\",\n    };\n  }\n\n  const sections: string[] = [\"ðŸŽ¯ **Progresso das Metas**\\n\"];\n\n  for (const goal of activeGoals) {\n    const progress = Math.round((goal.current / goal.target) * 100);\n    const remaining = goal.target - goal.current;\n    const daysLeft = Math.max(0, Math.floor((new Date(goal.endDate).getTime() - now_.getTime()) / (1000 * 60 * 60 * 24)));\n\n    const remainingStr = goal.type === \"revenue\" ? formatCurrencyBRL(remaining) : `${remaining}`;\n    const currentStr = goal.type === \"revenue\" ? formatCurrencyBRL(goal.current) : `${goal.current}`;\n    const targetStr = goal.type === \"revenue\" ? formatCurrencyBRL(goal.target) : `${goal.target}`;\n\n    const progressBar = generateProgressBar(progress);\n    const statusIcon = progress >= 100 ? \"âœ…\" : progress >= 70 ? \"ðŸŸ¢\" : progress >= 40 ? \"ðŸŸ¡\" : \"ðŸ”´\";\n\n    sections.push(`**${goal.title}** ${statusIcon}`);\n    sections.push(`  ${progressBar} ${progress}%`);\n    sections.push(`  Atual: **${currentStr}** / Meta: **${targetStr}**`);\n\n    if (remaining > 0) {\n      sections.push(`  Faltam: **${remainingStr}** em **${daysLeft}** dias`);\n\n      // Daily target to hit goal\n      if (daysLeft > 0 && goal.type === \"revenue\") {\n        const dailyNeeded = remaining / daysLeft;\n        sections.push(`  Ritmo necessario: **${formatCurrencyBRL(dailyNeeded)}/dia**`);\n      }\n    } else {\n      sections.push(`  ðŸ† **Meta atingida!**`);\n    }\n    sections.push(\"\");\n  }\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content: sections.join(\"\\n\"),\n    contentType: \"goal-progress\",\n    timestamp: now(),\n    sourceCommand: \"/meta\",\n  };\n}\n\nexport function generateProgressBar(pct: number): string {\n  const filled = Math.round(pct / 10);\n  const empty = 10 - filled;\n  return `[${\"â–ˆ\".repeat(Math.min(filled, 10))}${\"â–‘\".repeat(Math.max(empty, 0))}]`;\n}\n\n// â”€â”€â”€ Coaching â€” /coaching â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateCoachingInsights(): Message {\n  const input = getEngineInput();\n  const insights = computeSmartInsights(input);\n  const quickWins = computeQuickWins(input);\n  const thirtyDaysAgo = new Date();\n  thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n  const sections: string[] = [\"ðŸ“ˆ **Coaching de Vendas**\\n\"];\n\n  // Conversion insight\n  const conversion = insights.find((i) => i.id === \"insight-conversion\");\n  if (conversion?.metric) {\n    sections.push(`**Taxa de conversao:** ${conversion.metric.value} ${conversion.metric.trend === \"up\" ? \"ðŸ“ˆ Acima da media!\" : conversion.metric.trend === \"down\" ? \"ðŸ“‰ Abaixo da media.\" : \"âž¡ï¸ Na media.\"}`);\n    sections.push(\"\");\n  }\n\n  // Velocity insight\n  const velocity = insights.find((i) => i.id === \"insight-velocity\");\n  if (velocity?.metric) {\n    sections.push(`**Velocidade de fechamento:** ${velocity.metric.value} por deal`);\n    sections.push(\"\");\n  }\n\n  // Activity analysis\n  const userActs = input.activities.filter(\n    (a) => a.responsibleId === input.userId && new Date(a.dueDate) > thirtyDaysAgo\n  );\n  const completed = userActs.filter((a) => a.status === \"completed\");\n  const completionRate = userActs.length > 0 ? Math.round((completed.length / userActs.length) * 100) : 0;\n\n  sections.push(`**Atividades (30 dias):** ${completed.length} concluidas de ${userActs.length} (${completionRate}% de conclusao)`);\n\n  // Activity mix\n  const activityTypes = completed.reduce((acc, a) => {\n    acc[a.type] = (acc[a.type] ?? 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  const topTypes = Object.entries(activityTypes).sort(([, a], [, b]) => b - a).slice(0, 3);\n  if (topTypes.length > 0) {\n    sections.push(`  Canais mais usados: ${topTypes.map(([t, c]) => `${t} (${c}x)`).join(\", \")}`);\n  }\n  sections.push(\"\");\n\n  // Loss analysis\n  const recentLosses = input.opportunities.filter(\n    (o) => o.status === \"lost\" && o.responsibleId === input.userId && new Date(o.updatedAt) > thirtyDaysAgo\n  );\n  if (recentLosses.length > 0) {\n    const reasons = recentLosses.reduce((acc, o) => {\n      const reason = o.lossReason ?? \"outro\";\n      acc[reason] = (acc[reason] ?? 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    sections.push(`**Analise de perdas (${recentLosses.length} perdidos):**`);\n    for (const [reason, count] of Object.entries(reasons).sort(([, a], [, b]) => b - a)) {\n      sections.push(`  - ${reason}: ${count}x`);\n    }\n    sections.push(\"\");\n  }\n\n  // Tips\n  sections.push(\"**Dicas personalizadas:**\");\n\n  if (completionRate < 80) {\n    sections.push(\"  ðŸ’¡ Sua taxa de conclusao de atividades esta abaixo de 80%. Priorize fechar as pendentes antes de criar novas.\");\n  }\n\n  if (conversion?.metric?.trend === \"down\") {\n    sections.push(\"  ðŸ’¡ Sua conversao caiu. Revise a qualidade dos leads na entrada do funil e use `/objecao` para preparar contra-argumentos.\");\n  }\n\n  if (quickWins.length > 0) {\n    sections.push(`  ðŸ’¡ Voce tem ${quickWins.length} ganhos rapidos (deals com alta probabilidade). Foque neles primeiro!`);\n  }\n\n  const hasCallActivity = topTypes.some(([t]) => t === \"call\" || t === \"meeting\");\n  if (!hasCallActivity) {\n    sections.push(\"  ðŸ’¡ Pouca atividade de ligacao/reuniao. Contato direto aumenta a taxa de conversao em media 30%.\");\n  }\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content: sections.join(\"\\n\"),\n    contentType: \"coaching\",\n    timestamp: now(),\n    sourceCommand: \"/coaching\",\n  };\n}\n\n// â”€â”€â”€ Agenda â€” /agenda â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateAgenda(): Message {\n  const input = getEngineInput();\n  const priorities = computeTodaysPriorities(input);\n  const now_ = new Date();\n  const todayStr = now_.toISOString().split(\"T\")[0];\n\n  const todayActivities = input.activities\n    .filter(\n      (a) =>\n        a.responsibleId === input.userId &&\n        a.dueDate === todayStr &&\n        a.status !== \"cancelled\" &&\n        a.status !== \"completed\"\n    )\n    .sort((a, b) => {\n      if (a.dueTime && b.dueTime) return a.dueTime.localeCompare(b.dueTime);\n      if (a.dueTime) return -1;\n      if (b.dueTime) return 1;\n      return 0;\n    });\n\n  const overdueActivities = input.activities.filter(\n    (a) =>\n      a.responsibleId === input.userId &&\n      a.status !== \"completed\" &&\n      a.status !== \"cancelled\" &&\n      new Date(a.dueDate) < now_ &&\n      a.dueDate !== todayStr\n  );\n\n  const sections: string[] = [\"ðŸ“… **Agenda do Dia**\\n\"];\n\n  // Overdue first\n  if (overdueActivities.length > 0) {\n    sections.push(`**ðŸ”´ Atrasadas (${overdueActivities.length}):**`);\n    for (const act of overdueActivities.slice(0, 5)) {\n      sections.push(`  - **${act.title}** â€” vencida em ${act.dueDate}${act.clientName ? ` Â· ${act.clientName}` : \"\"}`);\n    }\n    sections.push(\"\");\n  }\n\n  // Today's activities\n  if (todayActivities.length > 0) {\n    sections.push(`**ðŸ“‹ Hoje (${todayActivities.length}):**`);\n    for (const act of todayActivities) {\n      const timeStr = act.dueTime ? `${act.dueTime} â€” ` : \"\";\n      const typeIcon = act.type === \"call\" ? \"ðŸ“ž\" : act.type === \"email\" ? \"ðŸ“§\" : act.type === \"meeting\" ? \"ðŸ¤\" : act.type === \"whatsapp\" ? \"ðŸ’¬\" : act.type === \"visit\" ? \"ðŸ¢\" : \"ðŸ“Œ\";\n      sections.push(`  ${typeIcon} ${timeStr}**${act.title}**${act.clientName ? ` Â· ${act.clientName}` : \"\"}`);\n    }\n    sections.push(\"\");\n  } else if (overdueActivities.length === 0) {\n    sections.push(\"Nenhuma atividade agendada para hoje.\\n\");\n  }\n\n  // Suggested priority order\n  if (priorities.length > 0) {\n    sections.push(\"**Sugestao de prioridade:**\");\n    for (let i = 0; i < Math.min(priorities.length, 5); i++) {\n      const p = priorities[i];\n      sections.push(`  ${i === 0 ? \"1ï¸âƒ£\" : i === 1 ? \"2ï¸âƒ£\" : i === 2 ? \"3ï¸âƒ£\" : i === 3 ? \"4ï¸âƒ£\" : \"5ï¸âƒ£\"} **${p.title}** â€” ${p.subtitle}`);\n    }\n    sections.push(\"\");\n  }\n\n  sections.push(`\\nTotal: **${overdueActivities.length}** atrasadas + **${todayActivities.length}** para hoje.`);\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content: sections.join(\"\\n\"),\n    contentType: \"agenda\",\n    timestamp: now(),\n    sourceCommand: \"/agenda\",\n  };\n}\n\n// â”€â”€â”€ Ajuda â€” seÃ§Ã£o 3.1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateHelp(): Message {\n  const content = `â“ **O que posso fazer por vocÃª?**\n\nSou a Menux Intelligence â€” seu braÃ§o direito comercial. Aqui estÃ¡ o que sei fazer:\n\n| Comando | O que faz |\n|---------|----------|\n| \\`/briefing\\` | ðŸ“‹ Resumo completo do lead antes de uma ligaÃ§Ã£o ou reuniÃ£o |\n| \\`/objecao\\` | ðŸ›¡ï¸ Contra-argumentos para objeÃ§Ãµes + mensagem pronta |\n| \\`/mensagem\\` | ðŸ’¬ Escrevo mensagens para WhatsApp, email ou ligaÃ§Ã£o |\n| \\`/pitch\\` | ðŸŽ¯ Argumentos de venda personalizados pro perfil do lead |\n| \\`/funil\\` | ðŸ“Š VisÃ£o geral do seu pipeline com aÃ§Ãµes prioritÃ¡rias |\n| \\`/analise\\` | ðŸ” DiagnÃ³stico completo de um card com probabilidade de fechamento |\n| \\`/comparar\\` | âš”ï¸ Comparativo Menux vs concorrente |\n| \\`/planos\\` | ðŸ’° Info sobre planos, preÃ§os e funcionalidades |\n| \\`/followup\\` | ðŸ”„ Gero follow-up baseado na Ãºltima interaÃ§Ã£o |\n| \\`/resumo\\` | ðŸŒ… Briefing matinal com prioridades, ganhos rapidos e alertas |\n| \\`/riscos\\` | ðŸš¨ Todos os alertas de risco do seu pipeline |\n| \\`/meta\\` | ðŸŽ¯ Progresso das metas com projecoes |\n| \\`/coaching\\` | ðŸ“ˆ Coaching de vendas com dicas personalizadas |\n| \\`/agenda\\` | ðŸ“… Atividades do dia + sugestao de prioridade |\n\nðŸ’¡ **Dicas:**\n- Abra o card de um lead e me pergunte â€” uso todo o contexto automaticamente\n- Use os botÃµes de aÃ§Ã£o para criar atividades e salvar notas direto no CRM\n- Copie mensagens prontas com 1 clique\n\nQuer experimentar algum comando?`;\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"help\",\n    timestamp: now(),\n    sourceCommand: \"/ajuda\",\n  };\n}\n","// â”€â”€â”€ Sales Command Handlers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nimport type { Message, CardContext, CopyableBlock, SuggestedAction } from \"@/types/intelligence\";\nimport { INTELLIGENCE_LIMITS } from \"@/types/intelligence\";\nimport { formatCurrencyBRL } from \"@/lib/business-rules\";\nimport { uid, now, buildContextBadge, temperatureEmoji, temperatureLabel } from \"./helpers\";\n\n// â”€â”€â”€ Briefing â€” seÃ§Ã£o 4.2.1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateBriefing(card: CardContext): Message {\n  const overdueCount = card.overdueActivities.length;\n  const contactList = card.contacts.length\n    ? card.contacts\n        .map(\n          (c) =>\n            `  - **${c.name}** ${c.role ? `(${c.role})` : \"\"} ${c.isDecisionMaker ? \"ðŸ‘‘ Decisor\" : \"\"}`\n        )\n        .join(\"\\n\")\n    : \"  - Nenhum contato registrado\";\n\n  const riskItems: string[] = [];\n  if (overdueCount > 0)\n    riskItems.push(`âš ï¸ ${overdueCount} atividade(s) vencida(s)`);\n  if (card.temperature === \"cold\")\n    riskItems.push(\"â„ï¸ Lead frio â€” pode estar esfriando\");\n  if (card.registeredObjections.length > 0)\n    riskItems.push(\n      `ðŸ›¡ï¸ ${card.registeredObjections.length} objeÃ§Ã£o(Ãµes) registrada(s)`\n    );\n\n  const content = `ðŸ“‹ **Briefing: ${card.cardName}**\n\n**Contexto rÃ¡pido:**\n  - Etapa: **${card.stageLabel}** Â· ${temperatureEmoji(card.temperature)} ${temperatureLabel(card.temperature)}\n  ${card.cnpj ? `- CNPJ: ${card.cnpj}` : \"\"}\n  ${card.tags.length ? `- Tags: ${card.tags.join(\", \")}` : \"\"}\n\n**Contatos:**\n${contactList}\n\n**Valor:**\n  ${card.quotedPlan ? `- Plano cotado: **${card.quotedPlan}**` : \"- Plano: nÃ£o cotado ainda\"}\n  ${card.setupValue ? `- Setup: ${formatCurrencyBRL(card.setupValue)}` : \"\"}\n  ${card.mrrValue ? `- MRR: ${formatCurrencyBRL(card.mrrValue)}` : \"\"}\n\n${\n  card.timelineNotes.length > 0\n    ? `**Ãšltimas interaÃ§Ãµes:**\\n${card.timelineNotes\n        .slice(0, 5)\n        .map((n, i) => `  ${i + 1}. ${n}`)\n        .join(\"\\n\")}`\n    : \"**HistÃ³rico:** Sem notas registradas\"\n}\n\n${\n  riskItems.length > 0\n    ? `**Riscos:**\\n${riskItems.map((r) => `  ${r}`).join(\"\\n\")}`\n    : \"**Riscos:** âœ… Nenhum risco identificado\"\n}\n\n**PrÃ³ximo passo sugerido:** ${\n    overdueCount > 0\n      ? \"Priorize as atividades vencidas antes de avanÃ§ar.\"\n      : card.temperature === \"hot\"\n        ? \"Lead quente! Agende uma reuniÃ£o o mais rÃ¡pido possÃ­vel.\"\n        : \"FaÃ§a um follow-up personalizado para manter o engajamento.\"\n  }`;\n\n  const suggestedActions: SuggestedAction[] = [\n    {\n      id: uid(),\n      type: \"create-activity\",\n      label: \"ðŸ“… Criar atividade\",\n      icon: \"calendar\",\n      payload: {\n        type: \"follow-up\",\n        description: `Follow-up do briefing de ${card.cardName}`,\n        opportunityId: card.cardId,\n        opportunityTitle: card.cardName,\n      },\n    },\n    {\n      id: uid(),\n      type: \"save-note\",\n      label: \"ðŸ“ Salvar na timeline\",\n      icon: \"file-text\",\n      payload: {\n        cardId: card.cardId,\n        entityType: card.entityType,\n        noteText: `Briefing gerado para ${card.cardName} (${card.stageLabel} Â· ${temperatureLabel(card.temperature)}).`,\n      },\n    },\n  ];\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"briefing\",\n    timestamp: now(),\n    contextBadge: buildContextBadge(card),\n    suggestedActions,\n    sourceCommand: \"/briefing\",\n  };\n}\n\n// â”€â”€â”€ ObjeÃ§Ã£o â€” seÃ§Ã£o 4.2.2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateObjectionResponse(\n  objection: string,\n  card: CardContext | null\n): Message {\n  // Classificar a objeÃ§Ã£o automaticamente\n  const objLower = objection.toLowerCase();\n  let category = \"Geral\";\n  if (objLower.includes(\"preÃ§o\") || objLower.includes(\"caro\") || objLower.includes(\"custo\"))\n    category = \"PreÃ§o\";\n  else if (objLower.includes(\"concorrent\") || objLower.includes(\"outro sistema\"))\n    category = \"Concorrente\";\n  else if (objLower.includes(\"momento\") || objLower.includes(\"agora nÃ£o\") || objLower.includes(\"depois\"))\n    category = \"Timing\";\n  else if (objLower.includes(\"preciso\") || objLower.includes(\"necessidade\"))\n    category = \"Falta de necessidade\";\n  else if (objLower.includes(\"confia\") || objLower.includes(\"garantia\"))\n    category = \"DesconfianÃ§a\";\n  else if (objLower.includes(\"tÃ©cnic\") || objLower.includes(\"integra\"))\n    category = \"TÃ©cnica\";\n\n  const cardContext = card\n    ? `\\n\\nðŸ’¡ *Contexto de ${card.cardName}: ${card.stageLabel} Â· ${temperatureEmoji(card.temperature)}*`\n    : \"\";\n\n  const whatsappResponse =\n    category === \"PreÃ§o\"\n      ? `Entendo a preocupaÃ§Ã£o com investimento! O legal Ã© que o retorno vem rÃ¡pido: clientes como vocÃª geralmente recuperam o valor em 2-3 meses. Posso te mostrar como?`\n      : category === \"Timing\"\n        ? `Faz total sentido! SÃ³ pra te ajudar a planejar: quando seria o melhor momento pra gente retomar? Assim garanto que vocÃª nÃ£o perde as condiÃ§Ãµes atuais.`\n        : `Ã“timo ponto! Muitos clientes tinham a mesma dÃºvida. Posso te mostrar como resolvemos isso na prÃ¡tica?`;\n\n  const content = `ðŸ›¡ï¸ **AnÃ¡lise da objeÃ§Ã£o**\n\n**Categoria:** ${category}\n**ObjeÃ§Ã£o recebida:** \"${objection}\"${cardContext}\n\n**Contra-argumento:**\n${\n  category === \"PreÃ§o\"\n    ? \"Foque no ROI, nÃ£o no custo. O Menux se paga em 2-3 meses com ganho de eficiÃªncia operacional. Destaque o impacto financeiro de NÃƒO ter o sistema.\"\n    : category === \"Timing\"\n      ? \"Respeite o momento, mas crie urgÃªncia suave. Pergunte o que acontece se continuarem sem soluÃ§Ã£o atÃ© lÃ¡. Plante a semente de que resolver antes gera vantagem.\"\n      : category === \"Concorrente\"\n        ? \"NÃ£o fale mal do concorrente. Foque nas diferenÃ§as de entrega, suporte e resultados comprovados do Menux. PeÃ§a para compararem funcionalidades lado a lado.\"\n        : \"Valide a preocupaÃ§Ã£o e redirecione com uma pergunta que traga o lead de volta ao valor.\"\n}\n\n**Pergunta de avanÃ§o:**\n\"${\n    category === \"PreÃ§o\"\n      ? \"Se eu te mostrasse que o investimento se paga em 3 meses, faria sentido avanÃ§armos?\"\n      : \"O que precisaria acontecer para vocÃª se sentir seguro(a) pra avanÃ§ar?\"\n  }\"`;\n\n  const copyableBlocks: CopyableBlock[] = [\n    {\n      id: uid(),\n      content: whatsappResponse,\n      channel: \"whatsapp\",\n      charLimit: INTELLIGENCE_LIMITS.WHATSAPP_CHAR_LIMIT,\n      label: \"Mensagem WhatsApp\",\n    },\n  ];\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"objection-response\",\n    timestamp: now(),\n    contextBadge: buildContextBadge(card),\n    copyableBlocks,\n    sourceCommand: \"/objecao\",\n  };\n}\n\n// â”€â”€â”€ Ghostwriting â€” seÃ§Ã£o 4.2.3 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateGhostwriting(\n  input: string,\n  card: CardContext | null\n): Message {\n  const inputLower = input.toLowerCase();\n  let channel: \"whatsapp\" | \"email\" | \"call\" = \"whatsapp\";\n  if (inputLower.includes(\"email\")) channel = \"email\";\n  else if (inputLower.includes(\"ligaÃ§Ã£o\") || inputLower.includes(\"call\"))\n    channel = \"call\";\n\n  const clientName = card?.cardName ?? \"cliente\";\n  const contactName = card?.contacts?.[0]?.name ?? \"\";\n\n  const copyableBlocks: CopyableBlock[] = [];\n\n  if (channel === \"whatsapp\") {\n    const msg = contactName\n      ? `Oi ${contactName}! Tudo bem? Aqui Ã© da Menux. Vi que vocÃª demonstrou interesse no nosso sistema. Teria uns minutinhos pra gente bater um papo sobre como otimizar a operaÃ§Ã£o aÃ­? ðŸ˜Š`\n      : `OlÃ¡! Aqui Ã© da Menux. Gostaria de conversar sobre como podemos ajudar a otimizar a operaÃ§Ã£o do seu restaurante. Teria uns minutinhos? ðŸ˜Š`;\n    copyableBlocks.push({\n      id: uid(),\n      content: msg,\n      channel: \"whatsapp\",\n      charLimit: INTELLIGENCE_LIMITS.WHATSAPP_CHAR_LIMIT,\n      label: \"Mensagem WhatsApp\",\n    });\n  } else if (channel === \"email\") {\n    copyableBlocks.push(\n      {\n        id: uid(),\n        content: `Otimize a operaÃ§Ã£o do ${clientName} com a Menux`,\n        channel: \"email\",\n        label: \"Assunto\",\n      },\n      {\n        id: uid(),\n        content: `${contactName ? `OlÃ¡ ${contactName},` : \"OlÃ¡,\"}\\n\\nEspero que esteja tudo bem! Sou da Menux e gostaria de mostrar como nosso sistema pode transformar a gestÃ£o do seu restaurante.\\n\\nPodemos agendar uma conversa rÃ¡pida de 15 minutos esta semana?\\n\\nAbraÃ§o!`,\n        channel: \"email\",\n        charLimit: INTELLIGENCE_LIMITS.EMAIL_BODY_CHAR_LIMIT,\n        label: \"Corpo do email\",\n      }\n    );\n  } else {\n    copyableBlocks.push({\n      id: uid(),\n      content: `â€¢ Abertura: Apresentar-se e confirmar se Ã© bom momento\\nâ€¢ Contexto: Mencionar como conhecemos o restaurante\\nâ€¢ Dor: Perguntar sobre principais desafios da operaÃ§Ã£o\\nâ€¢ Valor: Conectar dores com soluÃ§Ãµes Menux\\nâ€¢ PrÃ³ximo passo: Propor demonstraÃ§Ã£o ou reuniÃ£o`,\n      channel: \"call\",\n      label: \"Roteiro de ligaÃ§Ã£o\",\n    });\n  }\n\n  const content = `ðŸ’¬ **Mensagem gerada para ${channel === \"whatsapp\" ? \"WhatsApp\" : channel === \"email\" ? \"Email\" : \"LigaÃ§Ã£o\"}**${card ? `\\n\\nðŸ“‹ *Baseado em: ${card.cardName}*` : \"\"}`;\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"ghostwriting\",\n    timestamp: now(),\n    contextBadge: buildContextBadge(card),\n    copyableBlocks,\n    sourceCommand: \"/mensagem\",\n  };\n}\n\n// â”€â”€â”€ Pitch â€” seÃ§Ã£o 4.2.4 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generatePitch(card: CardContext): Message {\n  const content = `ðŸŽ¯ **Pitch Personalizado: ${card.cardName}**\n\n**Perfil:** ${card.stageLabel} Â· ${temperatureEmoji(card.temperature)} ${temperatureLabel(card.temperature)}${card.tags.length ? ` Â· ${card.tags.join(\", \")}` : \"\"}\n\n**Ponto de valor 1 â€” EficiÃªncia operacional:**\n  - ðŸ”´ Dor: Perda de tempo com processos manuais no salÃ£o\n  - âœ… Menux: AutomaÃ§Ã£o completa de comanda digital e gestÃ£o de mesas\n  - ðŸ“Š Case: Restaurantes similares reduziram 40% do tempo de atendimento\n\n**Ponto de valor 2 â€” Controle financeiro:**\n  - ðŸ”´ Dor: Falta de visibilidade sobre custos e margem por prato\n  - âœ… Menux: Dashboard em tempo real com CMV, ticket mÃ©dio e faturamento\n  - ðŸ“Š Case: Aumento de 25% na margem apÃ³s 3 meses de uso\n\n**Ponto de valor 3 â€” ExperiÃªncia do cliente:**\n  - ðŸ”´ Dor: Filas, erros de pedido, demora no atendimento\n  - âœ… Menux: CardÃ¡pio digital + autoatendimento + integraÃ§Ã£o com delivery\n\n**Pergunta de abertura:** \"Qual o maior gargalo da operaÃ§Ã£o hoje â€” atendimento, controle financeiro ou gestÃ£o do cardÃ¡pio?\"\n\n**Frase de fechamento:** \"Com base no que conversamos, faz sentido agendarmos uma demonstraÃ§Ã£o personalizada para a semana que vem?\"`;\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"pitch\",\n    timestamp: now(),\n    contextBadge: buildContextBadge(card),\n    suggestedActions: [\n      {\n        id: uid(),\n        type: \"create-activity\",\n        label: \"ðŸ“… Agendar demonstraÃ§Ã£o\",\n        icon: \"calendar\",\n        payload: {\n          type: \"meeting\",\n          description: `Demo ${card.cardName}`,\n          opportunityId: card.cardId,\n          opportunityTitle: card.cardName,\n        },\n      },\n    ],\n    sourceCommand: \"/pitch\",\n  };\n}\n\n// â”€â”€â”€ Follow-up â€” seÃ§Ã£o 4.2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nexport function generateFollowup(card: CardContext): Message {\n  const contactName = card.contacts?.[0]?.name ?? \"\";\n  const lastNote =\n    card.timelineNotes.length > 0\n      ? card.timelineNotes[0]\n      : \"sem interaÃ§Ã£o recente\";\n\n  const whatsappMsg = contactName\n    ? `Oi ${contactName}! Tudo bem? Estou passando pra retomar nossa conversa sobre o Menux. Vi que ficou de analisar internamente â€” teve alguma novidade? Fico Ã  disposiÃ§Ã£o! ðŸ˜Š`\n    : `OlÃ¡! Passando pra retomar nossa conversa sobre o Menux. Conseguiu avaliar as informaÃ§Ãµes que enviamos? Estou Ã  disposiÃ§Ã£o pra qualquer dÃºvida!`;\n\n  const content = `ðŸ”„ **Follow-up: ${card.cardName}**\n\nðŸ“‹ *Ãšltima interaÃ§Ã£o: ${lastNote}*\n\n**EstratÃ©gia:** Retomada gentil com abertura para atualizaÃ§Ã£o do lead.`;\n\n  return {\n    id: uid(),\n    role: \"assistant\",\n    content,\n    contentType: \"followup\",\n    timestamp: now(),\n    contextBadge: buildContextBadge(card),\n    copyableBlocks: [\n      {\n        id: uid(),\n        content: whatsappMsg,\n        channel: \"whatsapp\",\n        charLimit: INTELLIGENCE_LIMITS.WHATSAPP_CHAR_LIMIT,\n        label: \"Mensagem WhatsApp\",\n      },\n    ],\n    suggestedActions: [\n      {\n        id: uid(),\n        type: \"schedule-followup\",\n        label: \"ðŸ”„ Agendar follow-up\",\n        icon: \"refresh-cw\",\n        payload: {\n          type: \"follow-up\",\n          description: `Follow-up ${card.cardName}`,\n          opportunityId: card.cardId,\n          opportunityTitle: card.cardName,\n        },\n      },\n    ],\n    sourceCommand: \"/followup\",\n  };\n}\n","// â”€â”€â”€ Main Engine â€” Process â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nimport type { Message, SlashCommand, CardContext, VendorContext, PipelineContext, MenuxIntelligenceMode, AiTone } from \"@/types/intelligence\";\nimport { generateBriefing, generateObjectionResponse, generateGhostwriting, generatePitch, generateFollowup } from \"./sales-commands\";\nimport { generateFunnelSummary, generateCardAnalysis, generateComparison, generatePlansInfo } from \"./analysis\";\nimport { generateMorningBriefing, generateRiskReport, generateGoalProgress, generateCoachingInsights, generateAgenda, generateHelp } from \"./proactive-commands\";\nimport { generateFreeResponse, generateErrorMessage } from \"./freeform\";\n\nexport interface ProcessMessageInput {\n  text: string;\n  command?: SlashCommand;\n  card: CardContext | null;\n  vendor: VendorContext;\n  pipeline: PipelineContext | null;\n  mode?: MenuxIntelligenceMode;\n  tone?: AiTone;\n}\n\n/**\n * Processa a mensagem do vendedor e retorna a resposta da IA.\n * Simula processamento assÃ­ncrono com delay artificial para UX.\n */\nexport async function processMessage(\n  input: ProcessMessageInput\n): Promise<Message> {\n  // Simular tempo de resposta (1-3s para simples, 2-5s para complexo)\n  const isComplex = [\"/briefing\", \"/analise\", \"/funil\", \"/pitch\"].includes(\n    input.command ?? \"\"\n  );\n  const delay = isComplex\n    ? 1500 + Math.random() * 2000\n    : 800 + Math.random() * 1200;\n\n  await new Promise((resolve) => setTimeout(resolve, delay));\n\n  // Se hÃ¡ um slash command, usar o handler correspondente\n  if (input.command) {\n    switch (input.command) {\n      case \"/briefing\":\n        if (!input.card)\n          return generateErrorMessage(\"no-card\");\n        return generateBriefing(input.card);\n\n      case \"/objecao\":\n        return generateObjectionResponse(input.text, input.card);\n\n      case \"/mensagem\":\n        return generateGhostwriting(input.text, input.card);\n\n      case \"/pitch\":\n        if (!input.card)\n          return generateErrorMessage(\"no-card\");\n        return generatePitch(input.card);\n\n      case \"/funil\":\n        return generateFunnelSummary(input.pipeline);\n\n      case \"/analise\":\n        if (!input.card)\n          return generateErrorMessage(\"no-card\");\n        return generateCardAnalysis(input.card);\n\n      case \"/comparar\":\n        return generateComparison(input.text || \"Concorrente\");\n\n      case \"/planos\":\n        return generatePlansInfo();\n\n      case \"/followup\":\n        if (!input.card)\n          return generateErrorMessage(\"no-card\");\n        return generateFollowup(input.card);\n\n      case \"/ajuda\":\n        return generateHelp();\n\n      case \"/resumo\":\n        return generateMorningBriefing();\n\n      case \"/riscos\":\n        return generateRiskReport();\n\n      case \"/meta\":\n        return generateGoalProgress();\n\n      case \"/coaching\":\n        return generateCoachingInsights();\n\n      case \"/agenda\":\n        return generateAgenda();\n\n      default:\n        return generateFreeResponse(input.text, input.card, input.mode, input.tone);\n    }\n  }\n\n  // Sem comando â†’ resposta livre (com contexto de modo e tom)\n  return generateFreeResponse(input.text, input.card, input.mode, input.tone);\n}\n","// ============================================================================\n// Menux Intelligence â€” Slash Commands Registry\n// Ref: docs/Menux Intelligence.md â€” seÃ§Ã£o 3.1\n// ============================================================================\n\nimport type {\n  SlashCommand,\n  SlashCommandDefinition,\n  UserRoleIntelligence,\n} from \"@/types/intelligence\";\n\n/** DefiniÃ§Ãµes de todos os 15 slash commands */\nexport const SLASH_COMMANDS: SlashCommandDefinition[] = [\n  {\n    command: \"/briefing\",\n    label: \"Briefing do Lead\",\n    icon: \"ðŸ“‹\",\n    description:\n      \"Gera resumo completo do card: contexto, objeÃ§Ãµes, histÃ³rico, prÃ³ximo passo sugerido\",\n    requiresCard: true,\n    availableFor: [\"comercial\", \"cs\", \"admin\", \"master\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/objecao\",\n    label: \"Quebrar ObjeÃ§Ã£o\",\n    icon: \"ðŸ›¡ï¸\",\n    description:\n      \"Solicita a objeÃ§Ã£o recebida e retorna contra-argumento + mensagem pronta para WhatsApp\",\n    requiresCard: false,\n    availableFor: [\"comercial\", \"cs\"],\n    requiresInput: true,\n    inputPlaceholder: \"Qual objeÃ§Ã£o vocÃª recebeu?\",\n  },\n  {\n    command: \"/mensagem\",\n    label: \"Escrever Mensagem\",\n    icon: \"ðŸ’¬\",\n    description:\n      \"Ghostwriting de mensagem para WhatsApp/email com tom e contexto do lead\",\n    requiresCard: false,\n    availableFor: [\"comercial\", \"cs\"],\n    requiresInput: true,\n    inputPlaceholder:\n      \"Qual o canal (WhatsApp/Email/LigaÃ§Ã£o) e objetivo da mensagem?\",\n  },\n  {\n    command: \"/pitch\",\n    label: \"Pitch Personalizado\",\n    icon: \"ðŸŽ¯\",\n    description:\n      \"Gera 2-3 argumentos matadores baseados no perfil do lead (segmento, mesas, dores)\",\n    requiresCard: true,\n    availableFor: [\"comercial\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/funil\",\n    label: \"Resumo do Funil\",\n    icon: \"ðŸ“Š\",\n    description:\n      \"VisÃ£o consolidada do pipeline: quentes, parados, em risco, prÃ³ximas aÃ§Ãµes\",\n    requiresCard: false,\n    availableFor: [\"comercial\", \"admin\", \"master\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/analise\",\n    label: \"Analisar Card\",\n    icon: \"ðŸ”\",\n    description:\n      \"DiagnÃ³stico completo: temperatura, score, risco, sugestÃ£o de prÃ³ximo passo\",\n    requiresCard: true,\n    availableFor: [\"comercial\", \"cs\", \"admin\", \"master\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/comparar\",\n    label: \"Comparativo\",\n    icon: \"âš”ï¸\",\n    description:\n      \"Menux vs concorrente citado â€” apenas pontos oficiais e documentados\",\n    requiresCard: false,\n    availableFor: [\"comercial\"],\n    requiresInput: true,\n    inputPlaceholder: \"Qual concorrente vocÃª quer comparar?\",\n  },\n  {\n    command: \"/planos\",\n    label: \"Planos e PreÃ§os\",\n    icon: \"ðŸ’°\",\n    description:\n      \"Consulta rÃ¡pida sobre Assist, Sales, Control â€” preÃ§os, features, setup\",\n    requiresCard: false,\n    availableFor: [\"comercial\", \"cs\", \"admin\", \"master\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/followup\",\n    label: \"Gerar Follow-up\",\n    icon: \"ðŸ”„\",\n    description:\n      \"Cria mensagem de follow-up baseada na Ãºltima interaÃ§Ã£o do card\",\n    requiresCard: true,\n    availableFor: [\"comercial\", \"cs\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/ajuda\",\n    label: \"O que vocÃª pode fazer?\",\n    icon: \"â“\",\n    description: \"Lista capacidades da Menux Intelligence com exemplos\",\n    requiresCard: false,\n    availableFor: [\"comercial\", \"cs\", \"admin\", \"master\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/resumo\",\n    label: \"Briefing Matinal\",\n    icon: \"ðŸŒ…\",\n    description:\n      \"Resumo do dia: prioridades, ganhos rÃ¡pidos, alertas e mÃ©tricas\",\n    requiresCard: false,\n    availableFor: [\"comercial\", \"cs\", \"admin\", \"master\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/riscos\",\n    label: \"Alertas de Risco\",\n    icon: \"ðŸš¨\",\n    description:\n      \"Todos os alertas de risco: SLA, deals parados, contratos expirando, saÃºde de clientes\",\n    requiresCard: false,\n    availableFor: [\"comercial\", \"admin\", \"master\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/meta\",\n    label: \"Progresso da Meta\",\n    icon: \"ðŸŽ¯\",\n    description:\n      \"Progresso das suas metas com projeÃ§Ãµes e o que falta para bater\",\n    requiresCard: false,\n    availableFor: [\"comercial\", \"cs\", \"admin\", \"master\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/coaching\",\n    label: \"Coaching de Vendas\",\n    icon: \"ðŸ“ˆ\",\n    description:\n      \"Insights de performance, taxa de conversÃ£o, dicas personalizadas de melhoria\",\n    requiresCard: false,\n    availableFor: [\"comercial\", \"admin\", \"master\"],\n    requiresInput: false,\n  },\n  {\n    command: \"/agenda\",\n    label: \"Agenda do Dia\",\n    icon: \"ðŸ“…\",\n    description:\n      \"Atividades de hoje + sugestÃ£o de ordem de prioridade\",\n    requiresCard: false,\n    availableFor: [\"comercial\", \"cs\", \"admin\", \"master\"],\n    requiresInput: false,\n  },\n];\n\n/**\n * Retorna os comandos disponÃ­veis para um determinado perfil.\n * Filtra por permissÃ£o + disponibilidade de card quando necessÃ¡rio.\n */\nexport function getAvailableCommands(\n  role: UserRoleIntelligence,\n): SlashCommandDefinition[] {\n  return SLASH_COMMANDS.filter((cmd) => {\n    const roleAllowed = cmd.availableFor.includes(role);\n    // Se o comando requer card e nÃ£o hÃ¡ card â†’ ainda mostra, mas serÃ¡ disabled\n    return roleAllowed;\n  });\n}\n\n/**\n * Retorna a definiÃ§Ã£o de um comando especÃ­fico.\n */\nexport function getCommandDefinition(\n  command: SlashCommand\n): SlashCommandDefinition | undefined {\n  return SLASH_COMMANDS.find((cmd) => cmd.command === command);\n}\n\n/**\n * Busca slash command por texto digitado (filtra conforme o vendedor digita).\n */\nexport function filterCommands(\n  commands: SlashCommandDefinition[],\n  search: string\n): SlashCommandDefinition[] {\n  if (!search || search === \"/\") return commands;\n\n  const normalizedSearch = search\n    .toLowerCase()\n    .replace(\"/\", \"\")\n    .trim();\n\n  return commands.filter(\n    (cmd) =>\n      cmd.command.toLowerCase().includes(normalizedSearch) ||\n      cmd.label.toLowerCase().includes(normalizedSearch) ||\n      cmd.description.toLowerCase().includes(normalizedSearch)\n  );\n}\n\n/**\n * Placeholder contextual do input â€” seÃ§Ã£o 2.2.2 (Zona 3).\n */\nexport function getInputPlaceholder(\n  activeScreen: string,\n  cardName?: string\n): string {\n  if (cardName) return `Pergunte sobre ${cardName}...`;\n\n  switch (activeScreen) {\n    case \"pipes\":\n      return \"Pergunte sobre seus leads...\";\n    case \"dashboard\":\n      return \"Como posso te ajudar hoje?\";\n    default:\n      return \"Fale com a Menux Intelligence...\";\n  }\n}\n"],"names":[],"mappings":"uCAqBA,CAAA,CAAA,CAAA,CAAA,AAAM,CAAN,CAAM,CAAA,EAAY,CAAA,CAAA,CAAA,CAAZ,AAAY,CAAZ,AAAY,CAAZ,AAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAlBC,CAkBa,AAjB/C,CAiB+C,AAjB9C,CAiB8C,AAjB9C,CAiB8C,AAjB9C,CAAA,AAiB8C,CAjB9C,AAiB8C,CAjB9C,AAiB8C,CAAA,AAjB9C,CAAA,AAAQ,AAiBsC,CAjBtC,AAAE,AAiBoC,CAAU,CAjB3C,AAiB2C,CAjB3C,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAsD,CAAA,CAAA,CAAA,CAAK,AAAL,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CACnF,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAc,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAC3C,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAuD,AAAvD,CAAuD,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CACpF,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAa,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAC5C,2EEJO,SAAS,IACd,MAAO,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,EAAG,GAAA,CAAI,AACtE,CAEO,SAAS,IACd,OAAO,IAAI,OAAO,WAAW,EAC/B,CAEO,SAAS,EAAkB,CAAwB,EACxD,GAAK,CAAD,CACJ,IADW,EACJ,CACL,IAFgB,GAER,EAAK,MAAM,CACnB,SAAU,EAAK,QAAQ,CACvB,MAAO,EAAK,UAAU,CACtB,YAAa,EAAK,WAAW,AAC/B,CACF,CAEO,SAAS,EAAiB,CAAS,EACxC,OAAQ,GACN,IAAK,MACH,MAAO,IACT,KAAK,OAIL,QAHE,MAAO,KACT,KAAK,OACH,MAAO,IAGX,CACF,CAEO,SAAS,EAAiB,CAAS,EACxC,OAAQ,GACN,IAAK,MACH,MAAO,QACT,KAAK,OACH,MAAO,OACT,KAAK,OACH,MAAO,MACT,SACE,OAAO,CACX,CACF,CCzCO,SAAS,EACd,CAAqB,CACrB,CAAwB,CACxB,CAAqB,MAEjB,EAIF,EAFE,EAEQ,CAAC,GAFH,SAEY,EAAE,EAAO,IAAI,CAAC;AAAA;AAAA,6BAAqF,EAAE,EAAK,QAAQ,CAAC,wEAAwE,CAAC,CACvM,EAEC,CAAC,WAFY,EAEC,EAAE,EAAO,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4DAAgP,CAAC,CAG7Q,CAAC,YAAS,EAAE,EAAO,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4DAAmP,CAAC,CAIxR,IAAM,EAAsC,AAAC,EAUzC,EAAE,CATF,CACE,CACE,GAAI,IACJ,KAAM,YACN,MAAO,sBACP,KAAM,QACN,QAAS,CAAE,OAAQ,oBAAqB,CAC1C,EACD,CAGL,MAAO,CACL,GAAI,IACJ,KAAM,oBACN,EACA,YAAa,WACb,UAAW,IACX,iBAAkB,EAAiB,MAAM,CAAG,EAAI,OAAmB,CACrE,CACF,CAIO,SAAS,EAAsB,CAAiB,EACrD,MAAO,CACL,GAAI,IACJ,KAAM,YACN,QAAS,CAAC,wBAAwB,EAAE,EAAK,QAAQ,CAAC,IAAI,EAAE,EAAK,UAAU,CAAC,MAAG,EAAE,EAAiB,EAAK,WAAW,EAAE,CAAC,EAAE,EAAiB,EAAK,WAAW,EAAE,sCAAsC,CAAC,CAC7L,YAAa,iBACb,UAAW,IACX,aAAc,EAAkB,EAClC,CACF,8BFuWmC,CAEjC,8BAA+B,IAE/B,yBAA0B,GAE1B,wBAAyB,IAEzB,uBAAwB,IAExB,kCAAmC,GAEnC,qBAAsB,GAEtB,wBAAyB,GAEzB,uBAAwB,GAExB,oBAAqB,IAErB,sBAAuB,GACzB,+LGlbA,IAAA,EAAA,EAAA,CAAA,CAAA,OAKO,SAAS,EAAsB,CAAgC,EACpE,GAAI,CAAC,EACH,MAAO,CACL,CAFW,EAEP,IACJ,KAAM,YACN,QACE,iGACF,YAAa,iBACb,UAAW,IACX,cAAe,QACjB,EAGF,IAAM,EAAa,OAAO,MAAM,CAAC,EAAS,YAAY,EAAE,MAAM,CAC5D,CAAC,EAAG,IAAM,EAAI,EACd,GAGI,EAAU,CAAC;;;;yBAIM,EAAE,EAAW,wBAAqB,EAAE,CAAA,EAAA,EAAA,iBAAiB,AAAjB,EAAkB,EAAS,QAAQ,EAAE;;;AAGlG,EAAE,OAAO,OAAO,CAAC,EAAS,YAAY,EACnC,GAAG,CAAC,CAAC,CAAC,EAAO,EAAM,GAAK,CAAC,MAAM,EAAE,EAAM,IAAI,EAAE,EAAM,MAAM,CAAC,EAC1D,IAAI,CAAC,MAAM;;;EAGZ,EAAE,EAAS,YAAY,CAAG,EAAI,CAAC,OAAO,EAAE,EAAS,YAAY,CAAC,gCAAgC,CAAC,CAAG,gCAAgC;EAClI,EAAE,EAAS,YAAY,CAAG,EAAI,CAAC,OAAO,EAAE,EAAS,YAAY,CAAC,kCAAkC,CAAC,CAAG,yCAAyC;EAC7I,EAAE,EAAS,UAAU,CAAG,EAAI,CAAC,MAAM,EAAE,EAAS,UAAU,CAAC,yCAAsC,CAAC,CAAG,yBAAA,CAA0B,CAE7H,MAAO,CACL,GAAI,IACJ,KAAM,oBACN,EACA,YAAa,iBACb,UAAW,IACX,cAAe,QACjB,CACF,CAIO,SAAS,EAAqB,CAAiB,EACpD,IAAM,EAAc,EAAK,SAAS,EAAI,KAAK,KAAK,CAAiB,GAAhB,KAAK,MAAM,GAAU,IAChE,EAAe,EAAK,iBAAiB,CAAC,MAAM,CAE5C,EAAqB,EAAE,CACzB,EAAe,GACjB,EAAS,IAAI,CAAC,CAAC,qBAAqB,EAAE,EAAA,CAAc,EACzB,IAAzB,EAAK,QAAQ,CAAC,MAAM,EACtB,EAAS,IAAI,CAAC,6BACZ,AAAC,EAAK,QAAQ,CAAC,IAAI,CAAC,AAAC,GAAM,EAAE,eAAe,GAC9C,EAAS,IAAI,CAAC,yBACZ,AAAC,EAAK,UAAU,EAAE,EAAS,IAAI,CAAC,oBAEpC,IAAM,EACiB,QAArB,EAAK,WAAW,EAA+B,IAAjB,EAC1B,gBACqB,SAArB,EAAK,WAAW,CACd,iBACA,iBAEF,EAAU,CAAC,iBAAc,EAAE,EAAK,QAAQ,CAAC;;sBAE9B,EAAE,EAAY,KAAK,EAAE,GAAe,GAAK,KAAO,GAAe,GAAK,KAAO,KAAK;;iBAElF,EAAE,EAAiB,EAAK,WAAW,EAAE,CAAC,EAAE,EAAiB,EAAK,WAAW,EAAE;EAC1F,EACuB,SAArB,EAAK,WAAW,CACZ,sDACqB,SAArB,EAAK,WAAW,CACd,oDACA,+CACP;;;EAGD,EACE,EAAK,QAAQ,CAAC,MAAM,CAAG,EACnB,EAAK,QAAQ,CACV,GAAG,CACF,AAAC,GACC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAI,sBAAsB,CAAC,EAAE,EAAE,eAAe,CAAG,aAAe,GAAA,CAAI,EAE7F,IAAI,CAAC,QACR,qDACL;;AAEH,EACE,EAAS,MAAM,CAAG,EACd,CAAC;AAAe,EAAE,EAAS,GAAG,CAAC,AAAC,GAAM,CAAC,OAAO,EAAE,EAAA,CAAG,EAAE,IAAI,CAAC,MAAA,CAAO,CACjE,8CACL;;kCAE8B,EAC3B,EAAe,EACX,gDACA,CAAC,EAAK,QAAQ,CAAC,IAAI,CAAC,AAAC,GAAM,EAAE,eAAe,EAC1C,yDACA,iEACP;;iCAE8B,EAAE,EAAA,CAAkB,CAEnD,MAAO,CACL,GAAI,IACJ,KAAM,oBACN,EACA,YAAa,gBACb,UAAW,IACX,aAAc,EAAkB,GAChC,iBAAkB,CAChB,CACE,GAAI,IACJ,KAAM,kBACN,MAAO,qBACP,KAAM,WACN,QAAS,CACP,KAAM,EAAe,EAAI,OAAS,YAClC,YAAa,CAAC,gCAAoB,EAAE,EAAK,QAAQ,CAAA,CAAE,CACnD,cAAe,EAAK,MAAM,CAC1B,iBAAkB,EAAK,QAAQ,AACjC,CACF,EACA,CACE,GAAI,IACJ,KAAM,YACN,MAAO,wBACP,KAAM,YACN,QAAS,CACP,OAAQ,EAAK,MAAM,CACnB,WAAY,EAAK,UAAU,CAC3B,SAAU,CAAC,0BAAuB,EAAE,EAAK,QAAQ,CAAC,WAAQ,EAAE,EAAY,oBAAoB,EAAE,EAAiB,CAAC,CAAC,AACnH,CACF,EACD,CACD,cAAe,UACjB,CACF,CAIO,SAAS,EAAmB,CAAkB,EACnD,IAAM,EAAU,CAAC,cAAc,EAAE,EAAW;;wBAEzB,EAAE,EAAW;oBACd,EAAE,IAAI,MAAM,CAAC,EAAW,MAAM,CAAG,GAAG;;;;;;;;;;;;;gJAa4E,CAAC,CAEnI,MAAO,CACL,GAAI,IACJ,KAAM,oBACN,EACA,YAAa,aACb,UAAW,IACX,cAAe,WACjB,CACF,CAIO,SAAS,IACd,IAAM,EAAU,CAAC;;;;;;;;;;;;;;;8CAewB,CAAC,CAE1C,MAAO,CACL,GAAI,IACJ,KAAM,oBACN,EACA,YAAa,aACb,UAAW,IACX,cAAe,SACjB,CACF,oLC5MO,SAAS,EAAY,CAAoB,CAAE,CAAoB,EACpE,IAAM,EAAI,IAAI,KAAK,GAEnB,OAAO,KAAK,KAAK,CAAC,CADR,AACS,IADL,KAAK,GACE,OAAO,GAAK,EAAE,OAAO,EAAA,CAAE,CAAK,GAAD,GAClD,CAD0D,AAGnD,KAHwD,IAG/C,CAHoD,CAGvC,CAHyC,AAGrB,CAAE,CAAoB,EACrE,IAAM,EAAI,IAAI,KAAK,GAEnB,MAAO,AAAC,CADE,IAAI,KAAK,GACT,OAAO,GAAK,EAAE,OAAO,EAAA,CAAE,CAAK,GAAD,CACvC,CAEO,EAHwC,KAAK,EAGpC,AAHsC,EAG9B,CAAY,EAClC,IAAM,EAAI,IAAI,KAAK,GACb,EAAM,IAAI,KAChB,OACE,EAAE,OAAO,KAAO,EAAI,OAAO,IAC3B,EAAE,QAAQ,KAAO,EAAI,QAAQ,IAC7B,EAAE,WAAW,KAAO,EAAI,WAAW,EAEvC,CAEO,SAAS,EAAa,CAAY,EACvC,IAAM,EAAO,EAAY,EAAM,IAAI,OAAO,WAAW,WACrD,AAAa,GAAG,CAAZ,EAAmB,OACV,GAAG,CAAZ,EAAmB,QAChB,CAAC,GAAG,EAAE,EAAK,KAAK,CAAC,AAC1B,CAEO,SAAS,EACd,CAAe,CACf,CAA8C,EAE9C,IAAK,IAAM,KAAK,EAAW,CACzB,IAAM,EAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GAC5C,GAAI,EAAO,OAAO,EAAM,IAAI,AAC9B,CACA,OAAO,CACT,CAEO,SAAS,EACd,CAAU,CACV,CAAc,CACd,CAAgB,QAEhB,AAAiB,WAAb,GAAyB,AAAa,SAAS,GAAO,EACnD,EAAM,MAAM,CAAC,AAAC,GAAM,EAAE,aAAa,GAAK,EACjD,sIC3CA,IAAA,EAAA,EAAA,CAAA,CAAA,OCWO,SAAS,EACd,CAA2B,EAE3B,MDyHM,EAuEA,EChMA,eAAE,CAAa,YAAE,CAAU,SAAE,CAAO,OAAE,CAAK,WAAE,CAAS,QAAE,CAAM,UAAE,CAAQ,CAAE,CAC9E,EAEI,EAAqC,IDMpC,AAPU,AACD,ECCc,EAA2B,EAAQ,GDDxC,IADK,EACC,CAAC,AAAC,GAC/B,AAAiB,MAFuB,QAAQ,AAE5C,EAAE,MAAM,EAAiC,aAAa,CAA1B,EAAE,IAA+B,EAAzB,EACxB,AACT,IADa,KAAK,EAAE,OAAO,EACjB,IAAI,MAGR,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,IAC9B,IAAM,EAAM,EAAI,aAAa,CCNW,ADOpC,EAAc,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,EAAI,aAAa,EACpD,KAGJ,MAAO,CACL,KAAM,mBACN,SAJkB,AAIP,EAJmB,EAAI,OAAO,CAAE,IAAI,OAAO,WAAW,KAIvC,EAAI,OAAS,SACvC,QAAS,CAAC,WAAW,EAAE,EAAI,KAAK,CAAC,UAAU,EAAE,EAAa,EAAI,OAAO,EAAE,CAAC,EAAE,EAAM,CAAC,OAAO,EAAE,EAAI,UAAU,CAAC,CAAC,CAAC,CAAG,GAAG,yCAAyC,CAAC,CAC3J,OAAQ,GAAK,GACb,SAAU,GAAK,UACjB,CACF,OA8CM,EAAM,IAAI,KAKT,AAJU,EChEU,EAA0B,EAAQ,GDgEE,IAAjC,EAAuC,CACnE,AAAC,GAAmB,SADuB,AACpC,EAAE,MAAM,AADoC,EACrB,EAAE,WAAW,EAI1C,GAAG,CAAC,AAAC,IACJ,IAAM,EAAY,EAAa,EAAI,WAAW,GAAI,EAAI,WAAW,EACjE,GAAI,EAAY,GAAK,GAAa,EAAG,CACnC,IAAM,EAAY,EAAa,EAAI,KAAK,CCxEJ,CDwEM,EAC1C,MAAO,CACL,KAAM,kBACN,SAAU,OACV,QAAS,CAAC,CAAC,EAAE,EAAI,UAAU,CAAC,SAAS,EAAE,KAAK,KAAK,CAAC,GAAW,kBAAkB,EAAE,EAAU,6BAA6B,CAAC,CACzH,OAAQ,EAAI,EAAE,CACd,SAAU,EAAI,UAAU,AAC1B,CACF,CACA,OAAO,IACT,GACC,MAAM,CAAC,aClFL,ADmBA,SAAS,AACd,CAA4B,CAC5B,CAAsB,CACtB,CAAc,CACd,CAAgB,CAChB,EAAgB,CAAC,EAMjB,OAAO,AAJU,EAAa,EAAe,EAAQ,GAAU,MAAM,CACnE,AAAC,GAAmB,SAAb,EAAE,MAAM,EAAe,AAAkB,UAAhB,WAAW,EAI1C,GAAG,CAAC,AAAC,IACJ,IAAM,EAAgB,EACnB,MAAM,CAAE,AAAD,GAAO,EAAE,aAAa,GAAK,EAAI,EAAE,EAAI,AAAa,gBAAX,MAAM,EACpD,IAAI,CACH,CAAC,EAAG,IACF,IAAI,KAAK,EAAE,OAAO,EAAE,OAAO,GAAK,IAAI,KAAK,EAAE,OAAO,EAAE,OAAO,IAI3D,EAAY,EADD,CAAa,CAAC,EAAE,EAAE,IACL,KADgB,EAAI,SAAS,CACnB,IAAI,OAAO,WAAW,WAE1D,AAAJ,GAAiB,EACR,CACL,KAAM,OAFsB,SAG5B,SAAU,OACV,QAAS,CAAC,aAAa,EAAE,EAAI,UAAU,CAAC,mBAAmB,EAAE,EAAU,gBAAgB,EAAE,EAAI,KAAK,CAAC,kBAAkB,CAAC,CACtH,OAAQ,EAAI,EAAE,CACd,SAAU,EAAI,UAAU,AAC1B,EAEK,IACT,GACC,MAAM,CAAC,QACZ,ECtD2B,EAAe,EAAY,EAAQ,MACvD,ADoFA,SAAS,AACd,CAA4B,CAC5B,CAAc,CACd,CAAgB,CAChB,EAAgB,CAAC,EAMjB,OAJiB,AAIV,EAJuB,EAAe,EAAQ,GAAU,MAAM,CACnE,AAAC,GAAmB,SAAb,EAAE,MAAM,EAId,GAAG,CAAC,AAAC,IACJ,IAAM,EAAY,EAAY,EAAI,SAAS,CAAE,IAAI,OAAO,WAAW,WACnE,AAAI,GAAa,EACR,CACL,KAAM,OAFsB,MAG5B,SAAW,GAAa,GAAK,OAAS,SACtC,QAAS,CAAC,YAAY,EAAE,EAAI,UAAU,CAAC,YAAY,EAAE,EAAU,yDAAyD,CAAC,CACzH,OAAQ,EAAI,EAAE,CACd,SAAU,EAAI,UAAU,AAC1B,EAEK,IACT,GACC,MAAM,CAAC,QACZ,EC7GyB,EAAe,EAAQ,SDkHlC,IAAI,KAET,ACnHc,EDoHlB,GAAG,CAAC,AAAC,IACJ,IAAM,EAAU,IAAI,KAAK,EAAK,OAAO,EAC/B,EAAY,IAAI,KAAK,EAAK,SAAS,EACzC,GAAI,EAAU,EAAK,OAAO,KAE1B,CAFgC,GAE1B,EAAgB,EAAY,EAAU,GAFA,QAEW,GAAI,EAAQ,WAAW,IACxE,EAAU,EAAY,EAAU,WAAW,GAAI,EAAI,WAAW,IAC9D,EAAgB,EAAY,EAAI,WAAW,GAAI,EAAQ,WAAW,IAElE,EAAiB,EAAK,MAAM,CAAG,EAAI,EAAK,OAAO,CAAG,EAAK,MAAM,CAAG,EAGtE,GAAI,EAAiB,AAAmB,KAJf,EAAgB,EAAI,EAAU,GAAgB,GAIvB,GAAiB,GAAI,CACnE,IAAM,EAAU,EAAK,MAAM,CAAG,EAAK,OAAO,CACpC,EACU,YAAd,EAAK,IAAI,CACL,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,GAClB,CAAA,EAAG,EAAQ,CAAC,EAAE,AAAc,iBAAT,IAAI,CAAoB,IAAM,GAAA,CAAI,CAE3D,MAAO,CACL,KAAM,YACN,SAAW,GAAiB,EAAI,OAAS,SACzC,QAAS,CAAC,MAAM,EAAE,EAAK,KAAK,CAAC,mBAAmB,EAAE,EAAW,cAAc,EAAE,EAAc,kBAAkB,EAAE,KAAK,KAAK,CAAkB,IAAjB,GAAsB,EAAE,CAAC,AACrJ,CACF,CACA,OAAO,IACT,GACC,MAAM,CAAC,aC9IL,ADiJA,SAAS,AACd,CAAiB,CACjB,CAAc,CACd,CAAgB,CAChB,EAAgB,EAAE,EAElB,IAAM,EAAM,IAAI,KAMhB,MAAO,CAJL,AAAa,cAAyB,UAAb,EACrB,EACA,EAAQ,MAAM,CAAC,AAAC,GAAM,EAAE,aAAa,GAAK,EAAA,EAG7C,GAAG,CAAE,AAAD,IACH,GAAI,CAAC,EAAO,WAAW,CAAE,OAAO,KAChC,IAAM,EAAY,EAAY,EAAI,WAAW,GAAI,EAAO,WAAW,SACnE,AAAI,EAAY,GAAK,GAAa,EACzB,CACL,KAAM,OAFuC,aAG7C,SAAW,GAAa,GAAK,OAAS,SACtC,QAAS,CAAC,aAAa,EAAE,EAAO,WAAW,CAAC,YAAY,EAAE,EAAU,gCAAgC,CAAC,CACrG,SAAU,EAAO,WAAW,AAC9B,EAEK,IACT,GACC,MAAM,CAAC,QACZ,EC5K+B,EAAS,EAAQ,MDwL1C,GADgB,AAJH,EClLS,EAAe,EAAQ,GDkLc,IAAjC,EAAuC,CAClE,AAAD,GAAoB,SADuB,AACpC,EAAE,MAD0C,AACpC,EAGY,MAAM,CAAE,AAAD,GAAO,CAAC,EAAE,iBAAiB,GAC/C,MAAM,EAAI,EACjB,CADoB,AAEzB,CACE,KAAM,iBACN,SAAU,MACV,QAAS,CAAA,EAAG,EAAY,MAAM,CAAC,+FAA+F,CAAC,AACjI,EACD,CAEI,EAAE,IAGJ,AClMA,SDkMS,AACd,CAAiB,CACjB,CAAc,CACd,CAAgB,EAOhB,IAAM,EAAgB,CAJpB,AAAa,cAAyB,UAAb,EACrB,EACA,EAAQ,MAAM,CAAE,AAAD,GAAO,EAAE,aAAa,GAAK,EAAA,EAEd,MAAM,CACtC,AAAC,GAAkB,UAAZ,EAAE,KAAK,EAAgB,EAAE,cAAc,CAAG,GAEnD,GAA6B,IAAzB,EAAc,MAAM,CAAQ,MAAO,EAAE,CAEzC,IAAM,EACJ,EAAc,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,cAAc,CAAE,GACzD,EAAc,MAAM,CAEtB,OAAO,EACJ,MAAM,CACJ,AAAD,GAAyB,SAAlB,EAAE,WAAW,EAAe,EAAE,cAAc,CAAgB,GAAb,GAEvD,KAAK,CAAC,EAAG,GACT,GAAG,CAAC,AAAC,IAAM,AAAC,CACX,KAAM,yBACN,SAAU,MACV,QAAS,CAAC,CAAC,EAAE,EAAE,WAAW,CAAC,yBAAyB,EAAE,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAAE,cAAc,EAAE,SAAS,EAAE,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,GAAY,0BAA0B,CAAC,CAC9J,SAAU,EAAE,WAAW,CACzB,CAAC,CACL,EChOwB,EAAS,EAAQ,MAClC,ADiOA,SACL,AADc,CACc,CAC5B,CAAc,CACd,CAAgB,EAEhB,IAAM,EAAgB,IAAI,KAC1B,EAAc,OAAO,CAAC,EAAc,OAAO,GAAK,IAEhD,IAAM,EAAe,EAAa,EAAe,EAAQ,GAAU,MAAM,CACvE,AAAC,GACc,SAAb,EAAE,MAAM,EACR,IAAI,KAAK,EAAE,SAAS,EAAI,GACxB,EAAE,UAAU,EAGhB,GAA4B,IAAxB,EAAa,MAAM,CAAQ,MAAO,EAAE,CAYxC,IAAM,EAAY,OAAO,OAAO,CATX,AASY,EATC,MAAM,CACtC,CAAC,EAAK,KACJ,IAAM,EAAS,EAAE,UAAU,EAAI,QAE/B,OADA,CAAG,CAAC,EAAO,CAAG,CAAC,CAAG,CAAC,EAAO,GAAI,CAAC,CAAI,EAC5B,CACT,EACA,CAAC,IAG4C,IAAI,CACjD,CAAC,EAAG,EAAE,CAAE,EAAG,EAAE,GAAK,EAAI,EACvB,CAAC,EAAE,QAEJ,AAAI,GAAa,CAAS,CAAC,EAAE,EAAI,EACxB,CAD2B,AAEhC,CACE,KAAM,2BACN,SAAU,SACV,QAAS,CAAA,EAAG,EAAa,MAAM,CAAC,wDAAwD,EAAE,CAAS,CAAC,EAAE,CAAC,GAAG,EAAE,CAAS,CAAC,EAAE,CAAC,yBAAyB,CAAC,AACrJ,EACD,CAEI,EAAE,AACX,EC1QgC,EAAe,EAAQ,MAChD,AD2QA,SAAS,AACd,CAA4B,CAC5B,CAAc,EAEd,IAAM,EAAgB,IAAI,KAC1B,EAAc,OAAO,CAAC,EAAc,OAAO,GAAK,IAEhD,IAAM,EAAa,EAAc,MAAM,CACrC,AAAC,GAAM,IAAI,KAAK,EAAE,SAAS,EAAI,GAGjC,GAAI,EAAW,MAAM,CAAG,EAAG,MAAO,EAAE,CAGpC,IAAM,EAAW,EAAW,MAAM,CAAC,AAAC,GAAM,EAAE,aAAa,GAAK,GACxD,EAAU,EAAS,MAAM,CAAC,AAAC,GAAmB,QAAb,EAAE,MAAM,EAAY,MAAM,CAC3D,EAAY,EAAS,MAAM,CAC/B,AAAC,GAAmB,QAAb,EAAE,MAAM,EAA2B,SAAb,EAAE,MAAM,EACrC,MAAM,CACF,EAAW,EAAY,EAAK,EAAU,EAAa,IAAM,EAEzD,EAAU,EAAW,MAAM,CAAC,AAAC,GAAmB,QAAb,EAAE,MAAM,EAAY,MAAM,CAC7D,EAAY,EAAW,MAAM,CAChC,AAAD,GAAoB,QAAb,EAAE,MAAM,EAA2B,SAAb,EAAE,MAAM,EACrC,MAAM,CAGR,GAAI,EAAY,EAAG,MAAO,EAAE,CAE5B,IAAM,EAAO,GAJI,EAAY,EAAK,EAAU,EAIpB,AAJiC,KAAM,SAK/D,AAAI,KAAK,GAAG,CAAC,IAAS,GACb,CADiB,AAEtB,CACE,KAAM,mBACN,SAAU,MACV,QACE,EAAO,EACH,CAAC,uBAAuB,EAAE,KAAK,KAAK,CAAC,GAAU,QAAQ,EAAE,KAAK,KAAK,CAAC,GAAM,6CAA6C,CAAC,CACxH,CAAC,uBAAuB,EAAE,KAAK,KAAK,CAAC,GAAU,QAAQ,EAAE,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,IAAO,4CAA4C,CAAC,AACzI,EACD,CAEI,EAAE,AACX,ECtT8B,EAAe,GAC1C,CAGK,EAAgB,CAAE,KAAM,EAAG,OAAQ,EAAG,IAAK,CAAE,EACnD,OAAO,EAAY,IAAI,CACrB,CAAC,EAAG,IAAM,CAAa,CAAC,EAAE,QAAQ,CAAC,CAAG,CAAa,CAAC,EAAE,QAAQ,CAAC,CAEnE,CAEO,SAAS,EACd,CAA4B,CAC5B,CAAsB,CACtB,CAAc,CACd,CAAgB,EAEhB,IAAM,EAAW,EAAa,EAAe,EAAQ,GAAU,MAAM,CACnE,AAAC,GAAmB,SAAb,EAAE,MAAM,EAGX,EAAuC,CAAC,EAC1C,EAAW,EACX,EAAe,EACf,EAAe,EACf,EAAa,EAEjB,IAAK,IAAM,KAAO,EAAU,CAE1B,CAAY,CAAC,EAAI,KAAK,CAAC,CAAG,CAAC,CAAY,CAAC,EAAI,KAAK,CAAC,EAAI,CAAC,EAAI,EAG3D,GAAY,EAAI,YAAY,CAG5B,IAAM,EAAU,EAAW,MAAM,CAC/B,AAAC,GAAM,EAAE,aAAa,GAAK,EAAI,EAAE,EAAI,AAAa,gBAAX,MAAM,CAK3C,CAHe,EAAQ,IAAI,CAC7B,AAAC,GAAmB,cAAb,EAAE,MAAM,EAAoB,IAAI,KAAK,EAAE,OAAO,EAAI,IAAI,OAE/C,IAGQ,OAAO,CAA3B,EAAI,WAAW,EAIC,AAId,EAHF,IAAI,KAJW,AAIN,EAJc,MAAM,CAC3B,KAAK,GAAG,IAAI,EAAQ,GAAG,CAAC,AAAC,GAAM,IAAI,KAAK,EAAE,OAAO,EAAE,OAAO,KAC1D,IAAI,KAAK,EAAI,SAAS,EAAE,OAAO,IAEd,WAAW,GAC9B,IAAI,OAAO,WAAW,KAEP,GAAG,IAQlB,AAJoB,EACtB,EAAI,SAAS,CACb,IAAI,OAAO,WAAW,KAED,GAAG,GAC5B,CAEA,MAAO,cAAE,WAAc,EAAU,4BAAc,aAAc,CAAW,CAC1E,CC5FO,SAAS,EACd,CAA2B,EAE3B,GAAM,CAAE,eAAa,YAAE,CAAU,QAAE,CAAM,UAAE,CAAQ,WAAE,CAAS,CAAE,CAAG,EAC7D,EAAwB,EAAE,CAC1B,EAAM,IAAI,KAGV,EAAW,EAAa,EAAY,EAAQ,GAMlD,IAAK,IAAM,KALS,AAKF,EALW,MAAM,CAAC,AAAC,GAClB,AAAjB,cAAI,EAAE,MAAM,EAAiC,aAAa,CAA1B,EAAE,IAA+B,EAAzB,EACjC,IAAI,KAAK,EAAE,OAAO,EAAI,GAGD,KAAK,CAAC,EAAG,GACrC,AADyC,EACnC,IAAI,CAAC,CACT,GAAI,CAAC,IAAI,EAAE,EAAI,EAAE,CAAA,CAAE,CACnB,KAAM,UACN,MAAO,EAAI,KAAK,CAChB,SAAU,CAAC,QAAQ,EAAE,EAAa,EAAI,OAAO,EAAA,EAAI,EAAI,UAAU,CAAG,CAAC,MAAG,EAAE,EAAI,UAAU,CAAA,CAAE,CAAG,GAAA,CAAI,CAC/F,SAAU,WACV,eAAgB,EAAI,aAAa,CACjC,iBAAkB,aACpB,GAOF,IAAK,IAAM,KAHO,AAGA,EAHS,MAAM,CAC/B,AAAC,GAAmB,YAAb,EAAE,MAAM,EAAkB,EAAQ,EAAE,OAAO,GAExB,KAAK,CAAC,EAAG,GACnC,AADuC,EACjC,IAAI,CAAC,CACT,GAAI,CAAC,IAAI,EAAE,EAAI,EAAE,CAAA,CAAE,CACnB,KAAM,YACN,MAAO,EAAI,KAAK,CAChB,SAAU,CAAC,IAAI,EAAE,EAAI,OAAO,CAAG,CAAC,IAAI,EAAE,EAAI,OAAO,CAAA,CAAE,CAAG,GAAA,EAAK,EAAI,UAAU,CAAG,CAAC,MAAG,EAAE,EAAI,UAAU,CAAA,CAAE,CAAG,GAAA,CAAI,CACzG,SAAU,UACV,eAAgB,EAAI,aAAa,CACjC,iBAAkB,aACpB,GAOF,IAAK,IAAM,KAHM,EAGC,AAHY,EAAe,EAAQ,GAAU,MAAM,CACnE,AAAC,GAAmB,SAAb,EAAE,MAAM,EAAe,EAAE,WAAW,EAEjB,CAC1B,IAAM,EAAY,EAAa,EAAI,WAAW,GAAI,EAAI,WAAW,EACjE,GAAI,EAAY,GAAK,GAAa,EAAG,CACnC,IAAM,EAAY,EAAa,EAAI,KAAK,CAAE,GAC1C,EAAM,IAAI,CAAC,CACT,GAAI,CAAC,QAAQ,EAAE,EAAI,EAAE,CAAA,CAAE,CACvB,KAAM,cACN,MAAO,EAAI,UAAU,CACrB,SAAU,CAAA,EAAG,KAAK,KAAK,CAAC,GAAW,gBAAa,EAAE,EAAA,CAAW,CAC7D,SAAU,WACV,eAAgB,EAAI,EAAE,CACtB,iBAAkB,aACpB,EACF,CACF,CAMA,IAAK,IAAM,KAAO,AAHF,EAAa,EAAe,EAAQ,GAAU,MAAM,CAClE,AAAC,GAAmB,SAAb,EAAE,MAAM,EAAiC,QAAlB,EAAE,WAAW,EAEnB,KAAK,CAAC,EAAG,GAAI,CACrC,IAAM,EAAU,EAAW,MAAM,CAC/B,AAAC,GAAM,EAAE,aAAa,GAAK,EAAI,EAAE,EAAiB,cAAb,EAAE,MAAM,EAKzC,EAAY,EAChB,IAAI,KAJW,AAIN,EAJc,MAAM,CAC3B,KAAK,GAAG,IAAI,EAAQ,GAAG,CAAC,AAAC,GAAM,IAAI,KAAK,EAAE,OAAO,EAAE,OAAO,KAC1D,IAAI,KAAK,EAAI,SAAS,EAAE,OAAO,IAEd,WAAW,GAC9B,EAAI,WAAW,GAEb,IAAa,GACf,AADkB,EACZ,IAAI,CAAC,CACT,GAAI,CAAC,QAAQ,EAAE,EAAI,EAAE,CAAA,CAAE,CACvB,KAAM,WACN,MAAO,EAAI,UAAU,CACrB,SAAU,CAAC,6BAA6B,EAAE,EAAU,CAAC,CAAC,CACtD,SAAU,UACV,eAAgB,EAAI,EAAE,CACtB,iBAAkB,aACpB,EAEJ,CAGA,IAAM,EAAgB,CAAE,SAAU,EAAG,QAAS,EAAG,KAAM,CAAE,EACzD,OAAO,EACJ,IAAI,CAAC,CAAC,EAAG,IAAM,CAAa,CAAC,EAAE,QAAQ,CAAC,CAAG,CAAa,CAAC,EAAE,QAAQ,CAAC,EACpE,KAAK,CAAC,EAAG,EACd,CAEO,SAAS,EACd,CAA2B,EAE3B,GAAM,eAAE,CAAa,OAAE,CAAK,QAAE,CAAM,CAAE,UAAQ,CAAE,CAAG,EAC7C,EAA2B,EAAE,CAC7B,EAAM,IAAI,KACV,EAAgB,IAAI,KAC1B,EAAc,OAAO,CAAC,EAAc,OAAO,GAAK,IAEhD,IAAM,EAAW,EAAa,EAAe,EAAQ,GAG/C,EAAa,EAAS,MAAM,CAChC,AAAC,GAAmB,QAAb,EAAE,MAAM,EAAc,IAAI,KAAK,EAAE,SAAS,EAAI,GAEvD,GAAI,EAAW,MAAM,EAAI,EAAG,CAC1B,IAAM,EAAU,KAAK,KAAK,CACxB,EAAW,MAAM,CACf,CAAC,EAAK,IAAM,EAAM,EAAY,EAAE,SAAS,CAAE,EAAE,SAAS,EACtD,GACE,EAAW,MAAM,EAEvB,EAAS,IAAI,CAAC,CACZ,GAAI,mBACJ,KAAM,MACN,MAAO,yBACP,YAAa,CAAC,2BAA2B,EAAE,EAAQ,OAAO,EAAE,EAAW,MAAM,CAAC,qCAAqC,CAAC,CACpH,OAAQ,CAAE,MAAO,CAAA,EAAG,EAAQ,CAAC,CAAC,CAAE,MAAO,GAAW,GAAK,KAAO,MAAO,CACvE,EACF,CAGA,IAAM,EAAS,EAAS,MAAM,CAC5B,AAAC,GACC,CAAC,AAAa,UAAX,MAAM,EAA2B,SAAb,EAAE,MAAM,AAAK,CAAM,EAC1C,IAAI,KAAK,EAAE,SAAS,EAAI,GAEtB,EAAM,EAAO,MAAM,CAAC,AAAC,GAAmB,QAAb,EAAE,MAAM,EACzC,GAAI,EAAO,MAAM,EAAI,EAAG,CACtB,IAAM,EAAO,KAAK,KAAK,CAAE,EAAI,MAAM,CAAG,EAAO,MAAM,CAAI,KACvD,EAAS,IAAI,CAAC,CACZ,GAAI,qBACJ,KAAM,cACN,MAAO,oBACP,YAAa,CAAA,EAAG,EAAK,gBAAgB,EAAE,EAAI,MAAM,CAAC,WAAW,EAAE,EAAO,MAAM,CAAC,kCAAkC,CAAC,CAChH,OAAQ,CACN,MAAO,CAAA,EAAG,EAAK,CAAC,CAAC,CACjB,MAAO,GAAQ,GAAK,KAAO,GAAQ,GAAK,SAAW,MACrD,CACF,EACF,CAGA,IAAM,EAAc,EAAM,MAAM,CAAC,AAAC,GAAM,IAAI,KAAK,EAAE,OAAO,EAAI,GAC9D,GAAI,EAAY,MAAM,CAAG,EAAG,CAC1B,IAAM,EAAW,CAAW,CAAC,EAAE,CACzB,EAAW,KAAK,KAAK,CACxB,EAAS,OAAO,CAAG,EAAS,MAAM,CAAI,KAEnC,EAAY,EAAS,MAAM,CAAG,EAAS,OAAO,CAC9C,EACJ,AAAkB,cAAT,IAAI,CAAiB,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,GAAa,CAAA,EAAG,EAAA,CAAW,CACvE,EAAW,EAAY,EAAI,WAAW,GAAI,EAAS,OAAO,EAEhE,EAAS,IAAI,CAAC,CACZ,GAAI,eACJ,KAAM,SACN,MAAO,CAAC,MAAM,EAAE,EAAS,KAAK,CAAA,CAAE,CAChC,YAAa,CAAA,EAAG,EAAS,oBAAoB,EAAE,EAAa,IAAI,EAAE,EAAS,MAAM,CAAC,CAClF,OAAQ,CACN,MAAO,CAAA,EAAG,EAAS,CAAC,CAAC,CACrB,MAAO,GAAY,GAAK,KAAO,GAAY,GAAK,SAAW,MAC7D,EACA,YAAa,WACb,cAAe,OACjB,EACF,CAGA,IAAM,EAAW,EAAS,MAAM,CAAC,AAAC,GAAmB,SAAb,EAAE,MAAM,EAChD,GAAI,EAAS,MAAM,CAAG,EAAG,CACvB,IAAM,EAAW,EAAS,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,YAAY,CAAE,GAC7D,EAAa,EAAS,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,EAAE,KAAK,CAAE,GAC9D,EAAS,IAAI,CAAC,CACZ,GAAI,yBACJ,KAAM,YACN,MAAO,iBACP,YAAa,CAAA,EAAG,EAAS,MAAM,CAAC,uCAAuC,EAAE,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,GAAU,eAAe,EAAE,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,GAAY,CAAC,CAAC,CACtJ,OAAQ,CAAE,MAAO,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,GAAW,MAAO,QAAS,EAC9D,YAAa,YACb,cAAe,QACjB,EACF,CAEA,OAAO,CACT,CAEO,SAAS,EACd,CAA2B,EAE3B,GAAM,eAAE,CAAa,YAAE,CAAU,QAAE,CAAM,UAAE,CAAQ,CAAE,CAAG,EAMxD,OAAO,AAJU,EAAa,EAAe,EAAQ,GAAU,MAAM,CACnE,AAAC,GAAmB,SAAb,EAAE,MAAM,EAId,GAAG,CAAC,AAAC,QAEA,EAWJ,EAXkB,EAWH,EAR6B,CAC1C,UAAW,GACX,gBAAiB,GACjB,mBAAoB,GACpB,mBAAoB,GACpB,WAAc,GACd,WAAc,EAChB,EAC0B,CAAC,EAAI,KAAK,CAAC,EAAI,EAAA,EAGjB,QAApB,EAAI,WAAW,CAAY,GAAe,GACjB,AAApB,WAAI,WAAW,GAAa,IAAe,EAMpD,IAAM,EAHU,AAGU,EAHC,MAAM,CAC/B,AAAC,GAAM,EAAE,aAAa,GAAK,EAAI,EAAE,EAAiB,cAAb,EAAE,MAAM,EAEb,IAAI,CACpC,AAAC,GAA0D,GAApD,EAAY,EAAE,OAAO,CAAE,IAAI,OAAO,WAAW,KAElD,GAAmB,IAAe,EAAA,EAGtC,EAAc,KAAK,GAAG,CAAC,GAAI,GAG3B,IAAM,EAAoB,EAAE,CAU5B,MATwB,QAApB,EAAI,WAAW,EAAY,EAAQ,IAAI,CAAC,gBAE1C,AAAc,iBAAV,KAAK,EACK,eAAd,EAAI,KAAK,EACK,qBAAd,EAAI,KAAK,AAAK,GAEd,EAAQ,IAAI,CAAC,EAAI,KAAK,CAAC,OAAO,CAAC,KAAM,MACnC,GAAmB,EAAQ,IAAI,CAAC,qBAE7B,CACL,GAAI,EAAI,EAAE,CACV,cAAe,EAAI,EAAE,CACrB,WAAY,EAAI,UAAU,CAC1B,MAAO,EAAI,KAAK,aAChB,EACA,MAAO,EAAI,YAAY,CACvB,OAAQ,EAAQ,IAAI,CAAC,QAAU,EAAI,KAAK,AAC1C,CACF,GACC,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,WAAW,CAAG,EAAE,WAAW,EAC5C,KAAK,CAAC,EAAG,EACd,CCnQO,SAAS,EACd,CAA2B,EAE3B,GAAM,eAAE,CAAa,SAAE,CAAO,OAAE,CAAK,QAAE,CAAM,UAAE,CAAQ,CAAE,CAAG,EACtD,EAAsB,EAAE,CACxB,EAAM,IAAI,KAMhB,IAAK,IAAM,KAHM,EAAa,AAGZ,EAH2B,EAAQ,GAAU,MAAM,CACnE,AAAC,GAAmB,SAAb,EAAE,MAAM,EAAe,EAAE,WAAW,EAEjB,CAC1B,IAAM,EAAY,EAAa,EAAI,WAAW,GAAI,EAAI,WAAW,EAC7D,EAAY,GAAG,AACjB,EAAO,IAAI,CAAC,CACV,GAAI,CAAC,SAAS,EAAE,EAAI,EAAE,CAAA,CAAE,CACxB,KAAM,aACN,MAAO,CAAC,eAAe,EAAE,EAAI,UAAU,CAAA,CAAE,CACzC,YAAa,CAAC,eAAe,EAAE,KAAK,GAAG,CAAC,KAAK,KAAK,CAAC,IAAY,WAAW,EAAE,EAAI,KAAK,CAAC,CAAC,CAAC,CACxF,SAAU,WACV,eAAgB,EAAI,EAAE,AACxB,EAEJ,CAGA,IAAM,EACS,WAAb,GAAsC,UAAb,EACrB,EACA,EAAQ,MAAM,CAAE,AAAD,GAAO,EAAE,aAAa,GAAK,GAOhD,IAAK,IAAM,KALW,AAKD,EALa,MAAM,CACtC,AAAC,GACC,AAAkB,eAAhB,WAAW,EACD,UAAZ,EAAE,KAAK,EAEwB,KAAK,CAAC,EAAG,GAAI,AAC9C,EAAO,IAAI,CAAC,CACV,GAAI,CAAC,YAAY,EAAE,EAAO,EAAE,CAAA,CAAE,CAC9B,KAAM,cACN,MAAO,CAAC,eAAe,EAAE,EAAO,WAAW,CAAA,CAAE,CAC7C,YAAa,CAAC,0DAA0D,CAAC,CACzE,SAAU,WACV,eAAgB,EAAO,EAAE,AAC3B,GASF,IAAK,IAAM,KALO,AAKA,EALa,EAAe,EAAQ,GAAU,MAAM,CACpE,AAAC,GACc,SAAb,EAAE,MAAM,EACR,EAAY,EAAE,SAAS,CAAE,EAAI,WAAW,KAAO,IAEvB,KAAK,CAAC,EAAG,GAAI,CACvC,IAAM,EAAO,EAAY,EAAI,SAAS,CAAE,EAAI,WAAW,IACvD,EAAO,IAAI,CAAC,CACV,GAAI,CAAC,WAAW,EAAE,EAAI,EAAE,CAAA,CAAE,CAC1B,KAAM,QACN,MAAO,CAAC,UAAU,EAAE,EAAK,GAAG,EAAE,EAAI,UAAU,CAAA,CAAE,CAC9C,YAAa,CAAC,oBAAoB,EAAE,EAAK,4BAA4B,CAAC,CACtE,SAAU,UACV,eAAgB,EAAI,EAAE,AACxB,EACF,CAGA,IAAK,IAAM,KAAU,EAAa,CAChC,GAAI,CAAC,EAAO,WAAW,CAAE,SACzB,IAAM,EAAY,EAAY,EAAI,WAAW,GAAI,EAAO,WAAW,EAC/D,EAAY,GAAK,GAAa,IAAI,AACpC,EAAO,IAAI,CAAC,CACV,GAAI,CAAC,cAAc,EAAE,EAAO,EAAE,CAAA,CAAE,CAChC,KAAM,oBACN,MAAO,CAAC,oBAAoB,EAAE,EAAO,WAAW,CAAA,CAAE,CAClD,YAAa,CAAC,UAAU,EAAE,EAAU,wBAAwB,CAAC,CAC7D,SAAU,GAAa,GAAK,WAAa,UACzC,eAAgB,EAAO,EAAE,AAC3B,EAEJ,CAIA,IAAK,IAAM,KADS,EAAM,CACP,KADa,CAAE,AAAD,GAAO,IAAI,KAAK,EAAE,OAAO,EAAI,GAC9B,CAC9B,IAAM,EAAW,EAAK,MAAM,CAAG,EAAI,EAAK,OAAO,CAAG,EAAK,MAAM,CAAG,EAC1D,EAAW,EAAY,EAAI,WAAW,GAAI,EAAK,OAAO,EACtD,EAAY,EAAY,EAAK,SAAS,CAAE,EAAK,OAAO,EAGtD,EAAW,AAAmB,IAFT,EAAY,EAAI,AAAC,GAAY,CAAA,CAAQ,CAAI,EAAY,IAErC,GAAY,IAAI,AACvD,EAAO,IAAI,CAAC,CACV,GAAI,CAAC,UAAU,EAAE,EAAK,EAAE,CAAA,CAAE,CAC1B,KAAM,YACN,MAAO,CAAC,eAAe,EAAE,EAAK,KAAK,CAAA,CAAE,CACrC,YAAa,CAAA,EAAG,KAAK,KAAK,CAAY,IAAX,GAAgB,gBAAgB,EAAE,EAAS,gBAAgB,CAAC,CACvF,SAAU,UACZ,EAEJ,CAGA,IAAM,EAAgB,CAAE,SAAU,EAAG,QAAS,CAAE,EAChD,OAAO,EACJ,IAAI,CAAC,CAAC,EAAG,IAAM,CAAa,CAAC,EAAE,QAAQ,CAAC,CAAG,CAAa,CAAC,EAAE,QAAQ,CAAC,EACpE,KAAK,CAAC,EAAG,EACd,CCvGO,SAAS,EACd,CAA2B,EAE3B,IAAM,EAAa,EAAwB,GACrC,EAAW,EAAqB,GAChC,EAAY,EAAiB,GAC7B,EAAQ,EAAkB,GAE1B,EAAqB,EAAE,CAK7B,GAHA,EAAS,IAAI,CAAC,6BAGV,EAAW,MAAM,CAAG,EAAG,CAEzB,IAAK,IAAM,KADX,EAAS,IAAI,CAAC,4BACE,EAAW,KAAK,CAAC,EAAG,IAAI,CACtC,IAAM,EAAsB,aAAf,EAAE,QAAQ,CAAkB,KAA6B,YAAf,EAAE,QAAQ,CAAiB,KAAc,KAChG,EAAS,IAAI,CAAC,CAAC,EAAE,EAAE,EAAK,GAAG,EAAE,EAAE,KAAK,CAAC,UAAU,EAAE,EAAE,QAAQ,CAAA,CAAE,CAC/D,CACA,EAAS,IAAI,CAAC,GAChB,MACE,CADK,CACI,IAAI,CAAC,yDAIhB,GAAI,EAAU,MAAM,CAAG,EAAG,CAExB,IAAK,IAAM,KADX,EAAS,IAAI,CAAC,6CACG,EAAU,KAAK,CAAC,EAAG,GAAI,CACtC,EAAS,IAAI,CACX,CAAC,cAAc,EAAE,EAAG,UAAU,CAAC,UAAU,EAAE,EAAG,WAAW,CAAC,0BAA0B,EAAE,CAAA,EAAA,EAAA,iBAAiB,AAAjB,EAAkB,EAAG,KAAK,EAAE,YAAY,EAAE,EAAG,MAAM,CAAA,CAAE,EAG/I,EAAS,IAAI,CAAC,GAChB,CAGA,GAAI,EAAM,MAAM,CAAG,EAAG,CAEpB,IAAK,IAAM,KADX,EAAS,IAAI,CAAC,yBACE,EAAM,KAAK,CAAC,EAAG,IAAI,CACjC,IAAM,EAAsB,aAAf,EAAE,QAAQ,CAAkB,KAAc,KACvD,EAAS,IAAI,CAAC,CAAC,EAAE,EAAE,EAAK,CAAC,EAAE,EAAE,KAAK,CAAC,QAAQ,EAAE,EAAE,WAAW,CAAA,CAAE,CAC9D,CACA,EAAS,IAAI,CAAC,GAChB,CAGA,IAAM,EAAoB,EAAS,IAAI,CACrC,AAAC,GAAe,uBAAT,EAAE,EAAE,EAUb,OARI,GAAmB,QAAQ,AAC7B,EAAS,IAAI,CACX,CAAC,uCAAuC,EAAE,EAAkB,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,AAAmC,SAAjB,MAAM,CAAC,KAAK,CAAY,KAAiD,SAAnC,EAAkB,MAAM,CAAC,KAAK,CAAc,KAAc,KAAA,CAAgB,EAIlN,EAAS,IAAI,CAAC,yEAEP,EAAS,IAAI,CAAC,KACvB,qTC9DA,IAAA,EAAA,EAAA,CAAA,CAAA,OAcA,EAAA,EAAA,CAAA,CAAA,OClBA,EAAA,EAAA,CAAA,CAAA,OCEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCAA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAOA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAKO,SAAS,IACd,IAAM,EAAO,EAAA,YAAY,CAAC,QAAQ,GAAG,IAAI,CACzC,MAAO,CACL,cAAe,EAAA,mBAAmB,CAAC,QAAQ,GAAG,aAAa,CAC3D,WAAY,EAAA,gBAAgB,CAAC,QAAQ,GAAG,UAAU,CAClD,QAAS,EAAA,cAAc,CAAC,QAAQ,GAAG,OAAO,CAC1C,MAAO,EAAA,YAAY,CAAC,QAAQ,GAAG,KAAK,CACpC,UAAW,EAAA,gBAAgB,CAAC,QAAQ,GAAG,SAAS,CAChD,OAAQ,GAAM,IAAM,UACpB,SAAU,GAAM,MAAQ,WAC1B,CACF,CAIO,SAAS,IACd,IAAM,EAAQ,IACR,EAAU,CAAA,EAAA,EAAA,6BAAA,AAA6B,EAAC,GAE9C,MAAO,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,oBACN,EACA,YAAa,mBACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,cAAe,SACjB,CACF,CAIO,SAAS,IACd,IAAM,EAAQ,IACR,EAAQ,CAAA,EAAA,EAAA,iBAAiB,AAAjB,EAAkB,GAEhC,GAAqB,AAAjB,GAAoB,GAAd,MAAM,CACd,MAAO,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,YACN,QAAS,iGACT,YAAa,cACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,cAAe,SACjB,EAGF,IAAM,EAAqB,CAAC,+BAA+B,CAErD,EAAW,EAAM,MAAM,CAAC,AAAC,GAAM,AAAe,eAAb,QAAQ,EACzC,EAAU,EAAM,MAAM,CAAC,AAAC,GAAqB,YAAf,EAAE,QAAQ,EAE9C,GAAI,EAAS,MAAM,CAAG,EAAG,CAEvB,IAAK,IAAM,KADX,EAAS,IAAI,CAAC,CAAC,YAAY,EAAE,EAAS,MAAM,CAAC,IAAI,CAAC,EAClC,GACd,EAAS,IADe,AACX,CAAC,CAAC,OAAO,EAAE,EAAE,KAAK,CAAC,KAAK,EAAE,EAAE,WAAW,CAAA,CAAE,EAExD,EAAS,IAAI,CAAC,GAChB,CAEA,GAAI,EAAQ,MAAM,CAAG,EAAG,CAEtB,IAAK,IAAM,KADX,EAAS,IAAI,CAAC,CAAC,WAAW,EAAE,EAAQ,MAAM,CAAC,IAAI,CAAC,EAChC,GACd,EAAS,GADc,CACV,CAAC,CAAC,OAAO,EAAE,EAAE,KAAK,CAAC,KAAK,EAAE,EAAE,WAAW,CAAA,CAAE,EAExD,EAAS,IAAI,CAAC,GAChB,CAIA,OAFA,EAAS,IAAI,CAAC,CAAC;AAAA,YAAc,EAAE,EAAM,MAAM,CAAC,yCAAyC,CAAC,EAE/E,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,YACN,QAAS,EAAS,IAAI,CAAC,MACvB,YAAa,cACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,cAAe,SACjB,CACF,CAIO,SAAS,IACd,IAAM,EAAQ,IACR,EAAO,IAAI,KACX,EAAc,EAAM,KAAK,CAAC,MAAM,CAAC,AAAC,GAAM,IAAI,KAAK,EAAE,OAAO,EAAI,GAEpE,GAA2B,GAAG,CAA1B,EAAY,MAAM,CACpB,MAAO,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,YACN,QAAS,8GACT,YAAa,gBACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,cAAe,OACjB,EAGF,IAAM,EAAqB,CAAC,+BAA+B,CAE3D,IAAK,IAAM,KAAQ,EAAa,CAC9B,IAAM,EAAW,KAAK,KAAK,CAAE,EAAK,OAAO,CAAG,EAAK,MAAM,CAAI,KACrD,EAAY,EAAK,MAAM,CAAG,EAAK,OAAO,CACtC,EAAW,KAAK,GAAG,CAAC,EAAG,KAAK,KAAK,CAAC,CAAC,IAAI,KAAK,EAAK,OAAO,EAAE,OAAO,GAAK,EAAK,OAAO,EAAA,CAAE,CAAK,GAAD,IAAQ,CAEhG,EAA6B,EAFwE,KAAK,EAAE,GAE7F,EAAK,IAAI,CAAiB,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,GAAa,CAAA,EAAG,EAAA,CAAW,CACtF,EAAa,AAAc,cAAT,IAAI,CAAiB,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAAK,OAAO,EAAI,CAAA,EAAG,EAAK,OAAO,CAAA,CAAE,CAC1F,EAA0B,YAAd,EAAK,IAAI,CAAiB,CAAA,EAAA,EAAA,iBAAiB,AAAjB,EAAkB,EAAK,MAAM,EAAI,CAAA,EAAG,EAAK,MAAM,CAAA,CAAE,CAEvF,EAAc,AA+BjB,SAAS,AAAoB,CAAW,EAC7C,IAAM,EAAS,KAAK,KAAK,CAAC,EAAM,IAEhC,MAAO,CAAC,CAAC,EAAE,IAAI,MAAM,CAAC,KAAK,GAAG,CAAC,EAAQ,KAAA,EAAO,IAAI,MAAM,CAAC,KAAK,GAAG,CADnD,AACoD,GAD/C,EACsD,IAAI,CAAC,CAChF,AADiF,EAlCrC,GAClC,EAAa,GAAY,IAAM,IAAM,GAAY,GAAK,KAAO,GAAY,GAAK,KAAO,KAM3F,GAJA,EAAS,IAAI,CAAC,CAAC,EAAE,EAAE,EAAK,KAAK,CAAC,GAAG,EAAE,EAAA,CAAY,EAC/C,EAAS,IAAI,CAAC,CAAC,EAAE,EAAE,EAAY,CAAC,EAAE,EAAS,CAAC,CAAC,EAC7C,EAAS,IAAI,CAAC,CAAC,WAAW,EAAE,EAAW,aAAa,EAAE,EAAU,EAAE,CAAC,EAE/D,EAAY,EAId,CAJiB,GACjB,EAAS,IAAI,CAAC,CAAC,YAAY,EAAE,EAAa,QAAQ,EAAE,EAAS,OAAO,CAAC,EAGjE,EAAW,GAAmB,AAAd,cAAK,IAAI,CAAgB,CAC3C,IAAM,EAAc,EAAY,EAChC,EAAS,IAAI,CAAC,CAAC,sBAAsB,EAAE,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,GAAa,MAAM,CAAC,EAC/E,MAEA,EAAS,IAAI,CAAC,CAAC,uBAAuB,CAAC,EAEzC,EAAS,IAAI,CAAC,GAChB,CAEA,MAAO,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,YACN,QAAS,EAAS,IAAI,CAAC,MACvB,YAAa,gBACb,UAAW,CAAA,EAAA,EAAA,GAAG,AAAH,IACX,cAAe,OACjB,CACF,CAUO,SAAS,IACd,IAAM,EAAQ,IACR,EAAW,CAAA,EAAA,EAAA,oBAAA,AAAoB,EAAC,GAChC,EAAY,CAAA,EAAA,EAAA,gBAAgB,AAAhB,EAAiB,GAC7B,EAAgB,IAAI,KAC1B,EAAc,OAAO,CAAC,EAAc,OAAO,GAAK,IAEhD,IAAM,EAAqB,CAAC,8BAA8B,CAGpD,EAAa,EAAS,IAAI,CAAC,AAAC,GAAe,uBAAT,EAAE,EAAE,EACxC,GAAY,QAAQ,CACtB,EAAS,IAAI,CAAC,CAAC,uBAAuB,EAAE,EAAW,MAAM,CAAC,KAAK,CAAC,CAAC,EAA8B,OAA5B,EAAW,MAAM,CAAC,KAAK,CAAY,qBAAmD,SAA5B,EAAW,MAAM,CAAC,KAAK,CAAc,sBAAwB,eAAA,CAAgB,EAC1M,EAAS,IAAI,CAAC,KAIhB,IAAM,EAAW,EAAS,IAAI,CAAC,AAAC,GAAe,qBAAT,EAAE,EAAE,EACtC,GAAU,QAAQ,CACpB,EAAS,IAAI,CAAC,CAAC,8BAA8B,EAAE,EAAS,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,EAC/E,EAAS,IAAI,CAAC,KAIhB,IAAM,EAAW,EAAM,UAAU,CAAC,MAAM,CACrC,AAAD,GAAO,EAAE,aAAa,GAAK,EAAM,MAAM,EAAI,IAAI,KAAK,EAAE,OAAO,EAAI,GAE7D,EAAY,EAAS,MAAM,CAAC,AAAC,GAAM,AAAa,gBAAX,MAAM,EAC3C,EAAiB,EAAS,MAAM,CAAG,EAAI,KAAK,KAAK,CAAE,EAAU,MAAM,CAAG,EAAS,MAAM,CAAI,KAAO,EAEtG,EAAS,IAAI,CAAC,CAAC,0BAA0B,EAAE,EAAU,MAAM,CAAC,eAAe,EAAE,EAAS,MAAM,CAAC,EAAE,EAAE,EAAe,eAAe,CAAC,EAQhI,IAAM,EAAW,OAAO,OAAO,CALT,AAKU,EALA,MAAM,CAAC,CAAC,EAAK,KAC3C,CAAG,CAAC,EAAE,IAAI,CAAC,CAAG,CAAC,CAAG,CAAC,EAAE,IAAI,CAAC,GAAI,CAAC,CAAI,EAC5B,GACN,CAAC,IAE2C,IAAI,CAAC,CAAC,EAAG,EAAE,CAAE,EAAG,EAAE,GAAK,EAAI,GAAG,KAAK,CAAC,EAAG,GAClF,EAAS,MAAM,CAAG,GAAG,AACvB,EAAS,IAAI,CAAC,CAAC,sBAAsB,EAAE,EAAS,GAAG,CAAC,CAAC,CAAC,EAAG,EAAE,GAAK,CAAA,EAAG,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,MAAA,CAAO,EAE9F,EAAS,IAAI,CAAC,IAGd,IAAM,EAAe,EAAM,aAAa,CAAC,MAAM,CAC7C,AAAC,GAAmB,SAAb,EAAE,MAAM,EAAe,EAAE,aAAa,GAAK,EAAM,MAAM,EAAI,IAAI,KAAK,EAAE,SAAS,EAAI,GAE5F,GAAI,EAAa,MAAM,CAAG,EAAG,CAC3B,IAAM,EAAU,EAAa,MAAM,CAAC,CAAC,EAAK,KACxC,IAAM,EAAS,EAAE,UAAU,EAAI,QAE/B,OADA,CAAG,CAAC,EAAO,CAAG,CAAC,CAAG,CAAC,EAAO,GAAI,CAAC,CAAI,EAC5B,CACT,EAAG,CAAC,GAGJ,IAAK,GAAM,CAAC,EAAQ,EAAM,GAD1B,EAAS,IAAI,CAAC,CAAC,qBAAqB,EAAE,EAAa,MAAM,CAAC,aAAa,CAAC,EAC1C,OAAO,OAAO,CAAC,GAAS,IAAI,CAAC,CAAC,EAAG,EAAE,CAAE,EAAG,EAAE,GAAK,EAAI,GAAI,CACnF,EAAS,IAAI,CAAC,CAAC,IAAI,EAAE,EAAO,EAAE,EAAE,EAAM,CAAC,CAAC,EAE1C,EAAS,IAAI,CAAC,GAChB,CAsBA,OAnBA,EAAS,IAAI,CAAC,6BAEV,EAAiB,IAAI,AACvB,EAAS,IAAI,CAAC,mHAGZ,GAAY,QAAQ,QAAU,QAAQ,AACxC,EAAS,IAAI,CAAC,+HAGZ,EAAU,MAAM,CAAG,GACrB,AADwB,EACf,IAAI,CAAC,CAAC,cAAc,EAAE,EAAU,MAAM,CAAC,qEAAqE,CAAC,EAGhG,AACpB,CAAC,CAD4B,IAAI,CAAC,CAAC,CAAC,EAAE,GAAK,AAAM,IAC/B,QAD+C,YAAN,IAE7D,EAAS,IAAI,CAAC,qGAGT,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,YACN,QAAS,EAAS,IAAI,CAAC,MACvB,YAAa,WACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,cAAe,WACjB,CACF,CAIO,SAAS,IACd,IAAM,EAAQ,IACR,EAAa,CAAA,EAAA,EAAA,uBAAA,AAAuB,EAAC,GACrC,EAAO,IAAI,KACX,EAAW,EAAK,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAE3C,EAAkB,EAAM,UAAU,CACrC,MAAM,CACL,AAAC,GACC,EAAE,aAAa,GAAK,EAAM,MAAM,EAChC,EAAE,OAAO,GAAK,GACD,cAAb,EAAE,MAAM,EACR,AAAa,gBAAX,MAAM,EAEX,IAAI,CAAC,CAAC,EAAG,IACR,AAAI,EAAE,OAAO,EAAI,EAAE,OAAO,CAAS,CAAP,CAAS,OAAO,CAAC,aAAa,CAAC,EAAE,OAAO,EAChE,EAAE,OAAO,CAAS,CAAP,AAAQ,KACnB,EAAE,OAAO,EAAE,AAIb,EAAoB,EAAM,GAJN,OAIgB,CAAC,MAAM,CAC/C,AAAC,GACC,EAAE,aAAa,GAAK,EAAM,MAAM,EACnB,cAAb,EAAE,MAAM,EACK,cAAb,EAAE,MAAM,EACR,IAAI,KAAK,EAAE,OAAO,EAAI,GACtB,EAAE,OAAO,GAAK,GAGZ,EAAqB,CAAC,yBAAyB,CAGrD,GAAI,EAAkB,MAAM,CAAG,EAAG,CAEhC,IAAK,IAAM,KADX,EAAS,IAAI,CAAC,CAAC,gBAAgB,EAAE,EAAkB,MAAM,CAAC,IAAI,CAAC,EAC7C,EAAkB,KAAK,CAAC,EAAG,GAAI,CAC/C,EAAS,IAAI,CAAC,CAAC,MAAM,EAAE,EAAI,KAAK,CAAC,gBAAgB,EAAE,EAAI,OAAO,CAAA,EAAG,EAAI,UAAU,CAAG,CAAC,MAAG,EAAE,EAAI,UAAU,CAAA,CAAE,CAAG,GAAA,CAAI,EAEjH,EAAS,IAAI,CAAC,GAChB,CAGA,GAAI,EAAgB,MAAM,CAAG,EAAG,CAE9B,IAAK,IAAM,KADX,EAAS,IAAI,CAAC,CAAC,WAAW,EAAE,EAAgB,MAAM,CAAC,IAAI,CAAC,EACtC,GAAiB,CACjC,IAAM,EAAU,EAAI,OAAO,CAAG,CAAA,EAAG,EAAI,OAAO,CAAC,GAAG,CAAC,CAAG,GAC9C,EAAwB,SAAb,EAAI,IAAI,CAAc,KAAoB,UAAb,EAAI,IAAI,CAAe,KAAoB,YAAb,EAAI,IAAI,CAAiB,KAAO,AAAa,eAAT,IAAI,CAAkB,KAAoB,UAAb,EAAI,IAAI,CAAe,KAAO,KAC3K,EAAS,IAAI,CAAC,CAAC,EAAE,EAAE,EAAS,CAAC,EAAE,EAAQ,EAAE,EAAE,EAAI,KAAK,CAAC,EAAE,EAAE,EAAI,UAAU,CAAG,CAAC,MAAG,EAAE,EAAI,UAAU,CAAA,CAAE,CAAG,GAAA,CAAI,CACzG,CACA,EAAS,IAAI,CAAC,GAChB,MAAwC,CAAjC,EAAoC,CAAhC,EAAkB,MAAM,EACjC,EAAS,IAAI,CAAC,2CAIhB,GAAI,EAAW,MAAM,CAAG,EAAG,CACzB,EAAS,IAAI,CAAC,+BACd,IAAK,IAAI,EAAI,EAAG,EAAI,KAAK,GAAG,CAAC,EAAW,MAAM,CAAE,GAAI,IAAK,CACvD,IAAM,EAAI,CAAU,CAAC,EAAE,CACvB,EAAS,IAAI,CAAC,CAAC,EAAE,EAAQ,IAAN,EAAU,MAAc,IAAN,EAAU,MAAc,IAAN,EAAU,MAAc,IAAN,EAAU,MAAQ,MAAM,GAAG,EAAE,EAAE,KAAK,CAAC,KAAK,EAAE,EAAE,QAAQ,CAAA,CAAE,CACnI,CACA,EAAS,IAAI,CAAC,GAChB,CAIA,OAFA,EAAS,IAAI,CAAC,CAAC;AAAA,SAAW,EAAE,EAAkB,MAAM,CAAC,iBAAiB,EAAE,EAAgB,MAAM,CAAC,aAAa,CAAC,EAEtG,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,YACN,QAAS,EAAS,IAAI,CAAC,MACvB,YAAa,SACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,cAAe,SACjB,CACF,CD1UA,IAAM,EAAqD,CACzD,MAAO,eACP,MAAO,YACP,MAAO,YACP,SAAU,UACZ,EAEM,EAAoD,CACxD,MAAO,2EACP,MAAO,+DACP,MAAO,0DACP,SAAU,oEACZ,EAyGO,SAAS,EACd,CAQ2B,CAC3B,CAA8B,EAE9B,IAAM,EAAmC,CACvC,UACE,wHACF,aAAc,CAAC,kFAAyE,EAAE,GAAO,WAAa,QAAQ,wEAAkE,CAAC,CACzL,YACE,wFACF,eACE,8FACF,oBACE,iGACF,oBACE,CAAC,oDAA2C,EAAE,GAAO,SAAW,aAAa,cAAc,CAAC,CAC9F,kBACE,iEACF,wBACE,CAAC,mCAAgC,EAAE,GAAO,SAAW,eAAe,EAAE,EAAE,GAAO,MAAQ,sCAAA,CAAuC,AAClI,EAEA,MAAO,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,YACN,QAAS,CAAQ,CAAC,EAAK,EAAI,CAAQ,CAAC,YAAY,CAChD,YAAa,QACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,GAChB,CACF,CG3IO,eAAe,EACpB,CAA0B,MDdK,EAoG/B,EACA,AArGgD,IAsSjB,AAjMP,ECjFxB,CDgFiB,CAkM+B,EClR1C,EAHY,AAGJ,CAHK,YAAa,WAAY,SAAU,SAAS,CAAC,QAAQ,CACtE,EAAM,OAAO,EAAI,IAGf,KAAuB,IAAhB,KAAK,MAAM,GAClB,IAAM,AAAgB,UAAX,MAAM,GAKrB,GAHA,MAAM,IAAI,QAAQ,AAAC,GAAY,WAAW,EAAS,IAG/C,EAAM,OAAO,CACf,CADiB,MACT,EAAM,OAAO,EACnB,IAAK,0BACH,GAAI,CAAC,EAAM,IAAI,CACb,OAAO,EAAqB,WAC9B,OD/BA,AC+BO,ED/BQ,GC+BS,EAAM,IAAI,ED/Bd,iBAAiB,CAAC,MAAM,CAC5C,EAAc,EAAK,QAAQ,CAAC,MAAM,CACpC,EAAK,QAAQ,CACV,GAAG,CACF,AAAC,GACC,CAAC,MAAM,EAAE,EAAE,IAAI,CAAC,GAAG,EAAE,EAAE,IAAI,CAAG,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,CAAG,GAAG,CAAC,EAAE,EAAE,eAAe,CAAG,aAAe,GAAA,CAAI,EAE9F,IAAI,CAAC,MACR,gCAEE,EAAsB,EAAE,CAC1B,EAAe,GACjB,EAAU,IAAI,CAAC,CAAC,GAAG,EAAE,EAAa,wBAAwB,CAAC,EACpC,SAArB,EAAK,WAAW,EAClB,EAAU,IAAI,CAAC,uCACb,EAAK,oBAAoB,CAAC,MAAM,CAAG,GACrC,EAAU,IAAI,CACZ,CAAC,IAAI,EAAE,EAAK,oBAAoB,CAAC,MAAM,CAAC,oCAA2B,CAAC,EAGlE,EAAU,CAAC,eAAe,EAAE,EAAK,QAAQ,CAAC;;;aAGrC,EAAE,EAAK,UAAU,CAAC,QAAK,EAAE,CAAA,EAAA,EAAA,gBAAgB,AAAhB,EAAiB,EAAK,WAAW,EAAE,CAAC,EAAE,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAK,WAAW,EAAE;EAC7G,EAAE,EAAK,IAAI,CAAG,CAAC,QAAQ,EAAE,EAAK,IAAI,CAAA,CAAE,CAAG,GAAG;EAC1C,EAAE,EAAK,IAAI,CAAC,MAAM,CAAG,CAAC,QAAQ,EAAE,EAAK,IAAI,CAAC,IAAI,CAAC,MAAA,CAAO,CAAG,GAAG;;;AAG9D,EAAE,YAAY;;;EAGZ,EAAE,EAAK,UAAU,CAAG,CAAC,kBAAkB,EAAE,EAAK,UAAU,CAAC,EAAE,CAAC,CAAG,4BAA4B;EAC3F,EAAE,EAAK,UAAU,CAAG,CAAC,SAAS,EAAE,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAAK,UAAU,EAAA,CAAG,CAAG,GAAG;EAC1E,EAAE,EAAK,QAAQ,CAAG,CAAC,OAAO,EAAE,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAAK,QAAQ,EAAA,CAAG,CAAG,GAAG;;AAEtE,EACE,EAAK,aAAa,CAAC,MAAM,CAAG,EACxB,CAAC;AAAyB,EAAE,EAAK,aAAa,CAC3C,KAAK,CAAC,EAAG,GACT,GAAG,CAAC,CAAC,EAAG,IAAM,CAAC,EAAE,EAAE,EAAI,EAAE,EAAE,EAAE,EAAA,CAAG,EAChC,IAAI,CAAC,MAAA,CAAO,CACf,uCACL;;AAED,EACE,EAAU,MAAM,CAAG,EACf,CAAC;AAAa,EAAE,EAAU,GAAG,CAAC,AAAC,GAAM,CAAC,EAAE,EAAE,EAAA,CAAG,EAAE,IAAI,CAAC,MAAA,CAAO,CAC3D,0CACL;;+BAE2B,EACxB,EAAe,EACX,oDACA,AAAqB,UAAhB,WAAW,CACd,0DACA,6DAAA,CACN,CAEI,EAAsC,CAC1C,CACE,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,kBACN,MAAO,qBACP,KAAM,WACN,QAAS,CACP,KAAM,YACN,YAAa,CAAC,yBAAyB,EAAE,EAAK,QAAQ,CAAA,CAAE,CACxD,cAAe,EAAK,MAAM,CAC1B,iBAAkB,EAAK,QAAQ,AACjC,CACF,EACA,CACE,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,YACN,MAAO,wBACP,KAAM,YACN,QAAS,CACP,OAAQ,EAAK,MAAM,CACnB,WAAY,EAAK,UAAU,CAC3B,SAAU,CAAC,qBAAqB,EAAE,EAAK,QAAQ,CAAC,EAAE,EAAE,EAAK,UAAU,CAAC,MAAG,EAAE,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAK,WAAW,EAAE,EAAE,CAAC,AACjH,CACF,EACD,CAEM,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,oBACN,EACA,YAAa,WACb,UAAW,CAAA,EAAA,EAAA,GAAG,AAAH,IACX,aAAc,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,oBAChC,EACA,cAAe,WACjB,CC5DI,KAAK,2BACH,OAAO,EAA0B,EAAM,IAAI,GAAE,EAAM,IAAI,CDqEvD,EAAW,EAAU,WAAW,GAClC,EAAW,QACX,EAAS,QAAQ,CAAC,UAAY,EAAS,QAAQ,CAAC,SAAW,EAAS,QAAQ,CAAC,SAC/E,EAAW,QACJ,EAAS,QAAQ,CAAC,eAAiB,EAAS,QAAQ,CAAC,iBAC5D,EAAW,cACJ,EAAS,QAAQ,CAAC,YAAc,EAAS,QAAQ,CAAC,cAAgB,EAAS,QAAQ,CAAC,UAC3F,EAAW,SACJ,EAAS,QAAQ,CAAC,YAAc,EAAS,QAAQ,CAAC,eACzD,EAAW,uBACJ,EAAS,QAAQ,CAAC,WAAa,EAAS,QAAQ,CAAC,YACxD,EAAW,gBACJ,EAAS,QAAQ,CAAC,WAAa,EAAS,QAAQ,CAAC,UAAA,IACxD,EAAW,SAAA,EAEP,EAAc,EAChB,CAAC;AAAA;AAAA,gBAAoB,EAAE,EAAK,QAAQ,CAAC,EAAE,EAAE,EAAK,UAAU,CAAC,MAAG,EAAE,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAK,WAAW,EAAE,CAAC,CAAC,CACnG,GAEE,EACS,UAAb,EACI,CAAC,+KAAgK,CAAC,CACrJ,WAAb,EACE,CAAC,qKAAsJ,CAAC,CACxJ,CAAC,8GAAqG,CAAC,CAEzG,EAAU,CAAC;;eAEJ,EAAE,SAAS;6BACH,EAAE,EAAU,CAAC,EAAE,YAAY;;;AAGlD,EACe,UAAb,EACI,oJACa,WAAb,EACE,gKACa,gBAAb,EACE,6JACA,0FACT;;;CAGA,EACG,AAAa,YACT,sFACA,wEACL,CAAC,CAAC,CAEG,EAAkC,CACtC,CACE,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,QAAS,EACT,QAAS,WACT,UAAW,EAAA,mBAAmB,CAAC,mBAAmB,CAClD,MAAO,mBACT,EACD,CAEM,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,oBACN,EACA,YAAa,qBACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,aAAc,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,kBAChC,EACA,cAAe,UACjB,CCvII,KAAK,YACH,OD2ID,AC3IQ,SD2IC,AACd,CAAa,CACb,CAAwB,EAExB,IAAM,EAAa,EAAM,WAAW,GAChC,EAAyC,WACzC,EAAW,QAAQ,CAAC,SAAU,EAAU,SACnC,EAAW,QAAQ,CAAC,YAAc,EAAW,QAAQ,CAAC,OAAA,IAC7D,EAAU,MAAA,EAEZ,IAAM,EAAa,GAAM,UAAY,UAC/B,EAAc,GAAM,UAAU,CAAC,EAAE,EAAE,MAAQ,GAE3C,EAAkC,EAAE,CAE1C,GAAI,AAAY,eAAY,CAC1B,IAAM,EAAM,EACR,CAAC,GAAG,EAAE,EAAY,iLAAkK,CAAC,CACrL,CAAC,oJAAwI,CAAC,CAC9I,EAAe,IAAI,CAAC,CAClB,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,QAAS,EACT,QAAS,WACT,UAAW,EAAA,mBAAmB,CAAC,mBAAmB,CAClD,MAAO,mBACT,EACF,KAAuB,EAAhB,OAAyB,CAArB,EACT,EAAe,IAAI,CACjB,CACE,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,QAAS,CAAC,4BAAsB,EAAE,EAAW,YAAY,CAAC,CAC1D,QAAS,QACT,MAAO,SACT,EACA,CACE,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,QAAS,CAAA,EAAG,EAAc,CAAC,OAAI,EAAE,EAAY,CAAC,CAAC,CAAG,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAgN,CAAC,CAC1Q,QAAS,QACT,UAAW,EAAA,mBAAmB,CAAC,qBAAqB,CACpD,MAAO,gBACT,GAGF,EAAe,IAAI,CAAC,CAClB,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,QAAS,CAAC;AAAA;AAAA;AAAA;AAAA,2DAAgQ,CAAC,CAC3Q,QAAS,OACT,MAAO,oBACT,GAGF,IAAM,EAAU,CAAC,0BAA0B,EAAc,aAAZ,EAAyB,WAAyB,UAAZ,EAAsB,QAAU,UAAU,EAAE,EAAE,EAAO,CAAC;AAAA;AAAA,gBAAoB,EAAE,EAAK,QAAQ,CAAC,CAAC,CAAC,CAAG,GAAA,CAAI,CAEtL,MAAO,CACL,GAAI,CAAA,EAAA,EAAA,GAAG,AAAH,IACJ,KAAM,oBACN,EACA,YAAa,eACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,aAAc,CAAA,EAAA,EAAA,iBAAiB,AAAjB,EAAkB,kBAChC,EACA,cAAe,WACjB,CACF,EC1MoC,EAAM,IAAI,CAAE,EAAM,IAAI,CAEpD,KAAK,eACH,GAAI,CAAC,EAAM,IAAI,CACb,OAAO,EAAqB,WAC9B,ODyMsB,ACzMf,EAAc,EDyMkB,ACzMZ,IAAI,CD0M/B,EAAU,CAAC,0BAA0B,EAAE,EAAK,QAAQ,CAAC;;YAEjD,EAAE,EAAK,UAAU,CAAC,MAAG,EAAE,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAK,WAAW,EAAE,CAAC,EAAE,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAK,WAAW,EAAA,EAAI,EAAK,IAAI,CAAC,MAAM,CAAG,CAAC,MAAG,EAAE,EAAK,IAAI,CAAC,IAAI,CAAC,MAAA,CAAO,CAAG,GAAG;;;;;;;;;;;;;;;;;;0IAkB/B,CAAC,CAE5H,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,oBACN,EACA,YAAa,QACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,aAAc,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,GAChC,iBAAkB,CAChB,CACE,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,kBACN,MAAO,0BACP,KAAM,WACN,QAAS,CACP,KAAM,UACN,YAAa,CAAC,KAAK,EAAE,EAAK,QAAQ,CAAA,CAAE,CACpC,cAAe,EAAK,MAAM,CAC1B,iBAAkB,EAAK,QAAQ,AACjC,CACF,EACD,CACD,cAAe,QACjB,CCpPI,KAAK,SACH,MAAO,CAAA,EAAA,EAAA,qBAAqB,AAArB,EAAsB,EAAM,QAAQ,CAE7C,KAAK,WACH,GAAI,CAAC,EAAM,IAAI,CACb,OAAO,EAAqB,WAC9B,MAAO,CAAA,EAAA,EAAA,oBAAA,AAAoB,EAAC,EAAM,IAAI,CAExC,KAAK,YACH,MAAO,CAAA,EAAA,EAAA,kBAAA,AAAkB,EAAC,EAAM,IAAI,EAAI,cAE1C,KAAK,UACH,MAAO,CAAA,EAAA,EAAA,iBAAA,AAAiB,GAE1B,KAAK,kBD6OH,MC5OA,GAAI,CAAC,EAAM,IAAI,CACb,OAAO,EAAqB,WAC9B,OAAO,EAAiB,EAAM,IAAI,CDyOlC,EAAc,EAAK,QAAQ,EAAE,CAAC,EAAE,EAAE,MAAQ,KAE9C,EAAK,aAAa,CAAC,MAAM,CAAG,EACxB,EAAK,aAAa,CAAC,EAAE,CACrB,wBAEA,EAAc,EAChB,CAAC,GAAG,EAAE,EAAY,iKAAwJ,CAAC,CAC3K,CAAC,mKAA8I,CAAC,CAE9I,EAAU,CAAC,gBAAgB,EAAE,EAAK,QAAQ,CAAC;;+BAE7B,EAAE,EAAS;;+EAEqC,CAAC,CAE9D,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,oBACN,EACA,YAAa,WACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,aAAc,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,GAChC,eAAgB,CACd,CACE,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,QAAS,EACT,QAAS,WACT,UAAW,EAAA,mBAAmB,CAAC,mBAAmB,CAClD,MAAO,mBACT,EACD,CACD,iBAAkB,CAChB,CACE,GAAI,CAAA,EAAA,EAAA,GAAG,AAAH,IACJ,KAAM,oBACN,MAAO,uBACP,KAAM,aACN,QAAS,CACP,KAAM,YACN,YAAa,CAAC,UAAU,EAAE,EAAK,QAAQ,CAAA,CAAE,CACzC,cAAe,EAAK,MAAM,CAC1B,iBAAkB,EAAK,QAAQ,AACjC,CACF,EACD,CACD,cAAe,WACjB,CCtRI,KAAK,SF6QT,ME5QM,OAAO,AF4QP,EAAU,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;gCA0Ba,CAAC,CAExB,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,oBACN,EACA,YAAa,OACb,UAAW,CAAA,EAAA,EAAA,GAAG,AAAH,IACX,cAAe,QACjB,CE7SI,KAAK,UACH,OAAO,GAET,KAAK,UACH,OAAO,GAET,KAAK,QACH,OAAO,GAET,KAAK,YACH,OAAO,GAET,KAAK,UACH,OAAO,GAIX,CAIF,OAAO,AH5EF,SAAS,AACd,CAAY,CACZ,CAAwB,CACxB,CAA4B,CAC5B,CAAa,EAEb,IAAM,EAAW,EAAK,WAAW,GAGjC,GACE,EAAS,QAAQ,CAAC,UAClB,EAAS,QAAQ,CAAC,UAClB,EAAS,QAAQ,CAAC,gBAElB,CADA,KACO,CAAA,EAAA,EAAA,iBAAA,AAAiB,IAG1B,GACE,EAAS,QAAQ,CAAC,YAClB,EAAS,QAAQ,CAAC,kBAClB,EAAS,QAAQ,CAAC,YAClB,EAAS,QAAQ,CAAC,oBAElB,CADA,MACO,IAGT,GACE,EAAS,QAAQ,CAAC,UAClB,EAAS,QAAQ,CAAC,WAClB,EAAS,QAAQ,CAAC,WAClB,EAAS,QAAQ,CAAC,YAElB,CADA,MACO,IAGT,GACE,EAAS,QAAQ,CAAC,SAClB,EAAS,QAAQ,CAAC,aAClB,EAAS,QAAQ,CAAC,UAElB,CADA,MACO,IAGT,GACE,EAAS,QAAQ,CAAC,aAClB,EAAS,QAAQ,CAAC,gBAClB,EAAS,QAAQ,CAAC,eAClB,EAAS,QAAQ,CAAC,cAElB,CADA,MACO,IAGT,GACE,EAAS,QAAQ,CAAC,WAClB,EAAS,QAAQ,CAAC,uBAClB,EAAS,QAAQ,CAAC,eAElB,CADA,MACO,IAGT,GACE,EAAS,QAAQ,CAAC,UAClB,EAAS,QAAQ,CAAC,SAClB,EAAS,QAAQ,CAAC,gBAGlB,CAFA,KAEO,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,YACN,QAAS,CAAC,8FAAwF,EAAE,EAAO,CAAC,SAAS,EAAE,EAAK,QAAQ,CAAC,sBAAmB,EAAE,EAAK,UAAU,CAAC,sDAAmD,CAAC,CAAG,gDAAA,CAAiD,CAClR,YAAa,OACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,aAAc,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAClC,EAIF,IAAM,EAAoB,WAAT,EACb,kDACS,AAAT,aACE,+CACA,GAEA,EAAW,GAAiB,UAAT,EACrB,CAAC;AAAA;AAAA,MAAU,EAAE,CAAW,CAAC,EAAK,CAAC,SAAS,EAAE,CAAU,CAAC,EAAK,CAAC,CAAC,CAAC,CAC7D,GAEE,EAAU,EACZ,CAAC,6BAA6B,EAAE,EAAK,QAAQ,CAAC,IAAI,EAAuB,QAArB,EAAK,WAAW,CAAa,8BAAgC,GAAG,4HAA4H,EAAE,EAAA,EAAW,EAAA,CAAU,CACvQ,CAAC,sLAA8J,EAAE,SAAS;AAAA;AAAA,sGAA0G,EAAE,EAAA,CAAU,CAEpS,MAAO,CACL,GAAI,CAAA,EAAA,EAAA,GAAA,AAAG,IACP,KAAM,oBACN,EACA,YAAa,OACb,UAAW,CAAA,EAAA,EAAA,GAAA,AAAG,IACd,aAAc,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAClC,CACF,EGvB8B,EAAM,IAAI,CAAE,EAAM,IAAI,CAAE,EAAM,IAAI,CAAE,EAAM,IAAI,CAC5E,CCtFO,IAAM,EAA2C,CACtD,CACE,QAAS,YACT,MAAO,mBACP,KAAM,KACN,YACE,sFACF,cAAc,EACd,aAAc,CAAC,YAAa,KAAM,QAAS,SAAS,CACpD,eAAe,CACjB,EACA,CACE,QAAS,WACT,MAAO,kBACP,KAAM,MACN,YACE,yFACF,cAAc,EACd,aAAc,CAAC,YAAa,KAAK,CACjC,eAAe,EACf,iBAAkB,4BACpB,EACA,CACE,QAAS,YACT,MAAO,oBACP,KAAM,KACN,YACE,0EACF,cAAc,EACd,aAAc,CAAC,YAAa,KAAK,CACjC,eAAe,EACf,iBACE,+DACJ,EACA,CACE,QAAS,SACT,MAAO,sBACP,KAAM,KACN,YACE,oFACF,cAAc,EACd,aAAc,CAAC,YAAY,CAC3B,eAAe,CACjB,EACA,CACE,QAAS,SACT,MAAO,kBACP,KAAM,KACN,YACE,4EACF,cAAc,EACd,aAAc,CAAC,YAAa,QAAS,SAAS,CAC9C,eAAe,CACjB,EACA,CACE,QAAS,WACT,MAAO,gBACP,KAAM,KACN,YACE,6EACF,cAAc,EACd,aAAc,CAAC,YAAa,KAAM,QAAS,SAAS,CACpD,eAAe,CACjB,EACA,CACE,QAAS,YACT,MAAO,cACP,KAAM,KACN,YACE,sEACF,cAAc,EACd,aAAc,CAAC,YAAY,CAC3B,eAAe,EACf,iBAAkB,sCACpB,EACA,CACE,QAAS,UACT,MAAO,kBACP,KAAM,KACN,YACE,yEACF,cAAc,EACd,aAAc,CAAC,YAAa,KAAM,QAAS,SAAS,CACpD,cAAe,EACjB,EACA,CACE,QAAS,YACT,MAAO,kBACP,KAAM,KACN,YACE,iEACF,cAAc,EACd,aAAc,CAAC,YAAa,KAAK,CACjC,eAAe,CACjB,EACA,CACE,QAAS,SACT,MAAO,yBACP,KAAM,IACN,YAAa,uDACb,cAAc,EACd,aAAc,CAAC,YAAa,KAAM,QAAS,SAAS,CACpD,eAAe,CACjB,EACA,CACE,QAAS,UACT,MAAO,mBACP,KAAM,KACN,YACE,iEACF,cAAc,EACd,aAAc,CAAC,YAAa,KAAM,QAAS,SAAS,CACpD,eAAe,CACjB,EACA,CACE,QAAS,UACT,MAAO,mBACP,KAAM,KACN,YACE,wFACF,cAAc,EACd,aAAc,CAAC,YAAa,QAAS,SAAS,CAC9C,eAAe,CACjB,EACA,CACE,QAAS,QACT,MAAO,oBACP,KAAM,KACN,YACE,kEACF,cAAc,EACd,aAAc,CAAC,YAAa,KAAM,QAAS,SAAS,CACpD,eAAe,CACjB,EACA,CACE,QAAS,YACT,MAAO,qBACP,KAAM,KACN,YACE,+EACF,cAAc,EACd,aAAc,CAAC,YAAa,QAAS,SAAS,CAC9C,eAAe,CACjB,EACA,CACE,QAAS,UACT,MAAO,gBACP,KAAM,KACN,YACE,uDACF,cAAc,EACd,aAAc,CAAC,YAAa,KAAM,QAAS,SAAS,CACpD,cAAe,EACjB,EACD,CAMM,SAAS,EACd,CAA0B,EAE1B,OAAO,EAAe,MAAM,CAAC,AAAC,GACR,EAAI,YAAY,CAAC,QAAQ,CAAC,GAIlD,CAKO,SAAS,EACd,CAAqB,EAErB,OAAO,EAAe,IAAI,CAAC,AAAC,GAAQ,EAAI,OAAO,GAAK,EACtD,CAKO,SAAS,EACd,CAAkC,CAClC,CAAc,EAEd,GAAI,CAAC,GAAqB,MAAX,EAAgB,OAAO,EAEtC,IAAM,EAAmB,EACtB,WAAW,GACX,OAAO,CAAC,IAAK,IACb,IAAI,GAEP,OAAO,EAAS,MAAM,CACpB,AAAC,GACC,EAAI,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,IACnC,EAAI,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,IACjC,EAAI,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,GAE7C,+FNrLA,IAAA,EAAA,EAAA,CAAA,CAAA,OAIA,SAAS,IACP,MAAO,CAAA,EAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,EAAG,GAAA,CAAI,AAClE,CAEA,SAAS,IACP,OAAO,IAAI,OAAO,WAAW,EAC/B,CAaA,SAAS,EAAmB,EAAsB,EAAE,EAClD,MAAO,CACL,GAAI,IACJ,QAAS,CAAQ,CAAC,EAAE,EAAE,SAAS,MAAM,EAAG,KAAO,YAC/C,EACA,UAAW,IACX,UAAW,IACX,aAAc,EAAS,MAAM,AAC/B,CACF,CAEA,SAAS,IACP,IAAM,EAAO,EAAA,YAAY,CAAC,QAAQ,GAAG,IAAI,CAEnC,EADgB,AACL,EADK,mBAAmB,CAAC,QAAQ,GAAG,aAAa,CACnC,MAAM,CAAC,AAAC,GAAM,EAAE,aAAa,GAAK,GAAM,IACjE,EAAS,EAAS,MAAM,CAAC,AAAC,GAAmB,QAAb,EAAE,MAAM,EAA2B,SAAb,EAAE,MAAM,EAC9D,EAAM,EAAO,MAAM,CAAC,AAAC,GAAmB,QAAb,EAAE,MAAM,EACnC,EAAiB,EAAO,MAAM,EAAI,EAAI,KAAK,KAAK,CAAE,EAAI,MAAM,CAAG,EAAO,MAAM,CAAI,UAAO,EAE7F,MAAO,CACL,GAAI,GAAM,IAAM,UAChB,KAAM,GAAM,MAAQ,WACpB,KAAO,GAAM,MAAQ,YACrB,kBAAmB,EAAS,MAAM,CAAC,AAAC,GAAmB,SAAb,EAAE,MAAM,EAAa,MAAM,CACrE,gBACF,CACF,CAEA,SAAS,IACP,GAAI,CACF,IAAM,EAAO,EAAA,YAAY,CAAC,QAAQ,GAAG,IAAI,CACzC,GAAI,CAAC,EAAM,OAAO,KAElB,IAAM,EAAgB,EAAA,mBAAmB,CAAC,QAAQ,GAAG,aAAa,CAC5D,EAAa,EAAA,gBAAgB,CAAC,QAAQ,GAAG,UAAU,CACzD,MAAO,CAAA,EAAA,EAAA,sBAAA,AAAsB,EAAC,EAAe,EAAY,EAAK,EAAE,CAAE,EAAK,IAAI,CAC7E,CAAE,MAAO,EAAK,CAEZ,OADA,QAAQ,KAAK,CAAC,0DAA2D,GAClE,IACT,CACF,CAIO,IAAM,EAAuB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAoB,CAAC,EAAK,KAAS,CAE3E,AAF0E,QAElE,EACR,mBAAoB,KACpB,SAAU,EAAE,CACZ,UAAU,EACV,cAAc,EACd,YAAa,KACb,oBAAoB,EACpB,mBAAoB,GACpB,oBAAqB,CAAC,EACtB,qBAAsB,EAAE,CACxB,QAAS,EAAE,CACX,eAAe,EACf,2BAA4B,KAC5B,aAAc,QACd,iBAAkB,EAAA,mBAAmB,CAAC,oBAAoB,CAC1D,iBAAkB,KAClB,sBAAuB,QACvB,OAAQ,UACR,mBAAoB,EACpB,wBAAwB,EACxB,gBAAgB,EAChB,YAAY,EAIZ,KAAM,KACJ,IAAM,EAAQ,IAGd,GAAI,EAAM,YAAY,EAAI,EAAM,QAAQ,CAAC,MAAM,CAAG,EAAG,YACnD,EAAI,CAAE,QAAQ,CAAK,GAKrB,IAAM,EAAS,IACT,EAAW,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAQ,EAAM,WAAW,EAAE,GAE7D,EAAI,CACF,QAAQ,EACR,cAAc,EACd,SAAU,CAAC,EAAS,CACpB,mBAAoB,EAAmB,CAAC,EAAS,CACnD,EACF,EAEA,MAAO,IAAM,EAAI,CAAE,QAAQ,CAAM,GAEjC,OAAQ,KACN,IAAM,EAAQ,IACV,EAAM,MAAM,CACd,CADgB,CACV,KAAK,GAEX,EAAM,IAAI,EAEd,EAEA,YAAa,MAAO,IAClB,IAAM,EAAQ,IAGd,GAAI,CAAC,EAAK,IAAI,IAEV,EAAK,MAAM,CAAG,EAAA,mBAAmB,CAAC,uBAAuB,CAF3C,CAE6C,MAI/D,GAAI,EAAM,QAAQ,CAAC,MAAM,EAAI,EAAA,mBAAmB,CAAC,6BAA6B,CAAE,CAC9E,IAAM,EAAW,EAAqB,gBACtC,EAAI,AAAC,IAAM,AAAC,CAAE,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CAAC,CAAC,EACnD,MACF,CAEA,GAAI,EAAM,gBAAgB,EAAI,EAAG,CAC/B,IAAM,EAAW,EAAqB,aAAc,CAClD,UAAW,EAAM,gBAAgB,CAC7B,IAAI,KAAK,EAAM,gBAAgB,EAAE,kBAAkB,CAAC,QAAS,CAC3D,KAAM,UACN,OAAQ,SACV,GACA,OACN,GACA,EAAI,AAAC,IAAM,AAAC,CAAE,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CAAC,CAAC,EACnD,MACF,CAGA,IAAM,EAAuB,CAC3B,GAAI,IACJ,KAAM,OACN,QAAS,EACT,YAAa,OACb,UAAW,GACb,EAEA,EAAI,AAAC,IAAM,AAAC,CACV,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAY,CACtC,UAAU,EACZ,CAAC,EAGD,GAAI,CACF,IAAM,EAAS,IACT,EAAW,MAAM,EAAe,MACpC,EACA,KAAM,EAAM,WAAW,QACvB,EACA,SAAU,IACV,KAAM,EAAM,qBAAqB,CACjC,KAAM,EAAM,MACd,AADoB,GAGpB,EAAI,AAAC,IAAM,AAAC,CACV,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CACnC,UAAU,EACV,iBAAkB,EAAE,gBAAgB,CAAG,EACvC,mBAAoB,EAAE,kBAAkB,CACpC,CACE,GAAG,EAAE,kBAAkB,CACvB,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CACnC,aAAc,EAAE,QAAQ,CAAC,MAAM,CAAG,EAClC,UAAW,GACb,EACA,IACN,CAAC,EACH,CAAE,KAAM,CACN,IAAM,EAAW,EAAqB,aACtC,EAAI,AAAC,IAAM,AAAC,CACV,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CACnC,SAAU,GACZ,CAAC,CACH,CACF,EAEA,oBAAqB,MAAO,EAAuB,KACjD,IAAM,EAAQ,IACR,EAAU,EAAA,YAAY,CAAC,QAAQ,GAAG,IAAI,EAAE,KACxC,EA9LN,AA8La,AA9LJ,cACT,AAAS,aACT,AAAS,iBACT,AAAS,OA2LuB,EAAW,EAAU,KAC/C,EAAa,EAAqB,GAExC,GAAI,CAAC,EAAY,CACf,IAAM,EAAW,EAAqB,mBACtC,EAAI,AAAC,GAAO,CAAD,CAAG,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CAAC,CAAC,EACnD,MACF,CAEA,GAAI,CAAC,GAAQ,CAAC,EAAW,YAAY,CAAC,QAAQ,CAAC,GAAO,CACpD,IAAM,EAAW,EAAqB,oBAAqB,CACzD,QAAS,EAAW,OAAO,AAC7B,GACA,EAAK,AAAD,IAAQ,AAAD,CAAG,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CAAC,CAAC,EACnD,MACF,CAEA,GAAI,EAAW,YAAY,EAAI,CAAC,EAAM,WAAW,CAAE,CACjD,IAAM,EAAW,EAAqB,WACtC,EAAI,AAAC,IAAM,AAAC,CAAE,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CAAC,CAAC,EACnD,MACF,CAEA,GAAI,EAAW,aAAa,EAAI,CAAC,CAAC,GAAW,EAAA,CAAE,CAAE,IAAI,GAAI,CACvD,IAAM,EAAW,EAAqB,wBAAyB,CAC7D,QAAS,EAAW,OAAO,CAC3B,KAAM,EAAW,gBAAgB,EAAI,EACvC,GACA,EAAI,AAAC,GAAO,CAAD,CAAG,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CAAC,CAAC,EACnD,MACF,CAEA,GAAI,EAAM,gBAAgB,EAAI,EAAG,CAC/B,IAAM,EAAW,EAAqB,cACtC,EAAI,AAAC,IAAM,AAAC,CAAE,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CAAC,CAAC,EACnD,MACF,CAEA,GAAI,EAAM,QAAQ,CAAC,MAAM,EAAI,EAAA,mBAAmB,CAAC,6BAA6B,CAAE,CAC9E,IAAM,EAAW,EAAqB,gBACtC,EAAI,AAAC,IAAM,AAAC,CAAE,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CAAC,CAAC,EACnD,MACF,CAGA,IAAM,EAAuB,CAC3B,GAAI,IACJ,KAAM,OACN,QAAS,EAAU,CAAA,EAAG,EAAQ,CAAC,EAAE,EAAA,CAAS,CAAG,EAC7C,YAAa,OACb,UAAW,IACX,cAAe,CACjB,EAEA,EAAK,AAAD,IAAO,AAAC,CACV,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAY,CACtC,SAAU,GACZ,CAAC,EAED,GAAI,CACF,IAAM,EAAS,IACT,EAAW,MAAM,EAAe,CACpC,KAAM,GAAW,WACjB,EACA,KAAM,EAAM,WAAW,QACvB,EACA,SAAU,IACV,KAAM,EAAM,qBAAqB,CACjC,KAAM,EAAM,MAAM,AACpB,GAEA,EAAI,AAAC,IAAM,AAAC,CACV,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CACnC,UAAU,EACV,iBAAkB,EAAE,gBAAgB,CAAG,EACvC,mBAAoB,EAAE,kBAAkB,CACpC,CACE,GAAG,EAAE,kBAAkB,CACvB,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CACnC,aAAc,EAAE,QAAQ,CAAC,MAAM,CAAG,EAClC,UAAW,GACb,EACA,KACN,CAAC,CACH,CAAE,KAAM,CACN,IAAM,EAAW,EAAqB,aACtC,EAAI,AAAC,IAAM,AAAC,CACV,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAS,CACnC,UAAU,EACZ,CAAC,CACH,CACF,EAEA,eAAgB,AAAC,IACf,EAAI,CAAE,YAAa,CAAK,EAC1B,EAEA,iBAAkB,KAChB,EAAI,CACF,mBAAoB,GACpB,mBAAoB,GACpB,oBAAqB,CAAC,CACxB,EACF,EAEA,kBAAmB,KACjB,EAAI,CAAE,oBAAoB,CAAM,EAClC,EAEA,sBAAuB,AAAC,IACtB,EAAI,CAAE,mBAAoB,CAAO,EACnC,EAEA,uBAAwB,AAAC,IACvB,EAAI,CAAE,oBAAqB,CAAQ,EACrC,EAEA,aAAc,AAAC,IACb,IAAM,EAA2B,CAC/B,OAAQ,EAAK,QAAQ,CACrB,SAAU,EAAK,WAAW,CAC1B,MAAO,EAAK,KAAK,CACjB,WAAY,EAAK,UAAU,CAC3B,YAAa,EAAK,WAAW,CAC7B,SAAU,EAAE,CACZ,KAAM,EAAK,IAAI,EAAI,EAAE,CACrB,kBAAmB,EAAE,CACrB,cAAe,EAAE,CACjB,qBAAsB,EAAE,CACxB,WAAY,EAAK,UAAU,AAC7B,EAGM,EAAa,CAAA,EAAA,EAAA,qBAAA,AAAqB,EAAC,GAEzC,EAAK,AAAD,IAAQ,AAAD,CACT,YAAa,EACb,oBAAoB,EACpB,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAW,CACvC,CAAC,CACH,EAEA,kBAAmB,AAAC,IAClB,EAAI,AAAC,IAAO,AAAD,CACT,qBAAsB,EAAE,oBAAoB,CAAC,GAAG,CAAC,AAAC,GAChD,EAAI,EAAE,GAAK,EAAK,CAAE,GAAG,CAAG,CAAE,WAAW,CAAK,EAAI,GAElD,CAAC,CACH,EAEA,qBAAsB,KACpB,IAAM,EAAQ,GAGV,GAAM,kBAAkB,EAAI,EAAM,QAAQ,CAAC,MAAM,CAAG,GAAG,AAWzD,EAAI,CAAE,QAVU,CACd,CACE,GAAG,EAAM,kBAAkB,CAC3B,SAAU,EAAM,QAAQ,CACxB,aAAc,EAAM,QAAQ,CAAC,MAAM,CACnC,UAAW,GACb,KACG,EAAM,OAAO,CACjB,CAAC,KAAK,CAAC,EAAG,EAAA,mBAAmB,CAAC,wBAAwB,CAEzC,GAIhB,IAAM,EAAS,IACT,EAAW,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,EAAQ,MAAM,GAEhD,EAAI,CACF,SAAU,CAAC,EAAS,CACpB,aAAc,GACd,mBAAoB,EAAmB,CAAC,EAAS,EACjD,YAAa,KACb,2BAA4B,KAC5B,eAAe,CACjB,EACF,EAEA,iBAAkB,AAAC,IAEjB,IAAM,EADQ,AACA,IAAM,OAAO,CAAC,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GAC7C,GACF,EAAI,CACF,CAFO,0BAEqB,EAC5B,eAAe,CACjB,EAEJ,EAEA,gBAAiB,KACf,EAAI,CAAE,2BAA4B,IAAK,EACzC,EAEA,cAAe,KACb,EAAI,AAAC,GAAO,CAAD,CAAG,cAAe,CAAC,EAAE,aAAa,CAAC,CAAC,CACjD,EAEA,gBAAiB,AAAC,IAChB,EAAI,CAAE,aAAc,CAAO,EAC7B,EAEA,uBAAwB,AAAC,IACT,AACW,AAYrB,IAZ2B,oBAAoB,CAAC,MAAM,CAAC,AAAC,IAC1D,IAAM,EAAU,IAAI,KAAK,EAAE,SAAS,EAC9B,EAAQ,IAAI,KAClB,OACE,EAAQ,OAAO,KAAO,EAAM,OAAO,IACnC,EAAQ,QAAQ,KAAO,EAAM,QAAQ,IACrC,EAAQ,WAAW,KAAO,EAAM,WAAW,IAC3C,CAAC,EAAE,SAAS,AAEhB,GAGqB,MAAM,EAAI,EAAA,mBAAmB,CAAC,iCAAiC,EAAE,AAItF,EAAI,AAAC,IAAM,AAAC,CACV,qBAAsB,IACjB,EAAE,oBAAoB,CACzB,CACE,GAAG,CAAU,CACb,GAAI,IACJ,WAAW,EACX,UAAW,GACb,EACD,AACH,CAAC,EACH,EAEA,mBAAoB,CAAC,EAAmB,KACtC,EAAI,AAAC,IAAM,AAAC,CACV,SAAU,EAAE,QAAQ,CAAC,GAAG,CAAC,AAAC,GACxB,EAAI,EAAE,GAAK,EACP,CACE,GAAG,CAAG,CACN,iBAAkB,EAAI,gBAAgB,EAAE,IAAK,AAAD,GAC1C,EAAO,EAAE,GAAK,EACV,CAAE,GAAG,CAAM,CAAE,SAAU,EAAK,EAC5B,EAER,EACA,GAER,CAAC,CACH,EAEA,oBAAqB,AAAC,IACpB,IAAM,EAAuB,CAC3B,GAAG,CAAO,CACV,GAAI,IACJ,UAAW,IACX,KAAM,WACR,EAEA,EAAI,AAAC,IAAM,AAAC,CACV,SAAU,IAAI,EAAE,QAAQ,CAAE,EAAY,CACxC,CAAC,CACH,EAEA,mBAAoB,KAClB,EAAI,AAAC,IACH,IAAM,EAAY,EAAE,gBAAgB,CAAG,EACvC,MAAO,CACL,iBAAkB,KAAK,GAAG,CAAC,EAAG,GAC9B,iBACE,GAAa,GAAK,CAAC,EAAE,gBAAgB,CACjC,IAAI,KAAK,KAAK,GAAG,GAAK,KAAK,CAAW,IAAN,OAAiB,GACjD,EAAE,gBAAgB,AAC1B,CACF,EACF,EAEA,eAAgB,KACd,EAAI,CACF,iBAAkB,EAAA,mBAAmB,CAAC,oBAAoB,CAC1D,iBAAkB,IACpB,EACF,EAEA,yBAA0B,AAAC,GAAS,EAAI,CAAE,sBAAuB,CAAK,GACtE,aAAc,IAAM,EAAI,CAAE,gBAAgB,CAAK,GAC/C,cAAe,IAAM,EAAI,CAAE,gBAAgB,CAAM,GACjD,UAAW,AAAC,GAAW,EAAI,QAAE,CAAO,GACpC,sBAAuB,AAAC,GAAuB,EAAI,oBAAE,CAAmB,GACxE,0BAA2B,AAAC,GAA2B,EAAI,wBAAE,CAAuB,GACtF,CAAC","ignoreList":[0]}